var kx=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var BN=kx((ye,_e)=>{(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function i(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function n(r){if(r.ep)return;r.ep=!0;const s=i(r);fetch(r.href,s)}})();var vh=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ox(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var Ua={},Dx={get exports(){return Ua},set exports(e){Ua=e}},Ml={},Z={},Bx={get exports(){return Z},set exports(e){Z=e}},nt={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var go=Symbol.for("react.element"),Nx=Symbol.for("react.portal"),Lx=Symbol.for("react.fragment"),Fx=Symbol.for("react.strict_mode"),Ux=Symbol.for("react.profiler"),zx=Symbol.for("react.provider"),Gx=Symbol.for("react.context"),$x=Symbol.for("react.forward_ref"),Hx=Symbol.for("react.suspense"),jx=Symbol.for("react.memo"),Wx=Symbol.for("react.lazy"),ip=Symbol.iterator;function Xx(e){return e===null||typeof e!="object"?null:(e=ip&&e[ip]||e["@@iterator"],typeof e=="function"?e:null)}var hv={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},uv=Object.assign,cv={};function Vr(e,t,i){this.props=e,this.context=t,this.refs=cv,this.updater=i||hv}Vr.prototype.isReactComponent={};Vr.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Vr.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function dv(){}dv.prototype=Vr.prototype;function Ed(e,t,i){this.props=e,this.context=t,this.refs=cv,this.updater=i||hv}var Td=Ed.prototype=new dv;Td.constructor=Ed;uv(Td,Vr.prototype);Td.isPureReactComponent=!0;var np=Array.isArray,fv=Object.prototype.hasOwnProperty,Sd={current:null},pv={key:!0,ref:!0,__self:!0,__source:!0};function mv(e,t,i){var n,r={},s=null,o=null;if(t!=null)for(n in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(s=""+t.key),t)fv.call(t,n)&&!pv.hasOwnProperty(n)&&(r[n]=t[n]);var a=arguments.length-2;if(a===1)r.children=i;else if(1<a){for(var l=Array(a),h=0;h<a;h++)l[h]=arguments[h+2];r.children=l}if(e&&e.defaultProps)for(n in a=e.defaultProps,a)r[n]===void 0&&(r[n]=a[n]);return{$$typeof:go,type:e,key:s,ref:o,props:r,_owner:Sd.current}}function Vx(e,t){return{$$typeof:go,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function Cd(e){return typeof e=="object"&&e!==null&&e.$$typeof===go}function Yx(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(i){return t[i]})}var rp=/\/+/g;function yh(e,t){return typeof e=="object"&&e!==null&&e.key!=null?Yx(""+e.key):t.toString(36)}function ya(e,t,i,n,r){var s=typeof e;(s==="undefined"||s==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case go:case Nx:o=!0}}if(o)return o=e,r=r(o),e=n===""?"."+yh(o,0):n,np(r)?(i="",e!=null&&(i=e.replace(rp,"$&/")+"/"),ya(r,t,i,"",function(h){return h})):r!=null&&(Cd(r)&&(r=Vx(r,i+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(rp,"$&/")+"/")+e)),t.push(r)),1;if(o=0,n=n===""?".":n+":",np(e))for(var a=0;a<e.length;a++){s=e[a];var l=n+yh(s,a);o+=ya(s,t,i,l,r)}else if(l=Xx(e),typeof l=="function")for(e=l.call(e),a=0;!(s=e.next()).done;)s=s.value,l=n+yh(s,a++),o+=ya(s,t,i,l,r);else if(s==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Po(e,t,i){if(e==null)return e;var n=[],r=0;return ya(e,n,"","",function(s){return t.call(i,s,r++)}),n}function qx(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(i){(e._status===0||e._status===-1)&&(e._status=1,e._result=i)},function(i){(e._status===0||e._status===-1)&&(e._status=2,e._result=i)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var ne={current:null},_a={transition:null},Kx={ReactCurrentDispatcher:ne,ReactCurrentBatchConfig:_a,ReactCurrentOwner:Sd};nt.Children={map:Po,forEach:function(e,t,i){Po(e,function(){t.apply(this,arguments)},i)},count:function(e){var t=0;return Po(e,function(){t++}),t},toArray:function(e){return Po(e,function(t){return t})||[]},only:function(e){if(!Cd(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};nt.Component=Vr;nt.Fragment=Lx;nt.Profiler=Ux;nt.PureComponent=Ed;nt.StrictMode=Fx;nt.Suspense=Hx;nt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Kx;nt.cloneElement=function(e,t,i){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var n=uv({},e.props),r=e.key,s=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(s=t.ref,o=Sd.current),t.key!==void 0&&(r=""+t.key),e.type&&e.type.defaultProps)var a=e.type.defaultProps;for(l in t)fv.call(t,l)&&!pv.hasOwnProperty(l)&&(n[l]=t[l]===void 0&&a!==void 0?a[l]:t[l])}var l=arguments.length-2;if(l===1)n.children=i;else if(1<l){a=Array(l);for(var h=0;h<l;h++)a[h]=arguments[h+2];n.children=a}return{$$typeof:go,type:e.type,key:r,ref:s,props:n,_owner:o}};nt.createContext=function(e){return e={$$typeof:Gx,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:zx,_context:e},e.Consumer=e};nt.createElement=mv;nt.createFactory=function(e){var t=mv.bind(null,e);return t.type=e,t};nt.createRef=function(){return{current:null}};nt.forwardRef=function(e){return{$$typeof:$x,render:e}};nt.isValidElement=Cd;nt.lazy=function(e){return{$$typeof:Wx,_payload:{_status:-1,_result:e},_init:qx}};nt.memo=function(e,t){return{$$typeof:jx,type:e,compare:t===void 0?null:t}};nt.startTransition=function(e){var t=_a.transition;_a.transition={};try{e()}finally{_a.transition=t}};nt.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};nt.useCallback=function(e,t){return ne.current.useCallback(e,t)};nt.useContext=function(e){return ne.current.useContext(e)};nt.useDebugValue=function(){};nt.useDeferredValue=function(e){return ne.current.useDeferredValue(e)};nt.useEffect=function(e,t){return ne.current.useEffect(e,t)};nt.useId=function(){return ne.current.useId()};nt.useImperativeHandle=function(e,t,i){return ne.current.useImperativeHandle(e,t,i)};nt.useInsertionEffect=function(e,t){return ne.current.useInsertionEffect(e,t)};nt.useLayoutEffect=function(e,t){return ne.current.useLayoutEffect(e,t)};nt.useMemo=function(e,t){return ne.current.useMemo(e,t)};nt.useReducer=function(e,t,i){return ne.current.useReducer(e,t,i)};nt.useRef=function(e){return ne.current.useRef(e)};nt.useState=function(e){return ne.current.useState(e)};nt.useSyncExternalStore=function(e,t,i){return ne.current.useSyncExternalStore(e,t,i)};nt.useTransition=function(){return ne.current.useTransition()};nt.version="18.2.0";(function(e){e.exports=nt})(Bx);const Q=Ox(Z);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Zx=Z,Qx=Symbol.for("react.element"),Jx=Symbol.for("react.fragment"),t1=Object.prototype.hasOwnProperty,e1=Zx.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,i1={key:!0,ref:!0,__self:!0,__source:!0};function gv(e,t,i){var n,r={},s=null,o=null;i!==void 0&&(s=""+i),t.key!==void 0&&(s=""+t.key),t.ref!==void 0&&(o=t.ref);for(n in t)t1.call(t,n)&&!i1.hasOwnProperty(n)&&(r[n]=t[n]);if(e&&e.defaultProps)for(n in t=e.defaultProps,t)r[n]===void 0&&(r[n]=t[n]);return{$$typeof:Qx,type:e,key:s,ref:o,props:r,_owner:e1.current}}Ml.Fragment=Jx;Ml.jsx=gv;Ml.jsxs=gv;(function(e){e.exports=Ml})(Dx);const B=Ua.jsx,st=Ua.jsxs;var Tu={},Su={},n1={get exports(){return Su},set exports(e){Su=e}},Ee={},Cu={},r1={get exports(){return Cu},set exports(e){Cu=e}},vv={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(O,$){var C=O.length;O.push($);t:for(;0<C;){var U=C-1>>>1,X=O[U];if(0<r(X,$))O[U]=$,O[C]=X,C=U;else break t}}function i(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var $=O[0],C=O.pop();if(C!==$){O[0]=C;t:for(var U=0,X=O.length,ot=X>>>1;U<ot;){var rt=2*(U+1)-1,Ct=O[rt],ut=rt+1,_t=O[ut];if(0>r(Ct,C))ut<X&&0>r(_t,Ct)?(O[U]=_t,O[ut]=C,U=ut):(O[U]=Ct,O[rt]=C,U=rt);else if(ut<X&&0>r(_t,C))O[U]=_t,O[ut]=C,U=ut;else break t}}return $}function r(O,$){var C=O.sortIndex-$.sortIndex;return C!==0?C:O.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;e.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();e.unstable_now=function(){return o.now()-a}}var l=[],h=[],u=1,c=null,d=3,f=!1,p=!1,y=!1,_=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,g=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(O){for(var $=i(h);$!==null;){if($.callback===null)n(h);else if($.startTime<=O)n(h),$.sortIndex=$.expirationTime,t(l,$);else break;$=i(h)}}function x(O){if(y=!1,v(O),!p)if(i(l)!==null)p=!0,et(b);else{var $=i(h);$!==null&&F(x,$.startTime-O)}}function b(O,$){p=!1,y&&(y=!1,m(w),w=-1),f=!0;var C=d;try{for(v($),c=i(l);c!==null&&(!(c.expirationTime>$)||O&&!P());){var U=c.callback;if(typeof U=="function"){c.callback=null,d=c.priorityLevel;var X=U(c.expirationTime<=$);$=e.unstable_now(),typeof X=="function"?c.callback=X:c===i(l)&&n(l),v($)}else n(l);c=i(l)}if(c!==null)var ot=!0;else{var rt=i(h);rt!==null&&F(x,rt.startTime-$),ot=!1}return ot}finally{c=null,d=C,f=!1}}var T=!1,E=null,w=-1,S=5,A=-1;function P(){return!(e.unstable_now()-A<S)}function k(){if(E!==null){var O=e.unstable_now();A=O;var $=!0;try{$=E(!0,O)}finally{$?R():(T=!1,E=null)}}else T=!1}var R;if(typeof g=="function")R=function(){g(k)};else if(typeof MessageChannel<"u"){var I=new MessageChannel,J=I.port2;I.port1.onmessage=k,R=function(){J.postMessage(null)}}else R=function(){_(k,0)};function et(O){E=O,T||(T=!0,R())}function F(O,$){w=_(function(){O(e.unstable_now())},$)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(O){O.callback=null},e.unstable_continueExecution=function(){p||f||(p=!0,et(b))},e.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):S=0<O?Math.floor(1e3/O):5},e.unstable_getCurrentPriorityLevel=function(){return d},e.unstable_getFirstCallbackNode=function(){return i(l)},e.unstable_next=function(O){switch(d){case 1:case 2:case 3:var $=3;break;default:$=d}var C=d;d=$;try{return O()}finally{d=C}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(O,$){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var C=d;d=O;try{return $()}finally{d=C}},e.unstable_scheduleCallback=function(O,$,C){var U=e.unstable_now();switch(typeof C=="object"&&C!==null?(C=C.delay,C=typeof C=="number"&&0<C?U+C:U):C=U,O){case 1:var X=-1;break;case 2:X=250;break;case 5:X=1073741823;break;case 4:X=1e4;break;default:X=5e3}return X=C+X,O={id:u++,callback:$,priorityLevel:O,startTime:C,expirationTime:X,sortIndex:-1},C>U?(O.sortIndex=C,t(h,O),i(l)===null&&O===i(h)&&(y?(m(w),w=-1):y=!0,F(x,C-U))):(O.sortIndex=X,t(l,O),p||f||(p=!0,et(b))),O},e.unstable_shouldYield=P,e.unstable_wrapCallback=function(O){var $=d;return function(){var C=d;d=$;try{return O.apply(this,arguments)}finally{d=C}}}})(vv);(function(e){e.exports=vv})(r1);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var yv=Z,we=Cu;function D(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,i=1;i<arguments.length;i++)t+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var _v=new Set,zs={};function Xn(e,t){Or(e,t),Or(e+"Capture",t)}function Or(e,t){for(zs[e]=t,e=0;e<t.length;e++)_v.add(t[e])}var Mi=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Au=Object.prototype.hasOwnProperty,s1=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,sp={},op={};function o1(e){return Au.call(op,e)?!0:Au.call(sp,e)?!1:s1.test(e)?op[e]=!0:(sp[e]=!0,!1)}function a1(e,t,i,n){if(i!==null&&i.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return n?!1:i!==null?!i.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function l1(e,t,i,n){if(t===null||typeof t>"u"||a1(e,t,i,n))return!0;if(n)return!1;if(i!==null)switch(i.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function re(e,t,i,n,r,s,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=i,this.propertyName=e,this.type=t,this.sanitizeURL=s,this.removeEmptyString=o}var Vt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Vt[e]=new re(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Vt[t]=new re(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Vt[e]=new re(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Vt[e]=new re(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Vt[e]=new re(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Vt[e]=new re(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Vt[e]=new re(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Vt[e]=new re(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Vt[e]=new re(e,5,!1,e.toLowerCase(),null,!1,!1)});var Ad=/[\-:]([a-z])/g;function Pd(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(Ad,Pd);Vt[t]=new re(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(Ad,Pd);Vt[t]=new re(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(Ad,Pd);Vt[t]=new re(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Vt[e]=new re(e,1,!1,e.toLowerCase(),null,!1,!1)});Vt.xlinkHref=new re("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Vt[e]=new re(e,1,!1,e.toLowerCase(),null,!0,!0)});function Id(e,t,i,n){var r=Vt.hasOwnProperty(t)?Vt[t]:null;(r!==null?r.type!==0:n||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(l1(t,i,r,n)&&(i=null),n||r===null?o1(t)&&(i===null?e.removeAttribute(t):e.setAttribute(t,""+i)):r.mustUseProperty?e[r.propertyName]=i===null?r.type===3?!1:"":i:(t=r.attributeName,n=r.attributeNamespace,i===null?e.removeAttribute(t):(r=r.type,i=r===3||r===4&&i===!0?"":""+i,n?e.setAttributeNS(n,t,i):e.setAttribute(t,i))))}var Bi=yv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Io=Symbol.for("react.element"),or=Symbol.for("react.portal"),ar=Symbol.for("react.fragment"),Rd=Symbol.for("react.strict_mode"),Pu=Symbol.for("react.profiler"),xv=Symbol.for("react.provider"),wv=Symbol.for("react.context"),Md=Symbol.for("react.forward_ref"),Iu=Symbol.for("react.suspense"),Ru=Symbol.for("react.suspense_list"),kd=Symbol.for("react.memo"),$i=Symbol.for("react.lazy"),bv=Symbol.for("react.offscreen"),ap=Symbol.iterator;function Jr(e){return e===null||typeof e!="object"?null:(e=ap&&e[ap]||e["@@iterator"],typeof e=="function"?e:null)}var Tt=Object.assign,_h;function gs(e){if(_h===void 0)try{throw Error()}catch(i){var t=i.stack.trim().match(/\n( *(at )?)/);_h=t&&t[1]||""}return`
`+_h+e}var xh=!1;function wh(e,t){if(!e||xh)return"";xh=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(h){var n=h}Reflect.construct(e,[],t)}else{try{t.call()}catch(h){n=h}e.call(t.prototype)}else{try{throw Error()}catch(h){n=h}e()}}catch(h){if(h&&n&&typeof h.stack=="string"){for(var r=h.stack.split(`
`),s=n.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return e.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",e.displayName)),l}while(1<=o&&0<=a);break}}}finally{xh=!1,Error.prepareStackTrace=i}return(e=e?e.displayName||e.name:"")?gs(e):""}function h1(e){switch(e.tag){case 5:return gs(e.type);case 16:return gs("Lazy");case 13:return gs("Suspense");case 19:return gs("SuspenseList");case 0:case 2:case 15:return e=wh(e.type,!1),e;case 11:return e=wh(e.type.render,!1),e;case 1:return e=wh(e.type,!0),e;default:return""}}function Mu(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case ar:return"Fragment";case or:return"Portal";case Pu:return"Profiler";case Rd:return"StrictMode";case Iu:return"Suspense";case Ru:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case wv:return(e.displayName||"Context")+".Consumer";case xv:return(e._context.displayName||"Context")+".Provider";case Md:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case kd:return t=e.displayName||null,t!==null?t:Mu(e.type)||"Memo";case $i:t=e._payload,e=e._init;try{return Mu(e(t))}catch{}}return null}function u1(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Mu(t);case 8:return t===Rd?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function on(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function Ev(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function c1(e){var t=Ev(e)?"checked":"value",i=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),n=""+e[t];if(!e.hasOwnProperty(t)&&typeof i<"u"&&typeof i.get=="function"&&typeof i.set=="function"){var r=i.get,s=i.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,s.call(this,o)}}),Object.defineProperty(e,t,{enumerable:i.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Ro(e){e._valueTracker||(e._valueTracker=c1(e))}function Tv(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var i=t.getValue(),n="";return e&&(n=Ev(e)?e.checked?"true":"false":e.value),e=n,e!==i?(t.setValue(e),!0):!1}function za(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function ku(e,t){var i=t.checked;return Tt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:i??e._wrapperState.initialChecked})}function lp(e,t){var i=t.defaultValue==null?"":t.defaultValue,n=t.checked!=null?t.checked:t.defaultChecked;i=on(t.value!=null?t.value:i),e._wrapperState={initialChecked:n,initialValue:i,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function Sv(e,t){t=t.checked,t!=null&&Id(e,"checked",t,!1)}function Ou(e,t){Sv(e,t);var i=on(t.value),n=t.type;if(i!=null)n==="number"?(i===0&&e.value===""||e.value!=i)&&(e.value=""+i):e.value!==""+i&&(e.value=""+i);else if(n==="submit"||n==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Du(e,t.type,i):t.hasOwnProperty("defaultValue")&&Du(e,t.type,on(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function hp(e,t,i){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var n=t.type;if(!(n!=="submit"&&n!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,i||t===e.value||(e.value=t),e.defaultValue=t}i=e.name,i!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,i!==""&&(e.name=i)}function Du(e,t,i){(t!=="number"||za(e.ownerDocument)!==e)&&(i==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+i&&(e.defaultValue=""+i))}var vs=Array.isArray;function wr(e,t,i,n){if(e=e.options,t){t={};for(var r=0;r<i.length;r++)t["$"+i[r]]=!0;for(i=0;i<e.length;i++)r=t.hasOwnProperty("$"+e[i].value),e[i].selected!==r&&(e[i].selected=r),r&&n&&(e[i].defaultSelected=!0)}else{for(i=""+on(i),t=null,r=0;r<e.length;r++){if(e[r].value===i){e[r].selected=!0,n&&(e[r].defaultSelected=!0);return}t!==null||e[r].disabled||(t=e[r])}t!==null&&(t.selected=!0)}}function Bu(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(D(91));return Tt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function up(e,t){var i=t.value;if(i==null){if(i=t.children,t=t.defaultValue,i!=null){if(t!=null)throw Error(D(92));if(vs(i)){if(1<i.length)throw Error(D(93));i=i[0]}t=i}t==null&&(t=""),i=t}e._wrapperState={initialValue:on(i)}}function Cv(e,t){var i=on(t.value),n=on(t.defaultValue);i!=null&&(i=""+i,i!==e.value&&(e.value=i),t.defaultValue==null&&e.defaultValue!==i&&(e.defaultValue=i)),n!=null&&(e.defaultValue=""+n)}function cp(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function Av(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Nu(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?Av(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Mo,Pv=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,i,n,r){MSApp.execUnsafeLocalFunction(function(){return e(t,i,n,r)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Mo=Mo||document.createElement("div"),Mo.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Mo.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gs(e,t){if(t){var i=e.firstChild;if(i&&i===e.lastChild&&i.nodeType===3){i.nodeValue=t;return}}e.textContent=t}var As={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},d1=["Webkit","ms","Moz","O"];Object.keys(As).forEach(function(e){d1.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),As[t]=As[e]})});function Iv(e,t,i){return t==null||typeof t=="boolean"||t===""?"":i||typeof t!="number"||t===0||As.hasOwnProperty(e)&&As[e]?(""+t).trim():t+"px"}function Rv(e,t){e=e.style;for(var i in t)if(t.hasOwnProperty(i)){var n=i.indexOf("--")===0,r=Iv(i,t[i],n);i==="float"&&(i="cssFloat"),n?e.setProperty(i,r):e[i]=r}}var f1=Tt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Lu(e,t){if(t){if(f1[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(D(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(D(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(D(61))}if(t.style!=null&&typeof t.style!="object")throw Error(D(62))}}function Fu(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Uu=null;function Od(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var zu=null,br=null,Er=null;function dp(e){if(e=_o(e)){if(typeof zu!="function")throw Error(D(280));var t=e.stateNode;t&&(t=Nl(t),zu(e.stateNode,e.type,t))}}function Mv(e){br?Er?Er.push(e):Er=[e]:br=e}function kv(){if(br){var e=br,t=Er;if(Er=br=null,dp(e),t)for(e=0;e<t.length;e++)dp(t[e])}}function Ov(e,t){return e(t)}function Dv(){}var bh=!1;function Bv(e,t,i){if(bh)return e(t,i);bh=!0;try{return Ov(e,t,i)}finally{bh=!1,(br!==null||Er!==null)&&(Dv(),kv())}}function $s(e,t){var i=e.stateNode;if(i===null)return null;var n=Nl(i);if(n===null)return null;i=n[t];t:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(e=e.type,n=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!n;break t;default:e=!1}if(e)return null;if(i&&typeof i!="function")throw Error(D(231,t,typeof i));return i}var Gu=!1;if(Mi)try{var ts={};Object.defineProperty(ts,"passive",{get:function(){Gu=!0}}),window.addEventListener("test",ts,ts),window.removeEventListener("test",ts,ts)}catch{Gu=!1}function p1(e,t,i,n,r,s,o,a,l){var h=Array.prototype.slice.call(arguments,3);try{t.apply(i,h)}catch(u){this.onError(u)}}var Ps=!1,Ga=null,$a=!1,$u=null,m1={onError:function(e){Ps=!0,Ga=e}};function g1(e,t,i,n,r,s,o,a,l){Ps=!1,Ga=null,p1.apply(m1,arguments)}function v1(e,t,i,n,r,s,o,a,l){if(g1.apply(this,arguments),Ps){if(Ps){var h=Ga;Ps=!1,Ga=null}else throw Error(D(198));$a||($a=!0,$u=h)}}function Vn(e){var t=e,i=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(i=t.return),e=t.return;while(e)}return t.tag===3?i:null}function Nv(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function fp(e){if(Vn(e)!==e)throw Error(D(188))}function y1(e){var t=e.alternate;if(!t){if(t=Vn(e),t===null)throw Error(D(188));return t!==e?null:e}for(var i=e,n=t;;){var r=i.return;if(r===null)break;var s=r.alternate;if(s===null){if(n=r.return,n!==null){i=n;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===i)return fp(r),e;if(s===n)return fp(r),t;s=s.sibling}throw Error(D(188))}if(i.return!==n.return)i=r,n=s;else{for(var o=!1,a=r.child;a;){if(a===i){o=!0,i=r,n=s;break}if(a===n){o=!0,n=r,i=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===i){o=!0,i=s,n=r;break}if(a===n){o=!0,n=s,i=r;break}a=a.sibling}if(!o)throw Error(D(189))}}if(i.alternate!==n)throw Error(D(190))}if(i.tag!==3)throw Error(D(188));return i.stateNode.current===i?e:t}function Lv(e){return e=y1(e),e!==null?Fv(e):null}function Fv(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Fv(e);if(t!==null)return t;e=e.sibling}return null}var Uv=we.unstable_scheduleCallback,pp=we.unstable_cancelCallback,_1=we.unstable_shouldYield,x1=we.unstable_requestPaint,Rt=we.unstable_now,w1=we.unstable_getCurrentPriorityLevel,Dd=we.unstable_ImmediatePriority,zv=we.unstable_UserBlockingPriority,Ha=we.unstable_NormalPriority,b1=we.unstable_LowPriority,Gv=we.unstable_IdlePriority,kl=null,ci=null;function E1(e){if(ci&&typeof ci.onCommitFiberRoot=="function")try{ci.onCommitFiberRoot(kl,e,void 0,(e.current.flags&128)===128)}catch{}}var Ve=Math.clz32?Math.clz32:C1,T1=Math.log,S1=Math.LN2;function C1(e){return e>>>=0,e===0?32:31-(T1(e)/S1|0)|0}var ko=64,Oo=4194304;function ys(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function ja(e,t){var i=e.pendingLanes;if(i===0)return 0;var n=0,r=e.suspendedLanes,s=e.pingedLanes,o=i&268435455;if(o!==0){var a=o&~r;a!==0?n=ys(a):(s&=o,s!==0&&(n=ys(s)))}else o=i&~r,o!==0?n=ys(o):s!==0&&(n=ys(s));if(n===0)return 0;if(t!==0&&t!==n&&!(t&r)&&(r=n&-n,s=t&-t,r>=s||r===16&&(s&4194240)!==0))return t;if(n&4&&(n|=i&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=n;0<t;)i=31-Ve(t),r=1<<i,n|=e[i],t&=~r;return n}function A1(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function P1(e,t){for(var i=e.suspendedLanes,n=e.pingedLanes,r=e.expirationTimes,s=e.pendingLanes;0<s;){var o=31-Ve(s),a=1<<o,l=r[o];l===-1?(!(a&i)||a&n)&&(r[o]=A1(a,t)):l<=t&&(e.expiredLanes|=a),s&=~a}}function Hu(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function $v(){var e=ko;return ko<<=1,!(ko&4194240)&&(ko=64),e}function Eh(e){for(var t=[],i=0;31>i;i++)t.push(e);return t}function vo(e,t,i){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-Ve(t),e[t]=i}function I1(e,t){var i=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var n=e.eventTimes;for(e=e.expirationTimes;0<i;){var r=31-Ve(i),s=1<<r;t[r]=0,n[r]=-1,e[r]=-1,i&=~s}}function Bd(e,t){var i=e.entangledLanes|=t;for(e=e.entanglements;i;){var n=31-Ve(i),r=1<<n;r&t|e[n]&t&&(e[n]|=t),i&=~r}}var ht=0;function Hv(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var jv,Nd,Wv,Xv,Vv,ju=!1,Do=[],Ki=null,Zi=null,Qi=null,Hs=new Map,js=new Map,ji=[],R1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mp(e,t){switch(e){case"focusin":case"focusout":Ki=null;break;case"dragenter":case"dragleave":Zi=null;break;case"mouseover":case"mouseout":Qi=null;break;case"pointerover":case"pointerout":Hs.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":js.delete(t.pointerId)}}function es(e,t,i,n,r,s){return e===null||e.nativeEvent!==s?(e={blockedOn:t,domEventName:i,eventSystemFlags:n,nativeEvent:s,targetContainers:[r]},t!==null&&(t=_o(t),t!==null&&Nd(t)),e):(e.eventSystemFlags|=n,t=e.targetContainers,r!==null&&t.indexOf(r)===-1&&t.push(r),e)}function M1(e,t,i,n,r){switch(t){case"focusin":return Ki=es(Ki,e,t,i,n,r),!0;case"dragenter":return Zi=es(Zi,e,t,i,n,r),!0;case"mouseover":return Qi=es(Qi,e,t,i,n,r),!0;case"pointerover":var s=r.pointerId;return Hs.set(s,es(Hs.get(s)||null,e,t,i,n,r)),!0;case"gotpointercapture":return s=r.pointerId,js.set(s,es(js.get(s)||null,e,t,i,n,r)),!0}return!1}function Yv(e){var t=An(e.target);if(t!==null){var i=Vn(t);if(i!==null){if(t=i.tag,t===13){if(t=Nv(i),t!==null){e.blockedOn=t,Vv(e.priority,function(){Wv(i)});return}}else if(t===3&&i.stateNode.current.memoizedState.isDehydrated){e.blockedOn=i.tag===3?i.stateNode.containerInfo:null;return}}}e.blockedOn=null}function xa(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var i=Wu(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(i===null){i=e.nativeEvent;var n=new i.constructor(i.type,i);Uu=n,i.target.dispatchEvent(n),Uu=null}else return t=_o(i),t!==null&&Nd(t),e.blockedOn=i,!1;t.shift()}return!0}function gp(e,t,i){xa(e)&&i.delete(t)}function k1(){ju=!1,Ki!==null&&xa(Ki)&&(Ki=null),Zi!==null&&xa(Zi)&&(Zi=null),Qi!==null&&xa(Qi)&&(Qi=null),Hs.forEach(gp),js.forEach(gp)}function is(e,t){e.blockedOn===t&&(e.blockedOn=null,ju||(ju=!0,we.unstable_scheduleCallback(we.unstable_NormalPriority,k1)))}function Ws(e){function t(r){return is(r,e)}if(0<Do.length){is(Do[0],e);for(var i=1;i<Do.length;i++){var n=Do[i];n.blockedOn===e&&(n.blockedOn=null)}}for(Ki!==null&&is(Ki,e),Zi!==null&&is(Zi,e),Qi!==null&&is(Qi,e),Hs.forEach(t),js.forEach(t),i=0;i<ji.length;i++)n=ji[i],n.blockedOn===e&&(n.blockedOn=null);for(;0<ji.length&&(i=ji[0],i.blockedOn===null);)Yv(i),i.blockedOn===null&&ji.shift()}var Tr=Bi.ReactCurrentBatchConfig,Wa=!0;function O1(e,t,i,n){var r=ht,s=Tr.transition;Tr.transition=null;try{ht=1,Ld(e,t,i,n)}finally{ht=r,Tr.transition=s}}function D1(e,t,i,n){var r=ht,s=Tr.transition;Tr.transition=null;try{ht=4,Ld(e,t,i,n)}finally{ht=r,Tr.transition=s}}function Ld(e,t,i,n){if(Wa){var r=Wu(e,t,i,n);if(r===null)Oh(e,t,n,Xa,i),mp(e,n);else if(M1(r,e,t,i,n))n.stopPropagation();else if(mp(e,n),t&4&&-1<R1.indexOf(e)){for(;r!==null;){var s=_o(r);if(s!==null&&jv(s),s=Wu(e,t,i,n),s===null&&Oh(e,t,n,Xa,i),s===r)break;r=s}r!==null&&n.stopPropagation()}else Oh(e,t,n,null,i)}}var Xa=null;function Wu(e,t,i,n){if(Xa=null,e=Od(n),e=An(e),e!==null)if(t=Vn(e),t===null)e=null;else if(i=t.tag,i===13){if(e=Nv(t),e!==null)return e;e=null}else if(i===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return Xa=e,null}function qv(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(w1()){case Dd:return 1;case zv:return 4;case Ha:case b1:return 16;case Gv:return 536870912;default:return 16}default:return 16}}var Xi=null,Fd=null,wa=null;function Kv(){if(wa)return wa;var e,t=Fd,i=t.length,n,r="value"in Xi?Xi.value:Xi.textContent,s=r.length;for(e=0;e<i&&t[e]===r[e];e++);var o=i-e;for(n=1;n<=o&&t[i-n]===r[s-n];n++);return wa=r.slice(e,1<n?1-n:void 0)}function ba(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Bo(){return!0}function vp(){return!1}function Te(e){function t(i,n,r,s,o){this._reactName=i,this._targetInst=r,this.type=n,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in e)e.hasOwnProperty(a)&&(i=e[a],this[a]=i?i(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Bo:vp,this.isPropagationStopped=vp,this}return Tt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var i=this.nativeEvent;i&&(i.preventDefault?i.preventDefault():typeof i.returnValue!="unknown"&&(i.returnValue=!1),this.isDefaultPrevented=Bo)},stopPropagation:function(){var i=this.nativeEvent;i&&(i.stopPropagation?i.stopPropagation():typeof i.cancelBubble!="unknown"&&(i.cancelBubble=!0),this.isPropagationStopped=Bo)},persist:function(){},isPersistent:Bo}),t}var Yr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Ud=Te(Yr),yo=Tt({},Yr,{view:0,detail:0}),B1=Te(yo),Th,Sh,ns,Ol=Tt({},yo,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:zd,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==ns&&(ns&&e.type==="mousemove"?(Th=e.screenX-ns.screenX,Sh=e.screenY-ns.screenY):Sh=Th=0,ns=e),Th)},movementY:function(e){return"movementY"in e?e.movementY:Sh}}),yp=Te(Ol),N1=Tt({},Ol,{dataTransfer:0}),L1=Te(N1),F1=Tt({},yo,{relatedTarget:0}),Ch=Te(F1),U1=Tt({},Yr,{animationName:0,elapsedTime:0,pseudoElement:0}),z1=Te(U1),G1=Tt({},Yr,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),$1=Te(G1),H1=Tt({},Yr,{data:0}),_p=Te(H1),j1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},W1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},X1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function V1(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=X1[e])?!!t[e]:!1}function zd(){return V1}var Y1=Tt({},yo,{key:function(e){if(e.key){var t=j1[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=ba(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?W1[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:zd,charCode:function(e){return e.type==="keypress"?ba(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?ba(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),q1=Te(Y1),K1=Tt({},Ol,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),xp=Te(K1),Z1=Tt({},yo,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:zd}),Q1=Te(Z1),J1=Tt({},Yr,{propertyName:0,elapsedTime:0,pseudoElement:0}),tw=Te(J1),ew=Tt({},Ol,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),iw=Te(ew),nw=[9,13,27,32],Gd=Mi&&"CompositionEvent"in window,Is=null;Mi&&"documentMode"in document&&(Is=document.documentMode);var rw=Mi&&"TextEvent"in window&&!Is,Zv=Mi&&(!Gd||Is&&8<Is&&11>=Is),wp=String.fromCharCode(32),bp=!1;function Qv(e,t){switch(e){case"keyup":return nw.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Jv(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var lr=!1;function sw(e,t){switch(e){case"compositionend":return Jv(t);case"keypress":return t.which!==32?null:(bp=!0,wp);case"textInput":return e=t.data,e===wp&&bp?null:e;default:return null}}function ow(e,t){if(lr)return e==="compositionend"||!Gd&&Qv(e,t)?(e=Kv(),wa=Fd=Xi=null,lr=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Zv&&t.locale!=="ko"?null:t.data;default:return null}}var aw={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Ep(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!aw[e.type]:t==="textarea"}function ty(e,t,i,n){Mv(n),t=Va(t,"onChange"),0<t.length&&(i=new Ud("onChange","change",null,i,n),e.push({event:i,listeners:t}))}var Rs=null,Xs=null;function lw(e){cy(e,0)}function Dl(e){var t=cr(e);if(Tv(t))return e}function hw(e,t){if(e==="change")return t}var ey=!1;if(Mi){var Ah;if(Mi){var Ph="oninput"in document;if(!Ph){var Tp=document.createElement("div");Tp.setAttribute("oninput","return;"),Ph=typeof Tp.oninput=="function"}Ah=Ph}else Ah=!1;ey=Ah&&(!document.documentMode||9<document.documentMode)}function Sp(){Rs&&(Rs.detachEvent("onpropertychange",iy),Xs=Rs=null)}function iy(e){if(e.propertyName==="value"&&Dl(Xs)){var t=[];ty(t,Xs,e,Od(e)),Bv(lw,t)}}function uw(e,t,i){e==="focusin"?(Sp(),Rs=t,Xs=i,Rs.attachEvent("onpropertychange",iy)):e==="focusout"&&Sp()}function cw(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return Dl(Xs)}function dw(e,t){if(e==="click")return Dl(t)}function fw(e,t){if(e==="input"||e==="change")return Dl(t)}function pw(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var Qe=typeof Object.is=="function"?Object.is:pw;function Vs(e,t){if(Qe(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var i=Object.keys(e),n=Object.keys(t);if(i.length!==n.length)return!1;for(n=0;n<i.length;n++){var r=i[n];if(!Au.call(t,r)||!Qe(e[r],t[r]))return!1}return!0}function Cp(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function Ap(e,t){var i=Cp(e);e=0;for(var n;i;){if(i.nodeType===3){if(n=e+i.textContent.length,e<=t&&n>=t)return{node:i,offset:t-e};e=n}t:{for(;i;){if(i.nextSibling){i=i.nextSibling;break t}i=i.parentNode}i=void 0}i=Cp(i)}}function ny(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?ny(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function ry(){for(var e=window,t=za();t instanceof e.HTMLIFrameElement;){try{var i=typeof t.contentWindow.location.href=="string"}catch{i=!1}if(i)e=t.contentWindow;else break;t=za(e.document)}return t}function $d(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function mw(e){var t=ry(),i=e.focusedElem,n=e.selectionRange;if(t!==i&&i&&i.ownerDocument&&ny(i.ownerDocument.documentElement,i)){if(n!==null&&$d(i)){if(t=n.start,e=n.end,e===void 0&&(e=t),"selectionStart"in i)i.selectionStart=t,i.selectionEnd=Math.min(e,i.value.length);else if(e=(t=i.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var r=i.textContent.length,s=Math.min(n.start,r);n=n.end===void 0?s:Math.min(n.end,r),!e.extend&&s>n&&(r=n,n=s,s=r),r=Ap(i,s);var o=Ap(i,n);r&&o&&(e.rangeCount!==1||e.anchorNode!==r.node||e.anchorOffset!==r.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(r.node,r.offset),e.removeAllRanges(),s>n?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=i;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof i.focus=="function"&&i.focus(),i=0;i<t.length;i++)e=t[i],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var gw=Mi&&"documentMode"in document&&11>=document.documentMode,hr=null,Xu=null,Ms=null,Vu=!1;function Pp(e,t,i){var n=i.window===i?i.document:i.nodeType===9?i:i.ownerDocument;Vu||hr==null||hr!==za(n)||(n=hr,"selectionStart"in n&&$d(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Ms&&Vs(Ms,n)||(Ms=n,n=Va(Xu,"onSelect"),0<n.length&&(t=new Ud("onSelect","select",null,t,i),e.push({event:t,listeners:n}),t.target=hr)))}function No(e,t){var i={};return i[e.toLowerCase()]=t.toLowerCase(),i["Webkit"+e]="webkit"+t,i["Moz"+e]="moz"+t,i}var ur={animationend:No("Animation","AnimationEnd"),animationiteration:No("Animation","AnimationIteration"),animationstart:No("Animation","AnimationStart"),transitionend:No("Transition","TransitionEnd")},Ih={},sy={};Mi&&(sy=document.createElement("div").style,"AnimationEvent"in window||(delete ur.animationend.animation,delete ur.animationiteration.animation,delete ur.animationstart.animation),"TransitionEvent"in window||delete ur.transitionend.transition);function Bl(e){if(Ih[e])return Ih[e];if(!ur[e])return e;var t=ur[e],i;for(i in t)if(t.hasOwnProperty(i)&&i in sy)return Ih[e]=t[i];return e}var oy=Bl("animationend"),ay=Bl("animationiteration"),ly=Bl("animationstart"),hy=Bl("transitionend"),uy=new Map,Ip="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function fn(e,t){uy.set(e,t),Xn(t,[e])}for(var Rh=0;Rh<Ip.length;Rh++){var Mh=Ip[Rh],vw=Mh.toLowerCase(),yw=Mh[0].toUpperCase()+Mh.slice(1);fn(vw,"on"+yw)}fn(oy,"onAnimationEnd");fn(ay,"onAnimationIteration");fn(ly,"onAnimationStart");fn("dblclick","onDoubleClick");fn("focusin","onFocus");fn("focusout","onBlur");fn(hy,"onTransitionEnd");Or("onMouseEnter",["mouseout","mouseover"]);Or("onMouseLeave",["mouseout","mouseover"]);Or("onPointerEnter",["pointerout","pointerover"]);Or("onPointerLeave",["pointerout","pointerover"]);Xn("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Xn("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Xn("onBeforeInput",["compositionend","keypress","textInput","paste"]);Xn("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Xn("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _s="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),_w=new Set("cancel close invalid load scroll toggle".split(" ").concat(_s));function Rp(e,t,i){var n=e.type||"unknown-event";e.currentTarget=i,v1(n,t,void 0,e),e.currentTarget=null}function cy(e,t){t=(t&4)!==0;for(var i=0;i<e.length;i++){var n=e[i],r=n.event;n=n.listeners;t:{var s=void 0;if(t)for(var o=n.length-1;0<=o;o--){var a=n[o],l=a.instance,h=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break t;Rp(r,a,h),s=l}else for(o=0;o<n.length;o++){if(a=n[o],l=a.instance,h=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break t;Rp(r,a,h),s=l}}}if($a)throw e=$u,$a=!1,$u=null,e}function ft(e,t){var i=t[Qu];i===void 0&&(i=t[Qu]=new Set);var n=e+"__bubble";i.has(n)||(dy(t,e,2,!1),i.add(n))}function kh(e,t,i){var n=0;t&&(n|=4),dy(i,e,n,t)}var Lo="_reactListening"+Math.random().toString(36).slice(2);function Ys(e){if(!e[Lo]){e[Lo]=!0,_v.forEach(function(i){i!=="selectionchange"&&(_w.has(i)||kh(i,!1,e),kh(i,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Lo]||(t[Lo]=!0,kh("selectionchange",!1,t))}}function dy(e,t,i,n){switch(qv(t)){case 1:var r=O1;break;case 4:r=D1;break;default:r=Ld}i=r.bind(null,t,i,e),r=void 0,!Gu||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(r=!0),n?r!==void 0?e.addEventListener(t,i,{capture:!0,passive:r}):e.addEventListener(t,i,!0):r!==void 0?e.addEventListener(t,i,{passive:r}):e.addEventListener(t,i,!1)}function Oh(e,t,i,n,r){var s=n;if(!(t&1)&&!(t&2)&&n!==null)t:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var a=n.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=An(a),o===null)return;if(l=o.tag,l===5||l===6){n=s=o;continue t}a=a.parentNode}}n=n.return}Bv(function(){var h=s,u=Od(i),c=[];t:{var d=uy.get(e);if(d!==void 0){var f=Ud,p=e;switch(e){case"keypress":if(ba(i)===0)break t;case"keydown":case"keyup":f=q1;break;case"focusin":p="focus",f=Ch;break;case"focusout":p="blur",f=Ch;break;case"beforeblur":case"afterblur":f=Ch;break;case"click":if(i.button===2)break t;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=yp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=L1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=Q1;break;case oy:case ay:case ly:f=z1;break;case hy:f=tw;break;case"scroll":f=B1;break;case"wheel":f=iw;break;case"copy":case"cut":case"paste":f=$1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=xp}var y=(t&4)!==0,_=!y&&e==="scroll",m=y?d!==null?d+"Capture":null:d;y=[];for(var g=h,v;g!==null;){v=g;var x=v.stateNode;if(v.tag===5&&x!==null&&(v=x,m!==null&&(x=$s(g,m),x!=null&&y.push(qs(g,x,v)))),_)break;g=g.return}0<y.length&&(d=new f(d,p,null,i,u),c.push({event:d,listeners:y}))}}if(!(t&7)){t:{if(d=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",d&&i!==Uu&&(p=i.relatedTarget||i.fromElement)&&(An(p)||p[ki]))break t;if((f||d)&&(d=u.window===u?u:(d=u.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=i.relatedTarget||i.toElement,f=h,p=p?An(p):null,p!==null&&(_=Vn(p),p!==_||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=h),f!==p)){if(y=yp,x="onMouseLeave",m="onMouseEnter",g="mouse",(e==="pointerout"||e==="pointerover")&&(y=xp,x="onPointerLeave",m="onPointerEnter",g="pointer"),_=f==null?d:cr(f),v=p==null?d:cr(p),d=new y(x,g+"leave",f,i,u),d.target=_,d.relatedTarget=v,x=null,An(u)===h&&(y=new y(m,g+"enter",p,i,u),y.target=v,y.relatedTarget=_,x=y),_=x,f&&p)e:{for(y=f,m=p,g=0,v=y;v;v=Jn(v))g++;for(v=0,x=m;x;x=Jn(x))v++;for(;0<g-v;)y=Jn(y),g--;for(;0<v-g;)m=Jn(m),v--;for(;g--;){if(y===m||m!==null&&y===m.alternate)break e;y=Jn(y),m=Jn(m)}y=null}else y=null;f!==null&&Mp(c,d,f,y,!1),p!==null&&_!==null&&Mp(c,_,p,y,!0)}}t:{if(d=h?cr(h):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var b=hw;else if(Ep(d))if(ey)b=fw;else{b=cw;var T=uw}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=dw);if(b&&(b=b(e,h))){ty(c,b,i,u);break t}T&&T(e,d,h),e==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&Du(d,"number",d.value)}switch(T=h?cr(h):window,e){case"focusin":(Ep(T)||T.contentEditable==="true")&&(hr=T,Xu=h,Ms=null);break;case"focusout":Ms=Xu=hr=null;break;case"mousedown":Vu=!0;break;case"contextmenu":case"mouseup":case"dragend":Vu=!1,Pp(c,i,u);break;case"selectionchange":if(gw)break;case"keydown":case"keyup":Pp(c,i,u)}var E;if(Gd)t:{switch(e){case"compositionstart":var w="onCompositionStart";break t;case"compositionend":w="onCompositionEnd";break t;case"compositionupdate":w="onCompositionUpdate";break t}w=void 0}else lr?Qv(e,i)&&(w="onCompositionEnd"):e==="keydown"&&i.keyCode===229&&(w="onCompositionStart");w&&(Zv&&i.locale!=="ko"&&(lr||w!=="onCompositionStart"?w==="onCompositionEnd"&&lr&&(E=Kv()):(Xi=u,Fd="value"in Xi?Xi.value:Xi.textContent,lr=!0)),T=Va(h,w),0<T.length&&(w=new _p(w,e,null,i,u),c.push({event:w,listeners:T}),E?w.data=E:(E=Jv(i),E!==null&&(w.data=E)))),(E=rw?sw(e,i):ow(e,i))&&(h=Va(h,"onBeforeInput"),0<h.length&&(u=new _p("onBeforeInput","beforeinput",null,i,u),c.push({event:u,listeners:h}),u.data=E))}cy(c,t)})}function qs(e,t,i){return{instance:e,listener:t,currentTarget:i}}function Va(e,t){for(var i=t+"Capture",n=[];e!==null;){var r=e,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=$s(e,i),s!=null&&n.unshift(qs(e,s,r)),s=$s(e,t),s!=null&&n.push(qs(e,s,r))),e=e.return}return n}function Jn(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Mp(e,t,i,n,r){for(var s=t._reactName,o=[];i!==null&&i!==n;){var a=i,l=a.alternate,h=a.stateNode;if(l!==null&&l===n)break;a.tag===5&&h!==null&&(a=h,r?(l=$s(i,s),l!=null&&o.unshift(qs(i,l,a))):r||(l=$s(i,s),l!=null&&o.push(qs(i,l,a)))),i=i.return}o.length!==0&&e.push({event:t,listeners:o})}var xw=/\r\n?/g,ww=/\u0000|\uFFFD/g;function kp(e){return(typeof e=="string"?e:""+e).replace(xw,`
`).replace(ww,"")}function Fo(e,t,i){if(t=kp(t),kp(e)!==t&&i)throw Error(D(425))}function Ya(){}var Yu=null,qu=null;function Ku(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var Zu=typeof setTimeout=="function"?setTimeout:void 0,bw=typeof clearTimeout=="function"?clearTimeout:void 0,Op=typeof Promise=="function"?Promise:void 0,Ew=typeof queueMicrotask=="function"?queueMicrotask:typeof Op<"u"?function(e){return Op.resolve(null).then(e).catch(Tw)}:Zu;function Tw(e){setTimeout(function(){throw e})}function Dh(e,t){var i=t,n=0;do{var r=i.nextSibling;if(e.removeChild(i),r&&r.nodeType===8)if(i=r.data,i==="/$"){if(n===0){e.removeChild(r),Ws(t);return}n--}else i!=="$"&&i!=="$?"&&i!=="$!"||n++;i=r}while(i);Ws(t)}function Ji(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Dp(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="$"||i==="$!"||i==="$?"){if(t===0)return e;t--}else i==="/$"&&t++}e=e.previousSibling}return null}var qr=Math.random().toString(36).slice(2),li="__reactFiber$"+qr,Ks="__reactProps$"+qr,ki="__reactContainer$"+qr,Qu="__reactEvents$"+qr,Sw="__reactListeners$"+qr,Cw="__reactHandles$"+qr;function An(e){var t=e[li];if(t)return t;for(var i=e.parentNode;i;){if(t=i[ki]||i[li]){if(i=t.alternate,t.child!==null||i!==null&&i.child!==null)for(e=Dp(e);e!==null;){if(i=e[li])return i;e=Dp(e)}return t}e=i,i=e.parentNode}return null}function _o(e){return e=e[li]||e[ki],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function cr(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(D(33))}function Nl(e){return e[Ks]||null}var Ju=[],dr=-1;function pn(e){return{current:e}}function mt(e){0>dr||(e.current=Ju[dr],Ju[dr]=null,dr--)}function dt(e,t){dr++,Ju[dr]=e.current,e.current=t}var an={},Qt=pn(an),he=pn(!1),Bn=an;function Dr(e,t){var i=e.type.contextTypes;if(!i)return an;var n=e.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===t)return n.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in i)r[s]=t[s];return n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=r),r}function ue(e){return e=e.childContextTypes,e!=null}function qa(){mt(he),mt(Qt)}function Bp(e,t,i){if(Qt.current!==an)throw Error(D(168));dt(Qt,t),dt(he,i)}function fy(e,t,i){var n=e.stateNode;if(t=t.childContextTypes,typeof n.getChildContext!="function")return i;n=n.getChildContext();for(var r in n)if(!(r in t))throw Error(D(108,u1(e)||"Unknown",r));return Tt({},i,n)}function Ka(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||an,Bn=Qt.current,dt(Qt,e),dt(he,he.current),!0}function Np(e,t,i){var n=e.stateNode;if(!n)throw Error(D(169));i?(e=fy(e,t,Bn),n.__reactInternalMemoizedMergedChildContext=e,mt(he),mt(Qt),dt(Qt,e)):mt(he),dt(he,i)}var bi=null,Ll=!1,Bh=!1;function py(e){bi===null?bi=[e]:bi.push(e)}function Aw(e){Ll=!0,py(e)}function mn(){if(!Bh&&bi!==null){Bh=!0;var e=0,t=ht;try{var i=bi;for(ht=1;e<i.length;e++){var n=i[e];do n=n(!0);while(n!==null)}bi=null,Ll=!1}catch(r){throw bi!==null&&(bi=bi.slice(e+1)),Uv(Dd,mn),r}finally{ht=t,Bh=!1}}return null}var fr=[],pr=0,Za=null,Qa=0,Se=[],Ce=0,Nn=null,Ei=1,Ti="";function xn(e,t){fr[pr++]=Qa,fr[pr++]=Za,Za=e,Qa=t}function my(e,t,i){Se[Ce++]=Ei,Se[Ce++]=Ti,Se[Ce++]=Nn,Nn=e;var n=Ei;e=Ti;var r=32-Ve(n)-1;n&=~(1<<r),i+=1;var s=32-Ve(t)+r;if(30<s){var o=r-r%5;s=(n&(1<<o)-1).toString(32),n>>=o,r-=o,Ei=1<<32-Ve(t)+r|i<<r|n,Ti=s+e}else Ei=1<<s|i<<r|n,Ti=e}function Hd(e){e.return!==null&&(xn(e,1),my(e,1,0))}function jd(e){for(;e===Za;)Za=fr[--pr],fr[pr]=null,Qa=fr[--pr],fr[pr]=null;for(;e===Nn;)Nn=Se[--Ce],Se[Ce]=null,Ti=Se[--Ce],Se[Ce]=null,Ei=Se[--Ce],Se[Ce]=null}var xe=null,ve=null,vt=!1,He=null;function gy(e,t){var i=Ae(5,null,null,0);i.elementType="DELETED",i.stateNode=t,i.return=e,t=e.deletions,t===null?(e.deletions=[i],e.flags|=16):t.push(i)}function Lp(e,t){switch(e.tag){case 5:var i=e.type;return t=t.nodeType!==1||i.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,xe=e,ve=Ji(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,xe=e,ve=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(i=Nn!==null?{id:Ei,overflow:Ti}:null,e.memoizedState={dehydrated:t,treeContext:i,retryLane:1073741824},i=Ae(18,null,null,0),i.stateNode=t,i.return=e,e.child=i,xe=e,ve=null,!0):!1;default:return!1}}function tc(e){return(e.mode&1)!==0&&(e.flags&128)===0}function ec(e){if(vt){var t=ve;if(t){var i=t;if(!Lp(e,t)){if(tc(e))throw Error(D(418));t=Ji(i.nextSibling);var n=xe;t&&Lp(e,t)?gy(n,i):(e.flags=e.flags&-4097|2,vt=!1,xe=e)}}else{if(tc(e))throw Error(D(418));e.flags=e.flags&-4097|2,vt=!1,xe=e}}}function Fp(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;xe=e}function Uo(e){if(e!==xe)return!1;if(!vt)return Fp(e),vt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!Ku(e.type,e.memoizedProps)),t&&(t=ve)){if(tc(e))throw vy(),Error(D(418));for(;t;)gy(e,t),t=Ji(t.nextSibling)}if(Fp(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(D(317));t:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var i=e.data;if(i==="/$"){if(t===0){ve=Ji(e.nextSibling);break t}t--}else i!=="$"&&i!=="$!"&&i!=="$?"||t++}e=e.nextSibling}ve=null}}else ve=xe?Ji(e.stateNode.nextSibling):null;return!0}function vy(){for(var e=ve;e;)e=Ji(e.nextSibling)}function Br(){ve=xe=null,vt=!1}function Wd(e){He===null?He=[e]:He.push(e)}var Pw=Bi.ReactCurrentBatchConfig;function ze(e,t){if(e&&e.defaultProps){t=Tt({},t),e=e.defaultProps;for(var i in e)t[i]===void 0&&(t[i]=e[i]);return t}return t}var Ja=pn(null),tl=null,mr=null,Xd=null;function Vd(){Xd=mr=tl=null}function Yd(e){var t=Ja.current;mt(Ja),e._currentValue=t}function ic(e,t,i){for(;e!==null;){var n=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,n!==null&&(n.childLanes|=t)):n!==null&&(n.childLanes&t)!==t&&(n.childLanes|=t),e===i)break;e=e.return}}function Sr(e,t){tl=e,Xd=mr=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(le=!0),e.firstContext=null)}function Re(e){var t=e._currentValue;if(Xd!==e)if(e={context:e,memoizedValue:t,next:null},mr===null){if(tl===null)throw Error(D(308));mr=e,tl.dependencies={lanes:0,firstContext:e}}else mr=mr.next=e;return t}var Pn=null;function qd(e){Pn===null?Pn=[e]:Pn.push(e)}function yy(e,t,i,n){var r=t.interleaved;return r===null?(i.next=i,qd(t)):(i.next=r.next,r.next=i),t.interleaved=i,Oi(e,n)}function Oi(e,t){e.lanes|=t;var i=e.alternate;for(i!==null&&(i.lanes|=t),i=e,e=e.return;e!==null;)e.childLanes|=t,i=e.alternate,i!==null&&(i.childLanes|=t),i=e,e=e.return;return i.tag===3?i.stateNode:null}var Hi=!1;function Kd(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function _y(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Ai(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function tn(e,t,i){var n=e.updateQueue;if(n===null)return null;if(n=n.shared,at&2){var r=n.pending;return r===null?t.next=t:(t.next=r.next,r.next=t),n.pending=t,Oi(e,i)}return r=n.interleaved,r===null?(t.next=t,qd(n)):(t.next=r.next,r.next=t),n.interleaved=t,Oi(e,i)}function Ea(e,t,i){if(t=t.updateQueue,t!==null&&(t=t.shared,(i&4194240)!==0)){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,Bd(e,i)}}function Up(e,t){var i=e.updateQueue,n=e.alternate;if(n!==null&&(n=n.updateQueue,i===n)){var r=null,s=null;if(i=i.firstBaseUpdate,i!==null){do{var o={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};s===null?r=s=o:s=s.next=o,i=i.next}while(i!==null);s===null?r=s=t:s=s.next=t}else r=s=t;i={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:n.shared,effects:n.effects},e.updateQueue=i;return}e=i.lastBaseUpdate,e===null?i.firstBaseUpdate=t:e.next=t,i.lastBaseUpdate=t}function el(e,t,i,n){var r=e.updateQueue;Hi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,h=l.next;l.next=null,o===null?s=h:o.next=h,o=l;var u=e.alternate;u!==null&&(u=u.updateQueue,a=u.lastBaseUpdate,a!==o&&(a===null?u.firstBaseUpdate=h:a.next=h,u.lastBaseUpdate=l))}if(s!==null){var c=r.baseState;o=0,u=h=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((n&d)===d){u!==null&&(u=u.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});t:{var p=e,y=a;switch(d=t,f=i,y.tag){case 1:if(p=y.payload,typeof p=="function"){c=p.call(f,c,d);break t}c=p;break t;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,d=typeof p=="function"?p.call(f,c,d):p,d==null)break t;c=Tt({},c,d);break t;case 2:Hi=!0}}a.callback!==null&&a.lane!==0&&(e.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},u===null?(h=u=f,l=c):u=u.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(1);if(u===null&&(l=c),r.baseState=l,r.firstBaseUpdate=h,r.lastBaseUpdate=u,t=r.shared.interleaved,t!==null){r=t;do o|=r.lane,r=r.next;while(r!==t)}else s===null&&(r.shared.lanes=0);Fn|=o,e.lanes=o,e.memoizedState=c}}function zp(e,t,i){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var n=e[t],r=n.callback;if(r!==null){if(n.callback=null,n=i,typeof r!="function")throw Error(D(191,r));r.call(n)}}}var xy=new yv.Component().refs;function nc(e,t,i,n){t=e.memoizedState,i=i(n,t),i=i==null?t:Tt({},t,i),e.memoizedState=i,e.lanes===0&&(e.updateQueue.baseState=i)}var Fl={isMounted:function(e){return(e=e._reactInternals)?Vn(e)===e:!1},enqueueSetState:function(e,t,i){e=e._reactInternals;var n=ie(),r=nn(e),s=Ai(n,r);s.payload=t,i!=null&&(s.callback=i),t=tn(e,s,r),t!==null&&(Ye(t,e,r,n),Ea(t,e,r))},enqueueReplaceState:function(e,t,i){e=e._reactInternals;var n=ie(),r=nn(e),s=Ai(n,r);s.tag=1,s.payload=t,i!=null&&(s.callback=i),t=tn(e,s,r),t!==null&&(Ye(t,e,r,n),Ea(t,e,r))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var i=ie(),n=nn(e),r=Ai(i,n);r.tag=2,t!=null&&(r.callback=t),t=tn(e,r,n),t!==null&&(Ye(t,e,n,i),Ea(t,e,n))}};function Gp(e,t,i,n,r,s,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(n,s,o):t.prototype&&t.prototype.isPureReactComponent?!Vs(i,n)||!Vs(r,s):!0}function wy(e,t,i){var n=!1,r=an,s=t.contextType;return typeof s=="object"&&s!==null?s=Re(s):(r=ue(t)?Bn:Qt.current,n=t.contextTypes,s=(n=n!=null)?Dr(e,r):an),t=new t(i,s),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=Fl,e.stateNode=t,t._reactInternals=e,n&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=r,e.__reactInternalMemoizedMaskedChildContext=s),t}function $p(e,t,i,n){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(i,n),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(i,n),t.state!==e&&Fl.enqueueReplaceState(t,t.state,null)}function rc(e,t,i,n){var r=e.stateNode;r.props=i,r.state=e.memoizedState,r.refs=xy,Kd(e);var s=t.contextType;typeof s=="object"&&s!==null?r.context=Re(s):(s=ue(t)?Bn:Qt.current,r.context=Dr(e,s)),r.state=e.memoizedState,s=t.getDerivedStateFromProps,typeof s=="function"&&(nc(e,t,s,i),r.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(t=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),t!==r.state&&Fl.enqueueReplaceState(r,r.state,null),el(e,i,r,n),r.state=e.memoizedState),typeof r.componentDidMount=="function"&&(e.flags|=4194308)}function rs(e,t,i){if(e=i.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(D(309));var n=i.stateNode}if(!n)throw Error(D(147,e));var r=n,s=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===s?t.ref:(t=function(o){var a=r.refs;a===xy&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},t._stringRef=s,t)}if(typeof e!="string")throw Error(D(284));if(!i._owner)throw Error(D(290,e))}return e}function zo(e,t){throw e=Object.prototype.toString.call(t),Error(D(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Hp(e){var t=e._init;return t(e._payload)}function by(e){function t(m,g){if(e){var v=m.deletions;v===null?(m.deletions=[g],m.flags|=16):v.push(g)}}function i(m,g){if(!e)return null;for(;g!==null;)t(m,g),g=g.sibling;return null}function n(m,g){for(m=new Map;g!==null;)g.key!==null?m.set(g.key,g):m.set(g.index,g),g=g.sibling;return m}function r(m,g){return m=rn(m,g),m.index=0,m.sibling=null,m}function s(m,g,v){return m.index=v,e?(v=m.alternate,v!==null?(v=v.index,v<g?(m.flags|=2,g):v):(m.flags|=2,g)):(m.flags|=1048576,g)}function o(m){return e&&m.alternate===null&&(m.flags|=2),m}function a(m,g,v,x){return g===null||g.tag!==6?(g=$h(v,m.mode,x),g.return=m,g):(g=r(g,v),g.return=m,g)}function l(m,g,v,x){var b=v.type;return b===ar?u(m,g,v.props.children,x,v.key):g!==null&&(g.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$i&&Hp(b)===g.type)?(x=r(g,v.props),x.ref=rs(m,g,v),x.return=m,x):(x=Ia(v.type,v.key,v.props,null,m.mode,x),x.ref=rs(m,g,v),x.return=m,x)}function h(m,g,v,x){return g===null||g.tag!==4||g.stateNode.containerInfo!==v.containerInfo||g.stateNode.implementation!==v.implementation?(g=Hh(v,m.mode,x),g.return=m,g):(g=r(g,v.children||[]),g.return=m,g)}function u(m,g,v,x,b){return g===null||g.tag!==7?(g=kn(v,m.mode,x,b),g.return=m,g):(g=r(g,v),g.return=m,g)}function c(m,g,v){if(typeof g=="string"&&g!==""||typeof g=="number")return g=$h(""+g,m.mode,v),g.return=m,g;if(typeof g=="object"&&g!==null){switch(g.$$typeof){case Io:return v=Ia(g.type,g.key,g.props,null,m.mode,v),v.ref=rs(m,null,g),v.return=m,v;case or:return g=Hh(g,m.mode,v),g.return=m,g;case $i:var x=g._init;return c(m,x(g._payload),v)}if(vs(g)||Jr(g))return g=kn(g,m.mode,v,null),g.return=m,g;zo(m,g)}return null}function d(m,g,v,x){var b=g!==null?g.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return b!==null?null:a(m,g,""+v,x);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Io:return v.key===b?l(m,g,v,x):null;case or:return v.key===b?h(m,g,v,x):null;case $i:return b=v._init,d(m,g,b(v._payload),x)}if(vs(v)||Jr(v))return b!==null?null:u(m,g,v,x,null);zo(m,v)}return null}function f(m,g,v,x,b){if(typeof x=="string"&&x!==""||typeof x=="number")return m=m.get(v)||null,a(g,m,""+x,b);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case Io:return m=m.get(x.key===null?v:x.key)||null,l(g,m,x,b);case or:return m=m.get(x.key===null?v:x.key)||null,h(g,m,x,b);case $i:var T=x._init;return f(m,g,v,T(x._payload),b)}if(vs(x)||Jr(x))return m=m.get(v)||null,u(g,m,x,b,null);zo(g,x)}return null}function p(m,g,v,x){for(var b=null,T=null,E=g,w=g=0,S=null;E!==null&&w<v.length;w++){E.index>w?(S=E,E=null):S=E.sibling;var A=d(m,E,v[w],x);if(A===null){E===null&&(E=S);break}e&&E&&A.alternate===null&&t(m,E),g=s(A,g,w),T===null?b=A:T.sibling=A,T=A,E=S}if(w===v.length)return i(m,E),vt&&xn(m,w),b;if(E===null){for(;w<v.length;w++)E=c(m,v[w],x),E!==null&&(g=s(E,g,w),T===null?b=E:T.sibling=E,T=E);return vt&&xn(m,w),b}for(E=n(m,E);w<v.length;w++)S=f(E,m,w,v[w],x),S!==null&&(e&&S.alternate!==null&&E.delete(S.key===null?w:S.key),g=s(S,g,w),T===null?b=S:T.sibling=S,T=S);return e&&E.forEach(function(P){return t(m,P)}),vt&&xn(m,w),b}function y(m,g,v,x){var b=Jr(v);if(typeof b!="function")throw Error(D(150));if(v=b.call(v),v==null)throw Error(D(151));for(var T=b=null,E=g,w=g=0,S=null,A=v.next();E!==null&&!A.done;w++,A=v.next()){E.index>w?(S=E,E=null):S=E.sibling;var P=d(m,E,A.value,x);if(P===null){E===null&&(E=S);break}e&&E&&P.alternate===null&&t(m,E),g=s(P,g,w),T===null?b=P:T.sibling=P,T=P,E=S}if(A.done)return i(m,E),vt&&xn(m,w),b;if(E===null){for(;!A.done;w++,A=v.next())A=c(m,A.value,x),A!==null&&(g=s(A,g,w),T===null?b=A:T.sibling=A,T=A);return vt&&xn(m,w),b}for(E=n(m,E);!A.done;w++,A=v.next())A=f(E,m,w,A.value,x),A!==null&&(e&&A.alternate!==null&&E.delete(A.key===null?w:A.key),g=s(A,g,w),T===null?b=A:T.sibling=A,T=A);return e&&E.forEach(function(k){return t(m,k)}),vt&&xn(m,w),b}function _(m,g,v,x){if(typeof v=="object"&&v!==null&&v.type===ar&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Io:t:{for(var b=v.key,T=g;T!==null;){if(T.key===b){if(b=v.type,b===ar){if(T.tag===7){i(m,T.sibling),g=r(T,v.props.children),g.return=m,m=g;break t}}else if(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===$i&&Hp(b)===T.type){i(m,T.sibling),g=r(T,v.props),g.ref=rs(m,T,v),g.return=m,m=g;break t}i(m,T);break}else t(m,T);T=T.sibling}v.type===ar?(g=kn(v.props.children,m.mode,x,v.key),g.return=m,m=g):(x=Ia(v.type,v.key,v.props,null,m.mode,x),x.ref=rs(m,g,v),x.return=m,m=x)}return o(m);case or:t:{for(T=v.key;g!==null;){if(g.key===T)if(g.tag===4&&g.stateNode.containerInfo===v.containerInfo&&g.stateNode.implementation===v.implementation){i(m,g.sibling),g=r(g,v.children||[]),g.return=m,m=g;break t}else{i(m,g);break}else t(m,g);g=g.sibling}g=Hh(v,m.mode,x),g.return=m,m=g}return o(m);case $i:return T=v._init,_(m,g,T(v._payload),x)}if(vs(v))return p(m,g,v,x);if(Jr(v))return y(m,g,v,x);zo(m,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,g!==null&&g.tag===6?(i(m,g.sibling),g=r(g,v),g.return=m,m=g):(i(m,g),g=$h(v,m.mode,x),g.return=m,m=g),o(m)):i(m,g)}return _}var Nr=by(!0),Ey=by(!1),xo={},di=pn(xo),Zs=pn(xo),Qs=pn(xo);function In(e){if(e===xo)throw Error(D(174));return e}function Zd(e,t){switch(dt(Qs,t),dt(Zs,e),dt(di,xo),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Nu(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Nu(t,e)}mt(di),dt(di,t)}function Lr(){mt(di),mt(Zs),mt(Qs)}function Ty(e){In(Qs.current);var t=In(di.current),i=Nu(t,e.type);t!==i&&(dt(Zs,e),dt(di,i))}function Qd(e){Zs.current===e&&(mt(di),mt(Zs))}var wt=pn(0);function il(e){for(var t=e;t!==null;){if(t.tag===13){var i=t.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||i.data==="$?"||i.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Nh=[];function Jd(){for(var e=0;e<Nh.length;e++)Nh[e]._workInProgressVersionPrimary=null;Nh.length=0}var Ta=Bi.ReactCurrentDispatcher,Lh=Bi.ReactCurrentBatchConfig,Ln=0,Et=null,Bt=null,Lt=null,nl=!1,ks=!1,Js=0,Iw=0;function qt(){throw Error(D(321))}function tf(e,t){if(t===null)return!1;for(var i=0;i<t.length&&i<e.length;i++)if(!Qe(e[i],t[i]))return!1;return!0}function ef(e,t,i,n,r,s){if(Ln=s,Et=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Ta.current=e===null||e.memoizedState===null?Ow:Dw,e=i(n,r),ks){s=0;do{if(ks=!1,Js=0,25<=s)throw Error(D(301));s+=1,Lt=Bt=null,t.updateQueue=null,Ta.current=Bw,e=i(n,r)}while(ks)}if(Ta.current=rl,t=Bt!==null&&Bt.next!==null,Ln=0,Lt=Bt=Et=null,nl=!1,t)throw Error(D(300));return e}function nf(){var e=Js!==0;return Js=0,e}function si(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?Et.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function Me(){if(Bt===null){var e=Et.alternate;e=e!==null?e.memoizedState:null}else e=Bt.next;var t=Lt===null?Et.memoizedState:Lt.next;if(t!==null)Lt=t,Bt=e;else{if(e===null)throw Error(D(310));Bt=e,e={memoizedState:Bt.memoizedState,baseState:Bt.baseState,baseQueue:Bt.baseQueue,queue:Bt.queue,next:null},Lt===null?Et.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function to(e,t){return typeof t=="function"?t(e):t}function Fh(e){var t=Me(),i=t.queue;if(i===null)throw Error(D(311));i.lastRenderedReducer=e;var n=Bt,r=n.baseQueue,s=i.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}n.baseQueue=r=s,i.pending=null}if(r!==null){s=r.next,n=n.baseState;var a=o=null,l=null,h=s;do{var u=h.lane;if((Ln&u)===u)l!==null&&(l=l.next={lane:0,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null}),n=h.hasEagerState?h.eagerState:e(n,h.action);else{var c={lane:u,action:h.action,hasEagerState:h.hasEagerState,eagerState:h.eagerState,next:null};l===null?(a=l=c,o=n):l=l.next=c,Et.lanes|=u,Fn|=u}h=h.next}while(h!==null&&h!==s);l===null?o=n:l.next=a,Qe(n,t.memoizedState)||(le=!0),t.memoizedState=n,t.baseState=o,t.baseQueue=l,i.lastRenderedState=n}if(e=i.interleaved,e!==null){r=e;do s=r.lane,Et.lanes|=s,Fn|=s,r=r.next;while(r!==e)}else r===null&&(i.lanes=0);return[t.memoizedState,i.dispatch]}function Uh(e){var t=Me(),i=t.queue;if(i===null)throw Error(D(311));i.lastRenderedReducer=e;var n=i.dispatch,r=i.pending,s=t.memoizedState;if(r!==null){i.pending=null;var o=r=r.next;do s=e(s,o.action),o=o.next;while(o!==r);Qe(s,t.memoizedState)||(le=!0),t.memoizedState=s,t.baseQueue===null&&(t.baseState=s),i.lastRenderedState=s}return[s,n]}function Sy(){}function Cy(e,t){var i=Et,n=Me(),r=t(),s=!Qe(n.memoizedState,r);if(s&&(n.memoizedState=r,le=!0),n=n.queue,rf(Iy.bind(null,i,n,e),[e]),n.getSnapshot!==t||s||Lt!==null&&Lt.memoizedState.tag&1){if(i.flags|=2048,eo(9,Py.bind(null,i,n,r,t),void 0,null),Ft===null)throw Error(D(349));Ln&30||Ay(i,t,r)}return r}function Ay(e,t,i){e.flags|=16384,e={getSnapshot:t,value:i},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.stores=[e]):(i=t.stores,i===null?t.stores=[e]:i.push(e))}function Py(e,t,i,n){t.value=i,t.getSnapshot=n,Ry(t)&&My(e)}function Iy(e,t,i){return i(function(){Ry(t)&&My(e)})}function Ry(e){var t=e.getSnapshot;e=e.value;try{var i=t();return!Qe(e,i)}catch{return!0}}function My(e){var t=Oi(e,1);t!==null&&Ye(t,e,1,-1)}function jp(e){var t=si();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:to,lastRenderedState:e},t.queue=e,e=e.dispatch=kw.bind(null,Et,e),[t.memoizedState,e]}function eo(e,t,i,n){return e={tag:e,create:t,destroy:i,deps:n,next:null},t=Et.updateQueue,t===null?(t={lastEffect:null,stores:null},Et.updateQueue=t,t.lastEffect=e.next=e):(i=t.lastEffect,i===null?t.lastEffect=e.next=e:(n=i.next,i.next=e,e.next=n,t.lastEffect=e)),e}function ky(){return Me().memoizedState}function Sa(e,t,i,n){var r=si();Et.flags|=e,r.memoizedState=eo(1|t,i,void 0,n===void 0?null:n)}function Ul(e,t,i,n){var r=Me();n=n===void 0?null:n;var s=void 0;if(Bt!==null){var o=Bt.memoizedState;if(s=o.destroy,n!==null&&tf(n,o.deps)){r.memoizedState=eo(t,i,s,n);return}}Et.flags|=e,r.memoizedState=eo(1|t,i,s,n)}function Wp(e,t){return Sa(8390656,8,e,t)}function rf(e,t){return Ul(2048,8,e,t)}function Oy(e,t){return Ul(4,2,e,t)}function Dy(e,t){return Ul(4,4,e,t)}function By(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function Ny(e,t,i){return i=i!=null?i.concat([e]):null,Ul(4,4,By.bind(null,t,e),i)}function sf(){}function Ly(e,t){var i=Me();t=t===void 0?null:t;var n=i.memoizedState;return n!==null&&t!==null&&tf(t,n[1])?n[0]:(i.memoizedState=[e,t],e)}function Fy(e,t){var i=Me();t=t===void 0?null:t;var n=i.memoizedState;return n!==null&&t!==null&&tf(t,n[1])?n[0]:(e=e(),i.memoizedState=[e,t],e)}function Uy(e,t,i){return Ln&21?(Qe(i,t)||(i=$v(),Et.lanes|=i,Fn|=i,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,le=!0),e.memoizedState=i)}function Rw(e,t){var i=ht;ht=i!==0&&4>i?i:4,e(!0);var n=Lh.transition;Lh.transition={};try{e(!1),t()}finally{ht=i,Lh.transition=n}}function zy(){return Me().memoizedState}function Mw(e,t,i){var n=nn(e);if(i={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null},Gy(e))$y(t,i);else if(i=yy(e,t,i,n),i!==null){var r=ie();Ye(i,e,n,r),Hy(i,t,n)}}function kw(e,t,i){var n=nn(e),r={lane:n,action:i,hasEagerState:!1,eagerState:null,next:null};if(Gy(e))$y(t,r);else{var s=e.alternate;if(e.lanes===0&&(s===null||s.lanes===0)&&(s=t.lastRenderedReducer,s!==null))try{var o=t.lastRenderedState,a=s(o,i);if(r.hasEagerState=!0,r.eagerState=a,Qe(a,o)){var l=t.interleaved;l===null?(r.next=r,qd(t)):(r.next=l.next,l.next=r),t.interleaved=r;return}}catch{}finally{}i=yy(e,t,r,n),i!==null&&(r=ie(),Ye(i,e,n,r),Hy(i,t,n))}}function Gy(e){var t=e.alternate;return e===Et||t!==null&&t===Et}function $y(e,t){ks=nl=!0;var i=e.pending;i===null?t.next=t:(t.next=i.next,i.next=t),e.pending=t}function Hy(e,t,i){if(i&4194240){var n=t.lanes;n&=e.pendingLanes,i|=n,t.lanes=i,Bd(e,i)}}var rl={readContext:Re,useCallback:qt,useContext:qt,useEffect:qt,useImperativeHandle:qt,useInsertionEffect:qt,useLayoutEffect:qt,useMemo:qt,useReducer:qt,useRef:qt,useState:qt,useDebugValue:qt,useDeferredValue:qt,useTransition:qt,useMutableSource:qt,useSyncExternalStore:qt,useId:qt,unstable_isNewReconciler:!1},Ow={readContext:Re,useCallback:function(e,t){return si().memoizedState=[e,t===void 0?null:t],e},useContext:Re,useEffect:Wp,useImperativeHandle:function(e,t,i){return i=i!=null?i.concat([e]):null,Sa(4194308,4,By.bind(null,t,e),i)},useLayoutEffect:function(e,t){return Sa(4194308,4,e,t)},useInsertionEffect:function(e,t){return Sa(4,2,e,t)},useMemo:function(e,t){var i=si();return t=t===void 0?null:t,e=e(),i.memoizedState=[e,t],e},useReducer:function(e,t,i){var n=si();return t=i!==void 0?i(t):t,n.memoizedState=n.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},n.queue=e,e=e.dispatch=Mw.bind(null,Et,e),[n.memoizedState,e]},useRef:function(e){var t=si();return e={current:e},t.memoizedState=e},useState:jp,useDebugValue:sf,useDeferredValue:function(e){return si().memoizedState=e},useTransition:function(){var e=jp(!1),t=e[0];return e=Rw.bind(null,e[1]),si().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,i){var n=Et,r=si();if(vt){if(i===void 0)throw Error(D(407));i=i()}else{if(i=t(),Ft===null)throw Error(D(349));Ln&30||Ay(n,t,i)}r.memoizedState=i;var s={value:i,getSnapshot:t};return r.queue=s,Wp(Iy.bind(null,n,s,e),[e]),n.flags|=2048,eo(9,Py.bind(null,n,s,i,t),void 0,null),i},useId:function(){var e=si(),t=Ft.identifierPrefix;if(vt){var i=Ti,n=Ei;i=(n&~(1<<32-Ve(n)-1)).toString(32)+i,t=":"+t+"R"+i,i=Js++,0<i&&(t+="H"+i.toString(32)),t+=":"}else i=Iw++,t=":"+t+"r"+i.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Dw={readContext:Re,useCallback:Ly,useContext:Re,useEffect:rf,useImperativeHandle:Ny,useInsertionEffect:Oy,useLayoutEffect:Dy,useMemo:Fy,useReducer:Fh,useRef:ky,useState:function(){return Fh(to)},useDebugValue:sf,useDeferredValue:function(e){var t=Me();return Uy(t,Bt.memoizedState,e)},useTransition:function(){var e=Fh(to)[0],t=Me().memoizedState;return[e,t]},useMutableSource:Sy,useSyncExternalStore:Cy,useId:zy,unstable_isNewReconciler:!1},Bw={readContext:Re,useCallback:Ly,useContext:Re,useEffect:rf,useImperativeHandle:Ny,useInsertionEffect:Oy,useLayoutEffect:Dy,useMemo:Fy,useReducer:Uh,useRef:ky,useState:function(){return Uh(to)},useDebugValue:sf,useDeferredValue:function(e){var t=Me();return Bt===null?t.memoizedState=e:Uy(t,Bt.memoizedState,e)},useTransition:function(){var e=Uh(to)[0],t=Me().memoizedState;return[e,t]},useMutableSource:Sy,useSyncExternalStore:Cy,useId:zy,unstable_isNewReconciler:!1};function Fr(e,t){try{var i="",n=t;do i+=h1(n),n=n.return;while(n);var r=i}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:e,source:t,stack:r,digest:null}}function zh(e,t,i){return{value:e,source:null,stack:i??null,digest:t??null}}function sc(e,t){try{console.error(t.value)}catch(i){setTimeout(function(){throw i})}}var Nw=typeof WeakMap=="function"?WeakMap:Map;function jy(e,t,i){i=Ai(-1,i),i.tag=3,i.payload={element:null};var n=t.value;return i.callback=function(){ol||(ol=!0,mc=n),sc(e,t)},i}function Wy(e,t,i){i=Ai(-1,i),i.tag=3;var n=e.type.getDerivedStateFromError;if(typeof n=="function"){var r=t.value;i.payload=function(){return n(r)},i.callback=function(){sc(e,t)}}var s=e.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(i.callback=function(){sc(e,t),typeof n!="function"&&(en===null?en=new Set([this]):en.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),i}function Xp(e,t,i){var n=e.pingCache;if(n===null){n=e.pingCache=new Nw;var r=new Set;n.set(t,r)}else r=n.get(t),r===void 0&&(r=new Set,n.set(t,r));r.has(i)||(r.add(i),e=Kw.bind(null,e,t,i),t.then(e,e))}function Vp(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Yp(e,t,i,n,r){return e.mode&1?(e.flags|=65536,e.lanes=r,e):(e===t?e.flags|=65536:(e.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(t=Ai(-1,1),t.tag=2,tn(i,t,1))),i.lanes|=1),e)}var Lw=Bi.ReactCurrentOwner,le=!1;function Jt(e,t,i,n){t.child=e===null?Ey(t,null,i,n):Nr(t,e.child,i,n)}function qp(e,t,i,n,r){i=i.render;var s=t.ref;return Sr(t,r),n=ef(e,t,i,n,s,r),i=nf(),e!==null&&!le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Di(e,t,r)):(vt&&i&&Hd(t),t.flags|=1,Jt(e,t,n,r),t.child)}function Kp(e,t,i,n,r){if(e===null){var s=i.type;return typeof s=="function"&&!ff(s)&&s.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(t.tag=15,t.type=s,Xy(e,t,s,n,r)):(e=Ia(i.type,null,n,t,t.mode,r),e.ref=t.ref,e.return=t,t.child=e)}if(s=e.child,!(e.lanes&r)){var o=s.memoizedProps;if(i=i.compare,i=i!==null?i:Vs,i(o,n)&&e.ref===t.ref)return Di(e,t,r)}return t.flags|=1,e=rn(s,n),e.ref=t.ref,e.return=t,t.child=e}function Xy(e,t,i,n,r){if(e!==null){var s=e.memoizedProps;if(Vs(s,n)&&e.ref===t.ref)if(le=!1,t.pendingProps=n=s,(e.lanes&r)!==0)e.flags&131072&&(le=!0);else return t.lanes=e.lanes,Di(e,t,r)}return oc(e,t,i,n,r)}function Vy(e,t,i){var n=t.pendingProps,r=n.children,s=e!==null?e.memoizedState:null;if(n.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},dt(vr,ge),ge|=i;else{if(!(i&1073741824))return e=s!==null?s.baseLanes|i:i,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,dt(vr,ge),ge|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=s!==null?s.baseLanes:i,dt(vr,ge),ge|=n}else s!==null?(n=s.baseLanes|i,t.memoizedState=null):n=i,dt(vr,ge),ge|=n;return Jt(e,t,r,i),t.child}function Yy(e,t){var i=t.ref;(e===null&&i!==null||e!==null&&e.ref!==i)&&(t.flags|=512,t.flags|=2097152)}function oc(e,t,i,n,r){var s=ue(i)?Bn:Qt.current;return s=Dr(t,s),Sr(t,r),i=ef(e,t,i,n,s,r),n=nf(),e!==null&&!le?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~r,Di(e,t,r)):(vt&&n&&Hd(t),t.flags|=1,Jt(e,t,i,r),t.child)}function Zp(e,t,i,n,r){if(ue(i)){var s=!0;Ka(t)}else s=!1;if(Sr(t,r),t.stateNode===null)Ca(e,t),wy(t,i,n),rc(t,i,n,r),n=!0;else if(e===null){var o=t.stateNode,a=t.memoizedProps;o.props=a;var l=o.context,h=i.contextType;typeof h=="object"&&h!==null?h=Re(h):(h=ue(i)?Bn:Qt.current,h=Dr(t,h));var u=i.getDerivedStateFromProps,c=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";c||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==n||l!==h)&&$p(t,o,n,h),Hi=!1;var d=t.memoizedState;o.state=d,el(t,n,o,r),l=t.memoizedState,a!==n||d!==l||he.current||Hi?(typeof u=="function"&&(nc(t,i,u,n),l=t.memoizedState),(a=Hi||Gp(t,i,a,n,d,l,h))?(c||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=n,t.memoizedState=l),o.props=n,o.state=l,o.context=h,n=a):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),n=!1)}else{o=t.stateNode,_y(e,t),a=t.memoizedProps,h=t.type===t.elementType?a:ze(t.type,a),o.props=h,c=t.pendingProps,d=o.context,l=i.contextType,typeof l=="object"&&l!==null?l=Re(l):(l=ue(i)?Bn:Qt.current,l=Dr(t,l));var f=i.getDerivedStateFromProps;(u=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==c||d!==l)&&$p(t,o,n,l),Hi=!1,d=t.memoizedState,o.state=d,el(t,n,o,r);var p=t.memoizedState;a!==c||d!==p||he.current||Hi?(typeof f=="function"&&(nc(t,i,f,n),p=t.memoizedState),(h=Hi||Gp(t,i,h,n,d,p,l)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,l)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),t.memoizedProps=n,t.memoizedState=p),o.props=n,o.state=p,o.context=l,n=h):(typeof o.componentDidUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===e.memoizedProps&&d===e.memoizedState||(t.flags|=1024),n=!1)}return ac(e,t,i,n,s,r)}function ac(e,t,i,n,r,s){Yy(e,t);var o=(t.flags&128)!==0;if(!n&&!o)return r&&Np(t,i,!1),Di(e,t,s);n=t.stateNode,Lw.current=t;var a=o&&typeof i.getDerivedStateFromError!="function"?null:n.render();return t.flags|=1,e!==null&&o?(t.child=Nr(t,e.child,null,s),t.child=Nr(t,null,a,s)):Jt(e,t,a,s),t.memoizedState=n.state,r&&Np(t,i,!0),t.child}function qy(e){var t=e.stateNode;t.pendingContext?Bp(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Bp(e,t.context,!1),Zd(e,t.containerInfo)}function Qp(e,t,i,n,r){return Br(),Wd(r),t.flags|=256,Jt(e,t,i,n),t.child}var lc={dehydrated:null,treeContext:null,retryLane:0};function hc(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ky(e,t,i){var n=t.pendingProps,r=wt.current,s=!1,o=(t.flags&128)!==0,a;if((a=o)||(a=e!==null&&e.memoizedState===null?!1:(r&2)!==0),a?(s=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(r|=1),dt(wt,r&1),e===null)return ec(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=n.children,e=n.fallback,s?(n=t.mode,s=t.child,o={mode:"hidden",children:o},!(n&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=$l(o,n,0,null),e=kn(e,n,i,null),s.return=t,e.return=t,s.sibling=e,t.child=s,t.child.memoizedState=hc(i),t.memoizedState=lc,e):of(t,o));if(r=e.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return Fw(e,t,o,n,a,r,i);if(s){s=n.fallback,o=t.mode,r=e.child,a=r.sibling;var l={mode:"hidden",children:n.children};return!(o&1)&&t.child!==r?(n=t.child,n.childLanes=0,n.pendingProps=l,t.deletions=null):(n=rn(r,l),n.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=rn(a,s):(s=kn(s,o,i,null),s.flags|=2),s.return=t,n.return=t,n.sibling=s,t.child=n,n=s,s=t.child,o=e.child.memoizedState,o=o===null?hc(i):{baseLanes:o.baseLanes|i,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=e.childLanes&~i,t.memoizedState=lc,n}return s=e.child,e=s.sibling,n=rn(s,{mode:"visible",children:n.children}),!(t.mode&1)&&(n.lanes=i),n.return=t,n.sibling=null,e!==null&&(i=t.deletions,i===null?(t.deletions=[e],t.flags|=16):i.push(e)),t.child=n,t.memoizedState=null,n}function of(e,t){return t=$l({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Go(e,t,i,n){return n!==null&&Wd(n),Nr(t,e.child,null,i),e=of(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Fw(e,t,i,n,r,s,o){if(i)return t.flags&256?(t.flags&=-257,n=zh(Error(D(422))),Go(e,t,o,n)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(s=n.fallback,r=t.mode,n=$l({mode:"visible",children:n.children},r,0,null),s=kn(s,r,o,null),s.flags|=2,n.return=t,s.return=t,n.sibling=s,t.child=n,t.mode&1&&Nr(t,e.child,null,o),t.child.memoizedState=hc(o),t.memoizedState=lc,s);if(!(t.mode&1))return Go(e,t,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var a=n.dgst;return n=a,s=Error(D(419)),n=zh(s,n,void 0),Go(e,t,o,n)}if(a=(o&e.childLanes)!==0,le||a){if(n=Ft,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,Oi(e,r),Ye(n,e,r,-1))}return df(),n=zh(Error(D(421))),Go(e,t,o,n)}return r.data==="$?"?(t.flags|=128,t.child=e.child,t=Zw.bind(null,e),r._reactRetry=t,null):(e=s.treeContext,ve=Ji(r.nextSibling),xe=t,vt=!0,He=null,e!==null&&(Se[Ce++]=Ei,Se[Ce++]=Ti,Se[Ce++]=Nn,Ei=e.id,Ti=e.overflow,Nn=t),t=of(t,n.children),t.flags|=4096,t)}function Jp(e,t,i){e.lanes|=t;var n=e.alternate;n!==null&&(n.lanes|=t),ic(e.return,t,i)}function Gh(e,t,i,n,r){var s=e.memoizedState;s===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:n,tail:i,tailMode:r}:(s.isBackwards=t,s.rendering=null,s.renderingStartTime=0,s.last=n,s.tail=i,s.tailMode=r)}function Zy(e,t,i){var n=t.pendingProps,r=n.revealOrder,s=n.tail;if(Jt(e,t,n.children,i),n=wt.current,n&2)n=n&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)t:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Jp(e,i,t);else if(e.tag===19)Jp(e,i,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break t;for(;e.sibling===null;){if(e.return===null||e.return===t)break t;e=e.return}e.sibling.return=e.return,e=e.sibling}n&=1}if(dt(wt,n),!(t.mode&1))t.memoizedState=null;else switch(r){case"forwards":for(i=t.child,r=null;i!==null;)e=i.alternate,e!==null&&il(e)===null&&(r=i),i=i.sibling;i=r,i===null?(r=t.child,t.child=null):(r=i.sibling,i.sibling=null),Gh(t,!1,r,i,s);break;case"backwards":for(i=null,r=t.child,t.child=null;r!==null;){if(e=r.alternate,e!==null&&il(e)===null){t.child=r;break}e=r.sibling,r.sibling=i,i=r,r=e}Gh(t,!0,i,null,s);break;case"together":Gh(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Ca(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function Di(e,t,i){if(e!==null&&(t.dependencies=e.dependencies),Fn|=t.lanes,!(i&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(D(153));if(t.child!==null){for(e=t.child,i=rn(e,e.pendingProps),t.child=i,i.return=t;e.sibling!==null;)e=e.sibling,i=i.sibling=rn(e,e.pendingProps),i.return=t;i.sibling=null}return t.child}function Uw(e,t,i){switch(t.tag){case 3:qy(t),Br();break;case 5:Ty(t);break;case 1:ue(t.type)&&Ka(t);break;case 4:Zd(t,t.stateNode.containerInfo);break;case 10:var n=t.type._context,r=t.memoizedProps.value;dt(Ja,n._currentValue),n._currentValue=r;break;case 13:if(n=t.memoizedState,n!==null)return n.dehydrated!==null?(dt(wt,wt.current&1),t.flags|=128,null):i&t.child.childLanes?Ky(e,t,i):(dt(wt,wt.current&1),e=Di(e,t,i),e!==null?e.sibling:null);dt(wt,wt.current&1);break;case 19:if(n=(i&t.childLanes)!==0,e.flags&128){if(n)return Zy(e,t,i);t.flags|=128}if(r=t.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),dt(wt,wt.current),n)break;return null;case 22:case 23:return t.lanes=0,Vy(e,t,i)}return Di(e,t,i)}var Qy,uc,Jy,t0;Qy=function(e,t){for(var i=t.child;i!==null;){if(i.tag===5||i.tag===6)e.appendChild(i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===t)break;for(;i.sibling===null;){if(i.return===null||i.return===t)return;i=i.return}i.sibling.return=i.return,i=i.sibling}};uc=function(){};Jy=function(e,t,i,n){var r=e.memoizedProps;if(r!==n){e=t.stateNode,In(di.current);var s=null;switch(i){case"input":r=ku(e,r),n=ku(e,n),s=[];break;case"select":r=Tt({},r,{value:void 0}),n=Tt({},n,{value:void 0}),s=[];break;case"textarea":r=Bu(e,r),n=Bu(e,n),s=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(e.onclick=Ya)}Lu(i,n);var o;i=null;for(h in r)if(!n.hasOwnProperty(h)&&r.hasOwnProperty(h)&&r[h]!=null)if(h==="style"){var a=r[h];for(o in a)a.hasOwnProperty(o)&&(i||(i={}),i[o]="")}else h!=="dangerouslySetInnerHTML"&&h!=="children"&&h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&h!=="autoFocus"&&(zs.hasOwnProperty(h)?s||(s=[]):(s=s||[]).push(h,null));for(h in n){var l=n[h];if(a=r!=null?r[h]:void 0,n.hasOwnProperty(h)&&l!==a&&(l!=null||a!=null))if(h==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(i||(i={}),i[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(i||(i={}),i[o]=l[o])}else i||(s||(s=[]),s.push(h,i)),i=l;else h==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(h,l)):h==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(h,""+l):h!=="suppressContentEditableWarning"&&h!=="suppressHydrationWarning"&&(zs.hasOwnProperty(h)?(l!=null&&h==="onScroll"&&ft("scroll",e),s||a===l||(s=[])):(s=s||[]).push(h,l))}i&&(s=s||[]).push("style",i);var h=s;(t.updateQueue=h)&&(t.flags|=4)}};t0=function(e,t,i,n){i!==n&&(t.flags|=4)};function ss(e,t){if(!vt)switch(e.tailMode){case"hidden":t=e.tail;for(var i=null;t!==null;)t.alternate!==null&&(i=t),t=t.sibling;i===null?e.tail=null:i.sibling=null;break;case"collapsed":i=e.tail;for(var n=null;i!==null;)i.alternate!==null&&(n=i),i=i.sibling;n===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:n.sibling=null}}function Kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,i=0,n=0;if(t)for(var r=e.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=e,r=r.sibling;else for(r=e.child;r!==null;)i|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=e,r=r.sibling;return e.subtreeFlags|=n,e.childLanes=i,t}function zw(e,t,i){var n=t.pendingProps;switch(jd(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(t),null;case 1:return ue(t.type)&&qa(),Kt(t),null;case 3:return n=t.stateNode,Lr(),mt(he),mt(Qt),Jd(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(e===null||e.child===null)&&(Uo(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,He!==null&&(yc(He),He=null))),uc(e,t),Kt(t),null;case 5:Qd(t);var r=In(Qs.current);if(i=t.type,e!==null&&t.stateNode!=null)Jy(e,t,i,n,r),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!n){if(t.stateNode===null)throw Error(D(166));return Kt(t),null}if(e=In(di.current),Uo(t)){n=t.stateNode,i=t.type;var s=t.memoizedProps;switch(n[li]=t,n[Ks]=s,e=(t.mode&1)!==0,i){case"dialog":ft("cancel",n),ft("close",n);break;case"iframe":case"object":case"embed":ft("load",n);break;case"video":case"audio":for(r=0;r<_s.length;r++)ft(_s[r],n);break;case"source":ft("error",n);break;case"img":case"image":case"link":ft("error",n),ft("load",n);break;case"details":ft("toggle",n);break;case"input":lp(n,s),ft("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!s.multiple},ft("invalid",n);break;case"textarea":up(n,s),ft("invalid",n)}Lu(i,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?n.textContent!==a&&(s.suppressHydrationWarning!==!0&&Fo(n.textContent,a,e),r=["children",a]):typeof a=="number"&&n.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Fo(n.textContent,a,e),r=["children",""+a]):zs.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&ft("scroll",n)}switch(i){case"input":Ro(n),hp(n,s,!0);break;case"textarea":Ro(n),cp(n);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(n.onclick=Ya)}n=r,t.updateQueue=n,n!==null&&(t.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=Av(i)),e==="http://www.w3.org/1999/xhtml"?i==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof n.is=="string"?e=o.createElement(i,{is:n.is}):(e=o.createElement(i),i==="select"&&(o=e,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):e=o.createElementNS(e,i),e[li]=t,e[Ks]=n,Qy(e,t,!1,!1),t.stateNode=e;t:{switch(o=Fu(i,n),i){case"dialog":ft("cancel",e),ft("close",e),r=n;break;case"iframe":case"object":case"embed":ft("load",e),r=n;break;case"video":case"audio":for(r=0;r<_s.length;r++)ft(_s[r],e);r=n;break;case"source":ft("error",e),r=n;break;case"img":case"image":case"link":ft("error",e),ft("load",e),r=n;break;case"details":ft("toggle",e),r=n;break;case"input":lp(e,n),r=ku(e,n),ft("invalid",e);break;case"option":r=n;break;case"select":e._wrapperState={wasMultiple:!!n.multiple},r=Tt({},n,{value:void 0}),ft("invalid",e);break;case"textarea":up(e,n),r=Bu(e,n),ft("invalid",e);break;default:r=n}Lu(i,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?Rv(e,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&Pv(e,l)):s==="children"?typeof l=="string"?(i!=="textarea"||l!=="")&&Gs(e,l):typeof l=="number"&&Gs(e,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(zs.hasOwnProperty(s)?l!=null&&s==="onScroll"&&ft("scroll",e):l!=null&&Id(e,s,l,o))}switch(i){case"input":Ro(e),hp(e,n,!1);break;case"textarea":Ro(e),cp(e);break;case"option":n.value!=null&&e.setAttribute("value",""+on(n.value));break;case"select":e.multiple=!!n.multiple,s=n.value,s!=null?wr(e,!!n.multiple,s,!1):n.defaultValue!=null&&wr(e,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(e.onclick=Ya)}switch(i){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break t;case"img":n=!0;break t;default:n=!1}}n&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Kt(t),null;case 6:if(e&&t.stateNode!=null)t0(e,t,e.memoizedProps,n);else{if(typeof n!="string"&&t.stateNode===null)throw Error(D(166));if(i=In(Qs.current),In(di.current),Uo(t)){if(n=t.stateNode,i=t.memoizedProps,n[li]=t,(s=n.nodeValue!==i)&&(e=xe,e!==null))switch(e.tag){case 3:Fo(n.nodeValue,i,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Fo(n.nodeValue,i,(e.mode&1)!==0)}s&&(t.flags|=4)}else n=(i.nodeType===9?i:i.ownerDocument).createTextNode(n),n[li]=t,t.stateNode=n}return Kt(t),null;case 13:if(mt(wt),n=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(vt&&ve!==null&&t.mode&1&&!(t.flags&128))vy(),Br(),t.flags|=98560,s=!1;else if(s=Uo(t),n!==null&&n.dehydrated!==null){if(e===null){if(!s)throw Error(D(318));if(s=t.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(D(317));s[li]=t}else Br(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Kt(t),s=!1}else He!==null&&(yc(He),He=null),s=!0;if(!s)return t.flags&65536?t:null}return t.flags&128?(t.lanes=i,t):(n=n!==null,n!==(e!==null&&e.memoizedState!==null)&&n&&(t.child.flags|=8192,t.mode&1&&(e===null||wt.current&1?Nt===0&&(Nt=3):df())),t.updateQueue!==null&&(t.flags|=4),Kt(t),null);case 4:return Lr(),uc(e,t),e===null&&Ys(t.stateNode.containerInfo),Kt(t),null;case 10:return Yd(t.type._context),Kt(t),null;case 17:return ue(t.type)&&qa(),Kt(t),null;case 19:if(mt(wt),s=t.memoizedState,s===null)return Kt(t),null;if(n=(t.flags&128)!==0,o=s.rendering,o===null)if(n)ss(s,!1);else{if(Nt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=il(e),o!==null){for(t.flags|=128,ss(s,!1),n=o.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),t.subtreeFlags=0,n=i,i=t.child;i!==null;)s=i,e=n,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=e,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,e=o.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),i=i.sibling;return dt(wt,wt.current&1|2),t.child}e=e.sibling}s.tail!==null&&Rt()>Ur&&(t.flags|=128,n=!0,ss(s,!1),t.lanes=4194304)}else{if(!n)if(e=il(o),e!==null){if(t.flags|=128,n=!0,i=e.updateQueue,i!==null&&(t.updateQueue=i,t.flags|=4),ss(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!vt)return Kt(t),null}else 2*Rt()-s.renderingStartTime>Ur&&i!==1073741824&&(t.flags|=128,n=!0,ss(s,!1),t.lanes=4194304);s.isBackwards?(o.sibling=t.child,t.child=o):(i=s.last,i!==null?i.sibling=o:t.child=o,s.last=o)}return s.tail!==null?(t=s.tail,s.rendering=t,s.tail=t.sibling,s.renderingStartTime=Rt(),t.sibling=null,i=wt.current,dt(wt,n?i&1|2:i&1),t):(Kt(t),null);case 22:case 23:return cf(),n=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==n&&(t.flags|=8192),n&&t.mode&1?ge&1073741824&&(Kt(t),t.subtreeFlags&6&&(t.flags|=8192)):Kt(t),null;case 24:return null;case 25:return null}throw Error(D(156,t.tag))}function Gw(e,t){switch(jd(t),t.tag){case 1:return ue(t.type)&&qa(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Lr(),mt(he),mt(Qt),Jd(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Qd(t),null;case 13:if(mt(wt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(D(340));Br()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return mt(wt),null;case 4:return Lr(),null;case 10:return Yd(t.type._context),null;case 22:case 23:return cf(),null;case 24:return null;default:return null}}var $o=!1,Zt=!1,$w=typeof WeakSet=="function"?WeakSet:Set,G=null;function gr(e,t){var i=e.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(n){At(e,t,n)}else i.current=null}function cc(e,t,i){try{i()}catch(n){At(e,t,n)}}var tm=!1;function Hw(e,t){if(Yu=Wa,e=ry(),$d(e)){if("selectionStart"in e)var i={start:e.selectionStart,end:e.selectionEnd};else t:{i=(i=e.ownerDocument)&&i.defaultView||window;var n=i.getSelection&&i.getSelection();if(n&&n.rangeCount!==0){i=n.anchorNode;var r=n.anchorOffset,s=n.focusNode;n=n.focusOffset;try{i.nodeType,s.nodeType}catch{i=null;break t}var o=0,a=-1,l=-1,h=0,u=0,c=e,d=null;e:for(;;){for(var f;c!==i||r!==0&&c.nodeType!==3||(a=o+r),c!==s||n!==0&&c.nodeType!==3||(l=o+n),c.nodeType===3&&(o+=c.nodeValue.length),(f=c.firstChild)!==null;)d=c,c=f;for(;;){if(c===e)break e;if(d===i&&++h===r&&(a=o),d===s&&++u===n&&(l=o),(f=c.nextSibling)!==null)break;c=d,d=c.parentNode}c=f}i=a===-1||l===-1?null:{start:a,end:l}}else i=null}i=i||{start:0,end:0}}else i=null;for(qu={focusedElem:e,selectionRange:i},Wa=!1,G=t;G!==null;)if(t=G,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,G=e;else for(;G!==null;){t=G;try{var p=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,_=p.memoizedState,m=t.stateNode,g=m.getSnapshotBeforeUpdate(t.elementType===t.type?y:ze(t.type,y),_);m.__reactInternalSnapshotBeforeUpdate=g}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(D(163))}}catch(x){At(t,t.return,x)}if(e=t.sibling,e!==null){e.return=t.return,G=e;break}G=t.return}return p=tm,tm=!1,p}function Os(e,t,i){var n=t.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&e)===e){var s=r.destroy;r.destroy=void 0,s!==void 0&&cc(t,i,s)}r=r.next}while(r!==n)}}function zl(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var i=t=t.next;do{if((i.tag&e)===e){var n=i.create;i.destroy=n()}i=i.next}while(i!==t)}}function dc(e){var t=e.ref;if(t!==null){var i=e.stateNode;switch(e.tag){case 5:e=i;break;default:e=i}typeof t=="function"?t(e):t.current=e}}function e0(e){var t=e.alternate;t!==null&&(e.alternate=null,e0(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[li],delete t[Ks],delete t[Qu],delete t[Sw],delete t[Cw])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function i0(e){return e.tag===5||e.tag===3||e.tag===4}function em(e){t:for(;;){for(;e.sibling===null;){if(e.return===null||i0(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue t;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function fc(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?i.nodeType===8?i.parentNode.insertBefore(e,t):i.insertBefore(e,t):(i.nodeType===8?(t=i.parentNode,t.insertBefore(e,i)):(t=i,t.appendChild(e)),i=i._reactRootContainer,i!=null||t.onclick!==null||(t.onclick=Ya));else if(n!==4&&(e=e.child,e!==null))for(fc(e,t,i),e=e.sibling;e!==null;)fc(e,t,i),e=e.sibling}function pc(e,t,i){var n=e.tag;if(n===5||n===6)e=e.stateNode,t?i.insertBefore(e,t):i.appendChild(e);else if(n!==4&&(e=e.child,e!==null))for(pc(e,t,i),e=e.sibling;e!==null;)pc(e,t,i),e=e.sibling}var Gt=null,$e=!1;function Ui(e,t,i){for(i=i.child;i!==null;)n0(e,t,i),i=i.sibling}function n0(e,t,i){if(ci&&typeof ci.onCommitFiberUnmount=="function")try{ci.onCommitFiberUnmount(kl,i)}catch{}switch(i.tag){case 5:Zt||gr(i,t);case 6:var n=Gt,r=$e;Gt=null,Ui(e,t,i),Gt=n,$e=r,Gt!==null&&($e?(e=Gt,i=i.stateNode,e.nodeType===8?e.parentNode.removeChild(i):e.removeChild(i)):Gt.removeChild(i.stateNode));break;case 18:Gt!==null&&($e?(e=Gt,i=i.stateNode,e.nodeType===8?Dh(e.parentNode,i):e.nodeType===1&&Dh(e,i),Ws(e)):Dh(Gt,i.stateNode));break;case 4:n=Gt,r=$e,Gt=i.stateNode.containerInfo,$e=!0,Ui(e,t,i),Gt=n,$e=r;break;case 0:case 11:case 14:case 15:if(!Zt&&(n=i.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&cc(i,t,o),r=r.next}while(r!==n)}Ui(e,t,i);break;case 1:if(!Zt&&(gr(i,t),n=i.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=i.memoizedProps,n.state=i.memoizedState,n.componentWillUnmount()}catch(a){At(i,t,a)}Ui(e,t,i);break;case 21:Ui(e,t,i);break;case 22:i.mode&1?(Zt=(n=Zt)||i.memoizedState!==null,Ui(e,t,i),Zt=n):Ui(e,t,i);break;default:Ui(e,t,i)}}function im(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var i=e.stateNode;i===null&&(i=e.stateNode=new $w),t.forEach(function(n){var r=Qw.bind(null,e,n);i.has(n)||(i.add(n),n.then(r,r))})}}function De(e,t){var i=t.deletions;if(i!==null)for(var n=0;n<i.length;n++){var r=i[n];try{var s=e,o=t,a=o;t:for(;a!==null;){switch(a.tag){case 5:Gt=a.stateNode,$e=!1;break t;case 3:Gt=a.stateNode.containerInfo,$e=!0;break t;case 4:Gt=a.stateNode.containerInfo,$e=!0;break t}a=a.return}if(Gt===null)throw Error(D(160));n0(s,o,r),Gt=null,$e=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(h){At(r,t,h)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)r0(t,e),t=t.sibling}function r0(e,t){var i=e.alternate,n=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(De(t,e),ni(e),n&4){try{Os(3,e,e.return),zl(3,e)}catch(y){At(e,e.return,y)}try{Os(5,e,e.return)}catch(y){At(e,e.return,y)}}break;case 1:De(t,e),ni(e),n&512&&i!==null&&gr(i,i.return);break;case 5:if(De(t,e),ni(e),n&512&&i!==null&&gr(i,i.return),e.flags&32){var r=e.stateNode;try{Gs(r,"")}catch(y){At(e,e.return,y)}}if(n&4&&(r=e.stateNode,r!=null)){var s=e.memoizedProps,o=i!==null?i.memoizedProps:s,a=e.type,l=e.updateQueue;if(e.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&Sv(r,s),Fu(a,o);var h=Fu(a,s);for(o=0;o<l.length;o+=2){var u=l[o],c=l[o+1];u==="style"?Rv(r,c):u==="dangerouslySetInnerHTML"?Pv(r,c):u==="children"?Gs(r,c):Id(r,u,c,h)}switch(a){case"input":Ou(r,s);break;case"textarea":Cv(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?wr(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?wr(r,!!s.multiple,s.defaultValue,!0):wr(r,!!s.multiple,s.multiple?[]:"",!1))}r[Ks]=s}catch(y){At(e,e.return,y)}}break;case 6:if(De(t,e),ni(e),n&4){if(e.stateNode===null)throw Error(D(162));r=e.stateNode,s=e.memoizedProps;try{r.nodeValue=s}catch(y){At(e,e.return,y)}}break;case 3:if(De(t,e),ni(e),n&4&&i!==null&&i.memoizedState.isDehydrated)try{Ws(t.containerInfo)}catch(y){At(e,e.return,y)}break;case 4:De(t,e),ni(e);break;case 13:De(t,e),ni(e),r=e.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(hf=Rt())),n&4&&im(e);break;case 22:if(u=i!==null&&i.memoizedState!==null,e.mode&1?(Zt=(h=Zt)||u,De(t,e),Zt=h):De(t,e),ni(e),n&8192){if(h=e.memoizedState!==null,(e.stateNode.isHidden=h)&&!u&&e.mode&1)for(G=e,u=e.child;u!==null;){for(c=G=u;G!==null;){switch(d=G,f=d.child,d.tag){case 0:case 11:case 14:case 15:Os(4,d,d.return);break;case 1:gr(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){n=d,i=d.return;try{t=n,p.props=t.memoizedProps,p.state=t.memoizedState,p.componentWillUnmount()}catch(y){At(n,i,y)}}break;case 5:gr(d,d.return);break;case 22:if(d.memoizedState!==null){rm(c);continue}}f!==null?(f.return=d,G=f):rm(c)}u=u.sibling}t:for(u=null,c=e;;){if(c.tag===5){if(u===null){u=c;try{r=c.stateNode,h?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=c.stateNode,l=c.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=Iv("display",o))}catch(y){At(e,e.return,y)}}}else if(c.tag===6){if(u===null)try{c.stateNode.nodeValue=h?"":c.memoizedProps}catch(y){At(e,e.return,y)}}else if((c.tag!==22&&c.tag!==23||c.memoizedState===null||c===e)&&c.child!==null){c.child.return=c,c=c.child;continue}if(c===e)break t;for(;c.sibling===null;){if(c.return===null||c.return===e)break t;u===c&&(u=null),c=c.return}u===c&&(u=null),c.sibling.return=c.return,c=c.sibling}}break;case 19:De(t,e),ni(e),n&4&&im(e);break;case 21:break;default:De(t,e),ni(e)}}function ni(e){var t=e.flags;if(t&2){try{t:{for(var i=e.return;i!==null;){if(i0(i)){var n=i;break t}i=i.return}throw Error(D(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Gs(r,""),n.flags&=-33);var s=em(e);pc(e,s,r);break;case 3:case 4:var o=n.stateNode.containerInfo,a=em(e);fc(e,a,o);break;default:throw Error(D(161))}}catch(l){At(e,e.return,l)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function jw(e,t,i){G=e,s0(e)}function s0(e,t,i){for(var n=(e.mode&1)!==0;G!==null;){var r=G,s=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||$o;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||Zt;a=$o;var h=Zt;if($o=o,(Zt=l)&&!h)for(G=r;G!==null;)o=G,l=o.child,o.tag===22&&o.memoizedState!==null?sm(r):l!==null?(l.return=o,G=l):sm(r);for(;s!==null;)G=s,s0(s),s=s.sibling;G=r,$o=a,Zt=h}nm(e)}else r.subtreeFlags&8772&&s!==null?(s.return=r,G=s):nm(e)}}function nm(e){for(;G!==null;){var t=G;if(t.flags&8772){var i=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Zt||zl(5,t);break;case 1:var n=t.stateNode;if(t.flags&4&&!Zt)if(i===null)n.componentDidMount();else{var r=t.elementType===t.type?i.memoizedProps:ze(t.type,i.memoizedProps);n.componentDidUpdate(r,i.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var s=t.updateQueue;s!==null&&zp(t,s,n);break;case 3:var o=t.updateQueue;if(o!==null){if(i=null,t.child!==null)switch(t.child.tag){case 5:i=t.child.stateNode;break;case 1:i=t.child.stateNode}zp(t,o,i)}break;case 5:var a=t.stateNode;if(i===null&&t.flags&4){i=a;var l=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&i.focus();break;case"img":l.src&&(i.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var h=t.alternate;if(h!==null){var u=h.memoizedState;if(u!==null){var c=u.dehydrated;c!==null&&Ws(c)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(D(163))}Zt||t.flags&512&&dc(t)}catch(d){At(t,t.return,d)}}if(t===e){G=null;break}if(i=t.sibling,i!==null){i.return=t.return,G=i;break}G=t.return}}function rm(e){for(;G!==null;){var t=G;if(t===e){G=null;break}var i=t.sibling;if(i!==null){i.return=t.return,G=i;break}G=t.return}}function sm(e){for(;G!==null;){var t=G;try{switch(t.tag){case 0:case 11:case 15:var i=t.return;try{zl(4,t)}catch(l){At(t,i,l)}break;case 1:var n=t.stateNode;if(typeof n.componentDidMount=="function"){var r=t.return;try{n.componentDidMount()}catch(l){At(t,r,l)}}var s=t.return;try{dc(t)}catch(l){At(t,s,l)}break;case 5:var o=t.return;try{dc(t)}catch(l){At(t,o,l)}}}catch(l){At(t,t.return,l)}if(t===e){G=null;break}var a=t.sibling;if(a!==null){a.return=t.return,G=a;break}G=t.return}}var Ww=Math.ceil,sl=Bi.ReactCurrentDispatcher,af=Bi.ReactCurrentOwner,Ie=Bi.ReactCurrentBatchConfig,at=0,Ft=null,kt=null,Wt=0,ge=0,vr=pn(0),Nt=0,io=null,Fn=0,Gl=0,lf=0,Ds=null,ae=null,hf=0,Ur=1/0,wi=null,ol=!1,mc=null,en=null,Ho=!1,Vi=null,al=0,Bs=0,gc=null,Aa=-1,Pa=0;function ie(){return at&6?Rt():Aa!==-1?Aa:Aa=Rt()}function nn(e){return e.mode&1?at&2&&Wt!==0?Wt&-Wt:Pw.transition!==null?(Pa===0&&(Pa=$v()),Pa):(e=ht,e!==0||(e=window.event,e=e===void 0?16:qv(e.type)),e):1}function Ye(e,t,i,n){if(50<Bs)throw Bs=0,gc=null,Error(D(185));vo(e,i,n),(!(at&2)||e!==Ft)&&(e===Ft&&(!(at&2)&&(Gl|=i),Nt===4&&Wi(e,Wt)),ce(e,n),i===1&&at===0&&!(t.mode&1)&&(Ur=Rt()+500,Ll&&mn()))}function ce(e,t){var i=e.callbackNode;P1(e,t);var n=ja(e,e===Ft?Wt:0);if(n===0)i!==null&&pp(i),e.callbackNode=null,e.callbackPriority=0;else if(t=n&-n,e.callbackPriority!==t){if(i!=null&&pp(i),t===1)e.tag===0?Aw(om.bind(null,e)):py(om.bind(null,e)),Ew(function(){!(at&6)&&mn()}),i=null;else{switch(Hv(n)){case 1:i=Dd;break;case 4:i=zv;break;case 16:i=Ha;break;case 536870912:i=Gv;break;default:i=Ha}i=f0(i,o0.bind(null,e))}e.callbackPriority=t,e.callbackNode=i}}function o0(e,t){if(Aa=-1,Pa=0,at&6)throw Error(D(327));var i=e.callbackNode;if(Cr()&&e.callbackNode!==i)return null;var n=ja(e,e===Ft?Wt:0);if(n===0)return null;if(n&30||n&e.expiredLanes||t)t=ll(e,n);else{t=n;var r=at;at|=2;var s=l0();(Ft!==e||Wt!==t)&&(wi=null,Ur=Rt()+500,Mn(e,t));do try{Yw();break}catch(a){a0(e,a)}while(1);Vd(),sl.current=s,at=r,kt!==null?t=0:(Ft=null,Wt=0,t=Nt)}if(t!==0){if(t===2&&(r=Hu(e),r!==0&&(n=r,t=vc(e,r))),t===1)throw i=io,Mn(e,0),Wi(e,n),ce(e,Rt()),i;if(t===6)Wi(e,n);else{if(r=e.current.alternate,!(n&30)&&!Xw(r)&&(t=ll(e,n),t===2&&(s=Hu(e),s!==0&&(n=s,t=vc(e,s))),t===1))throw i=io,Mn(e,0),Wi(e,n),ce(e,Rt()),i;switch(e.finishedWork=r,e.finishedLanes=n,t){case 0:case 1:throw Error(D(345));case 2:wn(e,ae,wi);break;case 3:if(Wi(e,n),(n&130023424)===n&&(t=hf+500-Rt(),10<t)){if(ja(e,0)!==0)break;if(r=e.suspendedLanes,(r&n)!==n){ie(),e.pingedLanes|=e.suspendedLanes&r;break}e.timeoutHandle=Zu(wn.bind(null,e,ae,wi),t);break}wn(e,ae,wi);break;case 4:if(Wi(e,n),(n&4194240)===n)break;for(t=e.eventTimes,r=-1;0<n;){var o=31-Ve(n);s=1<<o,o=t[o],o>r&&(r=o),n&=~s}if(n=r,n=Rt()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Ww(n/1960))-n,10<n){e.timeoutHandle=Zu(wn.bind(null,e,ae,wi),n);break}wn(e,ae,wi);break;case 5:wn(e,ae,wi);break;default:throw Error(D(329))}}}return ce(e,Rt()),e.callbackNode===i?o0.bind(null,e):null}function vc(e,t){var i=Ds;return e.current.memoizedState.isDehydrated&&(Mn(e,t).flags|=256),e=ll(e,t),e!==2&&(t=ae,ae=i,t!==null&&yc(t)),e}function yc(e){ae===null?ae=e:ae.push.apply(ae,e)}function Xw(e){for(var t=e;;){if(t.flags&16384){var i=t.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var n=0;n<i.length;n++){var r=i[n],s=r.getSnapshot;r=r.value;try{if(!Qe(s(),r))return!1}catch{return!1}}}if(i=t.child,t.subtreeFlags&16384&&i!==null)i.return=t,t=i;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Wi(e,t){for(t&=~lf,t&=~Gl,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var i=31-Ve(t),n=1<<i;e[i]=-1,t&=~n}}function om(e){if(at&6)throw Error(D(327));Cr();var t=ja(e,0);if(!(t&1))return ce(e,Rt()),null;var i=ll(e,t);if(e.tag!==0&&i===2){var n=Hu(e);n!==0&&(t=n,i=vc(e,n))}if(i===1)throw i=io,Mn(e,0),Wi(e,t),ce(e,Rt()),i;if(i===6)throw Error(D(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,wn(e,ae,wi),ce(e,Rt()),null}function uf(e,t){var i=at;at|=1;try{return e(t)}finally{at=i,at===0&&(Ur=Rt()+500,Ll&&mn())}}function Un(e){Vi!==null&&Vi.tag===0&&!(at&6)&&Cr();var t=at;at|=1;var i=Ie.transition,n=ht;try{if(Ie.transition=null,ht=1,e)return e()}finally{ht=n,Ie.transition=i,at=t,!(at&6)&&mn()}}function cf(){ge=vr.current,mt(vr)}function Mn(e,t){e.finishedWork=null,e.finishedLanes=0;var i=e.timeoutHandle;if(i!==-1&&(e.timeoutHandle=-1,bw(i)),kt!==null)for(i=kt.return;i!==null;){var n=i;switch(jd(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&qa();break;case 3:Lr(),mt(he),mt(Qt),Jd();break;case 5:Qd(n);break;case 4:Lr();break;case 13:mt(wt);break;case 19:mt(wt);break;case 10:Yd(n.type._context);break;case 22:case 23:cf()}i=i.return}if(Ft=e,kt=e=rn(e.current,null),Wt=ge=t,Nt=0,io=null,lf=Gl=Fn=0,ae=Ds=null,Pn!==null){for(t=0;t<Pn.length;t++)if(i=Pn[t],n=i.interleaved,n!==null){i.interleaved=null;var r=n.next,s=i.pending;if(s!==null){var o=s.next;s.next=r,n.next=o}i.pending=n}Pn=null}return e}function a0(e,t){do{var i=kt;try{if(Vd(),Ta.current=rl,nl){for(var n=Et.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}nl=!1}if(Ln=0,Lt=Bt=Et=null,ks=!1,Js=0,af.current=null,i===null||i.return===null){Nt=1,io=t,kt=null;break}t:{var s=e,o=i.return,a=i,l=t;if(t=Wt,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var h=l,u=a,c=u.tag;if(!(u.mode&1)&&(c===0||c===11||c===15)){var d=u.alternate;d?(u.updateQueue=d.updateQueue,u.memoizedState=d.memoizedState,u.lanes=d.lanes):(u.updateQueue=null,u.memoizedState=null)}var f=Vp(o);if(f!==null){f.flags&=-257,Yp(f,o,a,s,t),f.mode&1&&Xp(s,h,t),t=f,l=h;var p=t.updateQueue;if(p===null){var y=new Set;y.add(l),t.updateQueue=y}else p.add(l);break t}else{if(!(t&1)){Xp(s,h,t),df();break t}l=Error(D(426))}}else if(vt&&a.mode&1){var _=Vp(o);if(_!==null){!(_.flags&65536)&&(_.flags|=256),Yp(_,o,a,s,t),Wd(Fr(l,a));break t}}s=l=Fr(l,a),Nt!==4&&(Nt=2),Ds===null?Ds=[s]:Ds.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,t&=-t,s.lanes|=t;var m=jy(s,l,t);Up(s,m);break t;case 1:a=l;var g=s.type,v=s.stateNode;if(!(s.flags&128)&&(typeof g.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(en===null||!en.has(v)))){s.flags|=65536,t&=-t,s.lanes|=t;var x=Wy(s,a,t);Up(s,x);break t}}s=s.return}while(s!==null)}u0(i)}catch(b){t=b,kt===i&&i!==null&&(kt=i=i.return);continue}break}while(1)}function l0(){var e=sl.current;return sl.current=rl,e===null?rl:e}function df(){(Nt===0||Nt===3||Nt===2)&&(Nt=4),Ft===null||!(Fn&268435455)&&!(Gl&268435455)||Wi(Ft,Wt)}function ll(e,t){var i=at;at|=2;var n=l0();(Ft!==e||Wt!==t)&&(wi=null,Mn(e,t));do try{Vw();break}catch(r){a0(e,r)}while(1);if(Vd(),at=i,sl.current=n,kt!==null)throw Error(D(261));return Ft=null,Wt=0,Nt}function Vw(){for(;kt!==null;)h0(kt)}function Yw(){for(;kt!==null&&!_1();)h0(kt)}function h0(e){var t=d0(e.alternate,e,ge);e.memoizedProps=e.pendingProps,t===null?u0(e):kt=t,af.current=null}function u0(e){var t=e;do{var i=t.alternate;if(e=t.return,t.flags&32768){if(i=Gw(i,t),i!==null){i.flags&=32767,kt=i;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Nt=6,kt=null;return}}else if(i=zw(i,t,ge),i!==null){kt=i;return}if(t=t.sibling,t!==null){kt=t;return}kt=t=e}while(t!==null);Nt===0&&(Nt=5)}function wn(e,t,i){var n=ht,r=Ie.transition;try{Ie.transition=null,ht=1,qw(e,t,i,n)}finally{Ie.transition=r,ht=n}return null}function qw(e,t,i,n){do Cr();while(Vi!==null);if(at&6)throw Error(D(327));i=e.finishedWork;var r=e.finishedLanes;if(i===null)return null;if(e.finishedWork=null,e.finishedLanes=0,i===e.current)throw Error(D(177));e.callbackNode=null,e.callbackPriority=0;var s=i.lanes|i.childLanes;if(I1(e,s),e===Ft&&(kt=Ft=null,Wt=0),!(i.subtreeFlags&2064)&&!(i.flags&2064)||Ho||(Ho=!0,f0(Ha,function(){return Cr(),null})),s=(i.flags&15990)!==0,i.subtreeFlags&15990||s){s=Ie.transition,Ie.transition=null;var o=ht;ht=1;var a=at;at|=4,af.current=null,Hw(e,i),r0(i,e),mw(qu),Wa=!!Yu,qu=Yu=null,e.current=i,jw(i),x1(),at=a,ht=o,Ie.transition=s}else e.current=i;if(Ho&&(Ho=!1,Vi=e,al=r),s=e.pendingLanes,s===0&&(en=null),E1(i.stateNode),ce(e,Rt()),t!==null)for(n=e.onRecoverableError,i=0;i<t.length;i++)r=t[i],n(r.value,{componentStack:r.stack,digest:r.digest});if(ol)throw ol=!1,e=mc,mc=null,e;return al&1&&e.tag!==0&&Cr(),s=e.pendingLanes,s&1?e===gc?Bs++:(Bs=0,gc=e):Bs=0,mn(),null}function Cr(){if(Vi!==null){var e=Hv(al),t=Ie.transition,i=ht;try{if(Ie.transition=null,ht=16>e?16:e,Vi===null)var n=!1;else{if(e=Vi,Vi=null,al=0,at&6)throw Error(D(331));var r=at;for(at|=4,G=e.current;G!==null;){var s=G,o=s.child;if(G.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var h=a[l];for(G=h;G!==null;){var u=G;switch(u.tag){case 0:case 11:case 15:Os(8,u,s)}var c=u.child;if(c!==null)c.return=u,G=c;else for(;G!==null;){u=G;var d=u.sibling,f=u.return;if(e0(u),u===h){G=null;break}if(d!==null){d.return=f,G=d;break}G=f}}}var p=s.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var _=y.sibling;y.sibling=null,y=_}while(y!==null)}}G=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,G=o;else t:for(;G!==null;){if(s=G,s.flags&2048)switch(s.tag){case 0:case 11:case 15:Os(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,G=m;break t}G=s.return}}var g=e.current;for(G=g;G!==null;){o=G;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,G=v;else t:for(o=g;G!==null;){if(a=G,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:zl(9,a)}}catch(b){At(a,a.return,b)}if(a===o){G=null;break t}var x=a.sibling;if(x!==null){x.return=a.return,G=x;break t}G=a.return}}if(at=r,mn(),ci&&typeof ci.onPostCommitFiberRoot=="function")try{ci.onPostCommitFiberRoot(kl,e)}catch{}n=!0}return n}finally{ht=i,Ie.transition=t}}return!1}function am(e,t,i){t=Fr(i,t),t=jy(e,t,1),e=tn(e,t,1),t=ie(),e!==null&&(vo(e,1,t),ce(e,t))}function At(e,t,i){if(e.tag===3)am(e,e,i);else for(;t!==null;){if(t.tag===3){am(t,e,i);break}else if(t.tag===1){var n=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(en===null||!en.has(n))){e=Fr(i,e),e=Wy(t,e,1),t=tn(t,e,1),e=ie(),t!==null&&(vo(t,1,e),ce(t,e));break}}t=t.return}}function Kw(e,t,i){var n=e.pingCache;n!==null&&n.delete(t),t=ie(),e.pingedLanes|=e.suspendedLanes&i,Ft===e&&(Wt&i)===i&&(Nt===4||Nt===3&&(Wt&130023424)===Wt&&500>Rt()-hf?Mn(e,0):lf|=i),ce(e,t)}function c0(e,t){t===0&&(e.mode&1?(t=Oo,Oo<<=1,!(Oo&130023424)&&(Oo=4194304)):t=1);var i=ie();e=Oi(e,t),e!==null&&(vo(e,t,i),ce(e,i))}function Zw(e){var t=e.memoizedState,i=0;t!==null&&(i=t.retryLane),c0(e,i)}function Qw(e,t){var i=0;switch(e.tag){case 13:var n=e.stateNode,r=e.memoizedState;r!==null&&(i=r.retryLane);break;case 19:n=e.stateNode;break;default:throw Error(D(314))}n!==null&&n.delete(t),c0(e,i)}var d0;d0=function(e,t,i){if(e!==null)if(e.memoizedProps!==t.pendingProps||he.current)le=!0;else{if(!(e.lanes&i)&&!(t.flags&128))return le=!1,Uw(e,t,i);le=!!(e.flags&131072)}else le=!1,vt&&t.flags&1048576&&my(t,Qa,t.index);switch(t.lanes=0,t.tag){case 2:var n=t.type;Ca(e,t),e=t.pendingProps;var r=Dr(t,Qt.current);Sr(t,i),r=ef(null,t,n,e,r,i);var s=nf();return t.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,ue(n)?(s=!0,Ka(t)):s=!1,t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Kd(t),r.updater=Fl,t.stateNode=r,r._reactInternals=t,rc(t,n,e,i),t=ac(null,t,n,!0,s,i)):(t.tag=0,vt&&s&&Hd(t),Jt(null,t,r,i),t=t.child),t;case 16:n=t.elementType;t:{switch(Ca(e,t),e=t.pendingProps,r=n._init,n=r(n._payload),t.type=n,r=t.tag=tb(n),e=ze(n,e),r){case 0:t=oc(null,t,n,e,i);break t;case 1:t=Zp(null,t,n,e,i);break t;case 11:t=qp(null,t,n,e,i);break t;case 14:t=Kp(null,t,n,ze(n.type,e),i);break t}throw Error(D(306,n,""))}return t;case 0:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:ze(n,r),oc(e,t,n,r,i);case 1:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:ze(n,r),Zp(e,t,n,r,i);case 3:t:{if(qy(t),e===null)throw Error(D(387));n=t.pendingProps,s=t.memoizedState,r=s.element,_y(e,t),el(t,n,null,i);var o=t.memoizedState;if(n=o.element,s.isDehydrated)if(s={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=s,t.memoizedState=s,t.flags&256){r=Fr(Error(D(423)),t),t=Qp(e,t,n,i,r);break t}else if(n!==r){r=Fr(Error(D(424)),t),t=Qp(e,t,n,i,r);break t}else for(ve=Ji(t.stateNode.containerInfo.firstChild),xe=t,vt=!0,He=null,i=Ey(t,null,n,i),t.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Br(),n===r){t=Di(e,t,i);break t}Jt(e,t,n,i)}t=t.child}return t;case 5:return Ty(t),e===null&&ec(t),n=t.type,r=t.pendingProps,s=e!==null?e.memoizedProps:null,o=r.children,Ku(n,r)?o=null:s!==null&&Ku(n,s)&&(t.flags|=32),Yy(e,t),Jt(e,t,o,i),t.child;case 6:return e===null&&ec(t),null;case 13:return Ky(e,t,i);case 4:return Zd(t,t.stateNode.containerInfo),n=t.pendingProps,e===null?t.child=Nr(t,null,n,i):Jt(e,t,n,i),t.child;case 11:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:ze(n,r),qp(e,t,n,r,i);case 7:return Jt(e,t,t.pendingProps,i),t.child;case 8:return Jt(e,t,t.pendingProps.children,i),t.child;case 12:return Jt(e,t,t.pendingProps.children,i),t.child;case 10:t:{if(n=t.type._context,r=t.pendingProps,s=t.memoizedProps,o=r.value,dt(Ja,n._currentValue),n._currentValue=o,s!==null)if(Qe(s.value,o)){if(s.children===r.children&&!he.current){t=Di(e,t,i);break t}}else for(s=t.child,s!==null&&(s.return=t);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===n){if(s.tag===1){l=Ai(-1,i&-i),l.tag=2;var h=s.updateQueue;if(h!==null){h=h.shared;var u=h.pending;u===null?l.next=l:(l.next=u.next,u.next=l),h.pending=l}}s.lanes|=i,l=s.alternate,l!==null&&(l.lanes|=i),ic(s.return,i,t),a.lanes|=i;break}l=l.next}}else if(s.tag===10)o=s.type===t.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(D(341));o.lanes|=i,a=o.alternate,a!==null&&(a.lanes|=i),ic(o,i,t),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===t){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}Jt(e,t,r.children,i),t=t.child}return t;case 9:return r=t.type,n=t.pendingProps.children,Sr(t,i),r=Re(r),n=n(r),t.flags|=1,Jt(e,t,n,i),t.child;case 14:return n=t.type,r=ze(n,t.pendingProps),r=ze(n.type,r),Kp(e,t,n,r,i);case 15:return Xy(e,t,t.type,t.pendingProps,i);case 17:return n=t.type,r=t.pendingProps,r=t.elementType===n?r:ze(n,r),Ca(e,t),t.tag=1,ue(n)?(e=!0,Ka(t)):e=!1,Sr(t,i),wy(t,n,r),rc(t,n,r,i),ac(null,t,n,!0,e,i);case 19:return Zy(e,t,i);case 22:return Vy(e,t,i)}throw Error(D(156,t.tag))};function f0(e,t){return Uv(e,t)}function Jw(e,t,i,n){this.tag=e,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ae(e,t,i,n){return new Jw(e,t,i,n)}function ff(e){return e=e.prototype,!(!e||!e.isReactComponent)}function tb(e){if(typeof e=="function")return ff(e)?1:0;if(e!=null){if(e=e.$$typeof,e===Md)return 11;if(e===kd)return 14}return 2}function rn(e,t){var i=e.alternate;return i===null?(i=Ae(e.tag,t,e.key,e.mode),i.elementType=e.elementType,i.type=e.type,i.stateNode=e.stateNode,i.alternate=e,e.alternate=i):(i.pendingProps=t,i.type=e.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=e.flags&14680064,i.childLanes=e.childLanes,i.lanes=e.lanes,i.child=e.child,i.memoizedProps=e.memoizedProps,i.memoizedState=e.memoizedState,i.updateQueue=e.updateQueue,t=e.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},i.sibling=e.sibling,i.index=e.index,i.ref=e.ref,i}function Ia(e,t,i,n,r,s){var o=2;if(n=e,typeof e=="function")ff(e)&&(o=1);else if(typeof e=="string")o=5;else t:switch(e){case ar:return kn(i.children,r,s,t);case Rd:o=8,r|=8;break;case Pu:return e=Ae(12,i,t,r|2),e.elementType=Pu,e.lanes=s,e;case Iu:return e=Ae(13,i,t,r),e.elementType=Iu,e.lanes=s,e;case Ru:return e=Ae(19,i,t,r),e.elementType=Ru,e.lanes=s,e;case bv:return $l(i,r,s,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case xv:o=10;break t;case wv:o=9;break t;case Md:o=11;break t;case kd:o=14;break t;case $i:o=16,n=null;break t}throw Error(D(130,e==null?e:typeof e,""))}return t=Ae(o,i,t,r),t.elementType=e,t.type=n,t.lanes=s,t}function kn(e,t,i,n){return e=Ae(7,e,n,t),e.lanes=i,e}function $l(e,t,i,n){return e=Ae(22,e,n,t),e.elementType=bv,e.lanes=i,e.stateNode={isHidden:!1},e}function $h(e,t,i){return e=Ae(6,e,null,t),e.lanes=i,e}function Hh(e,t,i){return t=Ae(4,e.children!==null?e.children:[],e.key,t),t.lanes=i,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function eb(e,t,i,n,r){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Eh(0),this.expirationTimes=Eh(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Eh(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function pf(e,t,i,n,r,s,o,a,l){return e=new eb(e,t,i,a,l),t===1?(t=1,s===!0&&(t|=8)):t=0,s=Ae(3,null,null,t),e.current=s,s.stateNode=e,s.memoizedState={element:n,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},Kd(s),e}function ib(e,t,i){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:or,key:n==null?null:""+n,children:e,containerInfo:t,implementation:i}}function p0(e){if(!e)return an;e=e._reactInternals;t:{if(Vn(e)!==e||e.tag!==1)throw Error(D(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break t;case 1:if(ue(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break t}}t=t.return}while(t!==null);throw Error(D(171))}if(e.tag===1){var i=e.type;if(ue(i))return fy(e,i,t)}return t}function m0(e,t,i,n,r,s,o,a,l){return e=pf(i,n,!0,e,r,s,o,a,l),e.context=p0(null),i=e.current,n=ie(),r=nn(i),s=Ai(n,r),s.callback=t??null,tn(i,s,r),e.current.lanes=r,vo(e,r,n),ce(e,n),e}function Hl(e,t,i,n){var r=t.current,s=ie(),o=nn(r);return i=p0(i),t.context===null?t.context=i:t.pendingContext=i,t=Ai(s,o),t.payload={element:e},n=n===void 0?null:n,n!==null&&(t.callback=n),e=tn(r,t,o),e!==null&&(Ye(e,r,o,s),Ea(e,r,o)),o}function hl(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function lm(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var i=e.retryLane;e.retryLane=i!==0&&i<t?i:t}}function mf(e,t){lm(e,t),(e=e.alternate)&&lm(e,t)}function nb(){return null}var g0=typeof reportError=="function"?reportError:function(e){console.error(e)};function gf(e){this._internalRoot=e}jl.prototype.render=gf.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(D(409));Hl(e,t,null,null)};jl.prototype.unmount=gf.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Un(function(){Hl(null,e,null,null)}),t[ki]=null}};function jl(e){this._internalRoot=e}jl.prototype.unstable_scheduleHydration=function(e){if(e){var t=Xv();e={blockedOn:null,target:e,priority:t};for(var i=0;i<ji.length&&t!==0&&t<ji[i].priority;i++);ji.splice(i,0,e),i===0&&Yv(e)}};function vf(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Wl(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function hm(){}function rb(e,t,i,n,r){if(r){if(typeof n=="function"){var s=n;n=function(){var h=hl(o);s.call(h)}}var o=m0(t,n,e,0,null,!1,!1,"",hm);return e._reactRootContainer=o,e[ki]=o.current,Ys(e.nodeType===8?e.parentNode:e),Un(),o}for(;r=e.lastChild;)e.removeChild(r);if(typeof n=="function"){var a=n;n=function(){var h=hl(l);a.call(h)}}var l=pf(e,0,!1,null,null,!1,!1,"",hm);return e._reactRootContainer=l,e[ki]=l.current,Ys(e.nodeType===8?e.parentNode:e),Un(function(){Hl(t,l,i,n)}),l}function Xl(e,t,i,n,r){var s=i._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=hl(o);a.call(l)}}Hl(t,o,e,r)}else o=rb(i,t,e,r,n);return hl(o)}jv=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var i=ys(t.pendingLanes);i!==0&&(Bd(t,i|1),ce(t,Rt()),!(at&6)&&(Ur=Rt()+500,mn()))}break;case 13:Un(function(){var n=Oi(e,1);if(n!==null){var r=ie();Ye(n,e,1,r)}}),mf(e,1)}};Nd=function(e){if(e.tag===13){var t=Oi(e,134217728);if(t!==null){var i=ie();Ye(t,e,134217728,i)}mf(e,134217728)}};Wv=function(e){if(e.tag===13){var t=nn(e),i=Oi(e,t);if(i!==null){var n=ie();Ye(i,e,t,n)}mf(e,t)}};Xv=function(){return ht};Vv=function(e,t){var i=ht;try{return ht=e,t()}finally{ht=i}};zu=function(e,t,i){switch(t){case"input":if(Ou(e,i),t=i.name,i.type==="radio"&&t!=null){for(i=e;i.parentNode;)i=i.parentNode;for(i=i.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<i.length;t++){var n=i[t];if(n!==e&&n.form===e.form){var r=Nl(n);if(!r)throw Error(D(90));Tv(n),Ou(n,r)}}}break;case"textarea":Cv(e,i);break;case"select":t=i.value,t!=null&&wr(e,!!i.multiple,t,!1)}};Ov=uf;Dv=Un;var sb={usingClientEntryPoint:!1,Events:[_o,cr,Nl,Mv,kv,uf]},os={findFiberByHostInstance:An,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},ob={bundleType:os.bundleType,version:os.version,rendererPackageName:os.rendererPackageName,rendererConfig:os.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:Bi.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Lv(e),e===null?null:e.stateNode},findFiberByHostInstance:os.findFiberByHostInstance||nb,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var jo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!jo.isDisabled&&jo.supportsFiber)try{kl=jo.inject(ob),ci=jo}catch{}}Ee.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sb;Ee.createPortal=function(e,t){var i=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vf(t))throw Error(D(200));return ib(e,t,null,i)};Ee.createRoot=function(e,t){if(!vf(e))throw Error(D(299));var i=!1,n="",r=g0;return t!=null&&(t.unstable_strictMode===!0&&(i=!0),t.identifierPrefix!==void 0&&(n=t.identifierPrefix),t.onRecoverableError!==void 0&&(r=t.onRecoverableError)),t=pf(e,1,!1,null,null,i,!1,n,r),e[ki]=t.current,Ys(e.nodeType===8?e.parentNode:e),new gf(t)};Ee.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(D(188)):(e=Object.keys(e).join(","),Error(D(268,e)));return e=Lv(t),e=e===null?null:e.stateNode,e};Ee.flushSync=function(e){return Un(e)};Ee.hydrate=function(e,t,i){if(!Wl(t))throw Error(D(200));return Xl(null,e,t,!0,i)};Ee.hydrateRoot=function(e,t,i){if(!vf(e))throw Error(D(405));var n=i!=null&&i.hydratedSources||null,r=!1,s="",o=g0;if(i!=null&&(i.unstable_strictMode===!0&&(r=!0),i.identifierPrefix!==void 0&&(s=i.identifierPrefix),i.onRecoverableError!==void 0&&(o=i.onRecoverableError)),t=m0(t,null,e,1,i??null,r,!1,s,o),e[ki]=t.current,Ys(e),n)for(e=0;e<n.length;e++)i=n[e],r=i._getVersion,r=r(i._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[i,r]:t.mutableSourceEagerHydrationData.push(i,r);return new jl(t)};Ee.render=function(e,t,i){if(!Wl(t))throw Error(D(200));return Xl(null,e,t,!1,i)};Ee.unmountComponentAtNode=function(e){if(!Wl(e))throw Error(D(40));return e._reactRootContainer?(Un(function(){Xl(null,null,e,!1,function(){e._reactRootContainer=null,e[ki]=null})}),!0):!1};Ee.unstable_batchedUpdates=uf;Ee.unstable_renderSubtreeIntoContainer=function(e,t,i,n){if(!Wl(i))throw Error(D(200));if(e==null||e._reactInternals===void 0)throw Error(D(38));return Xl(e,t,i,!1,n)};Ee.version="18.2.0-next-9e3b772b8-20220608";(function(e){function t(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(t)}catch(i){console.error(i)}}t(),e.exports=Ee})(n1);var um=Su;Tu.createRoot=um.createRoot,Tu.hydrateRoot=um.hydrateRoot;var ab=typeof global=="object"&&global&&global.Object===Object&&global;const v0=ab;var lb=typeof self=="object"&&self&&self.Object===Object&&self,hb=v0||lb||Function("return this")();const vi=hb;var ub=vi.Symbol;const ke=ub;var y0=Object.prototype,cb=y0.hasOwnProperty,db=y0.toString,as=ke?ke.toStringTag:void 0;function fb(e){var t=cb.call(e,as),i=e[as];try{e[as]=void 0;var n=!0}catch{}var r=db.call(e);return n&&(t?e[as]=i:delete e[as]),r}var pb=Object.prototype,mb=pb.toString;function gb(e){return mb.call(e)}var vb="[object Null]",yb="[object Undefined]",cm=ke?ke.toStringTag:void 0;function gn(e){return e==null?e===void 0?yb:vb:cm&&cm in Object(e)?fb(e):gb(e)}function Je(e){return e!=null&&typeof e=="object"}var _b="[object Symbol]";function Vl(e){return typeof e=="symbol"||Je(e)&&gn(e)==_b}function wo(e,t){for(var i=-1,n=e==null?0:e.length,r=Array(n);++i<n;)r[i]=t(e[i],i,e);return r}var xb=Array.isArray;const Ut=xb;var wb=1/0,dm=ke?ke.prototype:void 0,fm=dm?dm.toString:void 0;function _0(e){if(typeof e=="string")return e;if(Ut(e))return wo(e,_0)+"";if(Vl(e))return fm?fm.call(e):"";var t=e+"";return t=="0"&&1/e==-wb?"-0":t}var bb=/\s/;function Eb(e){for(var t=e.length;t--&&bb.test(e.charAt(t)););return t}var Tb=/^\s+/;function Sb(e){return e&&e.slice(0,Eb(e)+1).replace(Tb,"")}function ln(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var pm=0/0,Cb=/^[-+]0x[0-9a-f]+$/i,Ab=/^0b[01]+$/i,Pb=/^0o[0-7]+$/i,Ib=parseInt;function Rb(e){if(typeof e=="number")return e;if(Vl(e))return pm;if(ln(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=ln(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Sb(e);var i=Ab.test(e);return i||Pb.test(e)?Ib(e.slice(2),i?2:8):Cb.test(e)?pm:+e}var mm=1/0,Mb=17976931348623157e292;function kb(e){if(!e)return e===0?e:0;if(e=Rb(e),e===mm||e===-mm){var t=e<0?-1:1;return t*Mb}return e===e?e:0}function yf(e){var t=kb(e),i=t%1;return t===t?i?t-i:t:0}function Yl(e){return e}var Ob="[object AsyncFunction]",Db="[object Function]",Bb="[object GeneratorFunction]",Nb="[object Proxy]";function bo(e){if(!ln(e))return!1;var t=gn(e);return t==Db||t==Bb||t==Ob||t==Nb}var Lb=vi["__core-js_shared__"];const jh=Lb;var gm=function(){var e=/[^.]+$/.exec(jh&&jh.keys&&jh.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function Fb(e){return!!gm&&gm in e}var Ub=Function.prototype,zb=Ub.toString;function Yn(e){if(e!=null){try{return zb.call(e)}catch{}try{return e+""}catch{}}return""}var Gb=/[\\^$.*+?()[\]{}|]/g,$b=/^\[object .+?Constructor\]$/,Hb=Function.prototype,jb=Object.prototype,Wb=Hb.toString,Xb=jb.hasOwnProperty,Vb=RegExp("^"+Wb.call(Xb).replace(Gb,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function Yb(e){if(!ln(e)||Fb(e))return!1;var t=bo(e)?Vb:$b;return t.test(Yn(e))}function qb(e,t){return e==null?void 0:e[t]}function qn(e,t){var i=qb(e,t);return Yb(i)?i:void 0}var Kb=qn(vi,"WeakMap");const _c=Kb;var vm=Object.create,Zb=function(){function e(){}return function(t){if(!ln(t))return{};if(vm)return vm(t);e.prototype=t;var i=new e;return e.prototype=void 0,i}}();const Qb=Zb;function Jb(e,t,i){switch(i.length){case 0:return e.call(t);case 1:return e.call(t,i[0]);case 2:return e.call(t,i[0],i[1]);case 3:return e.call(t,i[0],i[1],i[2])}return e.apply(t,i)}function tE(){}function x0(e,t){var i=-1,n=e.length;for(t||(t=Array(n));++i<n;)t[i]=e[i];return t}var eE=800,iE=16,nE=Date.now;function rE(e){var t=0,i=0;return function(){var n=nE(),r=iE-(n-i);if(i=n,r>0){if(++t>=eE)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}function sE(e){return function(){return e}}var oE=function(){try{var e=qn(Object,"defineProperty");return e({},"",{}),e}catch{}}();const ul=oE;var aE=ul?function(e,t){return ul(e,"toString",{configurable:!0,enumerable:!1,value:sE(t),writable:!0})}:Yl;const lE=aE;var hE=rE(lE);const uE=hE;function w0(e,t){for(var i=-1,n=e==null?0:e.length;++i<n&&t(e[i],i,e)!==!1;);return e}function b0(e,t,i,n){for(var r=e.length,s=i+(n?1:-1);n?s--:++s<r;)if(t(e[s],s,e))return s;return-1}function cE(e){return e!==e}function dE(e,t,i){for(var n=i-1,r=e.length;++n<r;)if(e[n]===t)return n;return-1}function E0(e,t,i){return t===t?dE(e,t,i):b0(e,cE,i)}function T0(e,t){var i=e==null?0:e.length;return!!i&&E0(e,t,0)>-1}var fE=9007199254740991,pE=/^(?:0|[1-9]\d*)$/;function S0(e,t){var i=typeof e;return t=t??fE,!!t&&(i=="number"||i!="symbol"&&pE.test(e))&&e>-1&&e%1==0&&e<t}function _f(e,t,i){t=="__proto__"&&ul?ul(e,t,{configurable:!0,enumerable:!0,value:i,writable:!0}):e[t]=i}function xf(e,t){return e===t||e!==e&&t!==t}var mE=Object.prototype,gE=mE.hasOwnProperty;function C0(e,t,i){var n=e[t];(!(gE.call(e,t)&&xf(n,i))||i===void 0&&!(t in e))&&_f(e,t,i)}function ql(e,t,i,n){var r=!i;i||(i={});for(var s=-1,o=t.length;++s<o;){var a=t[s],l=n?n(i[a],e[a],a,i,e):void 0;l===void 0&&(l=e[a]),r?_f(i,a,l):C0(i,a,l)}return i}var ym=Math.max;function vE(e,t,i){return t=ym(t===void 0?e.length-1:t,0),function(){for(var n=arguments,r=-1,s=ym(n.length-t,0),o=Array(s);++r<s;)o[r]=n[t+r];r=-1;for(var a=Array(t+1);++r<t;)a[r]=n[r];return a[t]=i(o),Jb(e,this,a)}}function yE(e,t){return uE(vE(e,t,Yl),e+"")}var _E=9007199254740991;function wf(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=_E}function Kn(e){return e!=null&&wf(e.length)&&!bo(e)}var xE=Object.prototype;function bf(e){var t=e&&e.constructor,i=typeof t=="function"&&t.prototype||xE;return e===i}function A0(e,t){for(var i=-1,n=Array(e);++i<e;)n[i]=t(i);return n}var wE="[object Arguments]";function _m(e){return Je(e)&&gn(e)==wE}var P0=Object.prototype,bE=P0.hasOwnProperty,EE=P0.propertyIsEnumerable,TE=_m(function(){return arguments}())?_m:function(e){return Je(e)&&bE.call(e,"callee")&&!EE.call(e,"callee")};const Ef=TE;function SE(){return!1}var I0=typeof ye=="object"&&ye&&!ye.nodeType&&ye,xm=I0&&typeof _e=="object"&&_e&&!_e.nodeType&&_e,CE=xm&&xm.exports===I0,wm=CE?vi.Buffer:void 0,AE=wm?wm.isBuffer:void 0,PE=AE||SE;const cl=PE;var IE="[object Arguments]",RE="[object Array]",ME="[object Boolean]",kE="[object Date]",OE="[object Error]",DE="[object Function]",BE="[object Map]",NE="[object Number]",LE="[object Object]",FE="[object RegExp]",UE="[object Set]",zE="[object String]",GE="[object WeakMap]",$E="[object ArrayBuffer]",HE="[object DataView]",jE="[object Float32Array]",WE="[object Float64Array]",XE="[object Int8Array]",VE="[object Int16Array]",YE="[object Int32Array]",qE="[object Uint8Array]",KE="[object Uint8ClampedArray]",ZE="[object Uint16Array]",QE="[object Uint32Array]",pt={};pt[jE]=pt[WE]=pt[XE]=pt[VE]=pt[YE]=pt[qE]=pt[KE]=pt[ZE]=pt[QE]=!0;pt[IE]=pt[RE]=pt[$E]=pt[ME]=pt[HE]=pt[kE]=pt[OE]=pt[DE]=pt[BE]=pt[NE]=pt[LE]=pt[FE]=pt[UE]=pt[zE]=pt[GE]=!1;function JE(e){return Je(e)&&wf(e.length)&&!!pt[gn(e)]}function Kl(e){return function(t){return e(t)}}var R0=typeof ye=="object"&&ye&&!ye.nodeType&&ye,Ns=R0&&typeof _e=="object"&&_e&&!_e.nodeType&&_e,tT=Ns&&Ns.exports===R0,Wh=tT&&v0.process,eT=function(){try{var e=Ns&&Ns.require&&Ns.require("util").types;return e||Wh&&Wh.binding&&Wh.binding("util")}catch{}}();const zr=eT;var bm=zr&&zr.isTypedArray,iT=bm?Kl(bm):JE;const M0=iT;var nT=Object.prototype,rT=nT.hasOwnProperty;function k0(e,t){var i=Ut(e),n=!i&&Ef(e),r=!i&&!n&&cl(e),s=!i&&!n&&!r&&M0(e),o=i||n||r||s,a=o?A0(e.length,String):[],l=a.length;for(var h in e)(t||rT.call(e,h))&&!(o&&(h=="length"||r&&(h=="offset"||h=="parent")||s&&(h=="buffer"||h=="byteLength"||h=="byteOffset")||S0(h,l)))&&a.push(h);return a}function O0(e,t){return function(i){return e(t(i))}}var sT=O0(Object.keys,Object);const oT=sT;var aT=Object.prototype,lT=aT.hasOwnProperty;function hT(e){if(!bf(e))return oT(e);var t=[];for(var i in Object(e))lT.call(e,i)&&i!="constructor"&&t.push(i);return t}function Zn(e){return Kn(e)?k0(e):hT(e)}function uT(e){var t=[];if(e!=null)for(var i in Object(e))t.push(i);return t}var cT=Object.prototype,dT=cT.hasOwnProperty;function fT(e){if(!ln(e))return uT(e);var t=bf(e),i=[];for(var n in e)n=="constructor"&&(t||!dT.call(e,n))||i.push(n);return i}function Tf(e){return Kn(e)?k0(e,!0):fT(e)}var pT=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,mT=/^\w*$/;function Sf(e,t){if(Ut(e))return!1;var i=typeof e;return i=="number"||i=="symbol"||i=="boolean"||e==null||Vl(e)?!0:mT.test(e)||!pT.test(e)||t!=null&&e in Object(t)}var gT=qn(Object,"create");const no=gT;function vT(){this.__data__=no?no(null):{},this.size=0}function yT(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var _T="__lodash_hash_undefined__",xT=Object.prototype,wT=xT.hasOwnProperty;function bT(e){var t=this.__data__;if(no){var i=t[e];return i===_T?void 0:i}return wT.call(t,e)?t[e]:void 0}var ET=Object.prototype,TT=ET.hasOwnProperty;function ST(e){var t=this.__data__;return no?t[e]!==void 0:TT.call(t,e)}var CT="__lodash_hash_undefined__";function AT(e,t){var i=this.__data__;return this.size+=this.has(e)?0:1,i[e]=no&&t===void 0?CT:t,this}function zn(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}zn.prototype.clear=vT;zn.prototype.delete=yT;zn.prototype.get=bT;zn.prototype.has=ST;zn.prototype.set=AT;function PT(){this.__data__=[],this.size=0}function Zl(e,t){for(var i=e.length;i--;)if(xf(e[i][0],t))return i;return-1}var IT=Array.prototype,RT=IT.splice;function MT(e){var t=this.__data__,i=Zl(t,e);if(i<0)return!1;var n=t.length-1;return i==n?t.pop():RT.call(t,i,1),--this.size,!0}function kT(e){var t=this.__data__,i=Zl(t,e);return i<0?void 0:t[i][1]}function OT(e){return Zl(this.__data__,e)>-1}function DT(e,t){var i=this.__data__,n=Zl(i,e);return n<0?(++this.size,i.push([e,t])):i[n][1]=t,this}function Ni(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Ni.prototype.clear=PT;Ni.prototype.delete=MT;Ni.prototype.get=kT;Ni.prototype.has=OT;Ni.prototype.set=DT;var BT=qn(vi,"Map");const ro=BT;function NT(){this.size=0,this.__data__={hash:new zn,map:new(ro||Ni),string:new zn}}function LT(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}function Ql(e,t){var i=e.__data__;return LT(t)?i[typeof t=="string"?"string":"hash"]:i.map}function FT(e){var t=Ql(this,e).delete(e);return this.size-=t?1:0,t}function UT(e){return Ql(this,e).get(e)}function zT(e){return Ql(this,e).has(e)}function GT(e,t){var i=Ql(this,e),n=i.size;return i.set(e,t),this.size+=i.size==n?0:1,this}function Li(e){var t=-1,i=e==null?0:e.length;for(this.clear();++t<i;){var n=e[t];this.set(n[0],n[1])}}Li.prototype.clear=NT;Li.prototype.delete=FT;Li.prototype.get=UT;Li.prototype.has=zT;Li.prototype.set=GT;var $T="Expected a function";function Cf(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError($T);var i=function(){var n=arguments,r=t?t.apply(this,n):n[0],s=i.cache;if(s.has(r))return s.get(r);var o=e.apply(this,n);return i.cache=s.set(r,o)||s,o};return i.cache=new(Cf.Cache||Li),i}Cf.Cache=Li;var HT=500;function jT(e){var t=Cf(e,function(n){return i.size===HT&&i.clear(),n}),i=t.cache;return t}var WT=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,XT=/\\(\\)?/g,VT=jT(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(WT,function(i,n,r,s){t.push(r?s.replace(XT,"$1"):n||i)}),t});const YT=VT;function qT(e){return e==null?"":_0(e)}function D0(e,t){return Ut(e)?e:Sf(e,t)?[e]:YT(qT(e))}var KT=1/0;function Jl(e){if(typeof e=="string"||Vl(e))return e;var t=e+"";return t=="0"&&1/e==-KT?"-0":t}function B0(e,t){t=D0(t,e);for(var i=0,n=t.length;e!=null&&i<n;)e=e[Jl(t[i++])];return i&&i==n?e:void 0}function ZT(e,t,i){var n=e==null?void 0:B0(e,t);return n===void 0?i:n}function th(e,t){for(var i=-1,n=t.length,r=e.length;++i<n;)e[r+i]=t[i];return e}var Em=ke?ke.isConcatSpreadable:void 0;function QT(e){return Ut(e)||Ef(e)||!!(Em&&e&&e[Em])}function N0(e,t,i,n,r){var s=-1,o=e.length;for(i||(i=QT),r||(r=[]);++s<o;){var a=e[s];t>0&&i(a)?t>1?N0(a,t-1,i,n,r):th(r,a):n||(r[r.length]=a)}return r}var JT=O0(Object.getPrototypeOf,Object);const L0=JT;function tS(e,t,i,n){var r=-1,s=e==null?0:e.length;for(n&&s&&(i=e[++r]);++r<s;)i=t(i,e[r],r,e);return i}function eS(){this.__data__=new Ni,this.size=0}function iS(e){var t=this.__data__,i=t.delete(e);return this.size=t.size,i}function nS(e){return this.__data__.get(e)}function rS(e){return this.__data__.has(e)}var sS=200;function oS(e,t){var i=this.__data__;if(i instanceof Ni){var n=i.__data__;if(!ro||n.length<sS-1)return n.push([e,t]),this.size=++i.size,this;i=this.__data__=new Li(n)}return i.set(e,t),this.size=i.size,this}function fi(e){var t=this.__data__=new Ni(e);this.size=t.size}fi.prototype.clear=eS;fi.prototype.delete=iS;fi.prototype.get=nS;fi.prototype.has=rS;fi.prototype.set=oS;function aS(e,t){return e&&ql(t,Zn(t),e)}function lS(e,t){return e&&ql(t,Tf(t),e)}var F0=typeof ye=="object"&&ye&&!ye.nodeType&&ye,Tm=F0&&typeof _e=="object"&&_e&&!_e.nodeType&&_e,hS=Tm&&Tm.exports===F0,Sm=hS?vi.Buffer:void 0,Cm=Sm?Sm.allocUnsafe:void 0;function uS(e,t){if(t)return e.slice();var i=e.length,n=Cm?Cm(i):new e.constructor(i);return e.copy(n),n}function U0(e,t){for(var i=-1,n=e==null?0:e.length,r=0,s=[];++i<n;){var o=e[i];t(o,i,e)&&(s[r++]=o)}return s}function z0(){return[]}var cS=Object.prototype,dS=cS.propertyIsEnumerable,Am=Object.getOwnPropertySymbols,fS=Am?function(e){return e==null?[]:(e=Object(e),U0(Am(e),function(t){return dS.call(e,t)}))}:z0;const Af=fS;function pS(e,t){return ql(e,Af(e),t)}var mS=Object.getOwnPropertySymbols,gS=mS?function(e){for(var t=[];e;)th(t,Af(e)),e=L0(e);return t}:z0;const G0=gS;function vS(e,t){return ql(e,G0(e),t)}function $0(e,t,i){var n=t(e);return Ut(e)?n:th(n,i(e))}function xc(e){return $0(e,Zn,Af)}function yS(e){return $0(e,Tf,G0)}var _S=qn(vi,"DataView");const wc=_S;var xS=qn(vi,"Promise");const bc=xS;var wS=qn(vi,"Set");const Ar=wS;var Pm="[object Map]",bS="[object Object]",Im="[object Promise]",Rm="[object Set]",Mm="[object WeakMap]",km="[object DataView]",ES=Yn(wc),TS=Yn(ro),SS=Yn(bc),CS=Yn(Ar),AS=Yn(_c),bn=gn;(wc&&bn(new wc(new ArrayBuffer(1)))!=km||ro&&bn(new ro)!=Pm||bc&&bn(bc.resolve())!=Im||Ar&&bn(new Ar)!=Rm||_c&&bn(new _c)!=Mm)&&(bn=function(e){var t=gn(e),i=t==bS?e.constructor:void 0,n=i?Yn(i):"";if(n)switch(n){case ES:return km;case TS:return Pm;case SS:return Im;case CS:return Rm;case AS:return Mm}return t});const so=bn;var PS=Object.prototype,IS=PS.hasOwnProperty;function RS(e){var t=e.length,i=new e.constructor(t);return t&&typeof e[0]=="string"&&IS.call(e,"index")&&(i.index=e.index,i.input=e.input),i}var MS=vi.Uint8Array;const dl=MS;function Pf(e){var t=new e.constructor(e.byteLength);return new dl(t).set(new dl(e)),t}function kS(e,t){var i=t?Pf(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.byteLength)}var OS=/\w*$/;function DS(e){var t=new e.constructor(e.source,OS.exec(e));return t.lastIndex=e.lastIndex,t}var Om=ke?ke.prototype:void 0,Dm=Om?Om.valueOf:void 0;function BS(e){return Dm?Object(Dm.call(e)):{}}function NS(e,t){var i=t?Pf(e.buffer):e.buffer;return new e.constructor(i,e.byteOffset,e.length)}var LS="[object Boolean]",FS="[object Date]",US="[object Map]",zS="[object Number]",GS="[object RegExp]",$S="[object Set]",HS="[object String]",jS="[object Symbol]",WS="[object ArrayBuffer]",XS="[object DataView]",VS="[object Float32Array]",YS="[object Float64Array]",qS="[object Int8Array]",KS="[object Int16Array]",ZS="[object Int32Array]",QS="[object Uint8Array]",JS="[object Uint8ClampedArray]",tC="[object Uint16Array]",eC="[object Uint32Array]";function iC(e,t,i){var n=e.constructor;switch(t){case WS:return Pf(e);case LS:case FS:return new n(+e);case XS:return kS(e,i);case VS:case YS:case qS:case KS:case ZS:case QS:case JS:case tC:case eC:return NS(e,i);case US:return new n;case zS:case HS:return new n(e);case GS:return DS(e);case $S:return new n;case jS:return BS(e)}}function nC(e){return typeof e.constructor=="function"&&!bf(e)?Qb(L0(e)):{}}var rC="[object Map]";function sC(e){return Je(e)&&so(e)==rC}var Bm=zr&&zr.isMap,oC=Bm?Kl(Bm):sC;const aC=oC;var lC="[object Set]";function hC(e){return Je(e)&&so(e)==lC}var Nm=zr&&zr.isSet,uC=Nm?Kl(Nm):hC;const cC=uC;var dC=1,fC=2,pC=4,H0="[object Arguments]",mC="[object Array]",gC="[object Boolean]",vC="[object Date]",yC="[object Error]",j0="[object Function]",_C="[object GeneratorFunction]",xC="[object Map]",wC="[object Number]",W0="[object Object]",bC="[object RegExp]",EC="[object Set]",TC="[object String]",SC="[object Symbol]",CC="[object WeakMap]",AC="[object ArrayBuffer]",PC="[object DataView]",IC="[object Float32Array]",RC="[object Float64Array]",MC="[object Int8Array]",kC="[object Int16Array]",OC="[object Int32Array]",DC="[object Uint8Array]",BC="[object Uint8ClampedArray]",NC="[object Uint16Array]",LC="[object Uint32Array]",ct={};ct[H0]=ct[mC]=ct[AC]=ct[PC]=ct[gC]=ct[vC]=ct[IC]=ct[RC]=ct[MC]=ct[kC]=ct[OC]=ct[xC]=ct[wC]=ct[W0]=ct[bC]=ct[EC]=ct[TC]=ct[SC]=ct[DC]=ct[BC]=ct[NC]=ct[LC]=!0;ct[yC]=ct[j0]=ct[CC]=!1;function Ra(e,t,i,n,r,s){var o,a=t&dC,l=t&fC,h=t&pC;if(i&&(o=r?i(e,n,r,s):i(e)),o!==void 0)return o;if(!ln(e))return e;var u=Ut(e);if(u){if(o=RS(e),!a)return x0(e,o)}else{var c=so(e),d=c==j0||c==_C;if(cl(e))return uS(e,a);if(c==W0||c==H0||d&&!r){if(o=l||d?{}:nC(e),!a)return l?vS(e,lS(o,e)):pS(e,aS(o,e))}else{if(!ct[c])return r?e:{};o=iC(e,c,a)}}s||(s=new fi);var f=s.get(e);if(f)return f;s.set(e,o),cC(e)?e.forEach(function(_){o.add(Ra(_,t,i,_,e,s))}):aC(e)&&e.forEach(function(_,m){o.set(m,Ra(_,t,i,m,e,s))});var p=h?l?yS:xc:l?Tf:Zn,y=u?void 0:p(e);return w0(y||e,function(_,m){y&&(m=_,_=e[m]),C0(o,m,Ra(_,t,i,m,e,s))}),o}var FC=4;function UC(e){return Ra(e,FC)}function zC(){var e=arguments.length;if(!e)return[];for(var t=Array(e-1),i=arguments[0],n=e;n--;)t[n-1]=arguments[n];return th(Ut(i)?x0(i):[i],N0(t,1))}var GC="__lodash_hash_undefined__";function $C(e){return this.__data__.set(e,GC),this}function HC(e){return this.__data__.has(e)}function Gr(e){var t=-1,i=e==null?0:e.length;for(this.__data__=new Li;++t<i;)this.add(e[t])}Gr.prototype.add=Gr.prototype.push=$C;Gr.prototype.has=HC;function jC(e,t){for(var i=-1,n=e==null?0:e.length;++i<n;)if(t(e[i],i,e))return!0;return!1}function fl(e,t){return e.has(t)}var WC=1,XC=2;function X0(e,t,i,n,r,s){var o=i&WC,a=e.length,l=t.length;if(a!=l&&!(o&&l>a))return!1;var h=s.get(e),u=s.get(t);if(h&&u)return h==t&&u==e;var c=-1,d=!0,f=i&XC?new Gr:void 0;for(s.set(e,t),s.set(t,e);++c<a;){var p=e[c],y=t[c];if(n)var _=o?n(y,p,c,t,e,s):n(p,y,c,e,t,s);if(_!==void 0){if(_)continue;d=!1;break}if(f){if(!jC(t,function(m,g){if(!fl(f,g)&&(p===m||r(p,m,i,n,s)))return f.push(g)})){d=!1;break}}else if(!(p===y||r(p,y,i,n,s))){d=!1;break}}return s.delete(e),s.delete(t),d}function VC(e){var t=-1,i=Array(e.size);return e.forEach(function(n,r){i[++t]=[r,n]}),i}function If(e){var t=-1,i=Array(e.size);return e.forEach(function(n){i[++t]=n}),i}var YC=1,qC=2,KC="[object Boolean]",ZC="[object Date]",QC="[object Error]",JC="[object Map]",tA="[object Number]",eA="[object RegExp]",iA="[object Set]",nA="[object String]",rA="[object Symbol]",sA="[object ArrayBuffer]",oA="[object DataView]",Lm=ke?ke.prototype:void 0,Xh=Lm?Lm.valueOf:void 0;function aA(e,t,i,n,r,s,o){switch(i){case oA:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case sA:return!(e.byteLength!=t.byteLength||!s(new dl(e),new dl(t)));case KC:case ZC:case tA:return xf(+e,+t);case QC:return e.name==t.name&&e.message==t.message;case eA:case nA:return e==t+"";case JC:var a=VC;case iA:var l=n&YC;if(a||(a=If),e.size!=t.size&&!l)return!1;var h=o.get(e);if(h)return h==t;n|=qC,o.set(e,t);var u=X0(a(e),a(t),n,r,s,o);return o.delete(e),u;case rA:if(Xh)return Xh.call(e)==Xh.call(t)}return!1}var lA=1,hA=Object.prototype,uA=hA.hasOwnProperty;function cA(e,t,i,n,r,s){var o=i&lA,a=xc(e),l=a.length,h=xc(t),u=h.length;if(l!=u&&!o)return!1;for(var c=l;c--;){var d=a[c];if(!(o?d in t:uA.call(t,d)))return!1}var f=s.get(e),p=s.get(t);if(f&&p)return f==t&&p==e;var y=!0;s.set(e,t),s.set(t,e);for(var _=o;++c<l;){d=a[c];var m=e[d],g=t[d];if(n)var v=o?n(g,m,d,t,e,s):n(m,g,d,e,t,s);if(!(v===void 0?m===g||r(m,g,i,n,s):v)){y=!1;break}_||(_=d=="constructor")}if(y&&!_){var x=e.constructor,b=t.constructor;x!=b&&"constructor"in e&&"constructor"in t&&!(typeof x=="function"&&x instanceof x&&typeof b=="function"&&b instanceof b)&&(y=!1)}return s.delete(e),s.delete(t),y}var dA=1,Fm="[object Arguments]",Um="[object Array]",Wo="[object Object]",fA=Object.prototype,zm=fA.hasOwnProperty;function pA(e,t,i,n,r,s){var o=Ut(e),a=Ut(t),l=o?Um:so(e),h=a?Um:so(t);l=l==Fm?Wo:l,h=h==Fm?Wo:h;var u=l==Wo,c=h==Wo,d=l==h;if(d&&cl(e)){if(!cl(t))return!1;o=!0,u=!1}if(d&&!u)return s||(s=new fi),o||M0(e)?X0(e,t,i,n,r,s):aA(e,t,l,i,n,r,s);if(!(i&dA)){var f=u&&zm.call(e,"__wrapped__"),p=c&&zm.call(t,"__wrapped__");if(f||p){var y=f?e.value():e,_=p?t.value():t;return s||(s=new fi),r(y,_,i,n,s)}}return d?(s||(s=new fi),cA(e,t,i,n,r,s)):!1}function Rf(e,t,i,n,r){return e===t?!0:e==null||t==null||!Je(e)&&!Je(t)?e!==e&&t!==t:pA(e,t,i,n,Rf,r)}var mA=1,gA=2;function vA(e,t,i,n){var r=i.length,s=r,o=!n;if(e==null)return!s;for(e=Object(e);r--;){var a=i[r];if(o&&a[2]?a[1]!==e[a[0]]:!(a[0]in e))return!1}for(;++r<s;){a=i[r];var l=a[0],h=e[l],u=a[1];if(o&&a[2]){if(h===void 0&&!(l in e))return!1}else{var c=new fi;if(n)var d=n(h,u,l,e,t,c);if(!(d===void 0?Rf(u,h,mA|gA,n,c):d))return!1}}return!0}function V0(e){return e===e&&!ln(e)}function yA(e){for(var t=Zn(e),i=t.length;i--;){var n=t[i],r=e[n];t[i]=[n,r,V0(r)]}return t}function Y0(e,t){return function(i){return i==null?!1:i[e]===t&&(t!==void 0||e in Object(i))}}function _A(e){var t=yA(e);return t.length==1&&t[0][2]?Y0(t[0][0],t[0][1]):function(i){return i===e||vA(i,e,t)}}function xA(e,t){return e!=null&&t in Object(e)}function wA(e,t,i){t=D0(t,e);for(var n=-1,r=t.length,s=!1;++n<r;){var o=Jl(t[n]);if(!(s=e!=null&&i(e,o)))break;e=e[o]}return s||++n!=r?s:(r=e==null?0:e.length,!!r&&wf(r)&&S0(o,r)&&(Ut(e)||Ef(e)))}function bA(e,t){return e!=null&&wA(e,t,xA)}var EA=1,TA=2;function SA(e,t){return Sf(e)&&V0(t)?Y0(Jl(e),t):function(i){var n=ZT(i,e);return n===void 0&&n===t?bA(i,e):Rf(t,n,EA|TA)}}function CA(e){return function(t){return t==null?void 0:t[e]}}function AA(e){return function(t){return B0(t,e)}}function PA(e){return Sf(e)?CA(Jl(e)):AA(e)}function Kr(e){return typeof e=="function"?e:e==null?Yl:typeof e=="object"?Ut(e)?SA(e[0],e[1]):_A(e):PA(e)}function IA(e,t,i,n){for(var r=-1,s=e==null?0:e.length;++r<s;){var o=e[r];t(n,o,i(o),e)}return n}function RA(e){return function(t,i,n){for(var r=-1,s=Object(t),o=n(t),a=o.length;a--;){var l=o[e?a:++r];if(i(s[l],l,s)===!1)break}return t}}var MA=RA();const kA=MA;function OA(e,t){return e&&kA(e,t,Zn)}function DA(e,t){return function(i,n){if(i==null)return i;if(!Kn(i))return e(i,n);for(var r=i.length,s=t?r:-1,o=Object(i);(t?s--:++s<r)&&n(o[s],s,o)!==!1;);return i}}var BA=DA(OA);const Eo=BA;function NA(e,t,i,n){return Eo(e,function(r,s,o){t(n,r,i(r),o)}),n}function LA(e,t){return function(i,n){var r=Ut(i)?IA:NA,s=t?t():{};return r(i,e,Kr(n),s)}}function FA(e){return Je(e)&&Kn(e)}function q0(e,t,i){for(var n=-1,r=e==null?0:e.length;++n<r;)if(i(t,e[n]))return!0;return!1}function K0(e){return typeof e=="function"?e:Yl}function hi(e,t){var i=Ut(e)?w0:Eo;return i(e,K0(t))}function UA(e,t){var i=[];return Eo(e,function(n,r,s){t(n,r,s)&&i.push(n)}),i}function eh(e,t){var i=Ut(e)?U0:UA;return i(e,Kr(t))}function zA(e){return function(t,i,n){var r=Object(t);if(!Kn(t)){var s=Kr(i);t=Zn(t),i=function(a){return s(r[a],a,r)}}var o=e(t,i,n);return o>-1?r[s?t[o]:o]:void 0}}var GA=Math.max;function $A(e,t,i){var n=e==null?0:e.length;if(!n)return-1;var r=i==null?0:yf(i);return r<0&&(r=GA(n+r,0)),b0(e,Kr(t),r)}var HA=zA($A);const Pi=HA;function jA(e,t){var i=-1,n=Kn(e)?Array(e.length):[];return Eo(e,function(r,s,o){n[++i]=t(r,s,o)}),n}function Ls(e,t){var i=Ut(e)?wo:jA;return i(e,Kr(t))}var WA=Object.prototype,XA=WA.hasOwnProperty,VA=LA(function(e,t,i){XA.call(e,i)?e[i].push(t):_f(e,i,[t])});const YA=VA;var qA="[object String]";function KA(e){return typeof e=="string"||!Ut(e)&&Je(e)&&gn(e)==qA}function ZA(e,t){return wo(t,function(i){return e[i]})}function QA(e){return e==null?[]:ZA(e,Zn(e))}var JA=Math.max;function t2(e,t,i,n){e=Kn(e)?e:QA(e),i=i&&!n?yf(i):0;var r=e.length;return i<0&&(i=JA(r+i,0)),KA(e)?i<=r&&e.indexOf(t,i)>-1:!!r&&E0(e,t,i)>-1}var e2=Math.min;function i2(e,t,i){for(var n=i?q0:T0,r=e[0].length,s=e.length,o=s,a=Array(s),l=1/0,h=[];o--;){var u=e[o];o&&t&&(u=wo(u,Kl(t))),l=e2(u.length,l),a[o]=!i&&(t||r>=120&&u.length>=120)?new Gr(o&&u):void 0}u=e[0];var c=-1,d=a[0];t:for(;++c<r&&h.length<l;){var f=u[c],p=t?t(f):f;if(f=i||f!==0?f:0,!(d?fl(d,p):n(h,p,i))){for(o=s;--o;){var y=a[o];if(!(y?fl(y,p):n(e[o],p,i)))continue t}d&&d.push(p),h.push(f)}}return h}function n2(e){return FA(e)?e:[]}var r2=yE(function(e){var t=wo(e,n2);return t.length&&t[0]===e[0]?i2(t):[]});const s2=r2;var o2="[object Number]";function a2(e){return typeof e=="number"||Je(e)&&gn(e)==o2}function Vh(e){return e===void 0}function l2(e,t,i,n,r){return r(e,function(s,o,a){i=n?(n=!1,s):t(i,s,o,a)}),i}function h2(e,t,i){var n=Ut(e)?tS:l2,r=arguments.length<3;return n(e,Kr(t),i,r,Eo)}var u2=9007199254740991,Yh=4294967295,c2=Math.min;function Mf(e,t){if(e=yf(e),e<1||e>u2)return[];var i=Yh,n=c2(e,Yh);t=K0(t),e-=Yh;for(var r=A0(n,t);++i<e;)t(i);return r}var d2=1/0,f2=Ar&&1/If(new Ar([,-0]))[1]==d2?function(e){return new Ar(e)}:tE;const p2=f2;var m2=200;function g2(e,t,i){var n=-1,r=T0,s=e.length,o=!0,a=[],l=a;if(i)o=!1,r=q0;else if(s>=m2){var h=t?null:p2(e);if(h)return If(h);o=!1,r=fl,l=new Gr}else l=t?[]:a;t:for(;++n<s;){var u=e[n],c=t?t(u):u;if(u=i||u!==0?u:0,o&&c===c){for(var d=l.length;d--;)if(l[d]===c)continue t;t&&l.push(c),a.push(u)}else r(l,c,i)||(l!==a&&l.push(c),a.push(u))}return a}function v2(e){return e&&e.length?g2(e):[]}var K={},y2={get exports(){return K},set exports(e){K=e}},_2="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",x2=_2,w2=x2;function Z0(){}function Q0(){}Q0.resetWarningCache=Z0;var b2=function(){function e(n,r,s,o,a,l){if(l!==w2){var h=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw h.name="Invariant Violation",h}}e.isRequired=e;function t(){return e}var i={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:Q0,resetWarningCache:Z0};return i.PropTypes=i,i};y2.exports=b2();function Ec(){return Ec=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Ec.apply(this,arguments)}function E2(e,t){if(e==null)return{};var i=T2(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function T2(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var kf=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=E2(e,["color","size"]);return Q.createElement("svg",Ec({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),Q.createElement("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"}))});kf.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};kf.displayName="BookOpen";const S2=kf;function Tc(){return Tc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Tc.apply(this,arguments)}function C2(e,t){if(e==null)return{};var i=A2(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function A2(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var Of=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=C2(e,["color","size"]);return Q.createElement("svg",Tc({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("polyline",{points:"20 6 9 17 4 12"}))});Of.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Of.displayName="Check";const P2=Of;function Sc(){return Sc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Sc.apply(this,arguments)}function I2(e,t){if(e==null)return{};var i=R2(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function R2(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var Df=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=I2(e,["color","size"]);return Q.createElement("svg",Sc({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("polyline",{points:"6 9 12 15 18 9"}))});Df.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Df.displayName="ChevronDown";const M2=Df;function Cc(){return Cc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Cc.apply(this,arguments)}function k2(e,t){if(e==null)return{};var i=O2(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function O2(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var Bf=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=k2(e,["color","size"]);return Q.createElement("svg",Cc({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("polyline",{points:"18 15 12 9 6 15"}))});Bf.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Bf.displayName="ChevronUp";const D2=Bf;function Ac(){return Ac=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Ac.apply(this,arguments)}function B2(e,t){if(e==null)return{};var i=N2(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function N2(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var Nf=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=B2(e,["color","size"]);return Q.createElement("svg",Ac({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("polyline",{points:"11 17 6 12 11 7"}),Q.createElement("polyline",{points:"18 17 13 12 18 7"}))});Nf.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Nf.displayName="ChevronsLeft";const L2=Nf;function Pc(){return Pc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Pc.apply(this,arguments)}function F2(e,t){if(e==null)return{};var i=U2(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function U2(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var Lf=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=F2(e,["color","size"]);return Q.createElement("svg",Pc({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("polyline",{points:"13 17 18 12 13 7"}),Q.createElement("polyline",{points:"6 17 11 12 6 7"}))});Lf.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Lf.displayName="ChevronsRight";const z2=Lf;function Ic(){return Ic=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Ic.apply(this,arguments)}function G2(e,t){if(e==null)return{};var i=$2(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function $2(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var Ff=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=G2(e,["color","size"]);return Q.createElement("svg",Ic({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("polyline",{points:"16 18 22 12 16 6"}),Q.createElement("polyline",{points:"8 6 2 12 8 18"}))});Ff.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Ff.displayName="Code";const H2=Ff;function Rc(){return Rc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Rc.apply(this,arguments)}function j2(e,t){if(e==null)return{};var i=W2(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function W2(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var Uf=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=j2(e,["color","size"]);return Q.createElement("svg",Rc({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),Q.createElement("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}))});Uf.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Uf.displayName="Copy";const X2=Uf;function Mc(){return Mc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Mc.apply(this,arguments)}function V2(e,t){if(e==null)return{};var i=Y2(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Y2(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var zf=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=V2(e,["color","size"]);return Q.createElement("svg",Mc({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),Q.createElement("polyline",{points:"7 10 12 15 17 10"}),Q.createElement("line",{x1:"12",y1:"15",x2:"12",y2:"3"}))});zf.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};zf.displayName="Download";const q2=zf;function kc(){return kc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},kc.apply(this,arguments)}function K2(e,t){if(e==null)return{};var i=Z2(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function Z2(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var Gf=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=K2(e,["color","size"]);return Q.createElement("svg",kc({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("circle",{cx:"12",cy:"12",r:"10"}),Q.createElement("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),Q.createElement("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}))});Gf.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Gf.displayName="HelpCircle";const Q2=Gf;function Oc(){return Oc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Oc.apply(this,arguments)}function J2(e,t){if(e==null)return{};var i=tP(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function tP(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var $f=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=J2(e,["color","size"]);return Q.createElement("svg",Oc({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("circle",{cx:"12",cy:"12",r:"10"}),Q.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),Q.createElement("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}))});$f.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};$f.displayName="Info";const eP=$f;function Dc(){return Dc=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var i=arguments[t];for(var n in i)Object.prototype.hasOwnProperty.call(i,n)&&(e[n]=i[n])}return e},Dc.apply(this,arguments)}function iP(e,t){if(e==null)return{};var i=nP(e,t),n,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);for(r=0;r<s.length;r++)n=s[r],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n])}return i}function nP(e,t){if(e==null)return{};var i={},n=Object.keys(e),r,s;for(s=0;s<n.length;s++)r=n[s],!(t.indexOf(r)>=0)&&(i[r]=e[r]);return i}var Hf=Z.forwardRef(function(e,t){var i=e.color,n=i===void 0?"currentColor":i,r=e.size,s=r===void 0?24:r,o=iP(e,["color","size"]);return Q.createElement("svg",Dc({ref:t,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:n,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),Q.createElement("circle",{cx:"12",cy:"12",r:"3"}),Q.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}))});Hf.propTypes={color:K.string,size:K.oneOfType([K.string,K.number])};Hf.displayName="Settings";const rP=Hf;function sP({children:e,name:t,startOpen:i}){const[n,r]=Z.useState(i),s=o=>{r(!n)};return n?st("div",{className:"accordion open",children:[st("button",{className:"accordion-button",onClick:s,children:[t,B(D2,{})]}),B("div",{className:"container",children:e})]}):B("div",{className:"accordion closed",children:st("button",{className:"accordion-button",onClick:s,children:[t,B(M2,{})]})})}const oP={action:{emphasis:1,color:"#acb5f9",textColor:"#222"},holy:{color:"#c7ab2e"},undead:{color:"#73b14c"},"bonus action":{emphasis:1,color:"#e1b1da",textColor:"#222"},passive:{emphasis:1,color:"#f3ba82",textColor:"#222"},concentration:{emphasis:2,color:"#6d89ab"},defense:{color:"#cd8150"},reaction:{emphasis:1,color:"#add",textColor:"#222"},movement:{emphasis:1,color:"rgb(249, 244, 172)",textColor:"#222"},aquatic:{color:"#1a72f5"},magic:{color:"#7391c9"}};function aP(e,t,i){let n={};const r=oP[e]||{color:"#fff"};return n={borderColor:r.color||"#fff"},i?(n.borderWidth="2px",n.color="#1a1a1c",n.backgroundColor=r.color,n.fontWeight=500):n.color="#fff",(r==null?void 0:r.emphasis)===1&&(n.borderColor="transparent",n.backgroundColor=r.color,n.color=r.textColor,n.fontWeight=600,n.borderRadius=12),bo(t)&&(n.cursor="pointer"),n}function Bc({label:e,clicked:t,selected:i}){let n=aP(e,t,i);const r=s=>{bo(t)&&t(e)};return Z.useEffect(()=>{},[e]),st("span",{onClick:r,className:"stat-tag",style:n,children:[e," ",i?B(P2,{size:14}):""]})}function J0(e){var i;const t=bo(e.ability.description)?e.ability.description(e.ability.modifiers):e.ability.description;return st("div",{className:"ability-card",children:[st("div",{className:"top",children:[B("div",{className:"card-title",children:e.ability.name}),B("p",{className:"description",children:t})]}),B("div",{className:"bottom",children:st("div",{className:"tags",children:[B(Bc,{label:e.ability.type}),(i=e.ability.tags)==null?void 0:i.map(n=>B(Bc,{label:n}))]})})]})}function Xo({label:e,value:t}){return st("div",{className:"stat-line",children:[st("span",{className:"label",children:[e,": "]}),B("span",{className:"value",children:t})]})}function lP({tags:e,selectedTagsChanged:t}){const[i,n]=Z.useState([]),r=s=>{i.includes(s)?n(i.filter(o=>o!==s)):n([...i,s])};return Z.useEffect(()=>{t(i),console.log(i)},[i]),e?B("div",{className:"tag-filters",children:e.map(s=>B(Bc,{label:s,clicked:r,selected:t2(i,s)},s))}):B("div",{})}function Gm(e){return YA(eh(e.abilities,t=>!t.replaced&&t.learned),"type")}function hP({dragon:e}){const[t,i]=Z.useState({});Z.useState({});const[n,r]=Z.useState({});Z.useEffect(()=>{const o=Gm(e);let a={};hi(Object.keys(o),l=>{let h=[];hi(o[l],u=>{u.tags&&(h=v2([...h,...u.tags]))}),a[l]=h}),i(o),r(a)},[e]);const s=(o,a)=>{let l=Gm(e);o.length&&(l[a]=eh(l[a],h=>h.tags&&s2(h.tags,o).length)),i(l),console.log(l)};return st("div",{className:"character-sheet",children:[st("div",{className:"stats",children:[B("div",{className:"title",children:"Stats"}),B(Xo,{label:" Skill Points Spent",value:e.pointsInvested}),B(Xo,{label:"Armor",value:e.armor}),B(Xo,{label:"HP",value:e.hp}),B(Xo,{label:"Movement",value:e.movement})]}),st("div",{className:"abilities",children:[B("div",{className:"title",children:"Abilities"}),t&&Object.keys(t).map(o=>st(sP,{startOpen:!1,name:o,children:[n[o].length?B("div",{className:"filter-panel",children:B(lP,{tags:n[o],selectedTagsChanged:a=>s(a,o)})}):"",B("div",{className:"ability-cards",children:t[o].map(a=>B(J0,{ability:a}))})]}))]})]})}var uP={value:()=>{}};function t_(){for(var e=0,t=arguments.length,i={},n;e<t;++e){if(!(n=arguments[e]+"")||n in i||/[\s.]/.test(n))throw new Error("illegal type: "+n);i[n]=[]}return new Ma(i)}function Ma(e){this._=e}function cP(e,t){return e.trim().split(/^|\s+/).map(function(i){var n="",r=i.indexOf(".");if(r>=0&&(n=i.slice(r+1),i=i.slice(0,r)),i&&!t.hasOwnProperty(i))throw new Error("unknown type: "+i);return{type:i,name:n}})}Ma.prototype=t_.prototype={constructor:Ma,on:function(e,t){var i=this._,n=cP(e+"",i),r,s=-1,o=n.length;if(arguments.length<2){for(;++s<o;)if((r=(e=n[s]).type)&&(r=dP(i[r],e.name)))return r;return}if(t!=null&&typeof t!="function")throw new Error("invalid callback: "+t);for(;++s<o;)if(r=(e=n[s]).type)i[r]=$m(i[r],e.name,t);else if(t==null)for(r in i)i[r]=$m(i[r],e.name,null);return this},copy:function(){var e={},t=this._;for(var i in t)e[i]=t[i].slice();return new Ma(e)},call:function(e,t){if((r=arguments.length-2)>0)for(var i=new Array(r),n=0,r,s;n<r;++n)i[n]=arguments[n+2];if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(s=this._[e],n=0,r=s.length;n<r;++n)s[n].value.apply(t,i)},apply:function(e,t,i){if(!this._.hasOwnProperty(e))throw new Error("unknown type: "+e);for(var n=this._[e],r=0,s=n.length;r<s;++r)n[r].value.apply(t,i)}};function dP(e,t){for(var i=0,n=e.length,r;i<n;++i)if((r=e[i]).name===t)return r.value}function $m(e,t,i){for(var n=0,r=e.length;n<r;++n)if(e[n].name===t){e[n]=uP,e=e.slice(0,n).concat(e.slice(n+1));break}return i!=null&&e.push({name:t,value:i}),e}var $r=0,xs=0,ls=0,e_=1e3,pl,ws,ml=0,Gn=0,ih=0,oo=typeof performance=="object"&&performance.now?performance:Date,i_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(e){setTimeout(e,17)};function n_(){return Gn||(i_(fP),Gn=oo.now()+ih)}function fP(){Gn=0}function Nc(){this._call=this._time=this._next=null}Nc.prototype=r_.prototype={constructor:Nc,restart:function(e,t,i){if(typeof e!="function")throw new TypeError("callback is not a function");i=(i==null?n_():+i)+(t==null?0:+t),!this._next&&ws!==this&&(ws?ws._next=this:pl=this,ws=this),this._call=e,this._time=i,Lc()},stop:function(){this._call&&(this._call=null,this._time=1/0,Lc())}};function r_(e,t,i){var n=new Nc;return n.restart(e,t,i),n}function pP(){n_(),++$r;for(var e=pl,t;e;)(t=Gn-e._time)>=0&&e._call.call(void 0,t),e=e._next;--$r}function Hm(){Gn=(ml=oo.now())+ih,$r=xs=0;try{pP()}finally{$r=0,gP(),Gn=0}}function mP(){var e=oo.now(),t=e-ml;t>e_&&(ih-=t,ml=e)}function gP(){for(var e,t=pl,i,n=1/0;t;)t._call?(n>t._time&&(n=t._time),e=t,t=t._next):(i=t._next,t._next=null,t=e?e._next=i:pl=i);ws=e,Lc(n)}function Lc(e){if(!$r){xs&&(xs=clearTimeout(xs));var t=e-Gn;t>24?(e<1/0&&(xs=setTimeout(Hm,e-oo.now()-ih)),ls&&(ls=clearInterval(ls))):(ls||(ml=oo.now(),ls=setInterval(mP,e_)),$r=1,i_(Hm))}}function jm(e,t){var i,n=1;e==null&&(e=0),t==null&&(t=0);function r(){var s,o=i.length,a,l=0,h=0;for(s=0;s<o;++s)a=i[s],l+=a.x,h+=a.y;for(l=(l/o-e)*n,h=(h/o-t)*n,s=0;s<o;++s)a=i[s],a.x-=l,a.y-=h}return r.initialize=function(s){i=s},r.x=function(s){return arguments.length?(e=+s,r):e},r.y=function(s){return arguments.length?(t=+s,r):t},r.strength=function(s){return arguments.length?(n=+s,r):n},r}function vP(e){const t=+this._x.call(null,e),i=+this._y.call(null,e);return s_(this.cover(t,i),t,i,e)}function s_(e,t,i,n){if(isNaN(t)||isNaN(i))return e;var r,s=e._root,o={data:n},a=e._x0,l=e._y0,h=e._x1,u=e._y1,c,d,f,p,y,_,m,g;if(!s)return e._root=o,e;for(;s.length;)if((y=t>=(c=(a+h)/2))?a=c:h=c,(_=i>=(d=(l+u)/2))?l=d:u=d,r=s,!(s=s[m=_<<1|y]))return r[m]=o,e;if(f=+e._x.call(null,s.data),p=+e._y.call(null,s.data),t===f&&i===p)return o.next=s,r?r[m]=o:e._root=o,e;do r=r?r[m]=new Array(4):e._root=new Array(4),(y=t>=(c=(a+h)/2))?a=c:h=c,(_=i>=(d=(l+u)/2))?l=d:u=d;while((m=_<<1|y)===(g=(p>=d)<<1|f>=c));return r[g]=s,r[m]=o,e}function yP(e){var t,i,n=e.length,r,s,o=new Array(n),a=new Array(n),l=1/0,h=1/0,u=-1/0,c=-1/0;for(i=0;i<n;++i)isNaN(r=+this._x.call(null,t=e[i]))||isNaN(s=+this._y.call(null,t))||(o[i]=r,a[i]=s,r<l&&(l=r),r>u&&(u=r),s<h&&(h=s),s>c&&(c=s));if(l>u||h>c)return this;for(this.cover(l,h).cover(u,c),i=0;i<n;++i)s_(this,o[i],a[i],e[i]);return this}function _P(e,t){if(isNaN(e=+e)||isNaN(t=+t))return this;var i=this._x0,n=this._y0,r=this._x1,s=this._y1;if(isNaN(i))r=(i=Math.floor(e))+1,s=(n=Math.floor(t))+1;else{for(var o=r-i||1,a=this._root,l,h;i>e||e>=r||n>t||t>=s;)switch(h=(t<n)<<1|e<i,l=new Array(4),l[h]=a,a=l,o*=2,h){case 0:r=i+o,s=n+o;break;case 1:i=r-o,s=n+o;break;case 2:r=i+o,n=s-o;break;case 3:i=r-o,n=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=i,this._y0=n,this._x1=r,this._y1=s,this}function xP(){var e=[];return this.visit(function(t){if(!t.length)do e.push(t.data);while(t=t.next)}),e}function wP(e){return arguments.length?this.cover(+e[0][0],+e[0][1]).cover(+e[1][0],+e[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function ee(e,t,i,n,r){this.node=e,this.x0=t,this.y0=i,this.x1=n,this.y1=r}function bP(e,t,i){var n,r=this._x0,s=this._y0,o,a,l,h,u=this._x1,c=this._y1,d=[],f=this._root,p,y;for(f&&d.push(new ee(f,r,s,u,c)),i==null?i=1/0:(r=e-i,s=t-i,u=e+i,c=t+i,i*=i);p=d.pop();)if(!(!(f=p.node)||(o=p.x0)>u||(a=p.y0)>c||(l=p.x1)<r||(h=p.y1)<s))if(f.length){var _=(o+l)/2,m=(a+h)/2;d.push(new ee(f[3],_,m,l,h),new ee(f[2],o,m,_,h),new ee(f[1],_,a,l,m),new ee(f[0],o,a,_,m)),(y=(t>=m)<<1|e>=_)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-y],d[d.length-1-y]=p)}else{var g=e-+this._x.call(null,f.data),v=t-+this._y.call(null,f.data),x=g*g+v*v;if(x<i){var b=Math.sqrt(i=x);r=e-b,s=t-b,u=e+b,c=t+b,n=f.data}}return n}function EP(e){if(isNaN(u=+this._x.call(null,e))||isNaN(c=+this._y.call(null,e)))return this;var t,i=this._root,n,r,s,o=this._x0,a=this._y0,l=this._x1,h=this._y1,u,c,d,f,p,y,_,m;if(!i)return this;if(i.length)for(;;){if((p=u>=(d=(o+l)/2))?o=d:l=d,(y=c>=(f=(a+h)/2))?a=f:h=f,t=i,!(i=i[_=y<<1|p]))return this;if(!i.length)break;(t[_+1&3]||t[_+2&3]||t[_+3&3])&&(n=t,m=_)}for(;i.data!==e;)if(r=i,!(i=i.next))return this;return(s=i.next)&&delete i.next,r?(s?r.next=s:delete r.next,this):t?(s?t[_]=s:delete t[_],(i=t[0]||t[1]||t[2]||t[3])&&i===(t[3]||t[2]||t[1]||t[0])&&!i.length&&(n?n[m]=i:this._root=i),this):(this._root=s,this)}function TP(e){for(var t=0,i=e.length;t<i;++t)this.remove(e[t]);return this}function SP(){return this._root}function CP(){var e=0;return this.visit(function(t){if(!t.length)do++e;while(t=t.next)}),e}function AP(e){var t=[],i,n=this._root,r,s,o,a,l;for(n&&t.push(new ee(n,this._x0,this._y0,this._x1,this._y1));i=t.pop();)if(!e(n=i.node,s=i.x0,o=i.y0,a=i.x1,l=i.y1)&&n.length){var h=(s+a)/2,u=(o+l)/2;(r=n[3])&&t.push(new ee(r,h,u,a,l)),(r=n[2])&&t.push(new ee(r,s,u,h,l)),(r=n[1])&&t.push(new ee(r,h,o,a,u)),(r=n[0])&&t.push(new ee(r,s,o,h,u))}return this}function PP(e){var t=[],i=[],n;for(this._root&&t.push(new ee(this._root,this._x0,this._y0,this._x1,this._y1));n=t.pop();){var r=n.node;if(r.length){var s,o=n.x0,a=n.y0,l=n.x1,h=n.y1,u=(o+l)/2,c=(a+h)/2;(s=r[0])&&t.push(new ee(s,o,a,u,c)),(s=r[1])&&t.push(new ee(s,u,a,l,c)),(s=r[2])&&t.push(new ee(s,o,c,u,h)),(s=r[3])&&t.push(new ee(s,u,c,l,h))}i.push(n)}for(;n=i.pop();)e(n.node,n.x0,n.y0,n.x1,n.y1);return this}function IP(e){return e[0]}function RP(e){return arguments.length?(this._x=e,this):this._x}function MP(e){return e[1]}function kP(e){return arguments.length?(this._y=e,this):this._y}function jf(e,t,i){var n=new Wf(t??IP,i??MP,NaN,NaN,NaN,NaN);return e==null?n:n.addAll(e)}function Wf(e,t,i,n,r,s){this._x=e,this._y=t,this._x0=i,this._y0=n,this._x1=r,this._y1=s,this._root=void 0}function Wm(e){for(var t={data:e.data},i=t;e=e.next;)i=i.next={data:e.data};return t}var se=jf.prototype=Wf.prototype;se.copy=function(){var e=new Wf(this._x,this._y,this._x0,this._y0,this._x1,this._y1),t=this._root,i,n;if(!t)return e;if(!t.length)return e._root=Wm(t),e;for(i=[{source:t,target:e._root=new Array(4)}];t=i.pop();)for(var r=0;r<4;++r)(n=t.source[r])&&(n.length?i.push({source:n,target:t.target[r]=new Array(4)}):t.target[r]=Wm(n));return e};se.add=vP;se.addAll=yP;se.cover=_P;se.data=xP;se.extent=wP;se.find=bP;se.remove=EP;se.removeAll=TP;se.root=SP;se.size=CP;se.visit=AP;se.visitAfter=PP;se.x=RP;se.y=kP;function On(e){return function(){return e}}function Yi(e){return(e()-.5)*1e-6}function OP(e){return e.x+e.vx}function DP(e){return e.y+e.vy}function Xm(e){var t,i,n,r=1,s=1;typeof e!="function"&&(e=On(e==null?1:+e));function o(){for(var h,u=t.length,c,d,f,p,y,_,m=0;m<s;++m)for(c=jf(t,OP,DP).visitAfter(a),h=0;h<u;++h)d=t[h],y=i[d.index],_=y*y,f=d.x+d.vx,p=d.y+d.vy,c.visit(g);function g(v,x,b,T,E){var w=v.data,S=v.r,A=y+S;if(w){if(w.index>d.index){var P=f-w.x-w.vx,k=p-w.y-w.vy,R=P*P+k*k;R<A*A&&(P===0&&(P=Yi(n),R+=P*P),k===0&&(k=Yi(n),R+=k*k),R=(A-(R=Math.sqrt(R)))/R*r,d.vx+=(P*=R)*(A=(S*=S)/(_+S)),d.vy+=(k*=R)*A,w.vx-=P*(A=1-A),w.vy-=k*A)}return}return x>f+A||T<f-A||b>p+A||E<p-A}}function a(h){if(h.data)return h.r=i[h.data.index];for(var u=h.r=0;u<4;++u)h[u]&&h[u].r>h.r&&(h.r=h[u].r)}function l(){if(t){var h,u=t.length,c;for(i=new Array(u),h=0;h<u;++h)c=t[h],i[c.index]=+e(c,h,t)}}return o.initialize=function(h,u){t=h,n=u,l()},o.iterations=function(h){return arguments.length?(s=+h,o):s},o.strength=function(h){return arguments.length?(r=+h,o):r},o.radius=function(h){return arguments.length?(e=typeof h=="function"?h:On(+h),l(),o):e},o}function BP(e){return e.index}function Vm(e,t){var i=e.get(t);if(!i)throw new Error("node not found: "+t);return i}function Ym(e){var t=BP,i=c,n,r=On(30),s,o,a,l,h,u=1;e==null&&(e=[]);function c(_){return 1/Math.min(a[_.source.index],a[_.target.index])}function d(_){for(var m=0,g=e.length;m<u;++m)for(var v=0,x,b,T,E,w,S,A;v<g;++v)x=e[v],b=x.source,T=x.target,E=T.x+T.vx-b.x-b.vx||Yi(h),w=T.y+T.vy-b.y-b.vy||Yi(h),S=Math.sqrt(E*E+w*w),S=(S-s[v])/S*_*n[v],E*=S,w*=S,T.vx-=E*(A=l[v]),T.vy-=w*A,b.vx+=E*(A=1-A),b.vy+=w*A}function f(){if(o){var _,m=o.length,g=e.length,v=new Map(o.map((b,T)=>[t(b,T,o),b])),x;for(_=0,a=new Array(m);_<g;++_)x=e[_],x.index=_,typeof x.source!="object"&&(x.source=Vm(v,x.source)),typeof x.target!="object"&&(x.target=Vm(v,x.target)),a[x.source.index]=(a[x.source.index]||0)+1,a[x.target.index]=(a[x.target.index]||0)+1;for(_=0,l=new Array(g);_<g;++_)x=e[_],l[_]=a[x.source.index]/(a[x.source.index]+a[x.target.index]);n=new Array(g),p(),s=new Array(g),y()}}function p(){if(o)for(var _=0,m=e.length;_<m;++_)n[_]=+i(e[_],_,e)}function y(){if(o)for(var _=0,m=e.length;_<m;++_)s[_]=+r(e[_],_,e)}return d.initialize=function(_,m){o=_,h=m,f()},d.links=function(_){return arguments.length?(e=_,f(),d):e},d.id=function(_){return arguments.length?(t=_,d):t},d.iterations=function(_){return arguments.length?(u=+_,d):u},d.strength=function(_){return arguments.length?(i=typeof _=="function"?_:On(+_),p(),d):i},d.distance=function(_){return arguments.length?(r=typeof _=="function"?_:On(+_),y(),d):r},d}const NP=1664525,LP=1013904223,qm=4294967296;function FP(){let e=1;return()=>(e=(NP*e+LP)%qm)/qm}function UP(e){return e.x}function zP(e){return e.y}var GP=10,$P=Math.PI*(3-Math.sqrt(5));function HP(e){var t,i=1,n=.001,r=1-Math.pow(n,1/300),s=0,o=.6,a=new Map,l=r_(c),h=t_("tick","end"),u=FP();e==null&&(e=[]);function c(){d(),h.call("tick",t),i<n&&(l.stop(),h.call("end",t))}function d(y){var _,m=e.length,g;y===void 0&&(y=1);for(var v=0;v<y;++v)for(i+=(s-i)*r,a.forEach(function(x){x(i)}),_=0;_<m;++_)g=e[_],g.fx==null?g.x+=g.vx*=o:(g.x=g.fx,g.vx=0),g.fy==null?g.y+=g.vy*=o:(g.y=g.fy,g.vy=0);return t}function f(){for(var y=0,_=e.length,m;y<_;++y){if(m=e[y],m.index=y,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var g=GP*Math.sqrt(.5+y),v=y*$P;m.x=g*Math.cos(v),m.y=g*Math.sin(v)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function p(y){return y.initialize&&y.initialize(e,u),y}return f(),t={tick:d,restart:function(){return l.restart(c),t},stop:function(){return l.stop(),t},nodes:function(y){return arguments.length?(e=y,f(),a.forEach(p),t):e},alpha:function(y){return arguments.length?(i=+y,t):i},alphaMin:function(y){return arguments.length?(n=+y,t):n},alphaDecay:function(y){return arguments.length?(r=+y,t):+r},alphaTarget:function(y){return arguments.length?(s=+y,t):s},velocityDecay:function(y){return arguments.length?(o=1-y,t):1-o},randomSource:function(y){return arguments.length?(u=y,a.forEach(p),t):u},force:function(y,_){return arguments.length>1?(_==null?a.delete(y):a.set(y,p(_)),t):a.get(y)},find:function(y,_,m){var g=0,v=e.length,x,b,T,E,w;for(m==null?m=1/0:m*=m,g=0;g<v;++g)E=e[g],x=y-E.x,b=_-E.y,T=x*x+b*b,T<m&&(w=E,m=T);return w},on:function(y,_){return arguments.length>1?(h.on(y,_),t):h.on(y)}}}function Km(){var e,t,i,n,r=On(-30),s,o=1,a=1/0,l=.81;function h(f){var p,y=e.length,_=jf(e,UP,zP).visitAfter(c);for(n=f,p=0;p<y;++p)t=e[p],_.visit(d)}function u(){if(e){var f,p=e.length,y;for(s=new Array(p),f=0;f<p;++f)y=e[f],s[y.index]=+r(y,f,e)}}function c(f){var p=0,y,_,m=0,g,v,x;if(f.length){for(g=v=x=0;x<4;++x)(y=f[x])&&(_=Math.abs(y.value))&&(p+=y.value,m+=_,g+=_*y.x,v+=_*y.y);f.x=g/m,f.y=v/m}else{y=f,y.x=y.data.x,y.y=y.data.y;do p+=s[y.data.index];while(y=y.next)}f.value=p}function d(f,p,y,_){if(!f.value)return!0;var m=f.x-t.x,g=f.y-t.y,v=_-p,x=m*m+g*g;if(v*v/l<x)return x<a&&(m===0&&(m=Yi(i),x+=m*m),g===0&&(g=Yi(i),x+=g*g),x<o&&(x=Math.sqrt(o*x)),t.vx+=m*f.value*n/x,t.vy+=g*f.value*n/x),!0;if(f.length||x>=a)return;(f.data!==t||f.next)&&(m===0&&(m=Yi(i),x+=m*m),g===0&&(g=Yi(i),x+=g*g),x<o&&(x=Math.sqrt(o*x)));do f.data!==t&&(v=s[f.data.index]*n/x,t.vx+=m*v,t.vy+=g*v);while(f=f.next)}return h.initialize=function(f,p){e=f,i=p,u()},h.strength=function(f){return arguments.length?(r=typeof f=="function"?f:On(+f),u(),h):r},h.distanceMin=function(f){return arguments.length?(o=f*f,h):Math.sqrt(o)},h.distanceMax=function(f){return arguments.length?(a=f*f,h):Math.sqrt(a)},h.theta=function(f){return arguments.length?(l=f*f,h):Math.sqrt(l)},h}function bs(e,t,i){this.k=e,this.x=t,this.y=i}bs.prototype={constructor:bs,scale:function(e){return e===1?this:new bs(this.k*e,this.x,this.y)},translate:function(e,t){return e===0&t===0?this:new bs(this.k,this.x+this.k*e,this.y+this.k*t)},apply:function(e){return[e[0]*this.k+this.x,e[1]*this.k+this.y]},applyX:function(e){return e*this.k+this.x},applyY:function(e){return e*this.k+this.y},invert:function(e){return[(e[0]-this.x)/this.k,(e[1]-this.y)/this.k]},invertX:function(e){return(e-this.x)/this.k},invertY:function(e){return(e-this.y)/this.k},rescaleX:function(e){return e.copy().domain(e.range().map(this.invertX,this).map(e.invert,e))},rescaleY:function(e){return e.copy().domain(e.range().map(this.invertY,this).map(e.invert,e))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};bs.prototype;var Qn=(e=>(e[e.WEBGL_LEGACY=0]="WEBGL_LEGACY",e[e.WEBGL=1]="WEBGL",e[e.WEBGL2=2]="WEBGL2",e))(Qn||{}),o_=(e=>(e[e.UNKNOWN=0]="UNKNOWN",e[e.WEBGL=1]="WEBGL",e[e.CANVAS=2]="CANVAS",e))(o_||{}),Fc=(e=>(e[e.COLOR=16384]="COLOR",e[e.DEPTH=256]="DEPTH",e[e.STENCIL=1024]="STENCIL",e))(Fc||{}),q=(e=>(e[e.NORMAL=0]="NORMAL",e[e.ADD=1]="ADD",e[e.MULTIPLY=2]="MULTIPLY",e[e.SCREEN=3]="SCREEN",e[e.OVERLAY=4]="OVERLAY",e[e.DARKEN=5]="DARKEN",e[e.LIGHTEN=6]="LIGHTEN",e[e.COLOR_DODGE=7]="COLOR_DODGE",e[e.COLOR_BURN=8]="COLOR_BURN",e[e.HARD_LIGHT=9]="HARD_LIGHT",e[e.SOFT_LIGHT=10]="SOFT_LIGHT",e[e.DIFFERENCE=11]="DIFFERENCE",e[e.EXCLUSION=12]="EXCLUSION",e[e.HUE=13]="HUE",e[e.SATURATION=14]="SATURATION",e[e.COLOR=15]="COLOR",e[e.LUMINOSITY=16]="LUMINOSITY",e[e.NORMAL_NPM=17]="NORMAL_NPM",e[e.ADD_NPM=18]="ADD_NPM",e[e.SCREEN_NPM=19]="SCREEN_NPM",e[e.NONE=20]="NONE",e[e.SRC_OVER=0]="SRC_OVER",e[e.SRC_IN=21]="SRC_IN",e[e.SRC_OUT=22]="SRC_OUT",e[e.SRC_ATOP=23]="SRC_ATOP",e[e.DST_OVER=24]="DST_OVER",e[e.DST_IN=25]="DST_IN",e[e.DST_OUT=26]="DST_OUT",e[e.DST_ATOP=27]="DST_ATOP",e[e.ERASE=26]="ERASE",e[e.SUBTRACT=28]="SUBTRACT",e[e.XOR=29]="XOR",e))(q||{}),ui=(e=>(e[e.POINTS=0]="POINTS",e[e.LINES=1]="LINES",e[e.LINE_LOOP=2]="LINE_LOOP",e[e.LINE_STRIP=3]="LINE_STRIP",e[e.TRIANGLES=4]="TRIANGLES",e[e.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",e[e.TRIANGLE_FAN=6]="TRIANGLE_FAN",e))(ui||{}),N=(e=>(e[e.RGBA=6408]="RGBA",e[e.RGB=6407]="RGB",e[e.RG=33319]="RG",e[e.RED=6403]="RED",e[e.RGBA_INTEGER=36249]="RGBA_INTEGER",e[e.RGB_INTEGER=36248]="RGB_INTEGER",e[e.RG_INTEGER=33320]="RG_INTEGER",e[e.RED_INTEGER=36244]="RED_INTEGER",e[e.ALPHA=6406]="ALPHA",e[e.LUMINANCE=6409]="LUMINANCE",e[e.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",e[e.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",e[e.DEPTH_STENCIL=34041]="DEPTH_STENCIL",e))(N||{}),Pr=(e=>(e[e.TEXTURE_2D=3553]="TEXTURE_2D",e[e.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",e[e.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",e[e.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",e[e.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",e[e.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",e[e.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",e[e.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",e))(Pr||{}),V=(e=>(e[e.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",e[e.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",e[e.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",e[e.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",e[e.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",e[e.UNSIGNED_INT=5125]="UNSIGNED_INT",e[e.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",e[e.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",e[e.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",e[e.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",e[e.BYTE=5120]="BYTE",e[e.SHORT=5122]="SHORT",e[e.INT=5124]="INT",e[e.FLOAT=5126]="FLOAT",e[e.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",e[e.HALF_FLOAT=36193]="HALF_FLOAT",e))(V||{}),Uc=(e=>(e[e.FLOAT=0]="FLOAT",e[e.INT=1]="INT",e[e.UINT=2]="UINT",e))(Uc||{}),Si=(e=>(e[e.NEAREST=0]="NEAREST",e[e.LINEAR=1]="LINEAR",e))(Si||{}),sn=(e=>(e[e.CLAMP=33071]="CLAMP",e[e.REPEAT=10497]="REPEAT",e[e.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",e))(sn||{}),gi=(e=>(e[e.OFF=0]="OFF",e[e.POW2=1]="POW2",e[e.ON=2]="ON",e[e.ON_MANUAL=3]="ON_MANUAL",e))(gi||{}),ti=(e=>(e[e.NPM=0]="NPM",e[e.UNPACK=1]="UNPACK",e[e.PMA=2]="PMA",e[e.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",e[e.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",e[e.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",e))(ti||{}),oi=(e=>(e[e.NO=0]="NO",e[e.YES=1]="YES",e[e.AUTO=2]="AUTO",e[e.BLEND=0]="BLEND",e[e.CLEAR=1]="CLEAR",e[e.BLIT=2]="BLIT",e))(oi||{}),Xf=(e=>(e[e.AUTO=0]="AUTO",e[e.MANUAL=1]="MANUAL",e))(Xf||{}),Pe=(e=>(e.LOW="lowp",e.MEDIUM="mediump",e.HIGH="highp",e))(Pe||{}),Dt=(e=>(e[e.NONE=0]="NONE",e[e.SCISSOR=1]="SCISSOR",e[e.STENCIL=2]="STENCIL",e[e.SPRITE=3]="SPRITE",e[e.COLOR=4]="COLOR",e))(Dt||{}),Pt=(e=>(e[e.NONE=0]="NONE",e[e.LOW=2]="LOW",e[e.MEDIUM=4]="MEDIUM",e[e.HIGH=8]="HIGH",e))(Pt||{}),pi=(e=>(e[e.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",e[e.ARRAY_BUFFER=34962]="ARRAY_BUFFER",e[e.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",e))(pi||{});const jP={createCanvas:(e,t)=>{const i=document.createElement("canvas");return i.width=e,i.height=t,i},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(e,t)=>fetch(e,t),parseXML:e=>new DOMParser().parseFromString(e,"text/xml")},z={ADAPTER:jP,RESOLUTION:1,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,clearBeforeRender:!0,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,hello:!1},CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var qh=/iPhone/i,Zm=/iPod/i,Qm=/iPad/i,Jm=/\biOS-universal(?:.+)Mac\b/i,Kh=/\bAndroid(?:.+)Mobile\b/i,tg=/Android/i,tr=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,Vo=/Silk/i,_i=/Windows Phone/i,eg=/\bWindows(?:.+)ARM\b/i,ig=/BlackBerry/i,ng=/BB10/i,rg=/Opera Mini/i,sg=/\b(CriOS|Chrome)(?:.+)Mobile/i,og=/Mobile(?:.+)Firefox\b/i,ag=function(e){return typeof e<"u"&&e.platform==="MacIntel"&&typeof e.maxTouchPoints=="number"&&e.maxTouchPoints>1&&typeof MSStream>"u"};function WP(e){return function(t){return t.test(e)}}function XP(e){var t={userAgent:"",platform:"",maxTouchPoints:0};!e&&typeof navigator<"u"?t={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof e=="string"?t.userAgent=e:e&&e.userAgent&&(t={userAgent:e.userAgent,platform:e.platform,maxTouchPoints:e.maxTouchPoints||0});var i=t.userAgent,n=i.split("[FBAN");typeof n[1]<"u"&&(i=n[0]),n=i.split("Twitter"),typeof n[1]<"u"&&(i=n[0]);var r=WP(i),s={apple:{phone:r(qh)&&!r(_i),ipod:r(Zm),tablet:!r(qh)&&(r(Qm)||ag(t))&&!r(_i),universal:r(Jm),device:(r(qh)||r(Zm)||r(Qm)||r(Jm)||ag(t))&&!r(_i)},amazon:{phone:r(tr),tablet:!r(tr)&&r(Vo),device:r(tr)||r(Vo)},android:{phone:!r(_i)&&r(tr)||!r(_i)&&r(Kh),tablet:!r(_i)&&!r(tr)&&!r(Kh)&&(r(Vo)||r(tg)),device:!r(_i)&&(r(tr)||r(Vo)||r(Kh)||r(tg))||r(/\bokhttp\b/i)},windows:{phone:r(_i),tablet:r(eg),device:r(_i)||r(eg)},other:{blackberry:r(ig),blackberry10:r(ng),opera:r(rg),firefox:r(og),chrome:r(sg),device:r(ig)||r(ng)||r(rg)||r(og)||r(sg)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const Ci=XP(globalThis.navigator);z.RETINA_PREFIX=/@([0-9\.]+)x/;z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var $n={},VP={get exports(){return $n},set exports(e){$n=e}};(function(e){var t=Object.prototype.hasOwnProperty,i="~";function n(){}Object.create&&(n.prototype=Object.create(null),new n().__proto__||(i=!1));function r(l,h,u){this.fn=l,this.context=h,this.once=u||!1}function s(l,h,u,c,d){if(typeof u!="function")throw new TypeError("The listener must be a function");var f=new r(u,c||l,d),p=i?i+h:h;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,h){--l._eventsCount===0?l._events=new n:delete l._events[h]}function a(){this._events=new n,this._eventsCount=0}a.prototype.eventNames=function(){var h=[],u,c;if(this._eventsCount===0)return h;for(c in u=this._events)t.call(u,c)&&h.push(i?c.slice(1):c);return Object.getOwnPropertySymbols?h.concat(Object.getOwnPropertySymbols(u)):h},a.prototype.listeners=function(h){var u=i?i+h:h,c=this._events[u];if(!c)return[];if(c.fn)return[c.fn];for(var d=0,f=c.length,p=new Array(f);d<f;d++)p[d]=c[d].fn;return p},a.prototype.listenerCount=function(h){var u=i?i+h:h,c=this._events[u];return c?c.fn?1:c.length:0},a.prototype.emit=function(h,u,c,d,f,p){var y=i?i+h:h;if(!this._events[y])return!1;var _=this._events[y],m=arguments.length,g,v;if(_.fn){switch(_.once&&this.removeListener(h,_.fn,void 0,!0),m){case 1:return _.fn.call(_.context),!0;case 2:return _.fn.call(_.context,u),!0;case 3:return _.fn.call(_.context,u,c),!0;case 4:return _.fn.call(_.context,u,c,d),!0;case 5:return _.fn.call(_.context,u,c,d,f),!0;case 6:return _.fn.call(_.context,u,c,d,f,p),!0}for(v=1,g=new Array(m-1);v<m;v++)g[v-1]=arguments[v];_.fn.apply(_.context,g)}else{var x=_.length,b;for(v=0;v<x;v++)switch(_[v].once&&this.removeListener(h,_[v].fn,void 0,!0),m){case 1:_[v].fn.call(_[v].context);break;case 2:_[v].fn.call(_[v].context,u);break;case 3:_[v].fn.call(_[v].context,u,c);break;case 4:_[v].fn.call(_[v].context,u,c,d);break;default:if(!g)for(b=1,g=new Array(m-1);b<m;b++)g[b-1]=arguments[b];_[v].fn.apply(_[v].context,g)}}return!0},a.prototype.on=function(h,u,c){return s(this,h,u,c,!1)},a.prototype.once=function(h,u,c){return s(this,h,u,c,!0)},a.prototype.removeListener=function(h,u,c,d){var f=i?i+h:h;if(!this._events[f])return this;if(!u)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===u&&(!d||p.once)&&(!c||p.context===c)&&o(this,f);else{for(var y=0,_=[],m=p.length;y<m;y++)(p[y].fn!==u||d&&!p[y].once||c&&p[y].context!==c)&&_.push(p[y]);_.length?this._events[f]=_.length===1?_[0]:_:o(this,f)}return this},a.prototype.removeAllListeners=function(h){var u;return h?(u=i?i+h:h,this._events[u]&&o(this,u)):(this._events=new n,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=i,a.EventEmitter=a,e.exports=a})(VP);var gl={},YP={get exports(){return gl},set exports(e){gl=e}};YP.exports=nh;gl.default=nh;function nh(e,t,i){i=i||2;var n=t&&t.length,r=n?t[0]*i:e.length,s=a_(e,0,r,i,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,h,u,c,d,f;if(n&&(s=JP(e,t,s,i)),e.length>80*i){a=h=e[0],l=u=e[1];for(var p=i;p<r;p+=i)c=e[p],d=e[p+1],c<a&&(a=c),d<l&&(l=d),c>h&&(h=c),d>u&&(u=d);f=Math.max(h-a,u-l),f=f!==0?32767/f:0}return ao(s,o,i,a,l,f,0),o}function a_(e,t,i,n,r){var s,o;if(r===$c(e,t,i,n)>0)for(s=t;s<i;s+=n)o=lg(s,e[s],e[s+1],o);else for(s=i-n;s>=t;s-=n)o=lg(s,e[s],e[s+1],o);return o&&rh(o,o.next)&&(ho(o),o=o.next),o}function Hn(e,t){if(!e)return e;t||(t=e);var i=e,n;do if(n=!1,!i.steiner&&(rh(i,i.next)||bt(i.prev,i,i.next)===0)){if(ho(i),i=t=i.prev,i===i.next)break;n=!0}else i=i.next;while(n||i!==t);return t}function ao(e,t,i,n,r,s,o){if(e){!o&&s&&rI(e,n,r,s);for(var a=e,l,h;e.prev!==e.next;){if(l=e.prev,h=e.next,s?KP(e,n,r,s):qP(e)){t.push(l.i/i|0),t.push(e.i/i|0),t.push(h.i/i|0),ho(e),e=h.next,a=h.next;continue}if(e=h,e===a){o?o===1?(e=ZP(Hn(e),t,i),ao(e,t,i,n,r,s,2)):o===2&&QP(e,t,i,n,r,s):ao(Hn(e),t,i,n,r,s,1);break}}}}function qP(e){var t=e.prev,i=e,n=e.next;if(bt(t,i,n)>=0)return!1;for(var r=t.x,s=i.x,o=n.x,a=t.y,l=i.y,h=n.y,u=r<s?r<o?r:o:s<o?s:o,c=a<l?a<h?a:h:l<h?l:h,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>h?a:h:l>h?l:h,p=n.next;p!==t;){if(p.x>=u&&p.x<=d&&p.y>=c&&p.y<=f&&yr(r,a,s,l,o,h,p.x,p.y)&&bt(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function KP(e,t,i,n){var r=e.prev,s=e,o=e.next;if(bt(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,h=o.x,u=r.y,c=s.y,d=o.y,f=a<l?a<h?a:h:l<h?l:h,p=u<c?u<d?u:d:c<d?c:d,y=a>l?a>h?a:h:l>h?l:h,_=u>c?u>d?u:d:c>d?c:d,m=zc(f,p,t,i,n),g=zc(y,_,t,i,n),v=e.prevZ,x=e.nextZ;v&&v.z>=m&&x&&x.z<=g;){if(v.x>=f&&v.x<=y&&v.y>=p&&v.y<=_&&v!==r&&v!==o&&yr(a,u,l,c,h,d,v.x,v.y)&&bt(v.prev,v,v.next)>=0||(v=v.prevZ,x.x>=f&&x.x<=y&&x.y>=p&&x.y<=_&&x!==r&&x!==o&&yr(a,u,l,c,h,d,x.x,x.y)&&bt(x.prev,x,x.next)>=0))return!1;x=x.nextZ}for(;v&&v.z>=m;){if(v.x>=f&&v.x<=y&&v.y>=p&&v.y<=_&&v!==r&&v!==o&&yr(a,u,l,c,h,d,v.x,v.y)&&bt(v.prev,v,v.next)>=0)return!1;v=v.prevZ}for(;x&&x.z<=g;){if(x.x>=f&&x.x<=y&&x.y>=p&&x.y<=_&&x!==r&&x!==o&&yr(a,u,l,c,h,d,x.x,x.y)&&bt(x.prev,x,x.next)>=0)return!1;x=x.nextZ}return!0}function ZP(e,t,i){var n=e;do{var r=n.prev,s=n.next.next;!rh(r,s)&&l_(r,n,n.next,s)&&lo(r,s)&&lo(s,r)&&(t.push(r.i/i|0),t.push(n.i/i|0),t.push(s.i/i|0),ho(n),ho(n.next),n=e=s),n=n.next}while(n!==e);return Hn(n)}function QP(e,t,i,n,r,s){var o=e;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&aI(o,a)){var l=h_(o,a);o=Hn(o,o.next),l=Hn(l,l.next),ao(o,t,i,n,r,s,0),ao(l,t,i,n,r,s,0);return}a=a.next}o=o.next}while(o!==e)}function JP(e,t,i,n){var r=[],s,o,a,l,h;for(s=0,o=t.length;s<o;s++)a=t[s]*n,l=s<o-1?t[s+1]*n:e.length,h=a_(e,a,l,n,!1),h===h.next&&(h.steiner=!0),r.push(oI(h));for(r.sort(tI),s=0;s<r.length;s++)i=eI(r[s],i);return i}function tI(e,t){return e.x-t.x}function eI(e,t){var i=iI(e,t);if(!i)return t;var n=h_(i,e);return Hn(n,n.next),Hn(i,i.next)}function iI(e,t){var i=t,n=e.x,r=e.y,s=-1/0,o;do{if(r<=i.y&&r>=i.next.y&&i.next.y!==i.y){var a=i.x+(r-i.y)*(i.next.x-i.x)/(i.next.y-i.y);if(a<=n&&a>s&&(s=a,o=i.x<i.next.x?i:i.next,a===n))return o}i=i.next}while(i!==t);if(!o)return null;var l=o,h=o.x,u=o.y,c=1/0,d;i=o;do n>=i.x&&i.x>=h&&n!==i.x&&yr(r<u?n:s,r,h,u,r<u?s:n,r,i.x,i.y)&&(d=Math.abs(r-i.y)/(n-i.x),lo(i,e)&&(d<c||d===c&&(i.x>o.x||i.x===o.x&&nI(o,i)))&&(o=i,c=d)),i=i.next;while(i!==l);return o}function nI(e,t){return bt(e.prev,e,t.prev)<0&&bt(t.next,e,e.next)<0}function rI(e,t,i,n){var r=e;do r.z===0&&(r.z=zc(r.x,r.y,t,i,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==e);r.prevZ.nextZ=null,r.prevZ=null,sI(r)}function sI(e){var t,i,n,r,s,o,a,l,h=1;do{for(i=e,e=null,s=null,o=0;i;){for(o++,n=i,a=0,t=0;t<h&&(a++,n=n.nextZ,!!n);t++);for(l=h;a>0||l>0&&n;)a!==0&&(l===0||!n||i.z<=n.z)?(r=i,i=i.nextZ,a--):(r=n,n=n.nextZ,l--),s?s.nextZ=r:e=r,r.prevZ=s,s=r;i=n}s.nextZ=null,h*=2}while(o>1);return e}function zc(e,t,i,n,r){return e=(e-i)*r|0,t=(t-n)*r|0,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e|t<<1}function oI(e){var t=e,i=e;do(t.x<i.x||t.x===i.x&&t.y<i.y)&&(i=t),t=t.next;while(t!==e);return i}function yr(e,t,i,n,r,s,o,a){return(r-o)*(t-a)>=(e-o)*(s-a)&&(e-o)*(n-a)>=(i-o)*(t-a)&&(i-o)*(s-a)>=(r-o)*(n-a)}function aI(e,t){return e.next.i!==t.i&&e.prev.i!==t.i&&!lI(e,t)&&(lo(e,t)&&lo(t,e)&&hI(e,t)&&(bt(e.prev,e,t.prev)||bt(e,t.prev,t))||rh(e,t)&&bt(e.prev,e,e.next)>0&&bt(t.prev,t,t.next)>0)}function bt(e,t,i){return(t.y-e.y)*(i.x-t.x)-(t.x-e.x)*(i.y-t.y)}function rh(e,t){return e.x===t.x&&e.y===t.y}function l_(e,t,i,n){var r=qo(bt(e,t,i)),s=qo(bt(e,t,n)),o=qo(bt(i,n,e)),a=qo(bt(i,n,t));return!!(r!==s&&o!==a||r===0&&Yo(e,i,t)||s===0&&Yo(e,n,t)||o===0&&Yo(i,e,n)||a===0&&Yo(i,t,n))}function Yo(e,t,i){return t.x<=Math.max(e.x,i.x)&&t.x>=Math.min(e.x,i.x)&&t.y<=Math.max(e.y,i.y)&&t.y>=Math.min(e.y,i.y)}function qo(e){return e>0?1:e<0?-1:0}function lI(e,t){var i=e;do{if(i.i!==e.i&&i.next.i!==e.i&&i.i!==t.i&&i.next.i!==t.i&&l_(i,i.next,e,t))return!0;i=i.next}while(i!==e);return!1}function lo(e,t){return bt(e.prev,e,e.next)<0?bt(e,t,e.next)>=0&&bt(e,e.prev,t)>=0:bt(e,t,e.prev)<0||bt(e,e.next,t)<0}function hI(e,t){var i=e,n=!1,r=(e.x+t.x)/2,s=(e.y+t.y)/2;do i.y>s!=i.next.y>s&&i.next.y!==i.y&&r<(i.next.x-i.x)*(s-i.y)/(i.next.y-i.y)+i.x&&(n=!n),i=i.next;while(i!==e);return n}function h_(e,t){var i=new Gc(e.i,e.x,e.y),n=new Gc(t.i,t.x,t.y),r=e.next,s=t.prev;return e.next=t,t.prev=e,i.next=r,r.prev=i,n.next=i,i.prev=n,s.next=n,n.prev=s,n}function lg(e,t,i,n){var r=new Gc(e,t,i);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function ho(e){e.next.prev=e.prev,e.prev.next=e.next,e.prevZ&&(e.prevZ.nextZ=e.nextZ),e.nextZ&&(e.nextZ.prevZ=e.prevZ)}function Gc(e,t,i){this.i=e,this.x=t,this.y=i,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}nh.deviation=function(e,t,i,n){var r=t&&t.length,s=r?t[0]*i:e.length,o=Math.abs($c(e,0,s,i));if(r)for(var a=0,l=t.length;a<l;a++){var h=t[a]*i,u=a<l-1?t[a+1]*i:e.length;o-=Math.abs($c(e,h,u,i))}var c=0;for(a=0;a<n.length;a+=3){var d=n[a]*i,f=n[a+1]*i,p=n[a+2]*i;c+=Math.abs((e[d]-e[p])*(e[f+1]-e[d+1])-(e[d]-e[f])*(e[p+1]-e[d+1]))}return o===0&&c===0?0:Math.abs((c-o)/o)};function $c(e,t,i,n){for(var r=0,s=t,o=i-n;s<i;s+=n)r+=(e[o]-e[s])*(e[s+1]+e[o+1]),o=s;return r}nh.flatten=function(e){for(var t=e[0][0].length,i={vertices:[],holes:[],dimensions:t},n=0,r=0;r<e.length;r++){for(var s=0;s<e[r].length;s++)for(var o=0;o<t;o++)i.vertices.push(e[r][s][o]);r>0&&(n+=e[r-1].length,i.holes.push(n))}return i};var vl={},uI={get exports(){return vl},set exports(e){vl=e}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(e,t){(function(i){var n=t&&!t.nodeType&&t,r=e&&!e.nodeType&&e,s=typeof vh=="object"&&vh;(s.global===s||s.window===s||s.self===s)&&(i=s);var o,a=2147483647,l=36,h=1,u=26,c=38,d=700,f=72,p=128,y="-",_=/^xn--/,m=/[^\x20-\x7E]/,g=/[\x2E\u3002\uFF0E\uFF61]/g,v={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},x=l-h,b=Math.floor,T=String.fromCharCode,E;function w(C){throw RangeError(v[C])}function S(C,U){for(var X=C.length,ot=[];X--;)ot[X]=U(C[X]);return ot}function A(C,U){var X=C.split("@"),ot="";X.length>1&&(ot=X[0]+"@",C=X[1]),C=C.replace(g,".");var rt=C.split("."),Ct=S(rt,U).join(".");return ot+Ct}function P(C){for(var U=[],X=0,ot=C.length,rt,Ct;X<ot;)rt=C.charCodeAt(X++),rt>=55296&&rt<=56319&&X<ot?(Ct=C.charCodeAt(X++),(Ct&64512)==56320?U.push(((rt&1023)<<10)+(Ct&1023)+65536):(U.push(rt),X--)):U.push(rt);return U}function k(C){return S(C,function(U){var X="";return U>65535&&(U-=65536,X+=T(U>>>10&1023|55296),U=56320|U&1023),X+=T(U),X}).join("")}function R(C){return C-48<10?C-22:C-65<26?C-65:C-97<26?C-97:l}function I(C,U){return C+22+75*(C<26)-((U!=0)<<5)}function J(C,U,X){var ot=0;for(C=X?b(C/d):C>>1,C+=b(C/U);C>x*u>>1;ot+=l)C=b(C/x);return b(ot+(x+1)*C/(C+c))}function et(C){var U=[],X=C.length,ot,rt=0,Ct=p,ut=f,_t,Yt,de,zt,gt,Mt,Ot,ei,ii;for(_t=C.lastIndexOf(y),_t<0&&(_t=0),Yt=0;Yt<_t;++Yt)C.charCodeAt(Yt)>=128&&w("not-basic"),U.push(C.charCodeAt(Yt));for(de=_t>0?_t+1:0;de<X;){for(zt=rt,gt=1,Mt=l;de>=X&&w("invalid-input"),Ot=R(C.charCodeAt(de++)),(Ot>=l||Ot>b((a-rt)/gt))&&w("overflow"),rt+=Ot*gt,ei=Mt<=ut?h:Mt>=ut+u?u:Mt-ut,!(Ot<ei);Mt+=l)ii=l-ei,gt>b(a/ii)&&w("overflow"),gt*=ii;ot=U.length+1,ut=J(rt-zt,ot,zt==0),b(rt/ot)>a-Ct&&w("overflow"),Ct+=b(rt/ot),rt%=ot,U.splice(rt++,0,Ct)}return k(U)}function F(C){var U,X,ot,rt,Ct,ut,_t,Yt,de,zt,gt,Mt=[],Ot,ei,ii,Qr;for(C=P(C),Ot=C.length,U=p,X=0,Ct=f,ut=0;ut<Ot;++ut)gt=C[ut],gt<128&&Mt.push(T(gt));for(ot=rt=Mt.length,rt&&Mt.push(y);ot<Ot;){for(_t=a,ut=0;ut<Ot;++ut)gt=C[ut],gt>=U&&gt<_t&&(_t=gt);for(ei=ot+1,_t-U>b((a-X)/ei)&&w("overflow"),X+=(_t-U)*ei,U=_t,ut=0;ut<Ot;++ut)if(gt=C[ut],gt<U&&++X>a&&w("overflow"),gt==U){for(Yt=X,de=l;zt=de<=Ct?h:de>=Ct+u?u:de-Ct,!(Yt<zt);de+=l)Qr=Yt-zt,ii=l-zt,Mt.push(T(I(zt+Qr%ii,0))),Yt=b(Qr/ii);Mt.push(T(I(Yt,0))),Ct=J(X,ei,ot==rt),X=0,++ot}++X,++U}return Mt.join("")}function O(C){return A(C,function(U){return _.test(U)?et(U.slice(4).toLowerCase()):U})}function $(C){return A(C,function(U){return m.test(U)?"xn--"+F(U):U})}if(o={version:"1.3.2",ucs2:{decode:P,encode:k},decode:et,encode:F,toASCII:$,toUnicode:O},n&&r)if(e.exports==n)r.exports=o;else for(E in o)o.hasOwnProperty(E)&&(n[E]=o[E]);else i.punycode=o})(vh)})(uI,vl);var cI={isString:function(e){return typeof e=="string"},isObject:function(e){return typeof e=="object"&&e!==null},isNull:function(e){return e===null},isNullOrUndefined:function(e){return e==null}},uo={};function dI(e,t){return Object.prototype.hasOwnProperty.call(e,t)}var fI=function(e,t,i,n){t=t||"&",i=i||"=";var r={};if(typeof e!="string"||e.length===0)return r;var s=/\+/g;e=e.split(t);var o=1e3;n&&typeof n.maxKeys=="number"&&(o=n.maxKeys);var a=e.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var h=e[l].replace(s,"%20"),u=h.indexOf(i),c,d,f,p;u>=0?(c=h.substr(0,u),d=h.substr(u+1)):(c=h,d=""),f=decodeURIComponent(c),p=decodeURIComponent(d),dI(r,f)?Array.isArray(r[f])?r[f].push(p):r[f]=[r[f],p]:r[f]=p}return r},hs=function(e){switch(typeof e){case"string":return e;case"boolean":return e?"true":"false";case"number":return isFinite(e)?e:"";default:return""}},pI=function(e,t,i,n){return t=t||"&",i=i||"=",e===null&&(e=void 0),typeof e=="object"?Object.keys(e).map(function(r){var s=encodeURIComponent(hs(r))+i;return Array.isArray(e[r])?e[r].map(function(o){return s+encodeURIComponent(hs(o))}).join(t):s+encodeURIComponent(hs(e[r]))}).join(t):n?encodeURIComponent(hs(n))+i+encodeURIComponent(hs(e)):""};uo.decode=uo.parse=fI;uo.encode=uo.stringify=pI;var mI=vl,ai=cI,gI=sh,vI=PI,yI=AI;function qe(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var _I=/^([a-z0-9.+-]+:)/i,xI=/:[0-9]*$/,wI=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,bI=["<",">",'"',"`"," ","\r",`
`,"	"],EI=["{","}","|","\\","^","`"].concat(bI),Hc=["'"].concat(EI),hg=["%","/","?",";","#"].concat(Hc),ug=["/","?","#"],TI=255,cg=/^[+a-z0-9A-Z_-]{0,63}$/,SI=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,CI={javascript:!0,"javascript:":!0},jc={javascript:!0,"javascript:":!0},Ir={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},Wc=uo;function sh(e,t,i){if(e&&ai.isObject(e)&&e instanceof qe)return e;var n=new qe;return n.parse(e,t,i),n}qe.prototype.parse=function(e,t,i){if(!ai.isString(e))throw new TypeError("Parameter 'url' must be a string, not "+typeof e);var n=e.indexOf("?"),r=n!==-1&&n<e.indexOf("#")?"?":"#",s=e.split(r),o=/\\/g;s[0]=s[0].replace(o,"/"),e=s.join(r);var a=e;if(a=a.trim(),!i&&e.split("#").length===1){var l=wI.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],t?this.query=Wc.parse(this.search.substr(1)):this.query=this.search.substr(1)):t&&(this.search="",this.query={}),this}var h=_I.exec(a);if(h){h=h[0];var u=h.toLowerCase();this.protocol=u,a=a.substr(h.length)}if(i||h||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var c=a.substr(0,2)==="//";c&&!(h&&jc[h])&&(a=a.substr(2),this.slashes=!0)}if(!jc[h]&&(c||h&&!Ir[h])){for(var d=-1,f=0;f<ug.length;f++){var p=a.indexOf(ug[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var y,_;d===-1?_=a.lastIndexOf("@"):_=a.lastIndexOf("@",d),_!==-1&&(y=a.slice(0,_),a=a.slice(_+1),this.auth=decodeURIComponent(y)),d=-1;for(var f=0;f<hg.length;f++){var p=a.indexOf(hg[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var m=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!m)for(var g=this.hostname.split(/\./),f=0,v=g.length;f<v;f++){var x=g[f];if(x&&!x.match(cg)){for(var b="",T=0,E=x.length;T<E;T++)x.charCodeAt(T)>127?b+="x":b+=x[T];if(!b.match(cg)){var w=g.slice(0,f),S=g.slice(f+1),A=x.match(SI);A&&(w.push(A[1]),S.unshift(A[2])),S.length&&(a="/"+S.join(".")+a),this.hostname=w.join(".");break}}}this.hostname.length>TI?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=mI.toASCII(this.hostname));var P=this.port?":"+this.port:"",k=this.hostname||"";this.host=k+P,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!CI[u])for(var f=0,v=Hc.length;f<v;f++){var R=Hc[f];if(a.indexOf(R)!==-1){var I=encodeURIComponent(R);I===R&&(I=escape(R)),a=a.split(R).join(I)}}var J=a.indexOf("#");J!==-1&&(this.hash=a.substr(J),a=a.slice(0,J));var et=a.indexOf("?");if(et!==-1?(this.search=a.substr(et),this.query=a.substr(et+1),t&&(this.query=Wc.parse(this.query)),a=a.slice(0,et)):t&&(this.search="",this.query={}),a&&(this.pathname=a),Ir[u]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var P=this.pathname||"",F=this.search||"";this.path=P+F}return this.href=this.format(),this};function AI(e){return ai.isString(e)&&(e=sh(e)),e instanceof qe?e.format():qe.prototype.format.call(e)}qe.prototype.format=function(){var e=this.auth||"";e&&(e=encodeURIComponent(e),e=e.replace(/%3A/i,":"),e+="@");var t=this.protocol||"",i=this.pathname||"",n=this.hash||"",r=!1,s="";this.host?r=e+this.host:this.hostname&&(r=e+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&ai.isObject(this.query)&&Object.keys(this.query).length&&(s=Wc.stringify(this.query));var o=this.search||s&&"?"+s||"";return t&&t.substr(-1)!==":"&&(t+=":"),this.slashes||(!t||Ir[t])&&r!==!1?(r="//"+(r||""),i&&i.charAt(0)!=="/"&&(i="/"+i)):r||(r=""),n&&n.charAt(0)!=="#"&&(n="#"+n),o&&o.charAt(0)!=="?"&&(o="?"+o),i=i.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),t+r+i+o+n};function PI(e,t){return sh(e,!1,!0).resolve(t)}qe.prototype.resolve=function(e){return this.resolveObject(sh(e,!1,!0)).format()};qe.prototype.resolveObject=function(e){if(ai.isString(e)){var t=new qe;t.parse(e,!1,!0),e=t}for(var i=new qe,n=Object.keys(this),r=0;r<n.length;r++){var s=n[r];i[s]=this[s]}if(i.hash=e.hash,e.href==="")return i.href=i.format(),i;if(e.slashes&&!e.protocol){for(var o=Object.keys(e),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(i[l]=e[l])}return Ir[i.protocol]&&i.hostname&&!i.pathname&&(i.path=i.pathname="/"),i.href=i.format(),i}if(e.protocol&&e.protocol!==i.protocol){if(!Ir[e.protocol]){for(var h=Object.keys(e),u=0;u<h.length;u++){var c=h[u];i[c]=e[c]}return i.href=i.format(),i}if(i.protocol=e.protocol,!e.host&&!jc[e.protocol]){for(var v=(e.pathname||"").split("/");v.length&&!(e.host=v.shift()););e.host||(e.host=""),e.hostname||(e.hostname=""),v[0]!==""&&v.unshift(""),v.length<2&&v.unshift(""),i.pathname=v.join("/")}else i.pathname=e.pathname;if(i.search=e.search,i.query=e.query,i.host=e.host||"",i.auth=e.auth,i.hostname=e.hostname||e.host,i.port=e.port,i.pathname||i.search){var d=i.pathname||"",f=i.search||"";i.path=d+f}return i.slashes=i.slashes||e.slashes,i.href=i.format(),i}var p=i.pathname&&i.pathname.charAt(0)==="/",y=e.host||e.pathname&&e.pathname.charAt(0)==="/",_=y||p||i.host&&e.pathname,m=_,g=i.pathname&&i.pathname.split("/")||[],v=e.pathname&&e.pathname.split("/")||[],x=i.protocol&&!Ir[i.protocol];if(x&&(i.hostname="",i.port=null,i.host&&(g[0]===""?g[0]=i.host:g.unshift(i.host)),i.host="",e.protocol&&(e.hostname=null,e.port=null,e.host&&(v[0]===""?v[0]=e.host:v.unshift(e.host)),e.host=null),_=_&&(v[0]===""||g[0]==="")),y)i.host=e.host||e.host===""?e.host:i.host,i.hostname=e.hostname||e.hostname===""?e.hostname:i.hostname,i.search=e.search,i.query=e.query,g=v;else if(v.length)g||(g=[]),g.pop(),g=g.concat(v),i.search=e.search,i.query=e.query;else if(!ai.isNullOrUndefined(e.search)){if(x){i.hostname=i.host=g.shift();var b=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;b&&(i.auth=b.shift(),i.host=i.hostname=b.shift())}return i.search=e.search,i.query=e.query,(!ai.isNull(i.pathname)||!ai.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.href=i.format(),i}if(!g.length)return i.pathname=null,i.search?i.path="/"+i.search:i.path=null,i.href=i.format(),i;for(var T=g.slice(-1)[0],E=(i.host||e.host||g.length>1)&&(T==="."||T==="..")||T==="",w=0,S=g.length;S>=0;S--)T=g[S],T==="."?g.splice(S,1):T===".."?(g.splice(S,1),w++):w&&(g.splice(S,1),w--);if(!_&&!m)for(;w--;w)g.unshift("..");_&&g[0]!==""&&(!g[0]||g[0].charAt(0)!=="/")&&g.unshift(""),E&&g.join("/").substr(-1)!=="/"&&g.push("");var A=g[0]===""||g[0]&&g[0].charAt(0)==="/";if(x){i.hostname=i.host=A?"":g.length?g.shift():"";var b=i.host&&i.host.indexOf("@")>0?i.host.split("@"):!1;b&&(i.auth=b.shift(),i.host=i.hostname=b.shift())}return _=_||i.host&&g.length,_&&!A&&g.unshift(""),g.length?i.pathname=g.join("/"):(i.pathname=null,i.path=null),(!ai.isNull(i.pathname)||!ai.isNull(i.search))&&(i.path=(i.pathname?i.pathname:"")+(i.search?i.search:"")),i.auth=e.auth||i.auth,i.slashes=i.slashes||e.slashes,i.href=i.format(),i};qe.prototype.parseHost=function(){var e=this.host,t=xI.exec(e);t&&(t=t[0],t!==":"&&(this.port=t.substr(1)),e=e.substr(0,e.length-t.length)),e&&(this.hostname=e)};const II={parse:gI,format:yI,resolve:vI};function Be(e){if(typeof e!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(e)}`)}function us(e){return e.split("?")[0].split("#")[0]}function RI(e){return e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function MI(e,t,i){return e.replace(new RegExp(RI(t),"g"),i)}function kI(e,t){let i="",n=0,r=-1,s=0,o=-1;for(let a=0;a<=e.length;++a){if(a<e.length)o=e.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(i.length<2||n!==2||i.charCodeAt(i.length-1)!==46||i.charCodeAt(i.length-2)!==46){if(i.length>2){const l=i.lastIndexOf("/");if(l!==i.length-1){l===-1?(i="",n=0):(i=i.slice(0,l),n=i.length-1-i.lastIndexOf("/")),r=a,s=0;continue}}else if(i.length===2||i.length===1){i="",n=0,r=a,s=0;continue}}t&&(i.length>0?i+="/..":i="..",n=2)}else i.length>0?i+=`/${e.slice(r+1,a)}`:i=e.slice(r+1,a),n=a-r-1;r=a,s=0}else o===46&&s!==-1?++s:s=-1}return i}const Xt={toPosix(e){return MI(e,"\\","/")},isUrl(e){return/^https?:/.test(this.toPosix(e))},isDataUrl(e){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(e)},hasProtocol(e){return/^[^/:]+:\//.test(this.toPosix(e))},getProtocol(e){Be(e),e=this.toPosix(e);let t="";const i=/^file:\/\/\//.exec(e),n=/^[^/:]+:\/\//.exec(e),r=/^[^/:]+:\//.exec(e);if(i||n||r){const s=(i==null?void 0:i[0])||(n==null?void 0:n[0])||(r==null?void 0:r[0]);t=s,e=e.slice(s.length)}return t},toAbsolute(e,t,i){if(this.isDataUrl(e))return e;const n=us(this.toPosix(t??z.ADAPTER.getBaseUrl())),r=us(this.toPosix(i??this.rootname(n)));return Be(e),e=this.toPosix(e),e.startsWith("/")?Xt.join(r,e.slice(1)):this.isAbsolute(e)?e:this.join(n,e)},normalize(e){if(e=this.toPosix(e),Be(e),e.length===0)return".";let t="";const i=e.startsWith("/");this.hasProtocol(e)&&(t=this.rootname(e),e=e.slice(t.length));const n=e.endsWith("/");return e=kI(e,!1),e.length>0&&n&&(e+="/"),i?`/${e}`:t+e},isAbsolute(e){return Be(e),e=this.toPosix(e),this.hasProtocol(e)?!0:e.startsWith("/")},join(...e){if(e.length===0)return".";let t;for(let i=0;i<e.length;++i){const n=e[i];if(Be(n),n.length>0)if(t===void 0)t=n;else{const r=e[i-1]??"";this.extname(r)?t+=`/../${n}`:t+=`/${n}`}}return t===void 0?".":this.normalize(t)},dirname(e){if(Be(e),e.length===0)return".";e=this.toPosix(e);let t=e.charCodeAt(0);const i=t===47;let n=-1,r=!0;const s=this.getProtocol(e),o=e;e=e.slice(s.length);for(let a=e.length-1;a>=1;--a)if(t=e.charCodeAt(a),t===47){if(!r){n=a;break}}else r=!1;return n===-1?i?"/":this.isUrl(o)?s+e:s:i&&n===1?"//":s+e.slice(0,n)},rootname(e){Be(e),e=this.toPosix(e);let t="";if(e.startsWith("/")?t="/":t=this.getProtocol(e),this.isUrl(e)){const i=e.indexOf("/",t.length);i!==-1?t=e.slice(0,i):t=e,t.endsWith("/")||(t+="/")}return t},basename(e,t){Be(e),t&&Be(t),e=us(this.toPosix(e));let i=0,n=-1,r=!0,s;if(t!==void 0&&t.length>0&&t.length<=e.length){if(t.length===e.length&&t===e)return"";let o=t.length-1,a=-1;for(s=e.length-1;s>=0;--s){const l=e.charCodeAt(s);if(l===47){if(!r){i=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===t.charCodeAt(o)?--o===-1&&(n=s):(o=-1,n=a))}return i===n?n=a:n===-1&&(n=e.length),e.slice(i,n)}for(s=e.length-1;s>=0;--s)if(e.charCodeAt(s)===47){if(!r){i=s+1;break}}else n===-1&&(r=!1,n=s+1);return n===-1?"":e.slice(i,n)},extname(e){Be(e),e=us(this.toPosix(e));let t=-1,i=0,n=-1,r=!0,s=0;for(let o=e.length-1;o>=0;--o){const a=e.charCodeAt(o);if(a===47){if(!r){i=o+1;break}continue}n===-1&&(r=!1,n=o+1),a===46?t===-1?t=o:s!==1&&(s=1):t!==-1&&(s=-1)}return t===-1||n===-1||s===0||s===1&&t===n-1&&t===i+1?"":e.slice(t,n)},parse(e){Be(e);const t={root:"",dir:"",base:"",ext:"",name:""};if(e.length===0)return t;e=us(this.toPosix(e));let i=e.charCodeAt(0);const n=this.isAbsolute(e);let r;t.root=this.rootname(e),n||this.hasProtocol(e)?r=1:r=0;let s=-1,o=0,a=-1,l=!0,h=e.length-1,u=0;for(;h>=r;--h){if(i=e.charCodeAt(h),i===47){if(!l){o=h+1;break}continue}a===-1&&(l=!1,a=h+1),i===46?s===-1?s=h:u!==1&&(u=1):s!==-1&&(u=-1)}return s===-1||a===-1||u===0||u===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&n?t.base=t.name=e.slice(1,a):t.base=t.name=e.slice(o,a)):(o===0&&n?(t.name=e.slice(1,s),t.base=e.slice(1,a)):(t.name=e.slice(o,s),t.base=e.slice(o,a)),t.ext=e.slice(s,a)),t.dir=this.dirname(e),t},sep:"/",delimiter:":"},dg={};function lt(e,t,i=3){if(dg[t])return;let n=new Error().stack;typeof n>"u"?console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`):(n=n.split(`
`).splice(i).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${t}
Deprecated since v${e}`),console.warn(n),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${t}
Deprecated since v${e}`),console.warn(n))),dg[t]=!0}let Zh;function OI(){return typeof Zh>"u"&&(Zh=function(){var i;const t={stencil:!0,failIfMajorPerformanceCaveat:z.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!z.ADAPTER.getWebGLRenderingContext())return!1;const n=z.ADAPTER.createCanvas();let r=n.getContext("webgl",t)||n.getContext("experimental-webgl",t);const s=!!((i=r==null?void 0:r.getContextAttributes())!=null&&i.stencil);if(r){const o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,s}catch{return!1}}()),Zh}var DI="#f0f8ff",BI="#faebd7",NI="#00ffff",LI="#7fffd4",FI="#f0ffff",UI="#f5f5dc",zI="#ffe4c4",GI="#000000",$I="#ffebcd",HI="#0000ff",jI="#8a2be2",WI="#a52a2a",XI="#deb887",VI="#5f9ea0",YI="#7fff00",qI="#d2691e",KI="#ff7f50",ZI="#6495ed",QI="#fff8dc",JI="#dc143c",tR="#00ffff",eR="#00008b",iR="#008b8b",nR="#b8860b",rR="#a9a9a9",sR="#006400",oR="#a9a9a9",aR="#bdb76b",lR="#8b008b",hR="#556b2f",uR="#ff8c00",cR="#9932cc",dR="#8b0000",fR="#e9967a",pR="#8fbc8f",mR="#483d8b",gR="#2f4f4f",vR="#2f4f4f",yR="#00ced1",_R="#9400d3",xR="#ff1493",wR="#00bfff",bR="#696969",ER="#696969",TR="#1e90ff",SR="#b22222",CR="#fffaf0",AR="#228b22",PR="#ff00ff",IR="#dcdcdc",RR="#f8f8ff",MR="#daa520",kR="#ffd700",OR="#808080",DR="#008000",BR="#adff2f",NR="#808080",LR="#f0fff0",FR="#ff69b4",UR="#cd5c5c",zR="#4b0082",GR="#fffff0",$R="#f0e68c",HR="#fff0f5",jR="#e6e6fa",WR="#7cfc00",XR="#fffacd",VR="#add8e6",YR="#f08080",qR="#e0ffff",KR="#fafad2",ZR="#d3d3d3",QR="#90ee90",JR="#d3d3d3",tM="#ffb6c1",eM="#ffa07a",iM="#20b2aa",nM="#87cefa",rM="#778899",sM="#778899",oM="#b0c4de",aM="#ffffe0",lM="#00ff00",hM="#32cd32",uM="#faf0e6",cM="#ff00ff",dM="#800000",fM="#66cdaa",pM="#0000cd",mM="#ba55d3",gM="#9370db",vM="#3cb371",yM="#7b68ee",_M="#00fa9a",xM="#48d1cc",wM="#c71585",bM="#191970",EM="#f5fffa",TM="#ffe4e1",SM="#ffe4b5",CM="#ffdead",AM="#000080",PM="#fdf5e6",IM="#808000",RM="#6b8e23",MM="#ffa500",kM="#ff4500",OM="#da70d6",DM="#eee8aa",BM="#98fb98",NM="#afeeee",LM="#db7093",FM="#ffefd5",UM="#ffdab9",zM="#cd853f",GM="#ffc0cb",$M="#dda0dd",HM="#b0e0e6",jM="#800080",WM="#663399",XM="#ff0000",VM="#bc8f8f",YM="#4169e1",qM="#8b4513",KM="#fa8072",ZM="#f4a460",QM="#2e8b57",JM="#fff5ee",tk="#a0522d",ek="#c0c0c0",ik="#87ceeb",nk="#6a5acd",rk="#708090",sk="#708090",ok="#fffafa",ak="#00ff7f",lk="#4682b4",hk="#d2b48c",uk="#008080",ck="#d8bfd8",dk="#ff6347",fk="#40e0d0",pk="#ee82ee",mk="#f5deb3",gk="#ffffff",vk="#f5f5f5",yk="#ffff00",_k="#9acd32",xk={aliceblue:DI,antiquewhite:BI,aqua:NI,aquamarine:LI,azure:FI,beige:UI,bisque:zI,black:GI,blanchedalmond:$I,blue:HI,blueviolet:jI,brown:WI,burlywood:XI,cadetblue:VI,chartreuse:YI,chocolate:qI,coral:KI,cornflowerblue:ZI,cornsilk:QI,crimson:JI,cyan:tR,darkblue:eR,darkcyan:iR,darkgoldenrod:nR,darkgray:rR,darkgreen:sR,darkgrey:oR,darkkhaki:aR,darkmagenta:lR,darkolivegreen:hR,darkorange:uR,darkorchid:cR,darkred:dR,darksalmon:fR,darkseagreen:pR,darkslateblue:mR,darkslategray:gR,darkslategrey:vR,darkturquoise:yR,darkviolet:_R,deeppink:xR,deepskyblue:wR,dimgray:bR,dimgrey:ER,dodgerblue:TR,firebrick:SR,floralwhite:CR,forestgreen:AR,fuchsia:PR,gainsboro:IR,ghostwhite:RR,goldenrod:MR,gold:kR,gray:OR,green:DR,greenyellow:BR,grey:NR,honeydew:LR,hotpink:FR,indianred:UR,indigo:zR,ivory:GR,khaki:$R,lavenderblush:HR,lavender:jR,lawngreen:WR,lemonchiffon:XR,lightblue:VR,lightcoral:YR,lightcyan:qR,lightgoldenrodyellow:KR,lightgray:ZR,lightgreen:QR,lightgrey:JR,lightpink:tM,lightsalmon:eM,lightseagreen:iM,lightskyblue:nM,lightslategray:rM,lightslategrey:sM,lightsteelblue:oM,lightyellow:aM,lime:lM,limegreen:hM,linen:uM,magenta:cM,maroon:dM,mediumaquamarine:fM,mediumblue:pM,mediumorchid:mM,mediumpurple:gM,mediumseagreen:vM,mediumslateblue:yM,mediumspringgreen:_M,mediumturquoise:xM,mediumvioletred:wM,midnightblue:bM,mintcream:EM,mistyrose:TM,moccasin:SM,navajowhite:CM,navy:AM,oldlace:PM,olive:IM,olivedrab:RM,orange:MM,orangered:kM,orchid:OM,palegoldenrod:DM,palegreen:BM,paleturquoise:NM,palevioletred:LM,papayawhip:FM,peachpuff:UM,peru:zM,pink:GM,plum:$M,powderblue:HM,purple:jM,rebeccapurple:WM,red:XM,rosybrown:VM,royalblue:YM,saddlebrown:qM,salmon:KM,sandybrown:ZM,seagreen:QM,seashell:JM,sienna:tk,silver:ek,skyblue:ik,slateblue:nk,slategray:rk,slategrey:sk,snow:ok,springgreen:ak,steelblue:lk,tan:hk,teal:uk,thistle:ck,tomato:dk,turquoise:fk,violet:pk,wheat:mk,white:gk,whitesmoke:vk,yellow:yk,yellowgreen:_k};function co(e,t=[]){return t[0]=(e>>16&255)/255,t[1]=(e>>8&255)/255,t[2]=(e&255)/255,t}function u_(e){let t=e.toString(16);return t="000000".substring(0,6-t.length)+t,`#${t}`}function Vf(e){if(typeof e=="string"&&(e=xk[e.toLowerCase()]||e,e[0]==="#"&&(e=e.slice(1)),e.length===3)){const[t,i,n]=e;e=t+t+i+i+n+n}return parseInt(e,16)}function wk(){const e=[],t=[];for(let n=0;n<32;n++)e[n]=n,t[n]=n;e[q.NORMAL_NPM]=q.NORMAL,e[q.ADD_NPM]=q.ADD,e[q.SCREEN_NPM]=q.SCREEN,t[q.NORMAL]=q.NORMAL_NPM,t[q.ADD]=q.ADD_NPM,t[q.SCREEN]=q.SCREEN_NPM;const i=[];return i.push(t),i.push(e),i}const c_=wk();function d_(e,t){return c_[t?1:0][e]}function bk(e,t,i,n){return i=i||new Float32Array(4),n||n===void 0?(i[0]=e[0]*t,i[1]=e[1]*t,i[2]=e[2]*t):(i[0]=e[0],i[1]=e[1],i[2]=e[2]),i[3]=t,i}function Yf(e,t){if(t===1)return(t*255<<24)+e;if(t===0)return 0;let i=e>>16&255,n=e>>8&255,r=e&255;return i=i*t+.5|0,n=n*t+.5|0,r=r*t+.5|0,(t*255<<24)+(i<<16)+(n<<8)+r}function f_(e,t,i,n){return i=i||new Float32Array(4),i[0]=(e>>16&255)/255,i[1]=(e>>8&255)/255,i[2]=(e&255)/255,(n||n===void 0)&&(i[0]*=t,i[1]*=t,i[2]*=t),i[3]=t,i}function Ek(e,t=null){const i=e*6;if(t=t||new Uint16Array(i),t.length!==i)throw new Error(`Out buffer length is incorrect, got ${t.length} and expected ${i}`);for(let n=0,r=0;n<i;n+=6,r+=4)t[n+0]=r+0,t[n+1]=r+1,t[n+2]=r+2,t[n+3]=r+0,t[n+4]=r+2,t[n+5]=r+3;return t}function p_(e){if(e.BYTES_PER_ELEMENT===4)return e instanceof Float32Array?"Float32Array":e instanceof Uint32Array?"Uint32Array":"Int32Array";if(e.BYTES_PER_ELEMENT===2){if(e instanceof Uint16Array)return"Uint16Array"}else if(e.BYTES_PER_ELEMENT===1&&e instanceof Uint8Array)return"Uint8Array";return null}function yl(e){return e+=e===0?1:0,--e,e|=e>>>1,e|=e>>>2,e|=e>>>4,e|=e>>>8,e|=e>>>16,e+1}function fg(e){return!(e&e-1)&&!!e}function pg(e){let t=(e>65535?1:0)<<4;e>>>=t;let i=(e>255?1:0)<<3;return e>>>=i,t|=i,i=(e>15?1:0)<<2,e>>>=i,t|=i,i=(e>3?1:0)<<1,e>>>=i,t|=i,t|e>>1}function Rr(e,t,i){const n=e.length;let r;if(t>=n||i===0)return;i=t+i>n?n-t:i;const s=n-i;for(r=t;r<s;++r)e[r]=e[r+i];e.length=s}function _r(e){return e===0?0:e<0?-1:1}let Tk=0;function jn(){return++Tk}const m_=class{constructor(e,t,i,n){this.left=e,this.top=t,this.right=i,this.bottom=n}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let Xc=m_;Xc.EMPTY=new m_(0,0,0,0);const mg={},ri=Object.create(null),zi=Object.create(null);class gg{constructor(t,i,n){this._canvas=z.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=n||z.RESOLUTION,this.resize(t,i)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(t,i){this._checkDestroyed(),this._canvas.width=Math.round(t*this.resolution),this._canvas.height=Math.round(i*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(t){this._checkDestroyed(),this._canvas.width=Math.round(t)}get height(){return this._checkDestroyed(),this._canvas.height}set height(t){this._checkDestroyed(),this._canvas.height=Math.round(t)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function vg(e,t,i){for(let n=0,r=4*i*t;n<t;++n,r+=4)if(e[r+3]!==0)return!1;return!0}function yg(e,t,i,n,r){const s=4*t;for(let o=n,a=n*s+4*i;o<=r;++o,a+=s)if(e[a+3]!==0)return!1;return!0}function Sk(e){const{width:t,height:i}=e,n=e.getContext("2d",{willReadFrequently:!0});if(n===null)throw new TypeError("Failed to get canvas 2D context");const s=n.getImageData(0,0,t,i).data;let o=0,a=0,l=t-1,h=i-1;for(;a<i&&vg(s,t,a);)++a;if(a===i)return Xc.EMPTY;for(;vg(s,t,h);)--h;for(;yg(s,t,o,a,h);)++o;for(;yg(s,t,l,a,h);)--l;return++l,++h,new Xc(o,a,l,h)}function Ck(e){const t=Sk(e),{width:i,height:n}=t;let r=null;if(!t.isEmpty()){const s=e.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");r=s.getImageData(t.left,t.top,i,n)}return{width:i,height:n,data:r}}let Ko;function Ak(e,t=globalThis.location){if(e.startsWith("data:"))return"";t=t||globalThis.location,Ko||(Ko=document.createElement("a")),Ko.href=e;const i=II.parse(Ko.href),n=!i.port&&t.port===""||i.port===t.port;return i.hostname!==t.hostname||!n||i.protocol!==t.protocol?"anonymous":""}function hn(e,t=1){var n;const i=(n=z.RETINA_PREFIX)==null?void 0:n.exec(e);return i?parseFloat(i[1]):t}var L=(e=>(e.Renderer="renderer",e.Application="application",e.RendererSystem="renderer-webgl-system",e.RendererPlugin="renderer-webgl-plugin",e.CanvasRendererSystem="renderer-canvas-system",e.CanvasRendererPlugin="renderer-canvas-plugin",e.Asset="asset",e.LoadParser="load-parser",e.ResolveParser="resolve-parser",e.CacheParser="cache-parser",e.DetectionParser="detection-parser",e))(L||{});const Vc=e=>{if(typeof e=="function"||typeof e=="object"&&e.extension){if(!e.extension)throw new Error("Extension class must have an extension object");e={...typeof e.extension!="object"?{type:e.extension}:e.extension,ref:e}}if(typeof e=="object")e={...e};else throw new Error("Invalid extension type");return typeof e.type=="string"&&(e.type=[e.type]),e},_g=(e,t)=>Vc(e).priority??t,W={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...e){return e.map(Vc).forEach(t=>{t.type.forEach(i=>{var n,r;return(r=(n=this._removeHandlers)[i])==null?void 0:r.call(n,t)})}),this},add(...e){return e.map(Vc).forEach(t=>{t.type.forEach(i=>{const n=this._addHandlers,r=this._queue;n[i]?n[i](t):(r[i]=r[i]||[],r[i].push(t))})}),this},handle(e,t,i){const n=this._addHandlers,r=this._removeHandlers;if(n[e]||r[e])throw new Error(`Extension type ${e} already has a handler`);n[e]=t,r[e]=i;const s=this._queue;return s[e]&&(s[e].forEach(o=>t(o)),delete s[e]),this},handleByMap(e,t){return this.handle(e,i=>{t[i.name]=i.ref},i=>{delete t[i.name]})},handleByList(e,t,i=-1){return this.handle(e,n=>{t.includes(n.ref)||(t.push(n.ref),t.sort((r,s)=>_g(s,i)-_g(r,i)))},n=>{const r=t.indexOf(n.ref);r!==-1&&t.splice(r,1)})}};class Yc{constructor(t){typeof t=="number"?this.rawBinaryData=new ArrayBuffer(t):t instanceof Uint8Array?this.rawBinaryData=t.buffer:this.rawBinaryData=t,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(t){return this[`${t}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(t){switch(t){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${t} isn't a valid view type`)}}}const Pk=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function Ik(e){let t="";for(let i=0;i<e;++i)i>0&&(t+=`
else `),i<e-1&&(t+=`if(test == ${i}.0){}`);return t}function Rk(e,t){if(e===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const i=t.createShader(t.FRAGMENT_SHADER);for(;;){const n=Pk.replace(/%forloop%/gi,Ik(e));if(t.shaderSource(i,n),t.compileShader(i),!t.getShaderParameter(i,t.COMPILE_STATUS))e=e/2|0;else break}return e}const Qh=0,Jh=1,tu=2,eu=3,iu=4,nu=5;class Fi{constructor(){this.data=0,this.blendMode=q.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<Qh)}set blend(t){!!(this.data&1<<Qh)!==t&&(this.data^=1<<Qh)}get offsets(){return!!(this.data&1<<Jh)}set offsets(t){!!(this.data&1<<Jh)!==t&&(this.data^=1<<Jh)}get culling(){return!!(this.data&1<<tu)}set culling(t){!!(this.data&1<<tu)!==t&&(this.data^=1<<tu)}get depthTest(){return!!(this.data&1<<eu)}set depthTest(t){!!(this.data&1<<eu)!==t&&(this.data^=1<<eu)}get depthMask(){return!!(this.data&1<<nu)}set depthMask(t){!!(this.data&1<<nu)!==t&&(this.data^=1<<nu)}get clockwiseFrontFace(){return!!(this.data&1<<iu)}set clockwiseFrontFace(t){!!(this.data&1<<iu)!==t&&(this.data^=1<<iu)}get blendMode(){return this._blendMode}set blendMode(t){this.blend=t!==q.NONE,this._blendMode=t}get polygonOffset(){return this._polygonOffset}set polygonOffset(t){this.offsets=!!t,this._polygonOffset=t}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const t=new Fi;return t.depthTest=!1,t.blend=!0,t}}const qc=[];function g_(e,t){if(!e)return null;let i="";if(typeof e=="string"){const n=/\.(\w{3,4})(?:$|\?|#)/i.exec(e);n&&(i=n[1].toLowerCase())}for(let n=qc.length-1;n>=0;--n){const r=qc[n];if(r.test&&r.test(e,i))return new r(e,t)}throw new Error("Unrecognized source type to auto-detect Resource")}class Ke{constructor(t){this.items=[],this._name=t,this._aliasCount=0}emit(t,i,n,r,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:h,items:u}=this;this._aliasCount++;for(let c=0,d=u.length;c<d;c++)u[c][h](t,i,n,r,s,o,a,l);return u===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(t){return t[this._name]&&(this.ensureNonAliasedItems(),this.remove(t),this.items.push(t)),this}remove(t){const i=this.items.indexOf(t);return i!==-1&&(this.ensureNonAliasedItems(),this.items.splice(i,1)),this}contains(t){return this.items.includes(t)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Ke.prototype,{dispatch:{value:Ke.prototype.emit},run:{value:Ke.prototype.emit}});class fo{constructor(t=0,i=0){this._width=t,this._height=i,this.destroyed=!1,this.internal=!1,this.onResize=new Ke("setRealSize"),this.onUpdate=new Ke("update"),this.onError=new Ke("onError")}bind(t){this.onResize.add(t),this.onUpdate.add(t),this.onError.add(t),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(t){this.onResize.remove(t),this.onUpdate.remove(t),this.onError.remove(t)}resize(t,i){(t!==this._width||i!==this._height)&&(this._width=t,this._height=i,this.onResize.emit(t,i))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(t,i,n){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(t,i){return!1}}class To extends fo{constructor(t,i){const{width:n,height:r}=i||{};if(!n||!r)throw new Error("BufferResource width or height invalid");super(n,r),this.data=t}upload(t,i,n){const r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ti.UNPACK);const s=i.realWidth,o=i.realHeight;return n.width===s&&n.height===o?r.texSubImage2D(i.target,0,0,0,s,o,i.format,n.type,this.data):(n.width=s,n.height=o,r.texImage2D(i.target,0,n.internalFormat,s,o,0,i.format,n.type,this.data)),!0}dispose(){this.data=null}static test(t){return t instanceof Float32Array||t instanceof Uint8Array||t instanceof Uint32Array}}const Mk={scaleMode:Si.NEAREST,format:N.RGBA,alphaMode:ti.NPM},nr=class extends $n{constructor(e=null,t=null){super(),t=Object.assign({},nr.defaultOptions,t);const{alphaMode:i,mipmap:n,anisotropicLevel:r,scaleMode:s,width:o,height:a,wrapMode:l,format:h,type:u,target:c,resolution:d,resourceOptions:f}=t;e&&!(e instanceof fo)&&(e=g_(e,f),e.internal=!0),this.resolution=d||z.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=n,this.anisotropicLevel=r,this._wrapMode=l,this._scaleMode=s,this.format=h,this.type=u,this.target=c,this.alphaMode=i,this.uid=jn(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(e)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(e){this._mipmap!==e&&(this._mipmap=e,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(e){this._scaleMode!==e&&(this._scaleMode=e,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(e){this._wrapMode!==e&&(this._wrapMode=e,this.dirtyStyleId++)}setStyle(e,t){let i;return e!==void 0&&e!==this.scaleMode&&(this.scaleMode=e,i=!0),t!==void 0&&t!==this.mipmap&&(this.mipmap=t,i=!0),i&&this.dirtyStyleId++,this}setSize(e,t,i){return i=i||this.resolution,this.setRealSize(e*i,t*i,i)}setRealSize(e,t,i){return this.resolution=i||this.resolution,this.width=Math.round(e)/this.resolution,this.height=Math.round(t)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=fg(this.realWidth)&&fg(this.realHeight)}setResolution(e){const t=this.resolution;return t===e?this:(this.resolution=e,this.valid&&(this.width=Math.round(this.width*t)/e,this.height=Math.round(this.height*t)/e,this.emit("update",this)),this._refreshPOT(),this)}setResource(e){if(this.resource===e)return this;if(this.resource)throw new Error("Resource can be set only once");return e.bind(this),this.resource=e,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(e){this.emit("error",this,e)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete zi[this.cacheId],delete ri[this.cacheId],this.cacheId=null),this.dispose(),nr.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(e,t,i=z.STRICT_TEXTURE_CACHE){const n=typeof e=="string";let r=null;if(n)r=e;else{if(!e._pixiId){const o=(t==null?void 0:t.pixiIdPrefix)||"pixiid";e._pixiId=`${o}_${jn()}`}r=e._pixiId}let s=zi[r];if(n&&i&&!s)throw new Error(`The cacheId "${r}" does not exist in BaseTextureCache.`);return s||(s=new nr(e,t),s.cacheId=r,nr.addToCache(s,r)),s}static fromBuffer(e,t,i,n){e=e||new Float32Array(t*i*4);const r=new To(e,{width:t,height:i}),s=e instanceof Float32Array?V.FLOAT:V.UNSIGNED_BYTE;return new nr(r,Object.assign({},Mk,n||{width:t,height:i,type:s}))}static addToCache(e,t){t&&(e.textureCacheIds.includes(t)||e.textureCacheIds.push(t),zi[t]&&zi[t]!==e&&console.warn(`BaseTexture added to the cache with an id [${t}] that already had an entry`),zi[t]=e)}static removeFromCache(e){if(typeof e=="string"){const t=zi[e];if(t){const i=t.textureCacheIds.indexOf(e);return i>-1&&t.textureCacheIds.splice(i,1),delete zi[e],t}}else if(e!=null&&e.textureCacheIds){for(let t=0;t<e.textureCacheIds.length;++t)delete zi[e.textureCacheIds[t]];return e.textureCacheIds.length=0,e}return null}};let tt=nr;tt.defaultOptions={mipmap:gi.POW2,anisotropicLevel:0,scaleMode:Si.LINEAR,wrapMode:sn.CLAMP,alphaMode:ti.UNPACK,target:Pr.TEXTURE_2D,format:N.RGBA,type:V.UNSIGNED_BYTE};tt._globalBatch=0;class Kc{constructor(){this.texArray=null,this.blend=0,this.type=ui.TRIANGLES,this.start=0,this.size=0,this.data=null}}let kk=0;class It{constructor(t,i=!0,n=!1){this.data=t||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=n,this.static=i,this.id=kk++,this.disposeRunner=new Ke("disposeBuffer")}update(t){t instanceof Array&&(t=new Float32Array(t)),this.data=t||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(t){this.type=t?pi.ELEMENT_ARRAY_BUFFER:pi.ARRAY_BUFFER}get index(){return this.type===pi.ELEMENT_ARRAY_BUFFER}static from(t){return t instanceof Array&&(t=new Float32Array(t)),new It(t)}}class _l{constructor(t,i=0,n=!1,r=V.FLOAT,s,o,a,l=1){this.buffer=t,this.size=i,this.normalized=n,this.type=r,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(t,i,n,r,s){return new _l(t,i,n,r,s)}}const Ok={Float32Array,Uint32Array,Int32Array,Uint8Array};function Dk(e,t){let i=0,n=0;const r={};for(let l=0;l<e.length;l++)n+=t[l],i+=e[l].length;const s=new ArrayBuffer(i*4);let o=null,a=0;for(let l=0;l<e.length;l++){const h=t[l],u=e[l],c=p_(u);r[c]||(r[c]=new Ok[c](s)),o=r[c];for(let d=0;d<u.length;d++){const f=(d/h|0)*n+a,p=d%h;o[f+p]=u[d]}a+=h}return new Float32Array(s)}const xg={5126:4,5123:2,5121:1};let Bk=0;const Nk={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class un{constructor(t=[],i={}){this.buffers=t,this.indexBuffer=null,this.attributes=i,this.glVertexArrayObjects={},this.id=Bk++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Ke("disposeGeometry"),this.refCount=0}addAttribute(t,i,n=0,r=!1,s,o,a,l=!1){if(!i)throw new Error("You must pass a buffer when creating an attribute");i instanceof It||(i instanceof Array&&(i=new Float32Array(i)),i=new It(i));const h=t.split("|");if(h.length>1){for(let c=0;c<h.length;c++)this.addAttribute(h[c],i,n,r,s);return this}let u=this.buffers.indexOf(i);return u===-1&&(this.buffers.push(i),u=this.buffers.length-1),this.attributes[t]=new _l(u,n,r,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(t){return this.attributes[t]}getBuffer(t){return this.buffers[this.getAttribute(t).buffer]}addIndex(t){return t instanceof It||(t instanceof Array&&(t=new Uint16Array(t)),t=new It(t)),t.type=pi.ELEMENT_ARRAY_BUFFER,this.indexBuffer=t,this.buffers.includes(t)||this.buffers.push(t),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const t=[],i=[],n=new It;let r;for(r in this.attributes){const s=this.attributes[r],o=this.buffers[s.buffer];t.push(o.data),i.push(s.size*xg[s.type]/4),s.buffer=0}for(n.data=Dk(t,i),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[n],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const t in this.attributes){const i=this.attributes[t];return this.buffers[i.buffer].data.length/(i.stride/4||i.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const t=new un;for(let i=0;i<this.buffers.length;i++)t.buffers[i]=new It(this.buffers[i].data.slice(0));for(const i in this.attributes){const n=this.attributes[i];t.attributes[i]=new _l(n.buffer,n.size,n.normalized,n.type,n.stride,n.start,n.instance)}return this.indexBuffer&&(t.indexBuffer=t.buffers[this.buffers.indexOf(this.indexBuffer)],t.indexBuffer.type=pi.ELEMENT_ARRAY_BUFFER),t}static merge(t){const i=new un,n=[],r=[],s=[];let o;for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)r[l]=r[l]||0,r[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)n[a]=new Nk[p_(o.buffers[a].data)](r[a]),i.buffers[a]=new It(n[a]);for(let a=0;a<t.length;a++){o=t[a];for(let l=0;l<o.buffers.length;l++)n[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(i.attributes=o.attributes,o.indexBuffer){i.indexBuffer=i.buffers[o.buffers.indexOf(o.indexBuffer)],i.indexBuffer.type=pi.ELEMENT_ARRAY_BUFFER;let a=0,l=0,h=0,u=0;for(let c=0;c<o.buffers.length;c++)if(o.buffers[c]!==o.indexBuffer){u=c;break}for(const c in o.attributes){const d=o.attributes[c];(d.buffer|0)===u&&(l+=d.size*xg[d.type]/4)}for(let c=0;c<t.length;c++){const d=t[c].indexBuffer.data;for(let f=0;f<d.length;f++)i.indexBuffer.data[f+h]+=a;a+=t[c].buffers[u].data.length/l,h+=d.length}}return i}}class v_ extends un{constructor(t=!1){super(),this._buffer=new It(null,t,!1),this._indexBuffer=new It(null,t,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,V.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,V.FLOAT).addAttribute("aColor",this._buffer,4,!0,V.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,V.FLOAT).addIndex(this._indexBuffer)}}const xl=Math.PI*2,Lk=180/Math.PI,Fk=Math.PI/180;var Ht=(e=>(e[e.POLY=0]="POLY",e[e.RECT=1]="RECT",e[e.CIRC=2]="CIRC",e[e.ELIP=3]="ELIP",e[e.RREC=4]="RREC",e))(Ht||{});class Y{constructor(t=0,i=0){this.x=0,this.y=0,this.x=t,this.y=i}clone(){return new Y(this.x,this.y)}copyFrom(t){return this.set(t.x,t.y),this}copyTo(t){return t.set(this.x,this.y),t}equals(t){return t.x===this.x&&t.y===this.y}set(t=0,i=t){return this.x=t,this.y=i,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const Zo=[new Y,new Y,new Y,new Y];class it{constructor(t=0,i=0,n=0,r=0){this.x=Number(t),this.y=Number(i),this.width=Number(n),this.height=Number(r),this.type=Ht.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new it(0,0,0,0)}clone(){return new it(this.x,this.y,this.width,this.height)}copyFrom(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this}copyTo(t){return t.x=this.x,t.y=this.y,t.width=this.width,t.height=this.height,t}contains(t,i){return this.width<=0||this.height<=0?!1:t>=this.x&&t<this.x+this.width&&i>=this.y&&i<this.y+this.height}intersects(t,i){if(!i){const w=this.x<t.x?t.x:this.x;if((this.right>t.right?t.right:this.right)<=w)return!1;const A=this.y<t.y?t.y:this.y;return(this.bottom>t.bottom?t.bottom:this.bottom)>A}const n=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=n||o<=s)return!1;const a=Zo[0].set(t.left,t.top),l=Zo[1].set(t.left,t.bottom),h=Zo[2].set(t.right,t.top),u=Zo[3].set(t.right,t.bottom);if(h.x<=a.x||l.y<=a.y)return!1;const c=Math.sign(i.a*i.d-i.b*i.c);if(c===0||(i.apply(a,a),i.apply(l,l),i.apply(h,h),i.apply(u,u),Math.max(a.x,l.x,h.x,u.x)<=n||Math.min(a.x,l.x,h.x,u.x)>=r||Math.max(a.y,l.y,h.y,u.y)<=s||Math.min(a.y,l.y,h.y,u.y)>=o))return!1;const d=c*(l.y-a.y),f=c*(a.x-l.x),p=d*n+f*s,y=d*r+f*s,_=d*n+f*o,m=d*r+f*o;if(Math.max(p,y,_,m)<=d*a.x+f*a.y||Math.min(p,y,_,m)>=d*u.x+f*u.y)return!1;const g=c*(a.y-h.y),v=c*(h.x-a.x),x=g*n+v*s,b=g*r+v*s,T=g*n+v*o,E=g*r+v*o;return!(Math.max(x,b,T,E)<=g*a.x+v*a.y||Math.min(x,b,T,E)>=g*u.x+v*u.y)}pad(t=0,i=t){return this.x-=t,this.y-=i,this.width+=t*2,this.height+=i*2,this}fit(t){const i=Math.max(this.x,t.x),n=Math.min(this.x+this.width,t.x+t.width),r=Math.max(this.y,t.y),s=Math.min(this.y+this.height,t.y+t.height);return this.x=i,this.width=Math.max(n-i,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(t=1,i=.001){const n=Math.ceil((this.x+this.width-i)*t)/t,r=Math.ceil((this.y+this.height-i)*t)/t;return this.x=Math.floor((this.x+i)*t)/t,this.y=Math.floor((this.y+i)*t)/t,this.width=n-this.x,this.height=r-this.y,this}enlarge(t){const i=Math.min(this.x,t.x),n=Math.max(this.x+this.width,t.x+t.width),r=Math.min(this.y,t.y),s=Math.max(this.y+this.height,t.y+t.height);return this.x=i,this.width=n-i,this.y=r,this.height=s-r,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class oh{constructor(t=0,i=0,n=0){this.x=t,this.y=i,this.radius=n,this.type=Ht.CIRC}clone(){return new oh(this.x,this.y,this.radius)}contains(t,i){if(this.radius<=0)return!1;const n=this.radius*this.radius;let r=this.x-t,s=this.y-i;return r*=r,s*=s,r+s<=n}getBounds(){return new it(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class qf{constructor(t=0,i=0,n=0,r=0){this.x=t,this.y=i,this.width=n,this.height=r,this.type=Ht.ELIP}clone(){return new qf(this.x,this.y,this.width,this.height)}contains(t,i){if(this.width<=0||this.height<=0)return!1;let n=(t-this.x)/this.width,r=(i-this.y)/this.height;return n*=n,r*=r,n+r<=1}getBounds(){return new it(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class Mr{constructor(...t){let i=Array.isArray(t[0])?t[0]:t;if(typeof i[0]!="number"){const n=[];for(let r=0,s=i.length;r<s;r++)n.push(i[r].x,i[r].y);i=n}this.points=i,this.type=Ht.POLY,this.closeStroke=!0}clone(){const t=this.points.slice(),i=new Mr(t);return i.closeStroke=this.closeStroke,i}contains(t,i){let n=!1;const r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){const a=this.points[s*2],l=this.points[s*2+1],h=this.points[o*2],u=this.points[o*2+1];l>i!=u>i&&t<(h-a)*((i-l)/(u-l))+a&&(n=!n)}return n}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((t,i)=>`${t}, ${i}`,"")}]`}}class ah{constructor(t=0,i=0,n=0,r=0,s=20){this.x=t,this.y=i,this.width=n,this.height=r,this.radius=s,this.type=Ht.RREC}clone(){return new ah(this.x,this.y,this.width,this.height,this.radius)}contains(t,i){if(this.width<=0||this.height<=0)return!1;if(t>=this.x&&t<=this.x+this.width&&i>=this.y&&i<=this.y+this.height){const n=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(i>=this.y+n&&i<=this.y+this.height-n||t>=this.x+n&&t<=this.x+this.width-n)return!0;let r=t-(this.x+n),s=i-(this.y+n);const o=n*n;if(r*r+s*s<=o||(r=t-(this.x+this.width-n),r*r+s*s<=o)||(s=i-(this.y+this.height-n),r*r+s*s<=o)||(r=t-(this.x+n),r*r+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class yt{constructor(t=1,i=0,n=0,r=1,s=0,o=0){this.array=null,this.a=t,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=o}fromArray(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]}set(t,i,n,r,s,o){return this.a=t,this.b=i,this.c=n,this.d=r,this.tx=s,this.ty=o,this}toArray(t,i){this.array||(this.array=new Float32Array(9));const n=i||this.array;return t?(n[0]=this.a,n[1]=this.b,n[2]=0,n[3]=this.c,n[4]=this.d,n[5]=0,n[6]=this.tx,n[7]=this.ty,n[8]=1):(n[0]=this.a,n[1]=this.c,n[2]=this.tx,n[3]=this.b,n[4]=this.d,n[5]=this.ty,n[6]=0,n[7]=0,n[8]=1),n}apply(t,i){i=i||new Y;const n=t.x,r=t.y;return i.x=this.a*n+this.c*r+this.tx,i.y=this.b*n+this.d*r+this.ty,i}applyInverse(t,i){i=i||new Y;const n=1/(this.a*this.d+this.c*-this.b),r=t.x,s=t.y;return i.x=this.d*n*r+-this.c*n*s+(this.ty*this.c-this.tx*this.d)*n,i.y=this.a*n*s+-this.b*n*r+(-this.ty*this.a+this.tx*this.b)*n,i}translate(t,i){return this.tx+=t,this.ty+=i,this}scale(t,i){return this.a*=t,this.d*=i,this.c*=t,this.b*=i,this.tx*=t,this.ty*=i,this}rotate(t){const i=Math.cos(t),n=Math.sin(t),r=this.a,s=this.c,o=this.tx;return this.a=r*i-this.b*n,this.b=r*n+this.b*i,this.c=s*i-this.d*n,this.d=s*n+this.d*i,this.tx=o*i-this.ty*n,this.ty=o*n+this.ty*i,this}append(t){const i=this.a,n=this.b,r=this.c,s=this.d;return this.a=t.a*i+t.b*r,this.b=t.a*n+t.b*s,this.c=t.c*i+t.d*r,this.d=t.c*n+t.d*s,this.tx=t.tx*i+t.ty*r+this.tx,this.ty=t.tx*n+t.ty*s+this.ty,this}setTransform(t,i,n,r,s,o,a,l,h){return this.a=Math.cos(a+h)*s,this.b=Math.sin(a+h)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=t-(n*this.a+r*this.c),this.ty=i-(n*this.b+r*this.d),this}prepend(t){const i=this.tx;if(t.a!==1||t.b!==0||t.c!==0||t.d!==1){const n=this.a,r=this.c;this.a=n*t.a+this.b*t.c,this.b=n*t.b+this.b*t.d,this.c=r*t.a+this.d*t.c,this.d=r*t.b+this.d*t.d}return this.tx=i*t.a+this.ty*t.c+t.tx,this.ty=i*t.b+this.ty*t.d+t.ty,this}decompose(t){const i=this.a,n=this.b,r=this.c,s=this.d,o=t.pivot,a=-Math.atan2(-r,s),l=Math.atan2(n,i),h=Math.abs(a+l);return h<1e-5||Math.abs(xl-h)<1e-5?(t.rotation=l,t.skew.x=t.skew.y=0):(t.rotation=0,t.skew.x=a,t.skew.y=l),t.scale.x=Math.sqrt(i*i+n*n),t.scale.y=Math.sqrt(r*r+s*s),t.position.x=this.tx+(o.x*i+o.y*r),t.position.y=this.ty+(o.x*n+o.y*s),t}invert(){const t=this.a,i=this.b,n=this.c,r=this.d,s=this.tx,o=t*r-i*n;return this.a=r/o,this.b=-i/o,this.c=-n/o,this.d=t/o,this.tx=(n*this.ty-r*s)/o,this.ty=-(t*this.ty-i*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const t=new yt;return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyTo(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t}copyFrom(t){return this.a=t.a,this.b=t.b,this.c=t.c,this.d=t.d,this.tx=t.tx,this.ty=t.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new yt}static get TEMP_MATRIX(){return new yt}}const En=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Tn=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Sn=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Cn=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],Zc=[],y_=[],Qo=Math.sign;function Uk(){for(let e=0;e<16;e++){const t=[];Zc.push(t);for(let i=0;i<16;i++){const n=Qo(En[e]*En[i]+Sn[e]*Tn[i]),r=Qo(Tn[e]*En[i]+Cn[e]*Tn[i]),s=Qo(En[e]*Sn[i]+Sn[e]*Cn[i]),o=Qo(Tn[e]*Sn[i]+Cn[e]*Cn[i]);for(let a=0;a<16;a++)if(En[a]===n&&Tn[a]===r&&Sn[a]===s&&Cn[a]===o){t.push(a);break}}}for(let e=0;e<16;e++){const t=new yt;t.set(En[e],Tn[e],Sn[e],Cn[e],0,0),y_.push(t)}}Uk();const xt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:e=>En[e],uY:e=>Tn[e],vX:e=>Sn[e],vY:e=>Cn[e],inv:e=>e&8?e&15:-e&7,add:(e,t)=>Zc[e][t],sub:(e,t)=>Zc[e][xt.inv(t)],rotate180:e=>e^4,isVertical:e=>(e&3)===2,byDirection:(e,t)=>Math.abs(e)*2<=Math.abs(t)?t>=0?xt.S:xt.N:Math.abs(t)*2<=Math.abs(e)?e>0?xt.E:xt.W:t>0?e>0?xt.SE:xt.SW:e>0?xt.NE:xt.NW,matrixAppendRotationInv:(e,t,i=0,n=0)=>{const r=y_[xt.inv(t)];r.tx=i,r.ty=n,e.append(r)}};class qi{constructor(t,i,n=0,r=0){this._x=n,this._y=r,this.cb=t,this.scope=i}clone(t=this.cb,i=this.scope){return new qi(t,i,this._x,this._y)}set(t=0,i=t){return(this._x!==t||this._y!==i)&&(this._x=t,this._y=i,this.cb.call(this.scope)),this}copyFrom(t){return(this._x!==t.x||this._y!==t.y)&&(this._x=t.x,this._y=t.y,this.cb.call(this.scope)),this}copyTo(t){return t.set(this._x,this._y),t}equals(t){return t.x===this._x&&t.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this.scope}]`}get x(){return this._x}set x(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}get y(){return this._y}set y(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}const __=class{constructor(){this.worldTransform=new yt,this.localTransform=new yt,this.position=new qi(this.onChange,this,0,0),this.scale=new qi(this.onChange,this,1,1),this.pivot=new qi(this.onChange,this,0,0),this.skew=new qi(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const e=this.localTransform;this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(e){const t=this.localTransform;if(this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==e._worldID){const i=e.worldTransform,n=this.worldTransform;n.a=t.a*i.a+t.b*i.c,n.b=t.a*i.b+t.b*i.d,n.c=t.c*i.a+t.d*i.c,n.d=t.c*i.b+t.d*i.d,n.tx=t.tx*i.a+t.ty*i.c+i.tx,n.ty=t.tx*i.b+t.ty*i.d+i.ty,this._parentID=e._worldID,this._worldID++}}setFromMatrix(e){e.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(e){this._rotation!==e&&(this._rotation=e,this.updateSkew())}};let Kf=__;Kf.IDENTITY=new __;var zk=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,Gk=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function wg(e,t,i){const n=e.createShader(t);return e.shaderSource(n,i),e.compileShader(n),n}function ru(e){const t=new Array(e);for(let i=0;i<t.length;i++)t[i]=!1;return t}function x_(e,t){switch(e){case"float":return 0;case"vec2":return new Float32Array(2*t);case"vec3":return new Float32Array(3*t);case"vec4":return new Float32Array(4*t);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*t);case"ivec3":return new Int32Array(3*t);case"ivec4":return new Int32Array(4*t);case"uvec2":return new Uint32Array(2*t);case"uvec3":return new Uint32Array(3*t);case"uvec4":return new Uint32Array(4*t);case"bool":return!1;case"bvec2":return ru(2*t);case"bvec3":return ru(3*t);case"bvec4":return ru(4*t);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const kr=[{test:e=>e.type==="float"&&e.size===1&&!e.isArray,code:e=>`
            if(uv["${e}"] !== ud["${e}"].value)
            {
                ud["${e}"].value = uv["${e}"]
                gl.uniform1f(ud["${e}"].location, uv["${e}"])
            }
            `},{test:(e,t)=>(e.type==="sampler2D"||e.type==="samplerCube"||e.type==="sampler2DArray")&&e.size===1&&!e.isArray&&(t==null||t.castToBaseTexture!==void 0),code:e=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${e}"], t);

            if(ud["${e}"].value !== t)
            {
                ud["${e}"].value = t;
                gl.uniform1i(ud["${e}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(e,t)=>e.type==="mat3"&&e.size===1&&!e.isArray&&t.a!==void 0,code:e=>`
            gl.uniformMatrix3fv(ud["${e}"].location, false, uv["${e}"].toArray(true));
            `,codeUbo:e=>`
                var ${e}_matrix = uv.${e}.toArray(true);

                data[offset] = ${e}_matrix[0];
                data[offset+1] = ${e}_matrix[1];
                data[offset+2] = ${e}_matrix[2];
        
                data[offset + 4] = ${e}_matrix[3];
                data[offset + 5] = ${e}_matrix[4];
                data[offset + 6] = ${e}_matrix[5];
        
                data[offset + 8] = ${e}_matrix[6];
                data[offset + 9] = ${e}_matrix[7];
                data[offset + 10] = ${e}_matrix[8];
            `},{test:(e,t)=>e.type==="vec2"&&e.size===1&&!e.isArray&&t.x!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${e}"].location, v.x, v.y);
                }`,codeUbo:e=>`
                v = uv.${e};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:e=>e.type==="vec2"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${e}"].location, v[0], v[1]);
                }
            `},{test:(e,t)=>e.type==="vec4"&&e.size===1&&!e.isArray&&t.width!==void 0,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${e}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:e=>`
                    v = uv.${e};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:e=>e.type==="vec4"&&e.size===1&&!e.isArray,code:e=>`
                cv = ud["${e}"].value;
                v = uv["${e}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${e}"].location, v[0], v[1], v[2], v[3])
                }`}],$k={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},Hk={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function jk(e,t){var n;const i=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in e.uniforms){const s=t[r];if(!s){(n=e.uniforms[r])!=null&&n.group&&(e.uniforms[r].ubo?i.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):i.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const o=e.uniforms[r];let a=!1;for(let l=0;l<kr.length;l++)if(kr[l].test(s,o)){i.push(kr[l].code(r,o)),a=!0;break}if(!a){const h=(s.size===1&&!s.isArray?$k:Hk)[s.type].replace("location",`ud["${r}"].location`);i.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${h};`)}}return new Function("ud","uv","renderer","syncData",i.join(`
`))}const w_={};let er=w_;function Wk(){if(er===w_||er!=null&&er.isContextLost()){const e=z.ADAPTER.createCanvas();let t;z.PREFER_ENV>=Qn.WEBGL2&&(t=e.getContext("webgl2",{})),t||(t=e.getContext("webgl",{})||e.getContext("experimental-webgl",{}),t?t.getExtension("WEBGL_draw_buffers"):t=null),er=t}return er}let Jo;function Xk(){if(!Jo){Jo=Pe.MEDIUM;const e=Wk();e&&e.getShaderPrecisionFormat&&(Jo=e.getShaderPrecisionFormat(e.FRAGMENT_SHADER,e.HIGH_FLOAT).precision?Pe.HIGH:Pe.MEDIUM)}return Jo}function bg(e,t){const i=e.getShaderSource(t).split(`
`).map((h,u)=>`${u}: ${h}`),n=e.getShaderInfoLog(t),r=n.split(`
`),s={},o=r.map(h=>parseFloat(h.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(h=>h&&!s[h]?(s[h]=!0,!0):!1),a=[""];o.forEach(h=>{i[h-1]=`%c${i[h-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=i.join(`
`);a[0]=l,console.error(n),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function Vk(e,t,i,n){e.getProgramParameter(t,e.LINK_STATUS)||(e.getShaderParameter(i,e.COMPILE_STATUS)||bg(e,i),e.getShaderParameter(n,e.COMPILE_STATUS)||bg(e,n),console.error("PixiJS Error: Could not initialize shader."),e.getProgramInfoLog(t)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",e.getProgramInfoLog(t)))}const Yk={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function b_(e){return Yk[e]}let ta=null;const Eg={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function E_(e,t){if(!ta){const i=Object.keys(Eg);ta={};for(let n=0;n<i.length;++n){const r=i[n];ta[e[r]]=Eg[r]}}return ta[t]}function Tg(e,t,i){if(e.substring(0,9)!=="precision"){let n=t;return t===Pe.HIGH&&i!==Pe.HIGH&&(n=Pe.MEDIUM),`precision ${n} float;
${e}`}else if(i!==Pe.HIGH&&e.substring(0,15)==="precision highp")return e.replace("precision highp","precision mediump");return e}let cs;function qk(){if(typeof cs=="boolean")return cs;try{cs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{cs=!1}return cs}let Kk=0;const ea={},rr=class{constructor(e,t,i="pixi-shader",n={}){this.extra={},this.id=Kk++,this.vertexSrc=e||rr.defaultVertexSrc,this.fragmentSrc=t||rr.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=n,this.vertexSrc.substring(0,8)!=="#version"&&(i=i.replace(/\s+/g,"-"),ea[i]?(ea[i]++,i+=`-${ea[i]}`):ea[i]=1,this.vertexSrc=`#define SHADER_NAME ${i}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${i}
${this.fragmentSrc}`,this.vertexSrc=Tg(this.vertexSrc,rr.defaultVertexPrecision,Pe.HIGH),this.fragmentSrc=Tg(this.fragmentSrc,rr.defaultFragmentPrecision,Xk())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return Gk}static get defaultFragmentSrc(){return zk}static from(e,t,i){const n=e+t;let r=mg[n];return r||(mg[n]=r=new rr(e,t,i)),r}};let Xe=rr;Xe.defaultVertexPrecision=Pe.HIGH;Xe.defaultFragmentPrecision=Ci.apple.device?Pe.HIGH:Pe.MEDIUM;let Zk=0;class Ze{constructor(t,i,n){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=Zk++,this.static=!!i,this.ubo=!!n,t instanceof It?(this.buffer=t,this.buffer.type=pi.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=t,this.ubo&&(this.buffer=new It(new Float32Array(1)),this.buffer.type=pi.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(t,i,n){if(!this.ubo)this.uniforms[t]=new Ze(i,n);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(t,i,n){return new Ze(t,i,n)}static uboFrom(t,i){return new Ze(t,i??!0,!0)}}class mi{constructor(t,i){this.uniformBindCount=0,this.program=t,i?i instanceof Ze?this.uniformGroup=i:this.uniformGroup=new Ze(i):this.uniformGroup=new Ze({}),this.disposeRunner=new Ke("disposeShader")}checkUniformExists(t,i){if(i.uniforms[t])return!0;for(const n in i.uniforms){const r=i.uniforms[n];if(r.group&&this.checkUniformExists(t,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(t,i,n){const r=Xe.from(t,i);return new mi(r,n)}}class Qk{constructor(t,i){if(this.vertexSrc=t,this.fragTemplate=i,this.programCache={},this.defaultGroupCache={},!i.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!i.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(t){if(!this.programCache[t]){const n=new Int32Array(t);for(let s=0;s<t;s++)n[s]=s;this.defaultGroupCache[t]=Ze.from({uSamplers:n},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${t}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(t)),this.programCache[t]=new Xe(this.vertexSrc,r)}const i={tint:new Float32Array([1,1,1,1]),translationMatrix:new yt,default:this.defaultGroupCache[t]};return new mi(this.programCache[t],i)}generateSampleSrc(t){let i="";i+=`
`,i+=`
`;for(let n=0;n<t;n++)n>0&&(i+=`
else `),n<t-1&&(i+=`if(vTextureId < ${n}.5)`),i+=`
{`,i+=`
	color = texture2D(uSamplers[${n}], vTextureCoord);`,i+=`
}`;return i+=`
`,i+=`
`,i}}class Qc{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let t=0;t<this.count;t++)this.elements[t]=null;this.count=0}}function Jk(){return!Ci.apple.device}function tO(e){let t=!0;const i=z.ADAPTER.getNavigator();if(Ci.tablet||Ci.phone){if(Ci.apple.device){const n=i.userAgent.match(/OS (\d+)_(\d+)?/);n&&parseInt(n[1],10)<11&&(t=!1)}if(Ci.android.device){const n=i.userAgent.match(/Android\s([0-9.]*)/);n&&parseInt(n[1],10)<7&&(t=!1)}}return t?e:4}class lh{constructor(t){this.renderer=t}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(t){}}var eO=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,iO=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const Le=class extends lh{constructor(e){super(e),this.setShaderGenerator(),this.geometryClass=v_,this.vertexSize=6,this.state=Fi.for2d(),this.size=Le.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),e.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??tO(32),this._defaultMaxTextures}static set defaultMaxTextures(e){this._defaultMaxTextures=e}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??Jk(),this._canUploadSameBuffer}static set canUploadSameBuffer(e){this._canUploadSameBuffer=e}get MAX_TEXTURES(){return lt("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return iO}static get defaultFragmentTemplate(){return eO}setShaderGenerator({vertex:e=Le.defaultVertexSrc,fragment:t=Le.defaultFragmentTemplate}={}){this.shaderGenerator=new Qk(e,t)}contextChange(){const e=this.renderer.gl;z.PREFER_ENV===Qn.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS),Le.defaultMaxTextures),this.maxTextures=Rk(this.maxTextures,e)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:e,_textureArrayPool:t}=Le,i=this.size/4,n=Math.floor(i/this.maxTextures)+1;for(;e.length<i;)e.push(new Kc);for(;t.length<n;)t.push(new Qc);for(let r=0;r<this.maxTextures;r++)this._tempBoundTextures[r]=null}onPrerender(){this._flushId=0}render(e){e._texture.valid&&(this._vertexCount+e.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=e.vertexData.length/2,this._indexCount+=e.indices.length,this._bufferedTextures[this._bufferSize]=e._texture.baseTexture,this._bufferedElements[this._bufferSize++]=e)}buildTexturesAndDrawCalls(){const{_bufferedTextures:e,maxTextures:t}=this,i=Le._textureArrayPool,n=this.renderer.batch,r=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++tt._globalBatch,a=0,l=i[0],h=0;n.copyBoundTextures(r,t);for(let u=0;u<this._bufferSize;++u){const c=e[u];e[u]=null,c._batchEnabled!==o&&(l.count>=t&&(n.boundArray(l,r,o,t),this.buildDrawCalls(l,h,u),h=u,l=i[++a],++o),c._batchEnabled=o,c.touched=s,l.elements[l.count++]=c)}l.count>0&&(n.boundArray(l,r,o,t),this.buildDrawCalls(l,h,this._bufferSize),++a,++o);for(let u=0;u<r.length;u++)r[u]=null;tt._globalBatch=o}buildDrawCalls(e,t,i){const{_bufferedElements:n,_attributeBuffer:r,_indexBuffer:s,vertexSize:o}=this,a=Le._drawCallPool;let l=this._dcIndex,h=this._aIndex,u=this._iIndex,c=a[l];c.start=this._iIndex,c.texArray=e;for(let d=t;d<i;++d){const f=n[d],p=f._texture.baseTexture,y=c_[p.alphaMode?1:0][f.blendMode];n[d]=null,t<d&&c.blend!==y&&(c.size=u-c.start,t=d,c=a[++l],c.texArray=e,c.start=u),this.packInterleavedGeometry(f,r,s,h,u),h+=f.vertexData.length/2*o,u+=f.indices.length,c.blend=y}t<i&&(c.size=u-c.start,++l),this._dcIndex=l,this._aIndex=h,this._iIndex=u}bindAndClearTexArray(e){const t=this.renderer.texture;for(let i=0;i<e.count;i++)t.bind(e.elements[i],e.ids[i]),e.elements[i]=null;e.count=0}updateGeometry(){const{_packedGeometries:e,_attributeBuffer:t,_indexBuffer:i}=this;Le.canUploadSameBuffer?(e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,e[this._flushId]=new this.geometryClass),e[this._flushId]._buffer.update(t.rawBinaryData),e[this._flushId]._indexBuffer.update(i),this.renderer.geometry.bind(e[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const e=this._dcIndex,{gl:t,state:i}=this.renderer,n=Le._drawCallPool;let r=null;for(let s=0;s<e;s++){const{texArray:o,type:a,size:l,start:h,blend:u}=n[s];r!==o&&(r=o,this.bindAndClearTexArray(o)),this.state.blendMode=u,i.set(this.state),t.drawElements(a,l,t.UNSIGNED_SHORT,h*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Le.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]&&this._packedGeometries[e].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(e){const t=yl(Math.ceil(e/8)),i=pg(t),n=t*8;this._aBuffers.length<=i&&(this._iBuffers.length=i+1);let r=this._aBuffers[n];return r||(this._aBuffers[n]=r=new Yc(n*this.vertexSize*4)),r}getIndexBuffer(e){const t=yl(Math.ceil(e/12)),i=pg(t),n=t*12;this._iBuffers.length<=i&&(this._iBuffers.length=i+1);let r=this._iBuffers[i];return r||(this._iBuffers[i]=r=new Uint16Array(n)),r}packInterleavedGeometry(e,t,i,n,r){const{uint32View:s,float32View:o}=t,a=n/this.vertexSize,l=e.uvs,h=e.indices,u=e.vertexData,c=e._texture.baseTexture._batchLocation,d=Math.min(e.worldAlpha,1),f=d<1&&e._texture.baseTexture.alphaMode?Yf(e._tintRGB,d):e._tintRGB+(d*255<<24);for(let p=0;p<u.length;p+=2)o[n++]=u[p],o[n++]=u[p+1],o[n++]=l[p],o[n++]=l[p+1],s[n++]=f,o[n++]=c;for(let p=0;p<h.length;p++)i[r++]=a+h[p]}};let je=Le;je.defaultBatchSize=4096;je.extension={name:"batch",type:L.RendererPlugin};je._drawCallPool=[];je._textureArrayPool=[];W.add(je);var nO=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,rO=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const Es=class extends mi{constructor(e,t,i){const n=Xe.from(e||Es.defaultVertexSrc,t||Es.defaultFragmentSrc);super(n,i),this.padding=0,this.resolution=Es.defaultResolution,this.multisample=Es.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new Fi}apply(e,t,i,n,r){e.applyFilter(this,t,i,n)}get blendMode(){return this.state.blendMode}set blendMode(e){this.state.blendMode=e}get resolution(){return this._resolution}set resolution(e){this._resolution=e}static get defaultVertexSrc(){return rO}static get defaultFragmentSrc(){return nO}};let jt=Es;jt.defaultResolution=1;jt.defaultMultisample=Pt.NONE;class T_{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(t){this.clearBeforeRender=t.clearBeforeRender,t.color&&(this.color=typeof t.color=="string"?Vf(t.color):t.color),this.alpha=t.alpha}get color(){return this._backgroundColor}set color(t){this._backgroundColor=t,this._backgroundColorString=u_(t),co(t,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(t){this._backgroundColorRgba[3]=t}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}T_.extension={type:[L.RendererSystem,L.CanvasRendererSystem],name:"background"};W.add(T_);class S_{constructor(t){this.renderer=t,this.emptyRenderer=new lh(t),this.currentRenderer=this.emptyRenderer}setObjectRenderer(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(t,i){const{boundTextures:n}=this.renderer.texture;for(let r=i-1;r>=0;--r)t[r]=n[r]||null,t[r]&&(t[r]._batchLocation=r)}boundArray(t,i,n,r){const{elements:s,ids:o,count:a}=t;let l=0;for(let h=0;h<a;h++){const u=s[h],c=u._batchLocation;if(c>=0&&c<r&&i[c]===u){o[h]=c;continue}for(;l<r;){const d=i[l];if(d&&d._batchEnabled===n&&d._batchLocation===l){l++;continue}o[h]=l,u._batchLocation=l,i[l]=u;break}}}destroy(){this.renderer=null}}S_.extension={type:L.RendererSystem,name:"batch"};W.add(S_);let Sg=0;class C_{constructor(t){this.renderer=t,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(t){this.gl=t,this.renderer.gl=t,this.renderer.CONTEXT_UID=Sg++}init(t){if(t.context)this.initFromContext(t.context);else{const i=this.renderer.background.alpha<1,n=t.premultipliedAlpha;this.preserveDrawingBuffer=t.preserveDrawingBuffer,this.useContextAlpha=t.useContextAlpha,this.powerPreference=t.powerPreference,this.initFromOptions({alpha:i,premultipliedAlpha:n,antialias:t.antialias,stencil:!0,preserveDrawingBuffer:t.preserveDrawingBuffer,powerPreference:t.powerPreference})}}initFromContext(t){this.gl=t,this.validateContext(t),this.renderer.gl=t,this.renderer.CONTEXT_UID=Sg++,this.renderer.runners.contextChange.emit(t);const i=this.renderer.view;i.addEventListener!==void 0&&(i.addEventListener("webglcontextlost",this.handleContextLost,!1),i.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(t){const i=this.createContext(this.renderer.view,t);this.initFromContext(i)}createContext(t,i){let n;if(z.PREFER_ENV>=Qn.WEBGL2&&(n=t.getContext("webgl2",i)),n)this.webGLVersion=2;else if(this.webGLVersion=1,n=t.getContext("webgl",i)||t.getContext("experimental-webgl",i),!n)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=n,this.getExtensions(),this.gl}getExtensions(){const{gl:t}=this,i={loseContext:t.getExtension("WEBGL_lose_context"),anisotropicFiltering:t.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),s3tc:t.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:t.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:t.getExtension("WEBGL_compressed_texture_etc"),etc1:t.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:t.getExtension("WEBGL_compressed_texture_pvrtc")||t.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:t.getExtension("WEBGL_compressed_texture_atc"),astc:t.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,i,{drawBuffers:t.getExtension("WEBGL_draw_buffers"),depthTexture:t.getExtension("WEBGL_depth_texture"),vertexArrayObject:t.getExtension("OES_vertex_array_object")||t.getExtension("MOZ_OES_vertex_array_object")||t.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:t.getExtension("OES_element_index_uint"),floatTexture:t.getExtension("OES_texture_float"),floatTextureLinear:t.getExtension("OES_texture_float_linear"),textureHalfFloat:t.getExtension("OES_texture_half_float"),textureHalfFloatLinear:t.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,i,{colorBufferFloat:t.getExtension("EXT_color_buffer_float")})}handleContextLost(t){t.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const t=this.renderer.view;this.renderer=null,t.removeEventListener!==void 0&&(t.removeEventListener("webglcontextlost",this.handleContextLost),t.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(t){const i=t.getContextAttributes(),n="WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext;n&&(this.webGLVersion=2),i&&!i.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=n||!!t.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}C_.extension={type:L.RendererSystem,name:"context"};W.add(C_);class sO extends To{upload(t,i,n){const r=t.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ti.UNPACK);const s=i.realWidth,o=i.realHeight;return n.width===s&&n.height===o?r.texSubImage2D(i.target,0,0,0,s,o,i.format,n.type,this.data):(n.width=s,n.height=o,r.texImage2D(i.target,0,n.internalFormat,s,o,0,i.format,n.type,this.data)),!0}}class Jc{constructor(t,i){this.width=Math.round(t||100),this.height=Math.round(i||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Ke("disposeFramebuffer"),this.multisample=Pt.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(t=0,i){return this.colorTextures[t]=i||new tt(null,{scaleMode:Si.NEAREST,resolution:1,mipmap:gi.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(t){return this.depthTexture=t||new tt(new sO(null,{width:this.width,height:this.height}),{scaleMode:Si.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:gi.OFF,format:N.DEPTH_COMPONENT,type:V.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(t,i){if(t=Math.round(t),i=Math.round(i),!(t===this.width&&i===this.height)){this.width=t,this.height=i,this.dirtyId++,this.dirtySize++;for(let n=0;n<this.colorTextures.length;n++){const r=this.colorTextures[n],s=r.resolution;r.setSize(t/s,i/s)}if(this.depthTexture){const n=this.depthTexture.resolution;this.depthTexture.setSize(t/n,i/n)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class A_ extends tt{constructor(t={}){if(typeof t=="number"){const i=arguments[0],n=arguments[1],r=arguments[2],s=arguments[3];t={width:i,height:n,scaleMode:r,resolution:s}}t.width=t.width||100,t.height=t.height||100,t.multisample??(t.multisample=Pt.NONE),super(null,t),this.mipmap=gi.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new Jc(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=t.multisample,this.maskStack=[],this.filterStack=[{}]}resize(t,i){this.framebuffer.resize(t*this.resolution,i*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class cn extends fo{constructor(t){const i=t,n=i.naturalWidth||i.videoWidth||i.width,r=i.naturalHeight||i.videoHeight||i.height;super(n,r),this.source=t,this.noSubImage=!1}static crossOrigin(t,i,n){n===void 0&&!i.startsWith("data:")?t.crossOrigin=Ak(i):n!==!1&&(t.crossOrigin=typeof n=="string"?n:"anonymous")}upload(t,i,n,r){const s=t.gl,o=i.realWidth,a=i.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||r.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1&&r.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,i.alphaMode===ti.UNPACK),!this.noSubImage&&i.target===s.TEXTURE_2D&&n.width===o&&n.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,i.format,n.type,r):(n.width=o,n.height=a,s.texImage2D(i.target,0,n.internalFormat,i.format,n.type,r)),!0}update(){if(this.destroyed)return;const t=this.source,i=t.naturalWidth||t.videoWidth||t.width,n=t.naturalHeight||t.videoHeight||t.height;this.resize(i,n),super.update()}dispose(){this.source=null}}class P_ extends cn{constructor(t,i){if(i=i||{},typeof t=="string"){const n=new Image;cn.crossOrigin(n,t,i.crossorigin),n.src=t,t=n}super(t),!t.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=t.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(i.createBitmap??z.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this.bitmap=null,this._load=null,i.autoLoad!==!1&&this.load()}load(t){return this._load?this._load:(t!==void 0&&(this.createBitmap=t),this._load=new Promise((i,n)=>{const r=this.source;this.url=r.src;const s=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?i(this.process()):i(this))};r.complete&&r.src?s():(r.onload=s,r.onerror=o=>{n(o),this.onError.emit(o)})}),this._load)}process(){const t=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const i=globalThis.createImageBitmap,n=!t.crossOrigin||t.crossOrigin==="anonymous";return this._process=fetch(t.src,{mode:n?"cors":"no-cors"}).then(r=>r.blob()).then(r=>i(r,0,0,t.width,t.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ti.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(t,i,n){if(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(t,i,n);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(t,i,n,this.bitmap),!this.preserveBitmap){let r=!0;const s=i._glTextures;for(const o in s){const a=s[o];if(a!==n&&a.dirtyId!==i.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(t){return typeof HTMLImageElement<"u"&&(typeof t=="string"||t instanceof HTMLImageElement)}}class I_{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(t,i,n){const r=i.width,s=i.height;if(n){const o=t.width/2/r,a=t.height/2/s,l=t.x/r+o,h=t.y/s+a;n=xt.add(n,xt.NW),this.x0=l+o*xt.uX(n),this.y0=h+a*xt.uY(n),n=xt.add(n,2),this.x1=l+o*xt.uX(n),this.y1=h+a*xt.uY(n),n=xt.add(n,2),this.x2=l+o*xt.uX(n),this.y2=h+a*xt.uY(n),n=xt.add(n,2),this.x3=l+o*xt.uX(n),this.y3=h+a*xt.uY(n)}else this.x0=t.x/r,this.y0=t.y/s,this.x1=(t.x+t.width)/r,this.y1=t.y/s,this.x2=(t.x+t.width)/r,this.y2=(t.y+t.height)/s,this.x3=t.x/r,this.y3=(t.y+t.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const Cg=new I_;function ia(e){e.destroy=function(){},e.on=function(){},e.once=function(){},e.emit=function(){}}class j extends $n{constructor(t,i,n,r,s,o){if(super(),this.noFrame=!1,i||(this.noFrame=!0,i=new it(0,0,1,1)),t instanceof j&&(t=t.baseTexture),this.baseTexture=t,this._frame=i,this.trim=r,this.valid=!1,this._uvs=Cg,this.uvMatrix=null,this.orig=n||i,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new Y(o.x,o.y):new Y(0,0),this._updateID=0,this.textureCacheIds=[],t.valid?this.noFrame?t.valid&&this.onBaseTextureUpdated(t):this.frame=i:t.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&t.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(t){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=t.width,this._frame.height=t.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(t){if(this.baseTexture){if(t){const{resource:i}=this.baseTexture;i!=null&&i.url&&ri[i.url]&&j.removeFromCache(i.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,j.removeFromCache(this),this.textureCacheIds=null}clone(){var r;const t=this._frame.clone(),i=this._frame===this.orig?t:this.orig.clone(),n=new j(this.baseTexture,!this.noFrame&&t,i,(r=this.trim)==null?void 0:r.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(n._frame=t),n}updateUvs(){this._uvs===Cg&&(this._uvs=new I_),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(t,i={},n=z.STRICT_TEXTURE_CACHE){const r=typeof t=="string";let s=null;if(r)s=t;else if(t instanceof tt){if(!t.cacheId){const a=(i==null?void 0:i.pixiIdPrefix)||"pixiid";t.cacheId=`${a}-${jn()}`,tt.addToCache(t,t.cacheId)}s=t.cacheId}else{if(!t._pixiId){const a=(i==null?void 0:i.pixiIdPrefix)||"pixiid";t._pixiId=`${a}_${jn()}`}s=t._pixiId}let o=ri[s];if(r&&n&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(t instanceof tt)?(i.resolution||(i.resolution=hn(t)),o=new j(new tt(t,i)),o.baseTexture.cacheId=s,tt.addToCache(o.baseTexture,s),j.addToCache(o,s)):!o&&t instanceof tt&&(o=new j(t),j.addToCache(o,s)),o}static fromURL(t,i){const n=Object.assign({autoLoad:!1},i==null?void 0:i.resourceOptions),r=j.from(t,Object.assign({resourceOptions:n},i),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then(()=>Promise.resolve(r))}static fromBuffer(t,i,n,r){return new j(tt.fromBuffer(t,i,n,r))}static fromLoader(t,i,n,r){const s=new tt(t,Object.assign({scaleMode:tt.defaultOptions.scaleMode,resolution:hn(i)},r)),{resource:o}=s;o instanceof P_&&(o.url=i);const a=new j(s);return n||(n=i),tt.addToCache(a.baseTexture,n),j.addToCache(a,n),n!==i&&(tt.addToCache(a.baseTexture,i),j.addToCache(a,i)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(t,i){i&&(t.textureCacheIds.includes(i)||t.textureCacheIds.push(i),ri[i]&&ri[i]!==t&&console.warn(`Texture added to the cache with an id [${i}] that already had an entry`),ri[i]=t)}static removeFromCache(t){if(typeof t=="string"){const i=ri[t];if(i){const n=i.textureCacheIds.indexOf(t);return n>-1&&i.textureCacheIds.splice(n,1),delete ri[t],i}}else if(t!=null&&t.textureCacheIds){for(let i=0;i<t.textureCacheIds.length;++i)ri[t.textureCacheIds[i]]===t&&delete ri[t.textureCacheIds[i]];return t.textureCacheIds.length=0,t}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(t){this._frame=t,this.noFrame=!1;const{x:i,y:n,width:r,height:s}=t,o=i+r>this.baseTexture.width,a=n+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",h=`X: ${i} + ${r} = ${i+r} > ${this.baseTexture.width}`,u=`Y: ${n} + ${s} = ${n+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${h} ${l} ${u}`)}this.valid=r&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=t),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(t){this._rotate=t,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return j._EMPTY||(j._EMPTY=new j(new tt),ia(j._EMPTY),ia(j._EMPTY.baseTexture)),j._EMPTY}static get WHITE(){if(!j._WHITE){const t=z.ADAPTER.createCanvas(16,16),i=t.getContext("2d");t.width=16,t.height=16,i.fillStyle="white",i.fillRect(0,0,16,16),j._WHITE=new j(tt.from(t)),ia(j._WHITE),ia(j._WHITE.baseTexture)}return j._WHITE}}class dn extends j{constructor(t,i){super(t,i),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(t){this.framebuffer.multisample=t}resize(t,i,n=!0){const r=this.baseTexture.resolution,s=Math.round(t*r)/r,o=Math.round(i*r)/r;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,n&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(t){const{baseTexture:i}=this;i.resolution!==t&&(i.setResolution(t),this.resize(i.width,i.height,!1))}static create(t){return new dn(new A_(t))}}class R_{constructor(t){this.texturePool={},this.textureOptions=t||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(t,i,n=Pt.NONE){const r=new A_(Object.assign({width:t,height:i,resolution:1,multisample:n},this.textureOptions));return new dn(r)}getOptimalTexture(t,i,n=1,r=Pt.NONE){let s;t=Math.ceil(t*n-1e-6),i=Math.ceil(i*n-1e-6),!this.enableFullScreen||t!==this._pixelsWidth||i!==this._pixelsHeight?(t=yl(t),i=yl(i),s=((t&65535)<<16|i&65535)>>>0,r>1&&(s+=r*4294967296)):s=r>1?-r:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(t,i,r)),o.filterPoolKey=s,o.setResolution(n),o}getFilterTexture(t,i,n){const r=this.getOptimalTexture(t.width,t.height,i||t.resolution,n||Pt.NONE);return r.filterFrame=t.filterFrame,r}returnTexture(t){const i=t.filterPoolKey;t.filterFrame=null,this.texturePool[i].push(t)}returnFilterTexture(t){this.returnTexture(t)}clear(t){if(t=t!==!1,t)for(const i in this.texturePool){const n=this.texturePool[i];if(n)for(let r=0;r<n.length;r++)n[r].destroy(!0)}this.texturePool={}}setScreenSize(t){if(!(t.width===this._pixelsWidth&&t.height===this._pixelsHeight)){this.enableFullScreen=t.width>0&&t.height>0;for(const i in this.texturePool){if(!(Number(i)<0))continue;const n=this.texturePool[i];if(n)for(let r=0;r<n.length;r++)n[r].destroy(!0);this.texturePool[i]=[]}this._pixelsWidth=t.width,this._pixelsHeight=t.height}}}R_.SCREEN_KEY=-1;class oO extends un{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class M_ extends un{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new It(this.vertices),this.uvBuffer=new It(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(t,i){let n=0,r=0;return this.uvs[0]=n,this.uvs[1]=r,this.uvs[2]=n+i.width/t.width,this.uvs[3]=r,this.uvs[4]=n+i.width/t.width,this.uvs[5]=r+i.height/t.height,this.uvs[6]=n,this.uvs[7]=r+i.height/t.height,n=i.x,r=i.y,this.vertices[0]=n,this.vertices[1]=r,this.vertices[2]=n+i.width,this.vertices[3]=r,this.vertices[4]=n+i.width,this.vertices[5]=r+i.height,this.vertices[6]=n,this.vertices[7]=r+i.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class aO{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Pt.NONE,this.sourceFrame=new it,this.destinationFrame=new it,this.bindingSourceFrame=new it,this.bindingDestinationFrame=new it,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const na=[new Y,new Y,new Y,new Y],su=new yt;class k_{constructor(t){this.renderer=t,this.defaultFilterStack=[{}],this.texturePool=new R_,this.statePool=[],this.quad=new oO,this.quadUv=new M_,this.tempRect=new it,this.activeState={},this.globalUniforms=new Ze({outputFrame:new it,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(t,i){const n=this.renderer,r=this.defaultFilterStack,s=this.statePool.pop()||new aO,o=this.renderer.renderTexture;let a=i[0].resolution,l=i[0].multisample,h=i[0].padding,u=i[0].autoFit,c=i[0].legacy??!0;for(let p=1;p<i.length;p++){const y=i[p];a=Math.min(a,y.resolution),l=Math.min(l,y.multisample),h=this.useMaxPadding?Math.max(h,y.padding):h+y.padding,u=u&&y.autoFit,c=c||(y.legacy??!0)}r.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(s),s.resolution=a,s.multisample=l,s.legacy=c,s.target=t,s.sourceFrame.copyFrom(t.filterArea||t.getBounds(!0)),s.sourceFrame.pad(h);const d=this.tempRect.copyFrom(o.sourceFrame);n.projection.transform&&this.transformAABB(su.copyFrom(n.projection.transform).invert(),d),u?(s.sourceFrame.fit(d),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(d)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:n.resolution,o.sourceFrame,o.destinationFrame,n.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,l),s.filters=i,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=s.sourceFrame.width,f.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=n.projection.transform,n.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,f),n.framebuffer.clear(0,0,0,0)}pop(){const t=this.defaultFilterStack,i=t.pop(),n=i.filters;this.activeState=i;const r=this.globalUniforms.uniforms;r.outputFrame=i.sourceFrame,r.resolution=i.resolution;const s=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(s[0]=i.destinationFrame.width,s[1]=i.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*i.resolution),o[1]=Math.round(s[1]*i.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=i.sourceFrame.width*s[2]-.5*o[2],a[3]=i.sourceFrame.height*s[3]-.5*o[3],i.legacy){const h=r.filterArea;h[0]=i.destinationFrame.width,h[1]=i.destinationFrame.height,h[2]=i.sourceFrame.x,h[3]=i.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const l=t[t.length-1];if(this.renderer.framebuffer.blit(),n.length===1)n[0].apply(this,i.renderTexture,l.renderTexture,oi.BLEND,i),this.returnFilterTexture(i.renderTexture);else{let h=i.renderTexture,u=this.getOptimalFilterTexture(h.width,h.height,i.resolution);u.filterFrame=h.filterFrame;let c=0;for(c=0;c<n.length-1;++c){c===1&&i.multisample>1&&(u=this.getOptimalFilterTexture(h.width,h.height,i.resolution),u.filterFrame=h.filterFrame),n[c].apply(this,h,u,oi.CLEAR,i);const d=h;h=u,u=d}n[c].apply(this,h,l.renderTexture,oi.BLEND,i),c>1&&i.multisample>1&&this.returnFilterTexture(i.renderTexture),this.returnFilterTexture(h),this.returnFilterTexture(u)}i.clear(),this.statePool.push(i)}bindAndClear(t,i=oi.CLEAR){const{renderTexture:n,state:r}=this.renderer;if(t===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,t!=null&&t.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=t.filterFrame.width,o.height=t.filterFrame.height,n.bind(t,t.filterFrame,o)}else t!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?n.bind(t):this.renderer.renderTexture.bind(t,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=r.stateId&1||this.forceClear;(i===oi.CLEAR||i===oi.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(t,i,n,r){const s=this.renderer;s.state.set(t.state),this.bindAndClear(n,r),t.uniforms.uSampler=i,t.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(t),t.legacy=!!t.program.attributeData.aTextureCoord,t.legacy?(this.quadUv.map(i._frame,i.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(ui.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(ui.TRIANGLE_STRIP))}calculateSpriteMatrix(t,i){const{sourceFrame:n,destinationFrame:r}=this.activeState,{orig:s}=i._texture,o=t.set(r.width,0,0,r.height,n.x,n.y),a=i.worldTransform.copyTo(yt.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(i.anchor.x,i.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(t,i,n=1,r=Pt.NONE){return this.texturePool.getOptimalTexture(t,i,n,r)}getFilterTexture(t,i,n){if(typeof t=="number"){const s=t;t=i,i=s}t=t||this.activeState.renderTexture;const r=this.texturePool.getOptimalTexture(t.width,t.height,i||t.resolution,n||Pt.NONE);return r.filterFrame=t.filterFrame,r}returnFilterTexture(t){this.texturePool.returnTexture(t)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(t,i){const n=na[0],r=na[1],s=na[2],o=na[3];n.set(i.left,i.top),r.set(i.left,i.bottom),s.set(i.right,i.top),o.set(i.right,i.bottom),t.apply(n,n),t.apply(r,r),t.apply(s,s),t.apply(o,o);const a=Math.min(n.x,r.x,s.x,o.x),l=Math.min(n.y,r.y,s.y,o.y),h=Math.max(n.x,r.x,s.x,o.x),u=Math.max(n.y,r.y,s.y,o.y);i.x=a,i.y=l,i.width=h-a,i.height=u-l}roundFrame(t,i,n,r,s){if(!(t.width<=0||t.height<=0||n.width<=0||n.height<=0)){if(s){const{a:o,b:a,c:l,d:h}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(h)>1e-4))return}s=s?su.copyFrom(s):su.identity(),s.translate(-n.x,-n.y).scale(r.width/n.width,r.height/n.height).translate(r.x,r.y),this.transformAABB(s,t),t.ceil(i),this.transformAABB(s.invert(),t)}}}k_.extension={type:L.RendererSystem,name:"filter"};W.add(k_);class lO{constructor(t){this.framebuffer=t,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Pt.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const hO=new it;class O_{constructor(t){this.renderer=t,this.managedFramebuffers=[],this.unknownFramebuffer=new Jc(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new it,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let i=this.renderer.context.extensions.drawBuffers,n=this.renderer.context.extensions.depthTexture;z.PREFER_ENV===Qn.WEBGL_LEGACY&&(i=null,n=null),i?t.drawBuffers=r=>i.drawBuffersWEBGL(r):(this.hasMRT=!1,t.drawBuffers=()=>{}),n||(this.writeDepthTexture=!1)}else this.msaaSamples=t.getInternalformatParameter(t.RENDERBUFFER,t.RGBA8,t.SAMPLES)}bind(t,i,n=0){const{gl:r}=this;if(t){const s=t.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(t);this.current!==t&&(this.current=t,r.bindFramebuffer(r.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==n&&(t.dirtyId++,t.dirtyFormat++,s.mipLevel=n),s.dirtyId!==t.dirtyId&&(s.dirtyId=t.dirtyId,s.dirtyFormat!==t.dirtyFormat?(s.dirtyFormat=t.dirtyFormat,s.dirtySize=t.dirtySize,this.updateFramebuffer(t,n)):s.dirtySize!==t.dirtySize&&(s.dirtySize=t.dirtySize,this.resizeFramebuffer(t)));for(let o=0;o<t.colorTextures.length;o++){const a=t.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(t.depthTexture&&this.renderer.texture.unbind(t.depthTexture),i){const o=i.width>>n,a=i.height>>n,l=o/i.width;this.setViewport(i.x*l,i.y*l,o,a)}else{const o=t.width>>n,a=t.height>>n;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),i?this.setViewport(i.x,i.y,i.width,i.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(t,i,n,r){const s=this.viewport;t=Math.round(t),i=Math.round(i),n=Math.round(n),r=Math.round(r),(s.width!==n||s.height!==r||s.x!==t||s.y!==i)&&(s.x=t,s.y=i,s.width=n,s.height=r,this.gl.viewport(t,i,n,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(t,i,n,r,s=Fc.COLOR|Fc.DEPTH){const{gl:o}=this;o.clearColor(t,i,n,r),o.clear(s)}initFramebuffer(t){const{gl:i}=this,n=new lO(i.createFramebuffer());return n.multisample=this.detectSamples(t.multisample),t.glFramebuffers[this.CONTEXT_UID]=n,this.managedFramebuffers.push(t),t.disposeRunner.add(this),n}resizeFramebuffer(t){const{gl:i}=this,n=t.glFramebuffers[this.CONTEXT_UID];n.stencil&&(i.bindRenderbuffer(i.RENDERBUFFER,n.stencil),n.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,i.DEPTH24_STENCIL8,t.width,t.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,t.width,t.height));const r=t.colorTextures;let s=r.length;i.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=r[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&n.msaaBuffer&&(i.bindRenderbuffer(i.RENDERBUFFER,n.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,n.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height))}t.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(t.depthTexture,0)}updateFramebuffer(t,i){const{gl:n}=this,r=t.glFramebuffers[this.CONTEXT_UID],s=t.colorTextures;let o=s.length;n.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(t)?r.msaaBuffer=r.msaaBuffer||n.createRenderbuffer():r.msaaBuffer&&(n.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const h=s[l],u=h.parentTextureArray||h;this.renderer.texture.bind(u,0),l===0&&r.msaaBuffer?(n.bindRenderbuffer(n.RENDERBUFFER,r.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,u._glTextures[this.CONTEXT_UID].internalFormat,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0,n.RENDERBUFFER,r.msaaBuffer)):(n.framebufferTexture2D(n.FRAMEBUFFER,n.COLOR_ATTACHMENT0+l,h.target,u._glTextures[this.CONTEXT_UID].texture,i),a.push(n.COLOR_ATTACHMENT0+l))}if(a.length>1&&n.drawBuffers(a),t.depthTexture&&this.writeDepthTexture){const h=t.depthTexture;this.renderer.texture.bind(h,0),n.framebufferTexture2D(n.FRAMEBUFFER,n.DEPTH_ATTACHMENT,n.TEXTURE_2D,h._glTextures[this.CONTEXT_UID].texture,i)}(t.stencil||t.depth)&&!(t.depthTexture&&this.writeDepthTexture)?(r.stencil=r.stencil||n.createRenderbuffer(),n.bindRenderbuffer(n.RENDERBUFFER,r.stencil),r.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,r.multisample,n.DEPTH24_STENCIL8,t.width,t.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,t.width,t.height),n.framebufferRenderbuffer(n.FRAMEBUFFER,n.DEPTH_STENCIL_ATTACHMENT,n.RENDERBUFFER,r.stencil)):r.stencil&&(n.deleteRenderbuffer(r.stencil),r.stencil=null)}canMultisampleFramebuffer(t){return this.renderer.context.webGLVersion!==1&&t.colorTextures.length<=1&&!t.depthTexture}detectSamples(t){const{msaaSamples:i}=this;let n=Pt.NONE;if(t<=1||i===null)return n;for(let r=0;r<i.length;r++)if(i[r]<=t){n=i[r];break}return n===1&&(n=Pt.NONE),n}blit(t,i,n){const{current:r,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!r)return;const l=r.glFramebuffers[a];if(!l)return;if(!t){if(!l.msaaBuffer)return;const u=r.colorTextures[0];if(!u)return;l.blitFramebuffer||(l.blitFramebuffer=new Jc(r.width,r.height),l.blitFramebuffer.addColorTexture(0,u)),t=l.blitFramebuffer,t.colorTextures[0]!==u&&(t.colorTextures[0]=u,t.dirtyId++,t.dirtyFormat++),(t.width!==r.width||t.height!==r.height)&&(t.width=r.width,t.height=r.height,t.dirtyId++,t.dirtySize++)}i||(i=hO,i.width=r.width,i.height=r.height),n||(n=i);const h=i.width===n.width&&i.height===n.height;this.bind(t),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(i.left,i.top,i.right,i.bottom,n.left,n.top,n.right,n.bottom,o.COLOR_BUFFER_BIT,h?o.NEAREST:o.LINEAR)}disposeFramebuffer(t,i){const n=t.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!n)return;delete t.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(t);s>=0&&this.managedFramebuffers.splice(s,1),t.disposeRunner.remove(this),i||(r.deleteFramebuffer(n.framebuffer),n.msaaBuffer&&r.deleteRenderbuffer(n.msaaBuffer),n.stencil&&r.deleteRenderbuffer(n.stencil)),n.blitFramebuffer&&n.blitFramebuffer.dispose()}disposeAll(t){const i=this.managedFramebuffers;this.managedFramebuffers=[];for(let n=0;n<i.length;n++)this.disposeFramebuffer(i[n],t)}forceStencil(){const t=this.current;if(!t)return;const i=t.glFramebuffers[this.CONTEXT_UID];if(!i||i.stencil)return;t.stencil=!0;const n=t.width,r=t.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),i.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,i.multisample,s.DEPTH24_STENCIL8,n,r):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,n,r),i.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new it}destroy(){this.renderer=null}}O_.extension={type:L.RendererSystem,name:"framebuffer"};W.add(O_);const ou={5126:4,5123:2,5121:1};class D_{constructor(t){this.renderer=t,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const t=this.gl=this.renderer.gl,i=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,i.webGLVersion!==2){let n=this.renderer.context.extensions.vertexArrayObject;z.PREFER_ENV===Qn.WEBGL_LEGACY&&(n=null),n?(t.createVertexArray=()=>n.createVertexArrayOES(),t.bindVertexArray=r=>n.bindVertexArrayOES(r),t.deleteVertexArray=r=>n.deleteVertexArrayOES(r)):(this.hasVao=!1,t.createVertexArray=()=>null,t.bindVertexArray=()=>null,t.deleteVertexArray=()=>null)}if(i.webGLVersion!==2){const n=t.getExtension("ANGLE_instanced_arrays");n?(t.vertexAttribDivisor=(r,s)=>n.vertexAttribDivisorANGLE(r,s),t.drawElementsInstanced=(r,s,o,a,l)=>n.drawElementsInstancedANGLE(r,s,o,a,l),t.drawArraysInstanced=(r,s,o,a)=>n.drawArraysInstancedANGLE(r,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=i.webGLVersion===2||!!i.extensions.uint32ElementIndex}bind(t,i){i=i||this.renderer.shader.shader;const{gl:n}=this;let r=t.glVertexArrayObjects[this.CONTEXT_UID],s=!1;r||(this.managedGeometries[t.id]=t,t.disposeRunner.add(this),t.glVertexArrayObjects[this.CONTEXT_UID]=r={},s=!0);const o=r[i.program.id]||this.initGeometryVao(t,i,s);this._activeGeometry=t,this._activeVao!==o&&(this._activeVao=o,this.hasVao?n.bindVertexArray(o):this.activateVao(t,i.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const t=this._activeGeometry,i=this.renderer.buffer;for(let n=0;n<t.buffers.length;n++){const r=t.buffers[n];i.update(r)}}checkCompatibility(t,i){const n=t.attributes,r=i.attributeData;for(const s in r)if(!n[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(t,i){const n=t.attributes,r=i.attributeData,s=["g",t.id];for(const o in n)r[o]&&s.push(o,r[o].location);return s.join("-")}initGeometryVao(t,i,n=!0){const r=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=i.program;a.glPrograms[s]||this.renderer.shader.generateProgram(i),this.checkCompatibility(t,a);const l=this.getSignature(t,a),h=t.glVertexArrayObjects[this.CONTEXT_UID];let u=h[l];if(u)return h[a.id]=u,u;const c=t.buffers,d=t.attributes,f={},p={};for(const y in c)f[y]=0,p[y]=0;for(const y in d)!d[y].size&&a.attributeData[y]?d[y].size=a.attributeData[y].size:d[y].size||console.warn(`PIXI Geometry attribute '${y}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[y].buffer]+=d[y].size*ou[d[y].type];for(const y in d){const _=d[y],m=_.size;_.stride===void 0&&(f[_.buffer]===m*ou[_.type]?_.stride=0:_.stride=f[_.buffer]),_.start===void 0&&(_.start=p[_.buffer],p[_.buffer]+=m*ou[_.type])}u=r.createVertexArray(),r.bindVertexArray(u);for(let y=0;y<c.length;y++){const _=c[y];o.bind(_),n&&_._glBuffers[s].refCount++}return this.activateVao(t,a),h[a.id]=u,h[l]=u,r.bindVertexArray(null),o.unbind(pi.ARRAY_BUFFER),u}disposeGeometry(t,i){var a;if(!this.managedGeometries[t.id])return;delete this.managedGeometries[t.id];const n=t.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,s=t.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(t.disposeRunner.remove(this),!!n){if(o)for(let l=0;l<s.length;l++){const h=s[l]._glBuffers[this.CONTEXT_UID];h&&(h.refCount--,h.refCount===0&&!i&&o.dispose(s[l],i))}if(!i){for(const l in n)if(l[0]==="g"){const h=n[l];this._activeVao===h&&this.unbind(),r.deleteVertexArray(h)}}delete t.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(t){const i=Object.keys(this.managedGeometries);for(let n=0;n<i.length;n++)this.disposeGeometry(this.managedGeometries[i[n]],t)}activateVao(t,i){const n=this.gl,r=this.CONTEXT_UID,s=this.renderer.buffer,o=t.buffers,a=t.attributes;t.indexBuffer&&s.bind(t.indexBuffer);let l=null;for(const h in a){const u=a[h],c=o[u.buffer],d=c._glBuffers[r];if(i.attributeData[h]){l!==d&&(s.bind(c),l=d);const f=i.attributeData[h].location;if(n.enableVertexAttribArray(f),n.vertexAttribPointer(f,u.size,u.type||n.FLOAT,u.normalized,u.stride,u.start),u.instance)if(this.hasInstance)n.vertexAttribDivisor(f,u.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(t,i,n,r){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(t,i||o.indexBuffer.data.length,l,(n||0)*a,r||1):s.drawElements(t,i||o.indexBuffer.data.length,l,(n||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(t,n,i||o.getSize(),r||1):s.drawArrays(t,n,i||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}D_.extension={type:L.RendererSystem,name:"geometry"};W.add(D_);const Ag=new yt;class B_{constructor(t,i){this._texture=t,this.mapCoord=new yt,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof i>"u"?.5:i,this.isSimple=!1}get texture(){return this._texture}set texture(t){this._texture=t,this._textureID=-1}multiplyUvs(t,i){i===void 0&&(i=t);const n=this.mapCoord;for(let r=0;r<t.length;r+=2){const s=t[r],o=t[r+1];i[r]=s*n.a+o*n.c+n.tx,i[r+1]=s*n.b+o*n.d+n.ty}return i}update(t){const i=this._texture;if(!i||!i.valid||!t&&this._textureID===i._updateID)return!1;this._textureID=i._updateID,this._updateID++;const n=i._uvs;this.mapCoord.set(n.x1-n.x0,n.y1-n.y0,n.x3-n.x0,n.y3-n.y0,n.x0,n.y0);const r=i.orig,s=i.trim;s&&(Ag.set(r.width/s.width,0,0,r.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(Ag));const o=i.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,h=this.clampOffset;return a[0]=(i._frame.x+l+h)/o.width,a[1]=(i._frame.y+l+h)/o.height,a[2]=(i._frame.x+i._frame.width-l+h)/o.width,a[3]=(i._frame.y+i._frame.height-l+h)/o.height,this.uClampOffset[0]=h/o.realWidth,this.uClampOffset[1]=h/o.realHeight,this.isSimple=i._frame.width===o.width&&i._frame.height===o.height&&i.rotate===0,!0}}var uO=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,cO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class dO extends jt{constructor(t,i,n){let r=null;typeof t!="string"&&i===void 0&&n===void 0&&(r=t,t=void 0,i=void 0,n=void 0),super(t||cO,i||uO,n),this.maskSprite=r,this.maskMatrix=new yt}get maskSprite(){return this._maskSprite}set maskSprite(t){this._maskSprite=t,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(t,i,n,r){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new B_(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=t.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,t.applyFilter(this,i,n,r))}}class fO{constructor(t=null){this.type=Dt.NONE,this.autoDetect=!0,this.maskObject=t||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=jt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(t){t?this._filters?this._filters[0]=t:this._filters=[t]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Dt.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(t){t?(this._stencilCounter=t._stencilCounter,this._scissorCounter=t._scissorCounter,this._scissorRect=t._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class N_{constructor(t){this.renderer=t,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(t){this.maskStack=t,this.renderer.scissor.setMaskStack(t),this.renderer.stencil.setMaskStack(t)}push(t,i){let n=i;if(!n.isMaskData){const s=this.maskDataPool.pop()||new fO;s.pooled=!0,s.maskObject=i,n=s}const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(n.copyCountersOrReset(r),n._colorMask=r?r._colorMask:15,n.autoDetect&&this.detect(n),n._target=t,n.type!==Dt.SPRITE&&this.maskStack.push(n),n.enabled)switch(n.type){case Dt.SCISSOR:this.renderer.scissor.push(n);break;case Dt.STENCIL:this.renderer.stencil.push(n);break;case Dt.SPRITE:n.copyCountersOrReset(null),this.pushSpriteMask(n);break;case Dt.COLOR:this.pushColorMask(n);break}n.type===Dt.SPRITE&&this.maskStack.push(n)}pop(t){const i=this.maskStack.pop();if(!(!i||i._target!==t)){if(i.enabled)switch(i.type){case Dt.SCISSOR:this.renderer.scissor.pop(i);break;case Dt.STENCIL:this.renderer.stencil.pop(i.maskObject);break;case Dt.SPRITE:this.popSpriteMask(i);break;case Dt.COLOR:this.popColorMask(i);break}if(i.reset(),i.pooled&&this.maskDataPool.push(i),this.maskStack.length!==0){const n=this.maskStack[this.maskStack.length-1];n.type===Dt.SPRITE&&n._filters&&(n._filters[0].maskSprite=n.maskObject)}}}detect(t){const i=t.maskObject;i?i.isSprite?t.type=Dt.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(t)?t.type=Dt.SCISSOR:t.type=Dt.STENCIL:t.type=Dt.COLOR}pushSpriteMask(t){const{maskObject:i}=t,n=t._target;let r=t._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new dO]));const s=this.renderer,o=s.renderTexture;let a,l;if(o.current){const u=o.current;a=t.resolution||u.resolution,l=t.multisample??u.multisample}else a=t.resolution||s.resolution,l=t.multisample??s.multisample;r[0].resolution=a,r[0].multisample=l,r[0].maskSprite=i;const h=n.filterArea;n.filterArea=i.getBounds(!0),s.filter.push(n,r),n.filterArea=h,t._filters||this.alphaMaskIndex++}popSpriteMask(t){this.renderer.filter.pop(),t._filters?t._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(t){const i=t._colorMask,n=t._colorMask=i&t.colorMask;n!==i&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}popColorMask(t){const i=t._colorMask,n=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;n!==i&&this.renderer.gl.colorMask((n&1)!==0,(n&2)!==0,(n&4)!==0,(n&8)!==0)}destroy(){this.renderer=null}}N_.extension={type:L.RendererSystem,name:"mask"};W.add(N_);class L_{constructor(t){this.renderer=t,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(t){const{gl:i}=this.renderer,n=this.getStackLength();this.maskStack=t;const r=this.getStackLength();r!==n&&(r===0?i.disable(this.glConst):(i.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const Pg=new yt,Ig=[],ka=class extends L_{constructor(e){super(e),this.glConst=z.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._scissorCounter:0}calcScissorRect(e){if(e._scissorRectLocal)return;const t=e._scissorRect,{maskObject:i}=e,{renderer:n}=this,r=n.renderTexture,s=i.getBounds(!0,Ig.pop()??new it);this.roundFrameToPixels(s,r.current?r.current.resolution:n.resolution,r.sourceFrame,r.destinationFrame,n.projection.transform),t&&s.fit(t),e._scissorRectLocal=s}static isMatrixRotated(e){if(!e)return!1;const{a:t,b:i,c:n,d:r}=e;return(Math.abs(i)>1e-4||Math.abs(n)>1e-4)&&(Math.abs(t)>1e-4||Math.abs(r)>1e-4)}testScissor(e){const{maskObject:t}=e;if(!t.isFastRect||!t.isFastRect()||ka.isMatrixRotated(t.worldTransform)||ka.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(e);const i=e._scissorRectLocal;return i.width>0&&i.height>0}roundFrameToPixels(e,t,i,n,r){ka.isMatrixRotated(r)||(r=r?Pg.copyFrom(r):Pg.identity(),r.translate(-i.x,-i.y).scale(n.width/i.width,n.height/i.height).translate(n.x,n.y),this.renderer.filter.transformAABB(r,e),e.fit(n),e.x=Math.round(e.x*t),e.y=Math.round(e.y*t),e.width=Math.round(e.width*t),e.height=Math.round(e.height*t))}push(e){e._scissorRectLocal||this.calcScissorRect(e);const{gl:t}=this.renderer;e._scissorRect||t.enable(t.SCISSOR_TEST),e._scissorCounter++,e._scissorRect=e._scissorRectLocal,this._useCurrent()}pop(e){const{gl:t}=this.renderer;e&&Ig.push(e._scissorRectLocal),this.getStackLength()>0?this._useCurrent():t.disable(t.SCISSOR_TEST)}_useCurrent(){const e=this.maskStack[this.maskStack.length-1]._scissorRect;let t;this.renderer.renderTexture.current?t=e.y:t=this.renderer.height-e.height-e.y,this.renderer.gl.scissor(e.x,t,e.width,e.height)}};let F_=ka;F_.extension={type:L.RendererSystem,name:"scissor"};W.add(F_);class U_ extends L_{constructor(t){super(t),this.glConst=z.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._stencilCounter:0}push(t){const i=t.maskObject,{gl:n}=this.renderer,r=t._stencilCounter;r===0&&(this.renderer.framebuffer.forceStencil(),n.clearStencil(0),n.clear(n.STENCIL_BUFFER_BIT),n.enable(n.STENCIL_TEST)),t._stencilCounter++;const s=t._colorMask;s!==0&&(t._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilFunc(n.EQUAL,r,4294967295),n.stencilOp(n.KEEP,n.KEEP,n.INCR),i.renderable=!0,i.render(this.renderer),this.renderer.batch.flush(),i.renderable=!1,s!==0&&(t._colorMask=s,n.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(t){const i=this.renderer.gl;if(this.getStackLength()===0)i.disable(i.STENCIL_TEST);else{const n=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,r=n?n._colorMask:15;r!==0&&(n._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilOp(i.KEEP,i.KEEP,i.DECR),t.renderable=!0,t.render(this.renderer),this.renderer.batch.flush(),t.renderable=!1,r!==0&&(n._colorMask=r,i.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}}_useCurrent(){const t=this.renderer.gl;t.stencilFunc(t.EQUAL,this.getStackLength(),4294967295),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)}}U_.extension={type:L.RendererSystem,name:"stencil"};W.add(U_);class z_{constructor(t){this.renderer=t,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return lt("7.0.0","renderer.plugins.extract has moved to renderer.extract"),t.extract}},prepare:{enumerable:!1,get(){return lt("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),t.prepare}},interaction:{enumerable:!1,get(){return lt("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),t.events}}})}init(t){for(const i in t)this.plugins[i]=new t[i](this.renderer)}destroy(){for(const t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null}}z_.extension={type:[L.RendererSystem,L.CanvasRendererSystem],name:"_plugin"};W.add(z_);class G_{constructor(t){this.renderer=t,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new yt,this.transform=null}update(t,i,n,r){this.destinationFrame=t||this.destinationFrame||this.defaultFrame,this.sourceFrame=i||this.sourceFrame||t,this.calculateProjection(this.destinationFrame,this.sourceFrame,n,r),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(t,i,n,r){const s=this.projectionMatrix,o=r?-1:1;s.identity(),s.a=1/i.width*2,s.d=o*(1/i.height*2),s.tx=-1-i.x*s.a,s.ty=-o-i.y*s.d}setTransform(t){}destroy(){this.renderer=null}}G_.extension={type:L.RendererSystem,name:"projection"};W.add(G_);const pO=new Kf;class $_{constructor(t){this.renderer=t,this._tempMatrix=new yt}generateTexture(t,i){const{region:n,...r}=i||{},s=n||t.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=dn.create({width:s.width,height:s.height,...r});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=t.transform;return t.transform=pO,this.renderer.render(t,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!t.parent,blit:!0}),t.transform=a,o}destroy(){}}$_.extension={type:[L.RendererSystem,L.CanvasRendererSystem],name:"textureGenerator"};W.add($_);const vn=new it,ds=new it;class H_{constructor(t){this.renderer=t,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new it,this.destinationFrame=new it,this.viewportFrame=new it}bind(t=null,i,n){const r=this.renderer;this.current=t;let s,o,a;t?(s=t.baseTexture,a=s.resolution,i||(vn.width=t.frame.width,vn.height=t.frame.height,i=vn),n||(ds.x=t.frame.x,ds.y=t.frame.y,ds.width=i.width,ds.height=i.height,n=ds),o=s.framebuffer):(a=r.resolution,i||(vn.width=r._view.screen.width,vn.height=r._view.screen.height,i=vn),n||(n=vn,n.width=i.width,n.height=i.height));const l=this.viewportFrame;l.x=n.x*a,l.y=n.y*a,l.width=n.width*a,l.height=n.height*a,t||(l.y=r.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(n,i,a,!o),t?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(i),this.destinationFrame.copyFrom(n)}clear(t,i){this.current?t=t||this.current.baseTexture.clearColor:t=t||this.renderer.background.colorRgba;const n=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer._view.screen,s=n.width!==r.width||n.height!==r.height;if(s){let{x:o,y:a,width:l,height:h}=this.viewportFrame;o=Math.round(o),a=Math.round(a),l=Math.round(l),h=Math.round(h),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,l,h)}this.renderer.framebuffer.clear(t[0],t[1],t[2],t[3],i),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}H_.extension={type:L.RendererSystem,name:"renderTexture"};W.add(H_);class mO{constructor(t,i){this.program=t,this.uniformData=i,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function gO(e,t){const i={},n=t.getProgramParameter(e,t.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=t.getActiveAttrib(e,r);if(s.name.startsWith("gl_"))continue;const o=E_(t,s.type),a={type:o,name:s.name,size:b_(o),location:t.getAttribLocation(e,s.name)};i[s.name]=a}return i}function vO(e,t){const i={},n=t.getProgramParameter(e,t.ACTIVE_UNIFORMS);for(let r=0;r<n;r++){const s=t.getActiveUniform(e,r),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=E_(t,s.type);i[o]={name:o,index:r,type:l,size:s.size,isArray:a,value:x_(l,s.size)}}return i}function yO(e,t){var l;const i=wg(e,e.VERTEX_SHADER,t.vertexSrc),n=wg(e,e.FRAGMENT_SHADER,t.fragmentSrc),r=e.createProgram();e.attachShader(r,i),e.attachShader(r,n);const s=(l=t.extra)==null?void 0:l.transformFeedbackVaryings;if(s&&(typeof e.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):e.transformFeedbackVaryings(r,s.names,s.bufferMode==="separate"?e.SEPARATE_ATTRIBS:e.INTERLEAVED_ATTRIBS)),e.linkProgram(r),e.getProgramParameter(r,e.LINK_STATUS)||Vk(e,r,i,n),t.attributeData=gO(r,e),t.uniformData=vO(r,e),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(t.vertexSrc)){const h=Object.keys(t.attributeData);h.sort((u,c)=>u>c?1:-1);for(let u=0;u<h.length;u++)t.attributeData[h[u]].location=u,e.bindAttribLocation(r,u,h[u]);e.linkProgram(r)}e.deleteShader(i),e.deleteShader(n);const o={};for(const h in t.uniformData){const u=t.uniformData[h];o[h]={location:e.getUniformLocation(r,h),value:x_(u.type,u.size)}}return new mO(r,o)}function _O(e,t,i,n,r){i.buffer.update(r)}const xO={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},j_={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function wO(e){const t=e.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let i=0,n=0,r=0;for(let s=0;s<t.length;s++){const o=t[s];if(i=j_[o.data.type],o.data.size>1&&(i=Math.max(i,16)*o.data.size),o.dataLen=i,n%i!==0&&n<16){const a=n%i%16;n+=a,r+=a}n+i>16?(r=Math.ceil(r/16)*16,o.offset=r,r+=i,n=i):(o.offset=r,n+=i,r+=i)}return r=Math.ceil(r/16)*16,{uboElements:t,size:r}}function bO(e,t){const i=[];for(const n in e)t[n]&&i.push(t[n]);return i.sort((n,r)=>n.index-r.index),i}function EO(e,t){if(!e.autoManage)return{size:0,syncFunc:_O};const i=bO(e.uniforms,t),{uboElements:n,size:r}=wO(i),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<n.length;o++){const a=n[o],l=e.uniforms[a.data.name],h=a.data.name;let u=!1;for(let c=0;c<kr.length;c++){const d=kr[c];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,kr[c].codeUbo(a.data.name,l)),u=!0;break}}if(!u)if(a.data.size>1){const c=b_(a.data.type),d=Math.max(j_[a.data.type]/16,1),f=c/d,p=(4-f%4)%4;s.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const c=xO[a.data.type];s.push(`
                cv = ud.${h}.value;
                v = uv.${h};
                offset = ${a.offset/4};
                ${c};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let TO=0;const ra={textureCount:0,uboCount:0};class W_{constructor(t){this.destroyed=!1,this.renderer=t,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=TO++}systemCheck(){if(!qk())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(t){this.gl=t,this.reset()}bind(t,i){t.disposeRunner.add(this),t.uniforms.globals=this.renderer.globalUniforms;const n=t.program,r=n.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(t);return this.shader=t,this.program!==n&&(this.program=n,this.gl.useProgram(r.program)),i||(ra.textureCount=0,ra.uboCount=0,this.syncUniformGroup(t.uniformGroup,ra)),r}setUniforms(t){const i=this.shader.program,n=i.glPrograms[this.renderer.CONTEXT_UID];i.syncUniforms(n.uniformData,t,this.renderer)}syncUniformGroup(t,i){const n=this.getGlProgram();(!t.static||t.dirtyId!==n.uniformDirtyGroups[t.id])&&(n.uniformDirtyGroups[t.id]=t.dirtyId,this.syncUniforms(t,n,i))}syncUniforms(t,i,n){(t.syncUniforms[this.shader.program.id]||this.createSyncGroups(t))(i.uniformData,t.uniforms,this.renderer,n)}createSyncGroups(t){const i=this.getSignature(t,this.shader.program.uniformData,"u");return this.cache[i]||(this.cache[i]=jk(t,this.shader.program.uniformData)),t.syncUniforms[this.shader.program.id]=this.cache[i],t.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(t,i){const n=this.getGlProgram();if(!t.static||t.dirtyId!==0||!n.uniformGroups[t.id]){t.dirtyId=0;const r=n.uniformGroups[t.id]||this.createSyncBufferGroup(t,n,i);t.buffer.update(),r(n.uniformData,t.uniforms,this.renderer,ra,t.buffer)}this.renderer.buffer.bindBufferBase(t.buffer,n.uniformBufferBindings[i])}createSyncBufferGroup(t,i,n){const{gl:r}=this.renderer;this.renderer.buffer.bind(t.buffer);const s=this.gl.getUniformBlockIndex(i.program,n);i.uniformBufferBindings[n]=this.shader.uniformBindCount,r.uniformBlockBinding(i.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(t,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=EO(t,this.shader.program.uniformData)),t.autoManage){const l=new Float32Array(a.size/4);t.buffer.update(l)}return i.uniformGroups[t.id]=a.syncFunc,i.uniformGroups[t.id]}getSignature(t,i,n){const r=t.uniforms,s=[`${n}-`];for(const o in r)s.push(o),i[o]&&s.push(i[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(t){const i=this.gl,n=t.program,r=yO(i,n);return n.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(t){this.shader===t&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}W_.extension={type:L.RendererSystem,name:"shader"};W.add(W_);class X_{constructor(t){this.renderer=t}run(t){const i=this.renderer;i.emitWithCustomOptions(i.runners.init,t),t.hello&&console.log(`PixiJS 7.1.4 - ${i.rendererLogId} - https://pixijs.com`),i.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}X_.extension={type:[L.RendererSystem,L.CanvasRendererSystem],name:"startup"};W.add(X_);function SO(e,t=[]){return t[q.NORMAL]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.ADD]=[e.ONE,e.ONE],t[q.MULTIPLY]=[e.DST_COLOR,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.SCREEN]=[e.ONE,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.OVERLAY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.DARKEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.LIGHTEN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.COLOR_DODGE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.COLOR_BURN]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.HARD_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.SOFT_LIGHT]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.DIFFERENCE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.EXCLUSION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.HUE]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.SATURATION]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.COLOR]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.LUMINOSITY]=[e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.NONE]=[0,0],t[q.NORMAL_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_ALPHA,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.ADD_NPM]=[e.SRC_ALPHA,e.ONE,e.ONE,e.ONE],t[q.SCREEN_NPM]=[e.SRC_ALPHA,e.ONE_MINUS_SRC_COLOR,e.ONE,e.ONE_MINUS_SRC_ALPHA],t[q.SRC_IN]=[e.DST_ALPHA,e.ZERO],t[q.SRC_OUT]=[e.ONE_MINUS_DST_ALPHA,e.ZERO],t[q.SRC_ATOP]=[e.DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[q.DST_OVER]=[e.ONE_MINUS_DST_ALPHA,e.ONE],t[q.DST_IN]=[e.ZERO,e.SRC_ALPHA],t[q.DST_OUT]=[e.ZERO,e.ONE_MINUS_SRC_ALPHA],t[q.DST_ATOP]=[e.ONE_MINUS_DST_ALPHA,e.SRC_ALPHA],t[q.XOR]=[e.ONE_MINUS_DST_ALPHA,e.ONE_MINUS_SRC_ALPHA],t[q.SUBTRACT]=[e.ONE,e.ONE,e.ONE,e.ONE,e.FUNC_REVERSE_SUBTRACT,e.FUNC_ADD],t}const CO=0,AO=1,PO=2,IO=3,RO=4,MO=5,td=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=q.NONE,this._blendEq=!1,this.map=[],this.map[CO]=this.setBlend,this.map[AO]=this.setOffset,this.map[PO]=this.setCullFace,this.map[IO]=this.setDepthTest,this.map[RO]=this.setFrontFace,this.map[MO]=this.setDepthMask,this.checks=[],this.defaultState=new Fi,this.defaultState.blend=!0}contextChange(e){this.gl=e,this.blendModes=SO(e),this.set(this.defaultState),this.reset()}set(e){if(e=e||this.defaultState,this.stateId!==e.data){let t=this.stateId^e.data,i=0;for(;t;)t&1&&this.map[i].call(this,!!(e.data&1<<i)),t=t>>1,i++;this.stateId=e.data}for(let t=0;t<this.checks.length;t++)this.checks[t](this,e)}forceState(e){e=e||this.defaultState;for(let t=0;t<this.map.length;t++)this.map[t].call(this,!!(e.data&1<<t));for(let t=0;t<this.checks.length;t++)this.checks[t](this,e);this.stateId=e.data}setBlend(e){this.updateCheck(td.checkBlendMode,e),this.gl[e?"enable":"disable"](this.gl.BLEND)}setOffset(e){this.updateCheck(td.checkPolygonOffset,e),this.gl[e?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(e){this.gl[e?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(e){this.gl.depthMask(e)}setCullFace(e){this.gl[e?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(e){this.gl.frontFace(this.gl[e?"CW":"CCW"])}setBlendMode(e){if(e===this.blendMode)return;this.blendMode=e;const t=this.blendModes[e],i=this.gl;t.length===2?i.blendFunc(t[0],t[1]):i.blendFuncSeparate(t[0],t[1],t[2],t[3]),t.length===6?(this._blendEq=!0,i.blendEquationSeparate(t[4],t[5])):this._blendEq&&(this._blendEq=!1,i.blendEquationSeparate(i.FUNC_ADD,i.FUNC_ADD))}setPolygonOffset(e,t){this.gl.polygonOffset(e,t)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(e,t){const i=this.checks.indexOf(e);t&&i===-1?this.checks.push(e):!t&&i!==-1&&this.checks.splice(i,1)}static checkBlendMode(e,t){e.setBlendMode(t.blendMode)}static checkPolygonOffset(e,t){e.setPolygonOffset(1,t.polygonOffset)}destroy(){this.gl=null}};let V_=td;V_.extension={type:L.RendererSystem,name:"state"};W.add(V_);class kO extends $n{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(t){this.addRunners(...t.runners);const i=(t.priority??[]).filter(r=>t.systems[r]),n=[...i,...Object.keys(t.systems).filter(r=>!i.includes(r))];for(const r of n)this.addSystem(t.systems[r],r)}addRunners(...t){t.forEach(i=>{this.runners[i]=new Ke(i)})}addSystem(t,i){const n=new t(this);if(this[i])throw new Error(`Whoops! The name "${i}" is already in use`);this[i]=n,this._systemsHash[i]=n;for(const r in this.runners)this.runners[r].add(n);return this}emitWithCustomOptions(t,i){const n=Object.keys(this._systemsHash);t.items.forEach(r=>{const s=n.find(o=>this._systemsHash[o]===r);r[t.name](i[s])})}destroy(){Object.values(this.runners).forEach(t=>{t.destroy()}),this._systemsHash={}}}const Oa=class{constructor(e){this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=Oa.defaultMaxIdle,this.checkCountMax=Oa.defaultCheckCountMax,this.mode=Oa.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==Xf.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const e=this.renderer.texture,t=e.managedTextures;let i=!1;for(let n=0;n<t.length;n++){const r=t[n];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(e.destroyTexture(r,!0),t[n]=null,i=!0)}if(i){let n=0;for(let r=0;r<t.length;r++)t[r]!==null&&(t[n++]=t[r]);t.length=n}}unload(e){const t=this.renderer.texture,i=e._texture;i&&!i.framebuffer&&t.destroyTexture(i);for(let n=e.children.length-1;n>=0;n--)this.unload(e.children[n])}destroy(){this.renderer=null}};let We=Oa;We.defaultMode=Xf.AUTO;We.defaultMaxIdle=60*60;We.defaultCheckCountMax=60*10;We.extension={type:L.RendererSystem,name:"textureGC"};W.add(We);class au{constructor(t){this.texture=t,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=V.UNSIGNED_BYTE,this.internalFormat=N.RGBA,this.samplerType=0}}function OO(e){let t;return"WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext?t={[V.UNSIGNED_BYTE]:{[N.RGBA]:e.RGBA8,[N.RGB]:e.RGB8,[N.RG]:e.RG8,[N.RED]:e.R8,[N.RGBA_INTEGER]:e.RGBA8UI,[N.RGB_INTEGER]:e.RGB8UI,[N.RG_INTEGER]:e.RG8UI,[N.RED_INTEGER]:e.R8UI,[N.ALPHA]:e.ALPHA,[N.LUMINANCE]:e.LUMINANCE,[N.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[V.BYTE]:{[N.RGBA]:e.RGBA8_SNORM,[N.RGB]:e.RGB8_SNORM,[N.RG]:e.RG8_SNORM,[N.RED]:e.R8_SNORM,[N.RGBA_INTEGER]:e.RGBA8I,[N.RGB_INTEGER]:e.RGB8I,[N.RG_INTEGER]:e.RG8I,[N.RED_INTEGER]:e.R8I},[V.UNSIGNED_SHORT]:{[N.RGBA_INTEGER]:e.RGBA16UI,[N.RGB_INTEGER]:e.RGB16UI,[N.RG_INTEGER]:e.RG16UI,[N.RED_INTEGER]:e.R16UI,[N.DEPTH_COMPONENT]:e.DEPTH_COMPONENT16},[V.SHORT]:{[N.RGBA_INTEGER]:e.RGBA16I,[N.RGB_INTEGER]:e.RGB16I,[N.RG_INTEGER]:e.RG16I,[N.RED_INTEGER]:e.R16I},[V.UNSIGNED_INT]:{[N.RGBA_INTEGER]:e.RGBA32UI,[N.RGB_INTEGER]:e.RGB32UI,[N.RG_INTEGER]:e.RG32UI,[N.RED_INTEGER]:e.R32UI,[N.DEPTH_COMPONENT]:e.DEPTH_COMPONENT24},[V.INT]:{[N.RGBA_INTEGER]:e.RGBA32I,[N.RGB_INTEGER]:e.RGB32I,[N.RG_INTEGER]:e.RG32I,[N.RED_INTEGER]:e.R32I},[V.FLOAT]:{[N.RGBA]:e.RGBA32F,[N.RGB]:e.RGB32F,[N.RG]:e.RG32F,[N.RED]:e.R32F,[N.DEPTH_COMPONENT]:e.DEPTH_COMPONENT32F},[V.HALF_FLOAT]:{[N.RGBA]:e.RGBA16F,[N.RGB]:e.RGB16F,[N.RG]:e.RG16F,[N.RED]:e.R16F},[V.UNSIGNED_SHORT_5_6_5]:{[N.RGB]:e.RGB565},[V.UNSIGNED_SHORT_4_4_4_4]:{[N.RGBA]:e.RGBA4},[V.UNSIGNED_SHORT_5_5_5_1]:{[N.RGBA]:e.RGB5_A1},[V.UNSIGNED_INT_2_10_10_10_REV]:{[N.RGBA]:e.RGB10_A2,[N.RGBA_INTEGER]:e.RGB10_A2UI},[V.UNSIGNED_INT_10F_11F_11F_REV]:{[N.RGB]:e.R11F_G11F_B10F},[V.UNSIGNED_INT_5_9_9_9_REV]:{[N.RGB]:e.RGB9_E5},[V.UNSIGNED_INT_24_8]:{[N.DEPTH_STENCIL]:e.DEPTH24_STENCIL8},[V.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[N.DEPTH_STENCIL]:e.DEPTH32F_STENCIL8}}:t={[V.UNSIGNED_BYTE]:{[N.RGBA]:e.RGBA,[N.RGB]:e.RGB,[N.ALPHA]:e.ALPHA,[N.LUMINANCE]:e.LUMINANCE,[N.LUMINANCE_ALPHA]:e.LUMINANCE_ALPHA},[V.UNSIGNED_SHORT_5_6_5]:{[N.RGB]:e.RGB},[V.UNSIGNED_SHORT_4_4_4_4]:{[N.RGBA]:e.RGBA},[V.UNSIGNED_SHORT_5_5_5_1]:{[N.RGBA]:e.RGBA}},t}class Y_{constructor(t){this.renderer=t,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new tt,this.hasIntegerTextures=!1}contextChange(){const t=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=OO(t);const i=t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=i;for(let r=0;r<i;r++)this.boundTextures[r]=null;this.emptyTextures={};const n=new au(t.createTexture());t.bindTexture(t.TEXTURE_2D,n.texture),t.texImage2D(t.TEXTURE_2D,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[t.TEXTURE_2D]=n,this.emptyTextures[t.TEXTURE_CUBE_MAP]=new au(t.createTexture()),t.bindTexture(t.TEXTURE_CUBE_MAP,this.emptyTextures[t.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)t.texImage2D(t.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,t.RGBA,1,1,0,t.RGBA,t.UNSIGNED_BYTE,null);t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MAG_FILTER,t.LINEAR),t.texParameteri(t.TEXTURE_CUBE_MAP,t.TEXTURE_MIN_FILTER,t.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(t,i=0){const{gl:n}=this;if(t=t==null?void 0:t.castToBaseTexture(),t!=null&&t.valid&&!t.parentTextureArray){t.touched=this.renderer.textureGC.count;const r=t._glTextures[this.CONTEXT_UID]||this.initTexture(t);this.boundTextures[i]!==t&&(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(t.target,r.texture)),r.dirtyId!==t.dirtyId?(this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),this.updateTexture(t)):r.dirtyStyleId!==t.dirtyStyleId&&this.updateTextureStyle(t),this.boundTextures[i]=t}else this.currentLocation!==i&&(this.currentLocation=i,n.activeTexture(n.TEXTURE0+i)),n.bindTexture(n.TEXTURE_2D,this.emptyTextures[n.TEXTURE_2D].texture),this.boundTextures[i]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let t=0;t<this.boundTextures.length;t++)this.boundTextures[t]=this.unknownTexture}unbind(t){const{gl:i,boundTextures:n}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<n.length;r++)n[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<n.length;r++)n[r]===t&&(this.currentLocation!==r&&(i.activeTexture(i.TEXTURE0+r),this.currentLocation=r),i.bindTexture(t.target,this.emptyTextures[t.target].texture),n[r]=null)}ensureSamplerType(t){const{boundTextures:i,hasIntegerTextures:n,CONTEXT_UID:r}=this;if(n)for(let s=t-1;s>=0;--s){const o=i[s];o&&o._glTextures[r].samplerType!==Uc.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(t){const i=new au(this.gl.createTexture());return i.dirtyId=-1,t._glTextures[this.CONTEXT_UID]=i,this.managedTextures.push(t),t.on("dispose",this.destroyTexture,this),i}initTextureType(t,i){var n;i.internalFormat=((n=this.internalFormats[t.type])==null?void 0:n[t.format])??t.format,this.webGLVersion===2&&t.type===V.HALF_FLOAT?i.type=this.gl.HALF_FLOAT:i.type=t.type}updateTexture(t){var r;const i=t._glTextures[this.CONTEXT_UID];if(!i)return;const n=this.renderer;if(this.initTextureType(t,i),(r=t.resource)!=null&&r.upload(n,t,i))i.samplerType!==Uc.FLOAT&&(this.hasIntegerTextures=!0);else{const s=t.realWidth,o=t.realHeight,a=n.gl;(i.width!==s||i.height!==o||i.dirtyId<0)&&(i.width=s,i.height=o,a.texImage2D(t.target,0,i.internalFormat,s,o,0,t.format,i.type,null))}t.dirtyStyleId!==i.dirtyStyleId&&this.updateTextureStyle(t),i.dirtyId=t.dirtyId}destroyTexture(t,i){const{gl:n}=this;if(t=t.castToBaseTexture(),t._glTextures[this.CONTEXT_UID]&&(this.unbind(t),n.deleteTexture(t._glTextures[this.CONTEXT_UID].texture),t.off("dispose",this.destroyTexture,this),delete t._glTextures[this.CONTEXT_UID],!i)){const r=this.managedTextures.indexOf(t);r!==-1&&Rr(this.managedTextures,r,1)}}updateTextureStyle(t){var n;const i=t._glTextures[this.CONTEXT_UID];i&&((t.mipmap===gi.POW2||this.webGLVersion!==2)&&!t.isPowerOfTwo?i.mipmap=!1:i.mipmap=t.mipmap>=1,this.webGLVersion!==2&&!t.isPowerOfTwo?i.wrapMode=sn.CLAMP:i.wrapMode=t.wrapMode,(n=t.resource)!=null&&n.style(this.renderer,t,i)||this.setStyle(t,i),i.dirtyStyleId=t.dirtyStyleId)}setStyle(t,i){const n=this.gl;if(i.mipmap&&t.mipmap!==gi.ON_MANUAL&&n.generateMipmap(t.target),n.texParameteri(t.target,n.TEXTURE_WRAP_S,i.wrapMode),n.texParameteri(t.target,n.TEXTURE_WRAP_T,i.wrapMode),i.mipmap){n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Si.LINEAR?n.LINEAR_MIPMAP_LINEAR:n.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&t.anisotropicLevel>0&&t.scaleMode===Si.LINEAR){const s=Math.min(t.anisotropicLevel,n.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));n.texParameterf(t.target,r.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else n.texParameteri(t.target,n.TEXTURE_MIN_FILTER,t.scaleMode===Si.LINEAR?n.LINEAR:n.NEAREST);n.texParameteri(t.target,n.TEXTURE_MAG_FILTER,t.scaleMode===Si.LINEAR?n.LINEAR:n.NEAREST)}destroy(){this.renderer=null}}Y_.extension={type:L.RendererSystem,name:"texture"};W.add(Y_);class q_{constructor(t){this.renderer=t}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:n}=this,r=t._glTransformFeedbacks[n]||this.createGLTransformFeedback(t);i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:t}=this;t.bindTransformFeedback(t.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(t,i){const{gl:n,renderer:r}=this;i&&r.shader.bind(i),n.beginTransformFeedback(t)}endTransformFeedback(){const{gl:t}=this;t.endTransformFeedback()}createGLTransformFeedback(t){const{gl:i,renderer:n,CONTEXT_UID:r}=this,s=i.createTransformFeedback();t._glTransformFeedbacks[r]=s,i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,s);for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];a&&(n.buffer.update(a),a._glBuffers[r].refCount++,i.bindBufferBase(i.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return i.bindTransformFeedback(i.TRANSFORM_FEEDBACK,null),t.disposeRunner.add(this),s}disposeTransformFeedback(t,i){const n=t._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<t.buffers.length;o++){const a=t.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!i&&s.dispose(a,i))}n&&(i||r.deleteTransformFeedback(n),delete t._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}q_.extension={type:L.RendererSystem,name:"transformFeedback"};W.add(q_);class K_{constructor(t){this.renderer=t}init(t){this.screen=new it(0,0,t.width,t.height),this.element=t.view||z.ADAPTER.createCanvas(),this.resolution=t.resolution||z.RESOLUTION,this.autoDensity=!!t.autoDensity}resizeView(t,i){this.element.width=Math.round(t*this.resolution),this.element.height=Math.round(i*this.resolution);const n=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=n,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${n}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",n,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(t){var i;t&&((i=this.element.parentNode)==null||i.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}K_.extension={type:[L.RendererSystem,L.CanvasRendererSystem],name:"_view"};W.add(K_);z.PREFER_ENV=Qn.WEBGL2;z.STRICT_TEXTURE_CACHE=!1;Object.defineProperties(z,{WRAP_MODE:{get(){return tt.defaultOptions.wrapMode},set(e){lt("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),tt.defaultOptions.wrapMode=e}},SCALE_MODE:{get(){return tt.defaultOptions.scaleMode},set(e){lt("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),tt.defaultOptions.scaleMode=e}},MIPMAP_TEXTURES:{get(){return tt.defaultOptions.mipmap},set(e){lt("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),tt.defaultOptions.mipmap=e}},ANISOTROPIC_LEVEL:{get(){return tt.defaultOptions.anisotropicLevel},set(e){lt("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),tt.defaultOptions.anisotropicLevel=e}},FILTER_RESOLUTION:{get(){return lt("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),jt.defaultResolution},set(e){jt.defaultResolution=e}},FILTER_MULTISAMPLE:{get(){return lt("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),jt.defaultMultisample},set(e){jt.defaultMultisample=e}},SPRITE_MAX_TEXTURES:{get(){return je.defaultMaxTextures},set(e){lt("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),je.defaultMaxTextures=e}},SPRITE_BATCH_SIZE:{get(){return je.defaultBatchSize},set(e){lt("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),je.defaultBatchSize=e}},CAN_UPLOAD_SAME_BUFFER:{get(){return je.canUploadSameBuffer},set(e){lt("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),je.canUploadSameBuffer=e}},GC_MODE:{get(){return We.defaultMode},set(e){lt("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),We.defaultMode=e}},GC_MAX_IDLE:{get(){return We.defaultMaxIdle},set(e){lt("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),We.defaultMaxIdle=e}},GC_MAX_CHECK_COUNT:{get(){return We.defaultCheckCountMax},set(e){lt("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),We.defaultCheckCountMax=e}},PRECISION_VERTEX:{get(){return Xe.defaultVertexPrecision},set(e){lt("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Xe.defaultVertexPrecision=e}},PRECISION_FRAGMENT:{get(){return Xe.defaultFragmentPrecision},set(e){lt("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Xe.defaultFragmentPrecision=e}}});var Hr=(e=>(e[e.HIGH=25]="HIGH",e[e.NORMAL=0]="NORMAL",e[e.LOW=-25]="LOW",e[e.UTILITY=-50]="UTILITY",e))(Hr||{});class lu{constructor(t,i=null,n=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=t,this.context=i,this.priority=n,this.once=r}match(t,i=null){return this.fn===t&&this.context===i}emit(t){this.fn&&(this.context?this.fn.call(this.context,t):this.fn(t));const i=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),i}connect(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this}destroy(t=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const i=this.next;return this.next=t?null:i,this.previous=null,i}}const pe=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new lu(null,null,1/0),this.deltaMS=1/pe.targetFPMS,this.elapsedMS=1/pe.targetFPMS,this._tick=e=>{this._requestId=null,this.started&&(this.update(e),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(e,t,i=Hr.NORMAL){return this._addListener(new lu(e,t,i))}addOnce(e,t,i=Hr.NORMAL){return this._addListener(new lu(e,t,i,!0))}_addListener(e){let t=this._head.next,i=this._head;if(!t)e.connect(i);else{for(;t;){if(e.priority>t.priority){e.connect(i);break}i=t,t=t.next}e.previous||e.connect(i)}return this._startIfPossible(),this}remove(e,t){let i=this._head.next;for(;i;)i.match(e,t)?i=i.destroy():i=i.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let e=0,t=this._head;for(;t=t.next;)e++;return e}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let e=this._head.next;for(;e;)e=e.destroy(!0);this._head.destroy(),this._head=null}}update(e=performance.now()){let t;if(e>this.lastTime){if(t=this.elapsedMS=e-this.lastTime,t>this._maxElapsedMS&&(t=this._maxElapsedMS),t*=this.speed,this._minElapsedMS){const r=e-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=e-r%this._minElapsedMS}this.deltaMS=t,this.deltaTime=this.deltaMS*pe.targetFPMS;const i=this._head;let n=i.next;for(;n;)n=n.emit(this.deltaTime);i.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=e}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(e){const t=Math.min(this.maxFPS,e),i=Math.min(Math.max(0,t)/1e3,pe.targetFPMS);this._maxElapsedMS=1/i}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(e){if(e===0)this._minElapsedMS=0;else{const t=Math.max(this.minFPS,e);this._minElapsedMS=1/(t/1e3)}}static get shared(){if(!pe._shared){const e=pe._shared=new pe;e.autoStart=!0,e._protected=!0}return pe._shared}static get system(){if(!pe._system){const e=pe._system=new pe;e.autoStart=!0,e._protected=!0}return pe._system}};let te=pe;te.targetFPMS=.06;Object.defineProperties(z,{TARGET_FPMS:{get(){return te.targetFPMS},set(e){lt("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),te.targetFPMS=e}}});class Z_{static init(t){t=Object.assign({autoStart:!0,sharedTicker:!1},t),Object.defineProperty(this,"ticker",{set(i){this._ticker&&this._ticker.remove(this.render,this),this._ticker=i,i&&i.add(this.render,this,Hr.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=t.sharedTicker?te.shared:new te,t.autoStart&&this.start()}static destroy(){if(this._ticker){const t=this._ticker;this.ticker=null,t.destroy()}}}Z_.extension=L.Application;W.add(Z_);const Q_=[];W.handleByList(L.Renderer,Q_);function DO(e){for(const t of Q_)if(t.test(e))return new t(e);throw new Error("Unable to auto-detect a suitable renderer.")}var BO=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,NO=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const LO=BO,J_=NO;class tx{constructor(t){this.renderer=t}contextChange(t){let i;if(this.renderer.context.webGLVersion===1){const n=t.getParameter(t.FRAMEBUFFER_BINDING);t.bindFramebuffer(t.FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.FRAMEBUFFER,n)}else{const n=t.getParameter(t.DRAW_FRAMEBUFFER_BINDING);t.bindFramebuffer(t.DRAW_FRAMEBUFFER,null),i=t.getParameter(t.SAMPLES),t.bindFramebuffer(t.DRAW_FRAMEBUFFER,n)}i>=Pt.HIGH?this.multisample=Pt.HIGH:i>=Pt.MEDIUM?this.multisample=Pt.MEDIUM:i>=Pt.LOW?this.multisample=Pt.LOW:this.multisample=Pt.NONE}destroy(){}}tx.extension={type:L.RendererSystem,name:"_multisample"};W.add(tx);class FO{constructor(t){this.buffer=t||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class ex{constructor(t){this.renderer=t,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(t){const{gl:i,CONTEXT_UID:n}=this,r=t._glBuffers[n]||this.createGLBuffer(t);i.bindBuffer(t.type,r.buffer)}unbind(t){const{gl:i}=this;i.bindBuffer(t,null)}bindBufferBase(t,i){const{gl:n,CONTEXT_UID:r}=this;if(this.boundBufferBases[i]!==t){const s=t._glBuffers[r]||this.createGLBuffer(t);this.boundBufferBases[i]=t,n.bindBufferBase(n.UNIFORM_BUFFER,i,s.buffer)}}bindBufferRange(t,i,n){const{gl:r,CONTEXT_UID:s}=this;n=n||0;const o=t._glBuffers[s]||this.createGLBuffer(t);r.bindBufferRange(r.UNIFORM_BUFFER,i||0,o.buffer,n*256,256)}update(t){const{gl:i,CONTEXT_UID:n}=this,r=t._glBuffers[n]||this.createGLBuffer(t);if(t._updateID!==r.updateID)if(r.updateID=t._updateID,i.bindBuffer(t.type,r.buffer),r.byteLength>=t.data.byteLength)i.bufferSubData(t.type,0,t.data);else{const s=t.static?i.STATIC_DRAW:i.DYNAMIC_DRAW;r.byteLength=t.data.byteLength,i.bufferData(t.type,t.data,s)}}dispose(t,i){if(!this.managedBuffers[t.id])return;delete this.managedBuffers[t.id];const n=t._glBuffers[this.CONTEXT_UID],r=this.gl;t.disposeRunner.remove(this),n&&(i||r.deleteBuffer(n.buffer),delete t._glBuffers[this.CONTEXT_UID])}disposeAll(t){const i=Object.keys(this.managedBuffers);for(let n=0;n<i.length;n++)this.dispose(this.managedBuffers[i[n]],t)}createGLBuffer(t){const{CONTEXT_UID:i,gl:n}=this;return t._glBuffers[i]=new FO(n.createBuffer()),this.managedBuffers[t.id]=t,t.disposeRunner.add(this),t._glBuffers[i]}}ex.extension={type:L.RendererSystem,name:"buffer"};W.add(ex);class ix{constructor(t){this.renderer=t}render(t,i){const n=this.renderer;let r,s,o,a;if(i&&(r=i.renderTexture,s=i.clear,o=i.transform,a=i.skipUpdateTransform),this.renderingToScreen=!r,n.runners.prerender.emit(),n.emit("prerender"),n.projection.transform=o,!n.context.isLost){if(r||(this.lastObjectRendered=t),!a){const l=t.enableTempParent();t.updateTransform(),t.disableTempParent(l)}n.renderTexture.bind(r),n.batch.currentRenderer.start(),(s??n.background.clearBeforeRender)&&n.renderTexture.clear(),t.render(n),n.batch.currentRenderer.flush(),r&&(i.blit&&n.framebuffer.blit(),r.baseTexture.update()),n.runners.postrender.emit(),n.projection.transform=null,n.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ix.extension={type:L.RendererSystem,name:"objectRenderer"};W.add(ix);const ed=class extends kO{constructor(e){super(),this.type=o_.WEBGL,e=Object.assign({},z.RENDER_OPTIONS,e),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new Ze({projectionMatrix:new yt},!0);const t={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:ed.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(t),"useContextAlpha"in e&&(lt("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),e.premultipliedAlpha=e.useContextAlpha&&e.useContextAlpha!=="notMultiplied",e.backgroundAlpha=e.useContextAlpha===!1?1:e.backgroundAlpha);const i={hello:e.hello,_plugin:ed.__plugins,background:{alpha:e.backgroundAlpha,color:e.background??e.backgroundColor,clearBeforeRender:e.clearBeforeRender},_view:{height:e.height,width:e.width,autoDensity:e.autoDensity,resolution:e.resolution,view:e.view},context:{antialias:e.antialias,context:e.context,powerPreference:e.powerPreference,premultipliedAlpha:e.premultipliedAlpha,preserveDrawingBuffer:e.preserveDrawingBuffer}};this.options=e,this.startup.run(i)}static test(e){return e!=null&&e.forceCanvas?!1:OI()}render(e,t){this.objectRenderer.render(e,t)}resize(e,t){this._view.resizeView(e,t)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(e=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:e}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(e){this._view.resolution=e,this.runners.resolutionChange.emit(e)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return lt("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return lt("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return lt("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return lt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(e){lt("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=e}get backgroundAlpha(){return lt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(e){lt("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=e}get powerPreference(){return lt("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(e,t){return this.textureGenerator.generateTexture(e,t)}};let Zr=ed;Zr.extension={type:L.Renderer,priority:1};Zr.__plugins={};Zr.__systems={};W.handleByMap(L.RendererPlugin,Zr.__plugins);W.handleByMap(L.RendererSystem,Zr.__systems);W.add(Zr);class nx extends fo{constructor(t,i){const{width:n,height:r}=i||{};super(n,r),this.items=[],this.itemDirtyIds=[];for(let s=0;s<t;s++){const o=new tt;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=t,this._load=null,this.baseTexture=null}initFromArray(t,i){for(let n=0;n<this.length;n++)t[n]&&(t[n].castToBaseTexture?this.addBaseTextureAt(t[n].castToBaseTexture(),n):t[n]instanceof fo?this.addResourceAt(t[n],n):this.addResourceAt(g_(t[n],i),n))}dispose(){for(let t=0,i=this.length;t<i;t++)this.items[t].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(t,i){if(!this.items[i])throw new Error(`Index ${i} is out of bounds`);return t.valid&&!this.valid&&this.resize(t.width,t.height),this.items[i].setResource(t),this}bind(t){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=t,this.items[i].on("update",t.update,t)}unbind(t){super.unbind(t);for(let i=0;i<this.length;i++)this.items[i].parentTextureArray=null,this.items[i].off("update",t.update,t)}load(){if(this._load)return this._load;const i=this.items.map(n=>n.resource).filter(n=>n).map(n=>n.load());return this._load=Promise.all(i).then(()=>{const{realWidth:n,realHeight:r}=this.items[0];return this.resize(n,r),Promise.resolve(this)}),this._load}}class UO extends nx{constructor(t,i){const{width:n,height:r}=i||{};let s,o;Array.isArray(t)?(s=t,o=t.length):o=t,super(o,{width:n,height:r}),s&&this.initFromArray(s,i)}addBaseTextureAt(t,i){if(t.resource)this.addResourceAt(t.resource,i);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(t){super.bind(t),t.target=Pr.TEXTURE_2D_ARRAY}upload(t,i,n){const{length:r,itemDirtyIds:s,items:o}=this,{gl:a}=t;n.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,n.internalFormat,this._width,this._height,r,0,i.format,n.type,null);for(let l=0;l<r;l++){const h=o[l];s[l]<h.dirtyId&&(s[l]=h.dirtyId,h.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,h.resource.width,h.resource.height,1,i.format,n.type,h.resource.source))}return!0}}class zO extends cn{constructor(t){super(t)}static test(t){const{OffscreenCanvas:i}=globalThis;return i&&t instanceof i?!0:globalThis.HTMLCanvasElement&&t instanceof HTMLCanvasElement}}const Ts=class extends nx{constructor(e,t){const{width:i,height:n,autoLoad:r,linkBaseTexture:s}=t||{};if(e&&e.length!==Ts.SIDES)throw new Error(`Invalid length. Got ${e.length}, expected 6`);super(6,{width:i,height:n});for(let o=0;o<Ts.SIDES;o++)this.items[o].target=Pr.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,e&&this.initFromArray(e,t),r!==!1&&this.load()}bind(e){super.bind(e),e.target=Pr.TEXTURE_CUBE_MAP}addBaseTextureAt(e,t,i){if(i===void 0&&(i=this.linkBaseTexture),!this.items[t])throw new Error(`Index ${t} is out of bounds`);if(!this.linkBaseTexture||e.parentTextureArray||Object.keys(e._glTextures).length>0)if(e.resource)this.addResourceAt(e.resource,t);else throw new Error("CubeResource does not support copying of renderTexture.");else e.target=Pr.TEXTURE_CUBE_MAP_POSITIVE_X+t,e.parentTextureArray=this.baseTexture,this.items[t]=e;return e.valid&&!this.valid&&this.resize(e.realWidth,e.realHeight),this.items[t]=e,this}upload(e,t,i){const n=this.itemDirtyIds;for(let r=0;r<Ts.SIDES;r++){const s=this.items[r];(n[r]<s.dirtyId||i.dirtyId<t.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(e,s,i),n[r]=s.dirtyId):n[r]<-1&&(e.gl.texImage2D(s.target,0,i.internalFormat,t.realWidth,t.realHeight,0,t.format,i.type,null),n[r]=-1))}return!0}static test(e){return Array.isArray(e)&&e.length===Ts.SIDES}};let rx=Ts;rx.SIDES=6;class xr extends cn{constructor(t,i){i=i||{};let n,r;typeof t=="string"?(n=xr.EMPTY,r=t):(n=t,r=null),super(n),this.url=r,this.crossOrigin=i.crossOrigin??!0,this.alphaMode=typeof i.alphaMode=="number"?i.alphaMode:null,this._load=null,i.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(t,i)=>{if(this.url===null){t(this);return}try{const n=await z.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await n.blob();if(this.destroyed)return;const s=await createImageBitmap(r,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ti.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),t(this)}catch(n){if(this.destroyed)return;i(n),this.onError.emit(n)}}),this._load)}upload(t,i,n){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(i.alphaMode=this.alphaMode),super.upload(t,i,n)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(t){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof t=="string"||t instanceof ImageBitmap)}static get EMPTY(){return xr._EMPTY=xr._EMPTY??z.ADAPTER.createCanvas(0,0),xr._EMPTY}}const Da=class extends cn{constructor(e,t){t=t||{},super(z.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=e,this.scale=t.scale||1,this._overrideWidth=t.width,this._overrideHeight=t.height,this._resolve=null,this._crossorigin=t.crossorigin,this._load=null,t.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(e=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),e(this)},Da.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const e=new Image;cn.crossOrigin(e,this.svg,this._crossorigin),e.src=this.svg,e.onerror=t=>{this._resolve&&(e.onerror=null,this.onError.emit(t))},e.onload=()=>{if(!this._resolve)return;const t=e.width,i=e.height;if(!t||!i)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let n=t*this.scale,r=i*this.scale;(this._overrideWidth||this._overrideHeight)&&(n=this._overrideWidth||this._overrideHeight/i*t,r=this._overrideHeight||this._overrideWidth/t*i),n=Math.round(n),r=Math.round(r);const s=this.source;s.width=n,s.height=r,s._pixiId=`canvas_${jn()}`,s.getContext("2d").drawImage(e,0,0,t,i,0,0,n,r),this._resolve(),this._resolve=null}}static getSize(e){const t=Da.SVG_SIZE.exec(e),i={};return t&&(i[t[1]]=Math.round(parseFloat(t[3])),i[t[5]]=Math.round(parseFloat(t[7]))),i}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(e,t){return t==="svg"||typeof e=="string"&&e.startsWith("data:image/svg+xml")||typeof e=="string"&&Da.SVG_XML.test(e)}};let po=Da;po.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;po.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const id=class extends cn{constructor(e,t){if(t=t||{},!(e instanceof HTMLVideoElement)){const i=document.createElement("video");i.setAttribute("preload","auto"),i.setAttribute("webkit-playsinline",""),i.setAttribute("playsinline",""),typeof e=="string"&&(e=[e]);const n=e[0].src||e[0];cn.crossOrigin(i,n,t.crossorigin);for(let r=0;r<e.length;++r){const s=document.createElement("source");let{src:o,mime:a}=e[r];o=o||e[r];const l=o.split("?").shift().toLowerCase(),h=l.slice(l.lastIndexOf(".")+1);a=a||id.MIME_TYPES[h]||`video/${h}`,s.src=o,s.type=a,i.appendChild(s)}e=i}super(e),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=t.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=t.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),t.autoLoad!==!1&&this.load()}update(e=0){if(!this.destroyed){const t=te.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-t),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const e=this.source;return(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0),e.addEventListener("play",this._onPlayStart.bind(this)),e.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(e.addEventListener("canplay",this._onCanPlay),e.addEventListener("canplaythrough",this._onCanPlay),e.addEventListener("error",this._onError,!0)),this._load=new Promise(t=>{this.valid?t(this):(this._resolve=t,e.load())}),this._load}_onError(e){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(e)}_isSourcePlaying(){const e=this.source;return!e.paused&&!e.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(te.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(te.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const e=this.source;e.removeEventListener("canplay",this._onCanPlay),e.removeEventListener("canplaythrough",this._onCanPlay);const t=this.valid;this.resize(e.videoWidth,e.videoHeight),!t&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&e.play()}dispose(){this._isConnectedToTicker&&(te.shared.remove(this.update,this),this._isConnectedToTicker=!1);const e=this.source;e&&(e.removeEventListener("error",this._onError,!0),e.pause(),e.src="",e.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(e){e!==this._autoUpdate&&(this._autoUpdate=e,!this._autoUpdate&&this._isConnectedToTicker?(te.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(te.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(e){e!==this._updateFPS&&(this._updateFPS=e)}static test(e,t){return globalThis.HTMLVideoElement&&e instanceof HTMLVideoElement||id.TYPES.includes(t)}};let Zf=id;Zf.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];Zf.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};qc.push(xr,P_,zO,Zf,po,To,rx,UO);class wl{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(t){return this.minX>this.maxX||this.minY>this.maxY?it.EMPTY:(t=t||new it(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)}addPoint(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)}addPointMatrix(t,i){const{a:n,b:r,c:s,d:o,tx:a,ty:l}=t,h=n*i.x+s*i.y+a,u=r*i.x+o*i.y+l;this.minX=Math.min(this.minX,h),this.maxX=Math.max(this.maxX,h),this.minY=Math.min(this.minY,u),this.maxY=Math.max(this.maxY,u)}addQuad(t){let i=this.minX,n=this.minY,r=this.maxX,s=this.maxY,o=t[0],a=t[1];i=o<i?o:i,n=a<n?a:n,r=o>r?o:r,s=a>s?a:s,o=t[2],a=t[3],i=o<i?o:i,n=a<n?a:n,r=o>r?o:r,s=a>s?a:s,o=t[4],a=t[5],i=o<i?o:i,n=a<n?a:n,r=o>r?o:r,s=a>s?a:s,o=t[6],a=t[7],i=o<i?o:i,n=a<n?a:n,r=o>r?o:r,s=a>s?a:s,this.minX=i,this.minY=n,this.maxX=r,this.maxY=s}addFrame(t,i,n,r,s){this.addFrameMatrix(t.worldTransform,i,n,r,s)}addFrameMatrix(t,i,n,r,s){const o=t.a,a=t.b,l=t.c,h=t.d,u=t.tx,c=t.ty;let d=this.minX,f=this.minY,p=this.maxX,y=this.maxY,_=o*i+l*n+u,m=a*i+h*n+c;d=_<d?_:d,f=m<f?m:f,p=_>p?_:p,y=m>y?m:y,_=o*r+l*n+u,m=a*r+h*n+c,d=_<d?_:d,f=m<f?m:f,p=_>p?_:p,y=m>y?m:y,_=o*i+l*s+u,m=a*i+h*s+c,d=_<d?_:d,f=m<f?m:f,p=_>p?_:p,y=m>y?m:y,_=o*r+l*s+u,m=a*r+h*s+c,d=_<d?_:d,f=m<f?m:f,p=_>p?_:p,y=m>y?m:y,this.minX=d,this.minY=f,this.maxX=p,this.maxY=y}addVertexData(t,i,n){let r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=i;l<n;l+=2){const h=t[l],u=t[l+1];r=h<r?h:r,s=u<s?u:s,o=h>o?h:o,a=u>a?u:a}this.minX=r,this.minY=s,this.maxX=o,this.maxY=a}addVertices(t,i,n,r){this.addVerticesMatrix(t.worldTransform,i,n,r)}addVerticesMatrix(t,i,n,r,s=0,o=s){const a=t.a,l=t.b,h=t.c,u=t.d,c=t.tx,d=t.ty;let f=this.minX,p=this.minY,y=this.maxX,_=this.maxY;for(let m=n;m<r;m+=2){const g=i[m],v=i[m+1],x=a*g+h*v+c,b=u*v+l*g+d;f=Math.min(f,x-s),y=Math.max(y,x+s),p=Math.min(p,b-o),_=Math.max(_,b+o)}this.minX=f,this.minY=p,this.maxX=y,this.maxY=_}addBounds(t){const i=this.minX,n=this.minY,r=this.maxX,s=this.maxY;this.minX=t.minX<i?t.minX:i,this.minY=t.minY<n?t.minY:n,this.maxX=t.maxX>r?t.maxX:r,this.maxY=t.maxY>s?t.maxY:s}addBoundsMask(t,i){const n=t.minX>i.minX?t.minX:i.minX,r=t.minY>i.minY?t.minY:i.minY,s=t.maxX<i.maxX?t.maxX:i.maxX,o=t.maxY<i.maxY?t.maxY:i.maxY;if(n<=s&&r<=o){const a=this.minX,l=this.minY,h=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=r<l?r:l,this.maxX=s>h?s:h,this.maxY=o>u?o:u}}addBoundsMatrix(t,i){this.addFrameMatrix(i,t.minX,t.minY,t.maxX,t.maxY)}addBoundsArea(t,i){const n=t.minX>i.x?t.minX:i.x,r=t.minY>i.y?t.minY:i.y,s=t.maxX<i.x+i.width?t.maxX:i.x+i.width,o=t.maxY<i.y+i.height?t.maxY:i.y+i.height;if(n<=s&&r<=o){const a=this.minX,l=this.minY,h=this.maxX,u=this.maxY;this.minX=n<a?n:a,this.minY=r<l?r:l,this.maxX=s>h?s:h,this.maxY=o>u?o:u}}pad(t=0,i=t){this.isEmpty()||(this.minX-=t,this.maxX+=t,this.minY-=i,this.maxY+=i)}addFramePad(t,i,n,r,s,o){t-=s,i-=o,n+=s,r+=o,this.minX=this.minX<t?this.minX:t,this.maxX=this.maxX>n?this.maxX:n,this.minY=this.minY<i?this.minY:i,this.maxY=this.maxY>r?this.maxY:r}}class St extends $n{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Kf,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new wl,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(t){const i=Object.keys(t);for(let n=0;n<i.length;++n){const r=i[n];Object.defineProperty(St.prototype,r,Object.getOwnPropertyDescriptor(t,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(t,i){return t||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),i||(this._boundsRect||(this._boundsRect=new it),i=this._boundsRect),this._bounds.getRectangle(i)}getLocalBounds(t){t||(this._localBoundsRect||(this._localBoundsRect=new it),t=this._localBoundsRect),this._localBounds||(this._localBounds=new wl);const i=this.transform,n=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,t);return this.parent=n,this.transform=i,this._bounds=r,this._bounds.updateID+=this._boundsID-s,o}toGlobal(t,i,n=!1){return n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(t,i)}toLocal(t,i,n,r){return i&&(t=i.toGlobal(t,n,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(t,n)}setParent(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t}removeFromParent(){var t;(t=this.parent)==null||t.removeChild(this)}setTransform(t=0,i=0,n=1,r=1,s=0,o=0,a=0,l=0,h=0){return this.position.x=t,this.position.y=i,this.scale.x=n||1,this.scale.y=r||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=h,this}destroy(t){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new GO),this.tempDisplayObjectParent}enableTempParent(){const t=this.parent;return this.parent=this._tempDisplayObjectParent,t}disableTempParent(t){this.parent=t}get x(){return this.position.x}set x(t){this.transform.position.x=t}get y(){return this.position.y}set y(t){this.transform.position.y=t}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(t){this.transform.position.copyFrom(t)}get scale(){return this.transform.scale}set scale(t){this.transform.scale.copyFrom(t)}get pivot(){return this.transform.pivot}set pivot(t){this.transform.pivot.copyFrom(t)}get skew(){return this.transform.skew}set skew(t){this.transform.skew.copyFrom(t)}get rotation(){return this.transform.rotation}set rotation(t){this.transform.rotation=t}get angle(){return this.transform.rotation*Lk}set angle(t){this.transform.rotation=t*Fk}get zIndex(){return this._zIndex}set zIndex(t){this._zIndex=t,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}get mask(){return this._mask}set mask(t){if(this._mask!==t){if(this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount--,i._maskRefCount===0&&(i.renderable=!0,i.isMask=!1))}if(this._mask=t,this._mask){const i=this._mask.isMaskData?this._mask.maskObject:this._mask;i&&(i._maskRefCount===0&&(i.renderable=!1,i.isMask=!0),i._maskRefCount++)}}}}class GO extends St{constructor(){super(...arguments),this.sortDirty=null}}St.prototype.displayObjectUpdateTransform=St.prototype.updateTransform;const $O=new yt;function HO(e,t){return e.zIndex===t.zIndex?e._lastSortedIndex-t._lastSortedIndex:e.zIndex-t.zIndex}const nd=class extends St{constructor(){super(),this.children=[],this.sortableChildren=nd.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(e){}addChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.addChild(e[t]);else{const t=e[0];t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.push(t),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",t,this,this.children.length-1),t.emit("added",this)}return e[0]}addChildAt(e,t){if(t<0||t>this.children.length)throw new Error(`${e}addChildAt: The index ${t} supplied is out of bounds ${this.children.length}`);return e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.splice(t,0,e),this._boundsID++,this.onChildrenChange(t),e.emit("added",this),this.emit("childAdded",e,this,t),e}swapChildren(e,t){if(e===t)return;const i=this.getChildIndex(e),n=this.getChildIndex(t);this.children[i]=t,this.children[n]=e,this.onChildrenChange(i<n?i:n)}getChildIndex(e){const t=this.children.indexOf(e);if(t===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return t}setChildIndex(e,t){if(t<0||t>=this.children.length)throw new Error(`The index ${t} supplied is out of bounds ${this.children.length}`);const i=this.getChildIndex(e);Rr(this.children,i,1),this.children.splice(t,0,e),this.onChildrenChange(t)}getChildAt(e){if(e<0||e>=this.children.length)throw new Error(`getChildAt: Index (${e}) does not exist.`);return this.children[e]}removeChild(...e){if(e.length>1)for(let t=0;t<e.length;t++)this.removeChild(e[t]);else{const t=e[0],i=this.children.indexOf(t);if(i===-1)return null;t.parent=null,t.transform._parentID=-1,Rr(this.children,i,1),this._boundsID++,this.onChildrenChange(i),t.emit("removed",this),this.emit("childRemoved",t,this,i)}return e[0]}removeChildAt(e){const t=this.getChildAt(e);return t.parent=null,t.transform._parentID=-1,Rr(this.children,e,1),this._boundsID++,this.onChildrenChange(e),t.emit("removed",this),this.emit("childRemoved",t,this,e),t}removeChildren(e=0,t=this.children.length){const i=e,n=t,r=n-i;let s;if(r>0&&r<=n){s=this.children.splice(i,r);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(e);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(r===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let e=!1;for(let t=0,i=this.children.length;t<i;++t){const n=this.children[t];n._lastSortedIndex=t,!e&&n.zIndex!==0&&(e=!0)}e&&this.children.length>1&&this.children.sort(HO),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let e=0,t=this.children.length;e<t;++e){const i=this.children[e];i.visible&&i.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let e=0;e<this.children.length;e++){const t=this.children[e];if(!(!t.visible||!t.renderable))if(t.calculateBounds(),t._mask){const i=t._mask.isMaskData?t._mask.maskObject:t._mask;i?(i.calculateBounds(),this._bounds.addBoundsMask(t._bounds,i._bounds)):this._bounds.addBounds(t._bounds)}else t.filterArea?this._bounds.addBoundsArea(t._bounds,t.filterArea):this._bounds.addBounds(t._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(e,t=!1){const i=super.getLocalBounds(e);if(!t)for(let n=0,r=this.children.length;n<r;++n){const s=this.children[n];s.visible&&s.updateTransform()}return i}_calculateBounds(){}_renderWithCulling(e){const t=e.renderTexture.sourceFrame;if(!(t.width>0&&t.height>0))return;let i,n;this.cullArea?(i=this.cullArea,n=this.worldTransform):this._render!==nd.prototype._render&&(i=this.getBounds(!0));const r=e.projection.transform;if(r&&(n?(n=$O.copyFrom(n),n.prepend(r)):n=r),i&&t.intersects(i,n))this._render(e);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],l=a.cullable;a.cullable=l||!this.cullArea,a.render(e),a.cullable=l}}render(e){var t;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(t=this.filters)!=null&&t.length)this.renderAdvanced(e);else if(this.cullable)this._renderWithCulling(e);else{this._render(e);for(let i=0,n=this.children.length;i<n;++i)this.children[i].render(e)}}renderAdvanced(e){var r,s,o;const t=this.filters,i=this._mask;if(t){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<t.length;a++)t[a].enabled&&this._enabledFilters.push(t[a])}const n=t&&((r=this._enabledFilters)==null?void 0:r.length)||i&&(!i.isMaskData||i.enabled&&(i.autoDetect||i.type!==Dt.NONE));if(n&&e.batch.flush(),t&&((s=this._enabledFilters)!=null&&s.length)&&e.filter.push(this,this._enabledFilters),i&&e.mask.push(this,this._mask),this.cullable)this._renderWithCulling(e);else{this._render(e);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(e)}n&&e.batch.flush(),i&&e.mask.pop(this),t&&((o=this._enabledFilters)!=null&&o.length)&&e.filter.pop()}_render(e){}destroy(e){super.destroy(),this.sortDirty=!1;const t=typeof e=="boolean"?e:e==null?void 0:e.children,i=this.removeChildren(0,this.children.length);if(t)for(let n=0;n<i.length;++n)i[n].destroy(e)}get width(){return this.scale.x*this.getLocalBounds().width}set width(e){const t=this.getLocalBounds().width;t!==0?this.scale.x=e/t:this.scale.x=1,this._width=e}get height(){return this.scale.y*this.getLocalBounds().height}set height(e){const t=this.getLocalBounds().height;t!==0?this.scale.y=e/t:this.scale.y=1,this._height=e}};let be=nd;be.defaultSortableChildren=!1;be.prototype.containerUpdateTransform=be.prototype.updateTransform;Object.defineProperties(z,{SORTABLE_CHILDREN:{get(){return be.defaultSortableChildren},set(e){lt("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),be.defaultSortableChildren=e}}});const fs=new Y,jO=new Uint16Array([0,1,2,0,2,3]);class So extends be{constructor(t){super(),this._anchor=new qi(this._onAnchorUpdate,this,t?t.defaultAnchor.x:0,t?t.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=q.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=t||j.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=jO,this.pluginName="batch",this.isSprite=!0,this._roundPixels=z.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=_r(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=_r(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const t=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===t._updateID)return;this._textureID!==t._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=t._updateID;const i=this.transform.worldTransform,n=i.a,r=i.b,s=i.c,o=i.d,a=i.tx,l=i.ty,h=this.vertexData,u=t.trim,c=t.orig,d=this._anchor;let f=0,p=0,y=0,_=0;if(u?(p=u.x-d._x*c.width,f=p+u.width,_=u.y-d._y*c.height,y=_+u.height):(p=-d._x*c.width,f=p+c.width,_=-d._y*c.height,y=_+c.height),h[0]=n*p+s*_+a,h[1]=o*_+r*p+l,h[2]=n*f+s*_+a,h[3]=o*_+r*f+l,h[4]=n*f+s*y+a,h[5]=o*y+r*f+l,h[6]=n*p+s*y+a,h[7]=o*y+r*p+l,this._roundPixels){const m=z.RESOLUTION;for(let g=0;g<h.length;++g)h[g]=Math.round(h[g]*m)/m}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const t=this._texture,i=this.vertexTrimmedData,n=t.orig,r=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,h=s.d,u=s.tx,c=s.ty,d=-r._x*n.width,f=d+n.width,p=-r._y*n.height,y=p+n.height;i[0]=o*d+l*p+u,i[1]=h*p+a*d+c,i[2]=o*f+l*p+u,i[3]=h*p+a*f+c,i[4]=o*f+l*y+u,i[5]=h*y+a*f+c,i[6]=o*d+l*y+u,i[7]=h*y+a*d+c}_render(t){this.calculateVertices(),t.batch.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)}_calculateBounds(){const t=this._texture.trim,i=this._texture.orig;!t||t.width===i.width&&t.height===i.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(t){return this.children.length===0?(this._localBounds||(this._localBounds=new wl),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),t||(this._localBoundsRect||(this._localBoundsRect=new it),t=this._localBoundsRect),this._localBounds.getRectangle(t)):super.getLocalBounds.call(this,t)}containsPoint(t){this.worldTransform.applyInverse(t,fs);const i=this._texture.orig.width,n=this._texture.orig.height,r=-i*this.anchor.x;let s=0;return fs.x>=r&&fs.x<r+i&&(s=-n*this.anchor.y,fs.y>=s&&fs.y<s+n)}destroy(t){if(super.destroy(t),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof t=="boolean"?t:t==null?void 0:t.texture){const n=typeof t=="boolean"?t:t==null?void 0:t.baseTexture;this._texture.destroy(!!n)}this._texture=null}static from(t,i){const n=t instanceof j?t:j.from(t,i);return new So(n)}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(t){const i=_r(this.scale.x)||1;this.scale.x=i*t/this._texture.orig.width,this._width=t}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(t){const i=_r(this.scale.y)||1;this.scale.y=i*t/this._texture.orig.height,this._height=t}get anchor(){return this._anchor}set anchor(t){this._anchor.copyFrom(t)}get tint(){return this._tint}set tint(t){this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16)}get texture(){return this._texture}set texture(t){this._texture!==t&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=t||j.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.valid?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}const sx=new yt;St.prototype._cacheAsBitmap=!1;St.prototype._cacheData=null;St.prototype._cacheAsBitmapResolution=null;St.prototype._cacheAsBitmapMultisample=null;class WO{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(St.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(e){e!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(e){e!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=e,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(e){if(this._cacheAsBitmap===e)return;this._cacheAsBitmap=e;let t;e?(this._cacheData||(this._cacheData=new WO),t=this._cacheData,t.originalRender=this.render,t.originalRenderCanvas=this.renderCanvas,t.originalUpdateTransform=this.updateTransform,t.originalCalculateBounds=this.calculateBounds,t.originalGetLocalBounds=this.getLocalBounds,t.originalDestroy=this.destroy,t.originalContainsPoint=this.containsPoint,t.originalMask=this._mask,t.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(t=this._cacheData,t.sprite&&this._destroyCachedDisplayObject(),this.render=t.originalRender,this.renderCanvas=t.originalRenderCanvas,this.calculateBounds=t.originalCalculateBounds,this.getLocalBounds=t.originalGetLocalBounds,this.destroy=t.originalDestroy,this.updateTransform=t.originalUpdateTransform,this.containsPoint=t.originalContainsPoint,this._mask=t.originalMask,this.filterArea=t.originalFilterArea)}}});St.prototype._renderCached=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(t),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(t))};St.prototype._initCachedDisplayObject=function(t){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const i=this.alpha;this.alpha=1,t.batch.flush();const n=this.getLocalBounds(null,!0).clone();if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;n.pad(p)}n.ceil(z.RESOLUTION);const r=t.renderTexture.current,s=t.renderTexture.sourceFrame.clone(),o=t.renderTexture.destinationFrame.clone(),a=t.projection.transform,l=dn.create({width:n.width,height:n.height,resolution:this.cacheAsBitmapResolution||t.resolution,multisample:this.cacheAsBitmapMultisample??t.multisample}),h=`cacheAsBitmap_${jn()}`;this._cacheData.textureCacheId=h,tt.addToCache(l.baseTexture,h),j.addToCache(l,h);const u=this.transform.localTransform.copyTo(sx).invert().translate(-n.x,-n.y);this.render=this._cacheData.originalRender,t.render(this,{renderTexture:l,clear:!0,transform:u,skipUpdateTransform:!1}),t.framebuffer.blit(),t.projection.transform=a,t.renderTexture.bind(r,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const c=new So(l);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-(n.x/n.width),c.anchor.y=-(n.y/n.height),c.alpha=i,c._bounds=this._bounds,this._cacheData.sprite=c,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=c.containsPoint.bind(c)};St.prototype._renderCachedCanvas=function(t){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(t))};St.prototype._initCachedDisplayObjectCanvas=function(t){var u;if((u=this._cacheData)!=null&&u.sprite)return;const i=this.getLocalBounds(null,!0),n=this.alpha;this.alpha=1;const r=t.canvasContext.activeContext,s=t._projTransform;i.ceil(z.RESOLUTION);const o=dn.create({width:i.width,height:i.height}),a=`cacheAsBitmap_${jn()}`;this._cacheData.textureCacheId=a,tt.addToCache(o.baseTexture,a),j.addToCache(o,a);const l=sx;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=i.x,l.ty-=i.y,this.renderCanvas=this._cacheData.originalRenderCanvas,t.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),t.canvasContext.activeContext=r,t._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const h=new So(o);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(i.x/i.width),h.anchor.y=-(i.y/i.height),h.alpha=n,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=t._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=h.containsPoint.bind(h)};St.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};St.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};St.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,tt.removeFromCache(this._cacheData.textureCacheId),j.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};St.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)};St.prototype.name=null;be.prototype.getChildByName=function(t,i){for(let n=0,r=this.children.length;n<r;n++)if(this.children[n].name===t)return this.children[n];if(i)for(let n=0,r=this.children.length;n<r;n++){const s=this.children[n];if(!s.getChildByName)continue;const o=s.getChildByName(t,!0);if(o)return o}return null};St.prototype.getGlobalPosition=function(t=new Y,i=!1){return this.parent?this.parent.toGlobal(this.position,t,i):(t.x=this.position.x,t.y=this.position.y),t};var XO=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class VO extends jt{constructor(t=1){super(LO,XO,{uAlpha:1}),this.alpha=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}const YO={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},qO=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function KO(e){const t=YO[e],i=t.length;let n=qO,r="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<e;a++){let l=s.replace("%index%",a.toString());o=a,a>=i&&(o=e-a-1),l=l.replace("%value%",t[o].toString()),r+=l,r+=`
`}return n=n.replace("%blur%",r),n=n.replace("%size%",e.toString()),n}const ZO=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function QO(e,t){const i=Math.ceil(e/2);let n=ZO,r="",s;t?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<e;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(i-1)}.0`),r+=a,r+=`
`}return n=n.replace("%blur%",r),n=n.replace("%size%",e.toString()),n}class rd extends jt{constructor(t,i=8,n=4,r=jt.defaultResolution,s=5){const o=QO(s,t),a=KO(s);super(o,a),this.horizontal=t,this.resolution=r,this._quality=0,this.quality=n,this.blur=i}apply(t,i,n,r){if(n?this.horizontal?this.uniforms.strength=1/n.width*(n.width/i.width):this.uniforms.strength=1/n.height*(n.height/i.height):this.horizontal?this.uniforms.strength=1/t.renderer.width*(t.renderer.width/i.width):this.uniforms.strength=1/t.renderer.height*(t.renderer.height/i.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)t.applyFilter(this,i,n,r);else{const s=t.getFilterTexture(),o=t.renderer;let a=i,l=s;this.state.blend=!1,t.applyFilter(this,a,l,oi.CLEAR);for(let h=1;h<this.passes-1;h++){t.bindAndClear(a,oi.BLIT),this.uniforms.uSampler=l;const u=l;l=a,a=u,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,t.applyFilter(this,l,n,r),t.returnFilterTexture(s)}}get blur(){return this.strength}set blur(t){this.padding=1+Math.abs(t)*2,this.strength=t}get quality(){return this._quality}set quality(t){this._quality=t,this.passes=t}}class JO extends jt{constructor(t=8,i=4,n=jt.defaultResolution,r=5){super(),this.blurXFilter=new rd(!0,t,i,n,r),this.blurYFilter=new rd(!1,t,i,n,r),this.resolution=n,this.quality=i,this.blur=t,this.repeatEdgePixels=!1}apply(t,i,n,r){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=t.getFilterTexture();this.blurXFilter.apply(t,i,a,oi.CLEAR),this.blurYFilter.apply(t,a,n,r),t.returnFilterTexture(a)}else o?this.blurYFilter.apply(t,i,n,r):this.blurXFilter.apply(t,i,n,r)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(t){this.blurXFilter.quality=this.blurYFilter.quality=t}get blurX(){return this.blurXFilter.blur}set blurX(t){this.blurXFilter.blur=t,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(t){this.blurYFilter.blur=t,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(t){this.blurYFilter.blendMode=t}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(t){this._repeatEdgePixels=t,this.updatePadding()}}var tD=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class sd extends jt{constructor(){const t={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(J_,tD,t),this.alpha=1}_loadMatrix(t,i=!1){let n=t;i&&(this._multiply(n,this.uniforms.m,t),n=this._colorMatrix(n)),this.uniforms.m=n}_multiply(t,i,n){return t[0]=i[0]*n[0]+i[1]*n[5]+i[2]*n[10]+i[3]*n[15],t[1]=i[0]*n[1]+i[1]*n[6]+i[2]*n[11]+i[3]*n[16],t[2]=i[0]*n[2]+i[1]*n[7]+i[2]*n[12]+i[3]*n[17],t[3]=i[0]*n[3]+i[1]*n[8]+i[2]*n[13]+i[3]*n[18],t[4]=i[0]*n[4]+i[1]*n[9]+i[2]*n[14]+i[3]*n[19]+i[4],t[5]=i[5]*n[0]+i[6]*n[5]+i[7]*n[10]+i[8]*n[15],t[6]=i[5]*n[1]+i[6]*n[6]+i[7]*n[11]+i[8]*n[16],t[7]=i[5]*n[2]+i[6]*n[7]+i[7]*n[12]+i[8]*n[17],t[8]=i[5]*n[3]+i[6]*n[8]+i[7]*n[13]+i[8]*n[18],t[9]=i[5]*n[4]+i[6]*n[9]+i[7]*n[14]+i[8]*n[19]+i[9],t[10]=i[10]*n[0]+i[11]*n[5]+i[12]*n[10]+i[13]*n[15],t[11]=i[10]*n[1]+i[11]*n[6]+i[12]*n[11]+i[13]*n[16],t[12]=i[10]*n[2]+i[11]*n[7]+i[12]*n[12]+i[13]*n[17],t[13]=i[10]*n[3]+i[11]*n[8]+i[12]*n[13]+i[13]*n[18],t[14]=i[10]*n[4]+i[11]*n[9]+i[12]*n[14]+i[13]*n[19]+i[14],t[15]=i[15]*n[0]+i[16]*n[5]+i[17]*n[10]+i[18]*n[15],t[16]=i[15]*n[1]+i[16]*n[6]+i[17]*n[11]+i[18]*n[16],t[17]=i[15]*n[2]+i[16]*n[7]+i[17]*n[12]+i[18]*n[17],t[18]=i[15]*n[3]+i[16]*n[8]+i[17]*n[13]+i[18]*n[18],t[19]=i[15]*n[4]+i[16]*n[9]+i[17]*n[14]+i[18]*n[19]+i[19],t}_colorMatrix(t){const i=new Float32Array(t);return i[4]/=255,i[9]/=255,i[14]/=255,i[19]/=255,i}brightness(t,i){const n=[t,0,0,0,0,0,t,0,0,0,0,0,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)}tint(t,i){const n=t>>16&255,r=t>>8&255,s=t&255,o=[n/255,0,0,0,0,0,r/255,0,0,0,0,0,s/255,0,0,0,0,0,1,0];this._loadMatrix(o,i)}greyscale(t,i){const n=[t,t,t,0,0,t,t,t,0,0,t,t,t,0,0,0,0,0,1,0];this._loadMatrix(n,i)}blackAndWhite(t){const i=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(i,t)}hue(t,i){t=(t||0)/180*Math.PI;const n=Math.cos(t),r=Math.sin(t),s=Math.sqrt,o=1/3,a=s(o),l=n+(1-n)*o,h=o*(1-n)-a*r,u=o*(1-n)+a*r,c=o*(1-n)+a*r,d=n+o*(1-n),f=o*(1-n)-a*r,p=o*(1-n)-a*r,y=o*(1-n)+a*r,_=n+o*(1-n),m=[l,h,u,0,0,c,d,f,0,0,p,y,_,0,0,0,0,0,1,0];this._loadMatrix(m,i)}contrast(t,i){const n=(t||0)+1,r=-.5*(n-1),s=[n,0,0,0,r,0,n,0,0,r,0,0,n,0,r,0,0,0,1,0];this._loadMatrix(s,i)}saturate(t=0,i){const n=t*2/3+1,r=(n-1)*-.5,s=[n,r,r,0,0,r,n,r,0,0,r,r,n,0,0,0,0,0,1,0];this._loadMatrix(s,i)}desaturate(){this.saturate(-1)}negative(t){const i=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(i,t)}sepia(t){const i=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(i,t)}technicolor(t){const i=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(i,t)}polaroid(t){const i=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(i,t)}toBGR(t){const i=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(i,t)}kodachrome(t){const i=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(i,t)}browni(t){const i=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(i,t)}vintage(t){const i=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(i,t)}colorTone(t,i,n,r,s){t=t||.2,i=i||.15,n=n||16770432,r=r||3375104;const o=(n>>16&255)/255,a=(n>>8&255)/255,l=(n&255)/255,h=(r>>16&255)/255,u=(r>>8&255)/255,c=(r&255)/255,d=[.3,.59,.11,0,0,o,a,l,t,0,h,u,c,i,0,o-h,a-u,l-c,0,0];this._loadMatrix(d,s)}night(t,i){t=t||.1;const n=[t*-2,-t,0,0,0,-t,0,t,0,0,0,t,t*2,0,0,0,0,0,1,0];this._loadMatrix(n,i)}predator(t,i){const n=[11.224130630493164*t,-4.794486999511719*t,-2.8746118545532227*t,0*t,.40342438220977783*t,-3.6330697536468506*t,9.193157196044922*t,-2.951810836791992*t,0*t,-1.316135048866272*t,-3.2184197902679443*t,-4.2375030517578125*t,7.476448059082031*t,0*t,.8044459223747253*t,0,0,0,1,0];this._loadMatrix(n,i)}lsd(t){const i=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(i,t)}reset(){const t=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(t,!1)}get matrix(){return this.uniforms.m}set matrix(t){this.uniforms.m=t}get alpha(){return this.uniforms.uAlpha}set alpha(t){this.uniforms.uAlpha=t}}sd.prototype.grayscale=sd.prototype.greyscale;var eD=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,iD=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class nD extends jt{constructor(t,i){const n=new yt;t.renderable=!1,super(iD,eD,{mapSampler:t._texture,filterMatrix:n,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=t,this.maskMatrix=n,i==null&&(i=20),this.scale=new Y(i,i)}apply(t,i,n,r){this.uniforms.filterMatrix=t.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),t.applyFilter(this,i,n,r)}get map(){return this.uniforms.mapSampler}set map(t){this.uniforms.mapSampler=t}}var rD=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,sD=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class oD extends jt{constructor(){super(sD,rD)}}var aD=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class lD extends jt{constructor(t=.5,i=Math.random()){super(J_,aD,{uNoise:0,uSeed:0}),this.noise=t,this.seed=i}get noise(){return this.uniforms.uNoise}set noise(t){this.uniforms.uNoise=t}get seed(){return this.uniforms.uSeed}set seed(t){this.uniforms.uSeed=t}}const Rg={AlphaFilter:VO,BlurFilter:JO,BlurFilterPass:rd,ColorMatrixFilter:sd,DisplacementFilter:nD,FXAAFilter:oD,NoiseFilter:lD};Object.entries(Rg).forEach(([e,t])=>{Object.defineProperty(Rg,e,{get(){return lt("7.1.0",`filters.${e} has moved to ${e}`),t}})});class Co{constructor(t){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=Co.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Y,this.page=new Y,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=t}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(t,i,n){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(t,i,n,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class bl extends Co{constructor(){super(...arguments),this.client=new Y,this.movement=new Y,this.offset=new Y,this.global=new Y,this.screen=new Y}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(t){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(t)}initMouseEvent(t,i,n,r,s,o,a,l,h,u,c,d,f,p,y){throw new Error("Method not implemented.")}}class Fe extends bl{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class jr extends bl{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}jr.DOM_DELTA_PIXEL=0;jr.DOM_DELTA_LINE=1;jr.DOM_DELTA_PAGE=2;const hD=2048,uD=new Y,hu=new Y;class cD{constructor(t){this.dispatch=new $n,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=t,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(t,i){this.mappingTable[t]||(this.mappingTable[t]=[]),this.mappingTable[t].push({fn:i,priority:0}),this.mappingTable[t].sort((n,r)=>n.priority-r.priority)}dispatchEvent(t,i){t.propagationStopped=!1,t.propagationImmediatelyStopped=!1,this.propagate(t,i),this.dispatch.emit(i||t.type,t)}mapEvent(t){if(!this.rootTarget)return;const i=this.mappingTable[t.type];if(i)for(let n=0,r=i.length;n<r;n++)i[n].fn(t);else console.warn(`[EventBoundary]: Event mapping not defined for ${t.type}`)}hitTest(t,i){const n=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,uD.set(t,i),this.hitTestFn,this.hitPruneFn);return n&&n[0]}propagate(t,i){if(!t.target)return;const n=t.composedPath();t.eventPhase=t.CAPTURING_PHASE;for(let r=0,s=n.length-1;r<s;r++)if(t.currentTarget=n[r],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return;if(t.eventPhase=t.AT_TARGET,t.currentTarget=t.target,this.notifyTarget(t,i),!(t.propagationStopped||t.propagationImmediatelyStopped)){t.eventPhase=t.BUBBLING_PHASE;for(let r=n.length-2;r>=0;r--)if(t.currentTarget=n[r],this.notifyTarget(t,i),t.propagationStopped||t.propagationImmediatelyStopped)return}}all(t,i,n=this.rootTarget){t.eventPhase=t.BUBBLING_PHASE;const r=n.children;if(r)for(let s=0;s<r.length;s++)this.all(t,i,r[s]);t.currentTarget=n,this.notifyTarget(t,i)}propagationPath(t){const i=[t];for(let n=0;n<hD&&t!==this.rootTarget;n++){if(!t.parent)throw new Error("Cannot find propagation path to disconnected target");i.push(t.parent),t=t.parent}return i.reverse(),i}hitTestRecursive(t,i,n,r,s){if(!t||!t.visible||s(t,n))return null;if(t.interactiveChildren&&t.children){const o=t.children;for(let a=o.length-1;a>=0;a--){const l=o[a],h=this.hitTestRecursive(l,i||l.interactive,n,r,s);if(h){if(h.length>0&&!h[h.length-1].parent)continue;return(h.length>0||t.interactive)&&h.push(t),h}}}return i&&r(t,n)?t.interactive?[t]:[]:null}hitPruneFn(t,i){var n;if(t.hitArea&&(t.worldTransform.applyInverse(i,hu),!t.hitArea.contains(hu.x,hu.y)))return!0;if(t._mask){const r=t._mask.isMaskData?t._mask.maskObject:t._mask;if(r&&!((n=r.containsPoint)!=null&&n.call(r,i)))return!0}return!1}hitTestFn(t,i){return t.hitArea?!0:t.containsPoint?t.containsPoint(i):!1}notifyTarget(t,i){var s,o;i=i??t.type;const n=`on${i}`;(o=(s=t.currentTarget)[n])==null||o.call(s,t);const r=t.eventPhase===t.CAPTURING_PHASE||t.eventPhase===t.AT_TARGET?`${i}capture`:i;this.notifyListeners(t,r),t.eventPhase===t.AT_TARGET&&this.notifyListeners(t,i)}mapPointerDown(t){if(!(t instanceof Fe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(t);if(this.dispatchEvent(i,"pointerdown"),i.pointerType==="touch")this.dispatchEvent(i,"touchstart");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const r=i.button===2;this.dispatchEvent(i,r?"rightdown":"mousedown")}const n=this.trackingData(t.pointerId);n.pressTargetsByButton[t.button]=i.composedPath(),this.freeEvent(i)}mapPointerMove(t){var a,l;if(!(t instanceof Fe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.createPointerEvent(t),n=i.pointerType==="mouse"||i.pointerType==="pen",r=this.trackingData(t.pointerId),s=this.findMountedTarget(r.overTargets);if(((a=r.overTargets)==null?void 0:a.length)>0&&s!==i.target){const h=t.type==="mousemove"?"mouseout":"pointerout",u=this.createPointerEvent(t,h,s);if(this.dispatchEvent(u,"pointerout"),n&&this.dispatchEvent(u,"mouseout"),!i.composedPath().includes(s)){const c=this.createPointerEvent(t,"pointerleave",s);for(c.eventPhase=c.AT_TARGET;c.target&&!i.composedPath().includes(c.target);)c.currentTarget=c.target,this.notifyTarget(c),n&&this.notifyTarget(c,"mouseleave"),c.target=c.target.parent;this.freeEvent(c)}this.freeEvent(u)}if(s!==i.target){const h=t.type==="mousemove"?"mouseover":"pointerover",u=this.clonePointerEvent(i,h);this.dispatchEvent(u,"pointerover"),n&&this.dispatchEvent(u,"mouseover");let c=s==null?void 0:s.parent;for(;c&&c!==this.rootTarget.parent&&c!==i.target;)c=c.parent;if(!c||c===this.rootTarget.parent){const f=this.clonePointerEvent(i,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),n&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(u)}const o=this.moveOnAll?"all":"dispatchEvent";this[o](i,"pointermove"),this.all(i,"globalpointermove"),i.pointerType==="touch"&&(this[o](i,"touchmove"),this.all(i,"globaltouchmove")),n&&(this[o](i,"mousemove"),this.all(i,"globalmousemove"),this.cursor=(l=i.target)==null?void 0:l.cursor),r.overTargets=i.composedPath(),this.freeEvent(i)}mapPointerOver(t){var o;if(!(t instanceof Fe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),n=this.createPointerEvent(t),r=n.pointerType==="mouse"||n.pointerType==="pen";this.dispatchEvent(n,"pointerover"),r&&this.dispatchEvent(n,"mouseover"),n.pointerType==="mouse"&&(this.cursor=(o=n.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(n,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;i.overTargets=n.composedPath(),this.freeEvent(n),this.freeEvent(s)}mapPointerOut(t){if(!(t instanceof Fe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId);if(i.overTargets){const n=t.pointerType==="mouse"||t.pointerType==="pen",r=this.findMountedTarget(i.overTargets),s=this.createPointerEvent(t,"pointerout",r);this.dispatchEvent(s),n&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(t,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),n&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;i.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(t){if(!(t instanceof Fe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=performance.now(),n=this.createPointerEvent(t);if(this.dispatchEvent(n,"pointerup"),n.pointerType==="touch")this.dispatchEvent(n,"touchend");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const a=n.button===2;this.dispatchEvent(n,a?"rightup":"mouseup")}const r=this.trackingData(t.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[t.button]);let o=s;if(s&&!n.composedPath().includes(s)){let a=s;for(;a&&!n.composedPath().includes(a);){if(n.currentTarget=a,this.notifyTarget(n,"pointerupoutside"),n.pointerType==="touch")this.notifyTarget(n,"touchendoutside");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const l=n.button===2;this.notifyTarget(n,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete r.pressTargetsByButton[t.button],o=a}if(o){const a=this.clonePointerEvent(n,"click");a.target=o,a.path=null,r.clicksByButton[t.button]||(r.clicksByButton[t.button]={clickCount:0,target:a.target,timeStamp:i});const l=r.clicksByButton[t.button];if(l.target===a.target&&i-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=i,a.detail=l.clickCount,a.pointerType==="mouse"){const h=a.button===2;this.dispatchEvent(a,h?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(n)}mapPointerUpOutside(t){if(!(t instanceof Fe)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const i=this.trackingData(t.pointerId),n=this.findMountedTarget(i.pressTargetsByButton[t.button]),r=this.createPointerEvent(t);if(n){let s=n;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete i.pressTargetsByButton[t.button]}this.freeEvent(r)}mapWheel(t){if(!(t instanceof jr)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const i=this.createWheelEvent(t);this.dispatchEvent(i),this.freeEvent(i)}findMountedTarget(t){if(!t)return null;let i=t[0];for(let n=1;n<t.length&&t[n].parent===i;n++)i=t[n];return i}createPointerEvent(t,i,n){const r=this.allocateEvent(Fe);return this.copyPointerData(t,r),this.copyMouseData(t,r),this.copyData(t,r),r.nativeEvent=t.nativeEvent,r.originalEvent=t,r.target=n??this.hitTest(r.global.x,r.global.y),typeof i=="string"&&(r.type=i),r}createWheelEvent(t){const i=this.allocateEvent(jr);return this.copyWheelData(t,i),this.copyMouseData(t,i),this.copyData(t,i),i.nativeEvent=t.nativeEvent,i.originalEvent=t,i.target=this.hitTest(i.global.x,i.global.y),i}clonePointerEvent(t,i){const n=this.allocateEvent(Fe);return n.nativeEvent=t.nativeEvent,n.originalEvent=t.originalEvent,this.copyPointerData(t,n),this.copyMouseData(t,n),this.copyData(t,n),n.target=t.target,n.path=t.composedPath().slice(),n.type=i??n.type,n}copyWheelData(t,i){i.deltaMode=t.deltaMode,i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ}copyPointerData(t,i){t instanceof Fe&&i instanceof Fe&&(i.pointerId=t.pointerId,i.width=t.width,i.height=t.height,i.isPrimary=t.isPrimary,i.pointerType=t.pointerType,i.pressure=t.pressure,i.tangentialPressure=t.tangentialPressure,i.tiltX=t.tiltX,i.tiltY=t.tiltY,i.twist=t.twist)}copyMouseData(t,i){t instanceof bl&&i instanceof bl&&(i.altKey=t.altKey,i.button=t.button,i.buttons=t.buttons,i.client.copyFrom(t.client),i.ctrlKey=t.ctrlKey,i.metaKey=t.metaKey,i.movement.copyFrom(t.movement),i.screen.copyFrom(t.screen),i.global.copyFrom(t.global))}copyData(t,i){i.isTrusted=t.isTrusted,i.srcElement=t.srcElement,i.timeStamp=performance.now(),i.type=t.type,i.detail=t.detail,i.view=t.view,i.which=t.which,i.layer.copyFrom(t.layer),i.page.copyFrom(t.page)}trackingData(t){return this.mappingState.trackingData[t]||(this.mappingState.trackingData[t]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[t]}allocateEvent(t){this.eventPool.has(t)||this.eventPool.set(t,[]);const i=this.eventPool.get(t).pop()||new t(this);return i.eventPhase=i.NONE,i.currentTarget=null,i.path=null,i.target=null,i}freeEvent(t){if(t.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const i=t.constructor;this.eventPool.has(i)||this.eventPool.set(i,[]),this.eventPool.get(i).push(t)}notifyListeners(t,i){const n=t.currentTarget._events[i];if(n)if("fn"in n)n.once&&t.currentTarget.removeListener(i,n.fn,void 0,!0),n.fn.call(n.context,t);else for(let r=0,s=n.length;r<s&&!t.propagationImmediatelyStopped;r++)n[r].once&&t.currentTarget.removeListener(i,n[r].fn,void 0,!0),n[r].fn.call(n[r].context,t)}}const dD=1,fD={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class ox{constructor(t){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=t,this.rootBoundary=new cD(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new Fe(null),this.rootWheelEvent=new jr(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:t,resolution:i}=this.renderer;this.setTargetElement(t),this.resolution=i}resolutionChange(t){this.resolution=t}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(t){t=t||"default";let i=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(i=!1),this.currentCursor===t)return;this.currentCursor=t;const n=this.cursorStyles[t];if(n)switch(typeof n){case"string":i&&(this.domElement.style.cursor=n);break;case"function":n(t);break;case"object":i&&Object.assign(this.domElement.style,n);break}else i&&typeof t=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,t)&&(this.domElement.style.cursor=t)}onPointerDown(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;const i=this.normalizeToPointerData(t);this.autoPreventDefault&&i[0].isNormalized&&(t.cancelable||!("cancelable"in t))&&t.preventDefault();for(let n=0,r=i.length;n<r;n++){const s=i[n],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;const i=this.normalizeToPointerData(t);for(let n=0,r=i.length;n<r;n++){const s=this.bootstrapEvent(this.rootPointerEvent,i[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;let i=t.target;t.composedPath&&t.composedPath().length>0&&(i=t.composedPath()[0]);const n=i!==this.domElement?"outside":"",r=this.normalizeToPointerData(t);for(let s=0,o=r.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,r[s]);a.type+=n,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(t){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&t.pointerType==="touch")return;const i=this.normalizeToPointerData(t);for(let n=0,r=i.length;n<r;n++){const s=this.bootstrapEvent(this.rootPointerEvent,i[n]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(t){const i=this.normalizeWheelEvent(t);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(i)}setTargetElement(t){this.removeEvents(),this.domElement=t,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const t=this.domElement.style;t&&(globalThis.navigator.msPointerEnabled?(t.msContentZooming="none",t.msTouchAction="none"):this.supportsPointerEvents&&(t.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const t=this.domElement.style;globalThis.navigator.msPointerEnabled?(t.msContentZooming="",t.msTouchAction=""):this.supportsPointerEvents&&(t.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(t,i,n){let r;this.domElement.parentElement?r=this.domElement.getBoundingClientRect():r={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;t.x=(i-r.left)*(this.domElement.width/r.width)*s,t.y=(n-r.top)*(this.domElement.height/r.height)*s}normalizeToPointerData(t){const i=[];if(this.supportsTouchEvents&&t instanceof TouchEvent)for(let n=0,r=t.changedTouches.length;n<r;n++){const s=t.changedTouches[n];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=t.touches.length===1&&t.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=t.type,i.push(s)}else if(!globalThis.MouseEvent||t instanceof MouseEvent&&(!this.supportsPointerEvents||!(t instanceof globalThis.PointerEvent))){const n=t;typeof n.isPrimary>"u"&&(n.isPrimary=!0),typeof n.width>"u"&&(n.width=1),typeof n.height>"u"&&(n.height=1),typeof n.tiltX>"u"&&(n.tiltX=0),typeof n.tiltY>"u"&&(n.tiltY=0),typeof n.pointerType>"u"&&(n.pointerType="mouse"),typeof n.pointerId>"u"&&(n.pointerId=dD),typeof n.pressure>"u"&&(n.pressure=.5),typeof n.twist>"u"&&(n.twist=0),typeof n.tangentialPressure>"u"&&(n.tangentialPressure=0),n.isNormalized=!0,i.push(n)}else i.push(t);return i}normalizeWheelEvent(t){const i=this.rootWheelEvent;return this.transferMouseData(i,t),i.deltaX=t.deltaX,i.deltaY=t.deltaY,i.deltaZ=t.deltaZ,i.deltaMode=t.deltaMode,this.mapPositionToPoint(i.screen,t.clientX,t.clientY),i.global.copyFrom(i.screen),i.offset.copyFrom(i.screen),i.nativeEvent=t,i.type=t.type,i}bootstrapEvent(t,i){return t.originalEvent=null,t.nativeEvent=i,t.pointerId=i.pointerId,t.width=i.width,t.height=i.height,t.isPrimary=i.isPrimary,t.pointerType=i.pointerType,t.pressure=i.pressure,t.tangentialPressure=i.tangentialPressure,t.tiltX=i.tiltX,t.tiltY=i.tiltY,t.twist=i.twist,this.transferMouseData(t,i),this.mapPositionToPoint(t.screen,i.clientX,i.clientY),t.global.copyFrom(t.screen),t.offset.copyFrom(t.screen),t.isTrusted=i.isTrusted,t.type==="pointerleave"&&(t.type="pointerout"),t.type.startsWith("mouse")&&(t.type=t.type.replace("mouse","pointer")),t.type.startsWith("touch")&&(t.type=fD[t.type]||t.type),t}transferMouseData(t,i){t.isTrusted=i.isTrusted,t.srcElement=i.srcElement,t.timeStamp=performance.now(),t.type=i.type,t.altKey=i.altKey,t.button=i.button,t.buttons=i.buttons,t.client.x=i.clientX,t.client.y=i.clientY,t.ctrlKey=i.ctrlKey,t.metaKey=i.metaKey,t.movement.x=i.movementX,t.movement.y=i.movementY,t.page.x=i.pageX,t.page.y=i.pageY,t.relatedTarget=null,t.shiftKey=i.shiftKey}}ox.extension={name:"events",type:[L.RendererSystem,L.CanvasRendererSystem]};W.add(ox);const pD={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(e,t,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,r=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.on(e,t,r)},removeEventListener(e,t,i){const n=typeof i=="boolean"&&i||typeof i=="object"&&i.capture,r=typeof t=="function"?void 0:t;e=n?`${e}capture`:e,t=typeof t=="function"?t:t.handleEvent,this.off(e,t,r)},dispatchEvent(e){if(!(e instanceof Co))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return e.defaultPrevented=!1,e.path=null,e.target=this,e.manager.dispatchEvent(e),!e.defaultPrevented}};St.mixin(pD);const mD={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};St.mixin(mD);const gD=9,sa=100,vD=0,yD=0,Mg=2,kg=1,_D=-1e3,xD=-1e3,wD=2;class ax{constructor(t){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(Ci.tablet||Ci.phone)&&this.createTouchHook();const i=document.createElement("div");i.style.width=`${sa}px`,i.style.height=`${sa}px`,i.style.position="absolute",i.style.top=`${vD}px`,i.style.left=`${yD}px`,i.style.zIndex=Mg.toString(),this.div=i,this.renderer=t,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const t=document.createElement("button");t.style.width=`${kg}px`,t.style.height=`${kg}px`,t.style.position="absolute",t.style.top=`${_D}px`,t.style.left=`${xD}px`,t.style.zIndex=wD.toString(),t.style.backgroundColor="#FF0000",t.title="select to enable accessibility for this content",t.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(t),this._hookDiv=t}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var t;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(t=this.renderer.view.parentNode)==null||t.appendChild(this.div))}deactivate(){var t;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(t=this.div.parentNode)==null||t.removeChild(this.div))}updateAccessibleObjects(t){if(!t.visible||!t.accessibleChildren)return;t.accessible&&t.interactive&&(t._accessibleActive||this.addChild(t),t.renderId=this.renderId);const i=t.children;if(i)for(let n=0;n<i.length;n++)this.updateAccessibleObjects(i[n])}update(){const t=performance.now();if(Ci.android.device&&t<this.androidUpdateCount||(this.androidUpdateCount=t+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:i,y:n,width:r,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,h=r/o*l,u=s/a*l;let c=this.div;c.style.left=`${i}px`,c.style.top=`${n}px`,c.style.width=`${o}px`,c.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,Rr(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{c=f._accessibleDiv;let p=f.hitArea;const y=f.worldTransform;f.hitArea?(c.style.left=`${(y.tx+p.x*y.a)*h}px`,c.style.top=`${(y.ty+p.y*y.d)*u}px`,c.style.width=`${p.width*y.a*h}px`,c.style.height=`${p.height*y.d*u}px`):(p=f.getBounds(),this.capHitArea(p),c.style.left=`${p.x*h}px`,c.style.top=`${p.y*u}px`,c.style.width=`${p.width*h}px`,c.style.height=`${p.height*u}px`,c.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(c.title=f.accessibleTitle),c.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&c.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==c.title||f.tabIndex!==c.tabIndex)&&(c.title=f.accessibleTitle,c.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(c))}}this.renderId++}updateDebugHTML(t){t.innerHTML=`type: ${t.type}</br> title : ${t.title}</br> tabIndex: ${t.tabIndex}`}capHitArea(t){t.x<0&&(t.width+=t.x,t.x=0),t.y<0&&(t.height+=t.y,t.y=0);const{width:i,height:n}=this.renderer;t.x+t.width>i&&(t.width=i-t.x),t.y+t.height>n&&(t.height=n-t.y)}addChild(t){let i=this.pool.pop();i||(i=document.createElement("button"),i.style.width=`${sa}px`,i.style.height=`${sa}px`,i.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",i.style.position="absolute",i.style.zIndex=Mg.toString(),i.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?i.setAttribute("aria-live","off"):i.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?i.setAttribute("aria-relevant","additions"):i.setAttribute("aria-relevant","text"),i.addEventListener("click",this._onClick.bind(this)),i.addEventListener("focus",this._onFocus.bind(this)),i.addEventListener("focusout",this._onFocusOut.bind(this))),i.style.pointerEvents=t.accessiblePointerEvents,i.type=t.accessibleType,t.accessibleTitle&&t.accessibleTitle!==null?i.title=t.accessibleTitle:(!t.accessibleHint||t.accessibleHint===null)&&(i.title=`displayObject ${t.tabIndex}`),t.accessibleHint&&t.accessibleHint!==null&&i.setAttribute("aria-label",t.accessibleHint),this.debug&&this.updateDebugHTML(i),t._accessibleActive=!0,t._accessibleDiv=i,i.displayObject=t,this.children.push(t),this.div.appendChild(t._accessibleDiv),t._accessibleDiv.tabIndex=t.tabIndex}_dispatchEvent(t,i){const{displayObject:n}=t.target,r=this.renderer.events.rootBoundary,s=Object.assign(new Co(r),{target:n});r.rootTarget=this.renderer.lastObjectRendered,i.forEach(o=>r.dispatchEvent(s,o))}_onClick(t){this._dispatchEvent(t,["click","pointertap","tap"])}_onFocus(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","assertive"),this._dispatchEvent(t,["mouseover"])}_onFocusOut(t){t.target.getAttribute("aria-live")||t.target.setAttribute("aria-live","polite"),this._dispatchEvent(t,["mouseout"])}_onKeyDown(t){t.keyCode===gD&&this.activate()}_onMouseMove(t){t.movementX===0&&t.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}ax.extension={name:"accessibility",type:[L.RendererPlugin,L.CanvasRendererPlugin]};W.add(ax);const od=class{constructor(e){this.stage=new be,e=Object.assign({forceCanvas:!1},e),this.renderer=DO(e),od._plugins.forEach(t=>{t.init.call(this,e)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(e,t){const i=od._plugins.slice(0);i.reverse(),i.forEach(n=>{n.destroy.call(this)}),this.stage.destroy(t),this.stage=null,this.renderer.destroy(e),this.renderer=null}};let Qf=od;Qf._plugins=[];W.handleByList(L.Application,Qf._plugins);class lx{static init(t){Object.defineProperty(this,"resizeTo",{set(i){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=i,i&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let i,n;if(this._resizeTo===globalThis.window)i=globalThis.innerWidth,n=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:s}=this._resizeTo;i=r,n=s}this.renderer.resize(i,n),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=t.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}lx.extension=L.Application;W.add(lx);const Og={loader:L.LoadParser,resolver:L.ResolveParser,cache:L.CacheParser,detection:L.DetectionParser};W.handle(L.Asset,e=>{const t=e.ref;Object.entries(Og).filter(([i])=>!!t[i]).forEach(([i,n])=>W.add(Object.assign(t[i],{extension:t[i].extension??n})))},e=>{const t=e.ref;Object.keys(Og).filter(i=>!!t[i]).forEach(i=>W.remove(t[i]))});class bD{constructor(t,i=!1){this._loader=t,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=i}add(t){t.forEach(i=>{this._assetList.push(i)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const t=[],i=Math.min(this._assetList.length,this._maxConcurrent);for(let n=0;n<i;n++)t.push(this._assetList.pop());await this._loader.load(t),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(t){this._isActive!==t&&(this._isActive=t,t&&!this._isLoading&&this._next())}}function hx(e,t){if(Array.isArray(t)){for(const i of t)if(e.startsWith(`data:${i}`))return!0;return!1}return e.startsWith(`data:${t}`)}function hh(e,t){const i=e.split("?")[0],n=Xt.extname(i).toLowerCase();return Array.isArray(t)?t.includes(n):n===t}const Ii=(e,t)=>(Array.isArray(e)||(e=[e]),t?e.map(i=>typeof i=="string"?t(i):i):e),ad=(e,t)=>{const i=t.split("?")[1];return i&&(e+=`?${i}`),e};function ux(e,t,i,n,r){const s=t[i];for(let o=0;o<s.length;o++){const a=s[o];i<t.length-1?ux(e.replace(n[i],a),t,i+1,n,r):r.push(e.replace(n[i],a))}}function ED(e){const t=/\{(.*?)\}/g,i=e.match(t),n=[];if(i){const r=[];i.forEach(s=>{const o=s.substring(1,s.length-1).split(",");r.push(o)}),ux(e,r,0,i,n)}else n.push(e);return n}const El=e=>!Array.isArray(e);class TD{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(t){return this._cache.has(t)}get(t){const i=this._cache.get(t);return i||console.warn(`[Assets] Asset id ${t} was not found in the Cache`),i}set(t,i){const n=Ii(t);let r;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(i)){r=l.getCacheableAssets(n,i);break}}r||(r={},n.forEach(a=>{r[a]=i}));const s=Object.keys(r),o={cacheKeys:s,keys:n};if(n.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==i&&console.warn("[Cache] already has key:",a),this._cache.set(a,r[a])}),i instanceof j){const a=i;n.forEach(l=>{a.baseTexture!==j.EMPTY.baseTexture&&tt.addToCache(a.baseTexture,l),j.addToCache(a,l)})}}remove(t){if(this._cacheMap.get(t),!this._cacheMap.has(t)){console.warn(`[Assets] Asset id ${t} was not found in the Cache`);return}const i=this._cacheMap.get(t);i.cacheKeys.forEach(r=>{this._cache.delete(r)}),i.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const ps=new TD;class SD{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(t,i){const n={promise:null,parser:null};return n.promise=(async()=>{var s,o;let r=null;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.load&&((s=l.test)!=null&&s.call(l,t,i,this))){r=await l.load(t,i,this),n.parser=l;break}}if(!n.parser)return console.warn(`[Assets] ${t} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];l.parse&&l.parse&&await((o=l.testParse)==null?void 0:o.call(l,r,i,this))&&(r=await l.parse(r,i,this)||r,n.parser=l)}return r})(),n}async load(t,i){let n=0;const r={},s=El(t),o=Ii(t,h=>({src:h})),a=o.length,l=o.map(async h=>{const u=Xt.toAbsolute(h.src);if(!r[h.src])try{this.promiseCache[u]||(this.promiseCache[u]=this._getLoadPromiseAndParser(u,h)),r[h.src]=await this.promiseCache[u].promise,i&&i(++n/a)}catch(c){throw delete this.promiseCache[u],delete r[h.src],new Error(`[Loader.load] Failed to load ${u}.
${c}`)}});return await Promise.all(l),s?r[o[0].src]:r}async unload(t){const n=Ii(t,r=>({src:r})).map(async r=>{var a,l;const s=Xt.toAbsolute(r.src),o=this.promiseCache[s];if(o){const h=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,h,r,this),delete this.promiseCache[s]}});await Promise.all(n)}get parsers(){return this._parsers}}var yi=(e=>(e[e.Low=0]="Low",e[e.Normal=1]="Normal",e[e.High=2]="High",e))(yi||{});const CD={extension:{type:L.LoadParser,priority:yi.Low},test(e){return Xt.extname(e).toLowerCase()===".json"},async load(e){return await(await z.ADAPTER.fetch(e)).json()}};W.add(CD);const AD={extension:{type:L.LoadParser,priority:yi.Low},test(e){return Xt.extname(e).toLowerCase()===".txt"},async load(e){return await(await z.ADAPTER.fetch(e)).text()}};W.add(AD);const PD=["normal","bold","100","200","300","400","500","600","700","800","900"],ID=[".ttf",".otf",".woff",".woff2"],RD=["font/ttf","font/otf","font/woff","font/woff2"];function MD(e){const t=Xt.extname(e);return Xt.basename(e,t).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")}const cx={extension:{type:L.LoadParser,priority:yi.Low},test(e){return hx(e,RD)||hh(e,ID)},async load(e,t){var n,r,s;const i=z.ADAPTER.getFontFaceSet();if(i){const o=[],a=((n=t.data)==null?void 0:n.family)??MD(e),l=((s=(r=t.data)==null?void 0:r.weights)==null?void 0:s.filter(u=>PD.includes(u)))??["normal"],h=t.data??{};for(let u=0;u<l.length;u++){const c=l[u],d=new FontFace(a,`url(${encodeURI(e)})`,{...h,weight:c});await d.load(),i.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(e){(Array.isArray(e)?e:[e]).forEach(t=>z.ADAPTER.getFontFaceSet().delete(t))}};W.add(cx);let Dg=0,uu;const kD="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",OD={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${kD}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},DD={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let cu;class BD{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(t=>{const i=URL.createObjectURL(new Blob([OD.code],{type:"application/javascript"})),n=new Worker(i);n.addEventListener("message",r=>{n.terminate(),URL.revokeObjectURL(i),t(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(t){return this._run("loadImageBitmap",[t])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){uu===void 0&&(uu=navigator.hardwareConcurrency||4);let t=this.workerPool.pop();return!t&&this._createdWorkers<uu&&(cu||(cu=URL.createObjectURL(new Blob([DD.code],{type:"application/javascript"}))),this._createdWorkers++,t=new Worker(cu),t.addEventListener("message",i=>{this.complete(i.data),this.returnWorker(i.target),this.next()})),t}returnWorker(t){this.workerPool.push(t)}complete(t){t.error!==void 0?this.resolveHash[t.uuid].reject(t.error):this.resolveHash[t.uuid].resolve(t.data),this.resolveHash[t.uuid]=null}async _run(t,i){await this._initWorkers();const n=new Promise((r,s)=>{this.queue.push({id:t,arguments:i,resolve:r,reject:s})});return this.next(),n}next(){if(!this.queue.length)return;const t=this.getWorker();if(!t)return;const i=this.queue.pop(),n=i.id;this.resolveHash[Dg]={resolve:i.resolve,reject:i.reject},t.postMessage({data:i.arguments,uuid:Dg++,id:n})}}const Bg=new BD;function uh(e,t,i){const n=new j(e);return n.baseTexture.on("dispose",()=>{delete t.promiseCache[i]}),n}const ND=[".jpeg",".jpg",".png",".webp",".avif"],LD=["image/jpeg","image/png","image/webp","image/avif"];async function FD(e){const t=await z.ADAPTER.fetch(e);if(!t.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${e}: ${t.status} ${t.statusText}`);const i=await t.blob();return await createImageBitmap(i)}const mo={extension:{type:L.LoadParser,priority:yi.High},config:{preferWorkers:!0},test(e){return hx(e,LD)||hh(e,ND)},async load(e,t,i){let n=null;globalThis.createImageBitmap?this.config.preferWorkers&&await Bg.isImageBitmapSupported()?n=await Bg.loadImageBitmap(e):n=await FD(e):n=await new Promise(s=>{n=new Image,n.crossOrigin="anonymous",n.src=e,n.complete?s(n):n.onload=()=>{s(n)}});const r=new tt(n,{resolution:hn(e),...t.data});return r.resource.src=e,uh(r,i,e)},unload(e){e.destroy(!0)}};W.add(mo);const UD={extension:{type:L.LoadParser,priority:yi.High},test(e){return Xt.extname(e).toLowerCase()===".svg"},async testParse(e){return po.test(e)},async parse(e,t,i){var o,a,l;const n=new po(e,(o=t==null?void 0:t.data)==null?void 0:o.resourceOptions),r=new tt(n,{resolution:hn(e),...t==null?void 0:t.data});r.resource.src=e;const s=uh(r,i,e);return(l=(a=t==null?void 0:t.data)==null?void 0:a.resourceOptions)!=null&&l.autoLoad||await n.load(),s},async load(e,t){return(await z.ADAPTER.fetch(e)).text()},unload:mo.unload};W.add(UD);class zD{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(t,i)=>`${t}${this._bundleIdConnector}${i}`,extractAssetIdFromBundle:(t,i)=>i.replace(`${t}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(t){if(this._bundleIdConnector=t.connector??this._bundleIdConnector,this._createBundleAssetId=t.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=t.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...t){t.forEach(i=>{this._preferredOrder.push(i),i.priority||(i.priority=Object.keys(i.params))}),this._resolverHash={}}set basePath(t){this._basePath=t}get basePath(){return this._basePath}set rootPath(t){this._rootPath=t}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(t){if(typeof t=="string")this._defaultSearchParams=t;else{const i=t;this._defaultSearchParams=Object.keys(i).map(n=>`${encodeURIComponent(n)}=${encodeURIComponent(i[n])}`).join("&")}}addManifest(t){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=t,t.bundles.forEach(i=>{this.addBundle(i.name,i.assets)})}addBundle(t,i){const n=[];Array.isArray(i)?i.forEach(r=>{if(typeof r.name=="string"){const s=this._createBundleAssetId(t,r.name);n.push(s),this.add([r.name,s],r.srcs,r.data)}else{const s=r.name.map(o=>this._createBundleAssetId(t,o));s.forEach(o=>{n.push(o)}),this.add([...r.name,...s],r.srcs)}}):Object.keys(i).forEach(r=>{n.push(this._createBundleAssetId(t,r)),this.add([r,this._createBundleAssetId(t,r)],i[r])}),this._bundles[t]=n}add(t,i,n){const r=Ii(t);r.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(i)||(typeof i=="string"?i=ED(i):i=[i]);const s=i.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let h=0;h<this._parsers.length;h++){const u=this._parsers[h];if(u.test(o)){a=u.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=r),(this._basePath||this._rootPath)&&(a.src=Xt.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??n,a});r.forEach(o=>{this._assetMap[o]=s})}resolveBundle(t){const i=El(t);t=Ii(t);const n={};return t.forEach(r=>{const s=this._bundles[r];if(s){const o=this.resolve(s),a={};for(const l in o){const h=o[l];a[this._extractAssetIdFromBundle(r,l)]=h}n[r]=a}}),i?n[t[0]]:n}resolveUrl(t){const i=this.resolve(t);if(typeof t!="string"){const n={};for(const r in i)n[r]=i[r].src;return n}return i.src}resolve(t){const i=El(t);t=Ii(t);const n={};return t.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const o=this._getPreferredOrder(s),a=s[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(h=>{const u=s.filter(c=>c[l]?c[l]===h:!1);u.length&&(s=u)})}),this._resolverHash[r]=s[0]??a}else{let s=r;(this._basePath||this._rootPath)&&(s=Xt.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[r]={src:s}}n[r]=this._resolverHash[r]}),i?n[t[0]]:n}hasKey(t){return!!this._assetMap[t]}hasBundle(t){return!!this._bundles[t]}_getPreferredOrder(t){for(let i=0;i<t.length;i++){const n=t[0],r=this._preferredOrder.find(s=>s.params.format.includes(n.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(t){if(!this._defaultSearchParams)return t;const i=/\?/.test(t)?"&":"?";return`${t}${i}${this._defaultSearchParams}`}}class GD{constructor(){this._detections=[],this._initialized=!1,this.resolver=new zD,this.loader=new SD,this.cache=ps,this._backgroundLoader=new bD(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(t={}){var s,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,t.defaultSearchParams&&this.resolver.setDefaultSearchParams(t.defaultSearchParams),t.basePath&&(this.resolver.basePath=t.basePath),t.bundleIdentifier&&this.resolver.setBundleIdentifier(t.bundleIdentifier),t.manifest){let l=t.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const i=((s=t.texturePreference)==null?void 0:s.resolution)??1,n=typeof i=="number"?[i]:i;let r=[];if((o=t.texturePreference)!=null&&o.format){const l=(a=t.texturePreference)==null?void 0:a.format;r=typeof l=="string"?[l]:l;for(const h of this._detections)await h.test()||(r=await h.remove(r))}else for(const l of this._detections)await l.test()&&(r=await l.add(r));this.resolver.prefer({params:{format:r,resolution:n}})}add(t,i,n){this.resolver.add(t,i,n)}async load(t,i){this._initialized||await this.init();const n=El(t),r=Ii(t).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(r),o=await this._mapLoadToResolve(s,i);return n?o[r[0]]:o}addBundle(t,i){this.resolver.addBundle(t,i)}async loadBundle(t,i){this._initialized||await this.init();let n=!1;typeof t=="string"&&(n=!0,t=[t]);const r=this.resolver.resolveBundle(t),s={},o=Object.keys(r);let a=0,l=0;const h=()=>{i==null||i(++a/l)},u=o.map(c=>{const d=r[c];return l+=Object.keys(d).length,this._mapLoadToResolve(d,h).then(f=>{s[c]=f})});return await Promise.all(u),n?s[t[0]]:s}async backgroundLoad(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolve(t);this._backgroundLoader.add(Object.values(i))}async backgroundLoadBundle(t){this._initialized||await this.init(),typeof t=="string"&&(t=[t]);const i=this.resolver.resolveBundle(t);Object.values(i).forEach(n=>{this._backgroundLoader.add(Object.values(n))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(t){if(typeof t=="string")return ps.get(t);const i={};for(let n=0;n<t.length;n++)i[n]=ps.get(t[n]);return i}async _mapLoadToResolve(t,i){const n=Object.values(t),r=Object.keys(t);this._backgroundLoader.active=!1;const s=await this.loader.load(n,i);this._backgroundLoader.active=!0;const o={};return n.forEach((a,l)=>{const h=s[a.src],u=[a.src];a.alias&&u.push(...a.alias),o[r[l]]=h,ps.set(u,h)}),o}async unload(t){this._initialized||await this.init();const i=Ii(t).map(r=>typeof r!="string"?r.src:r),n=this.resolver.resolve(i);await this._unloadFromResolved(n)}async unloadBundle(t){this._initialized||await this.init(),t=Ii(t);const i=this.resolver.resolveBundle(t),n=Object.keys(i).map(r=>this._unloadFromResolved(i[r]));await Promise.all(n)}async _unloadFromResolved(t){const i=Object.values(t);i.forEach(n=>{ps.remove(n.src)}),await this.loader.unload(i)}get detections(){return this._detections}get preferWorkers(){return mo.config.preferWorkers}set preferWorkers(t){mo.config.preferWorkers=t}}const oa=new GD;W.handleByList(L.LoadParser,oa.loader.parsers).handleByList(L.ResolveParser,oa.resolver.parsers).handleByList(L.CacheParser,oa.cache.parsers).handleByList(L.DetectionParser,oa.detections);const $D={extension:L.CacheParser,test:e=>Array.isArray(e)&&e.every(t=>t instanceof j),getCacheableAssets:(e,t)=>{const i={};return e.forEach(n=>{t.forEach((r,s)=>{i[n+(s===0?"":s+1)]=r})}),i}};W.add($D);const HD={extension:{type:L.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",t=await z.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"avif"],remove:async e=>e.filter(t=>t!=="avif")};W.add(HD);const jD={extension:{type:L.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const e="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",t=await z.ADAPTER.fetch(e).then(i=>i.blob());return createImageBitmap(t).then(()=>!0,()=>!1)},add:async e=>[...e,"webp"],remove:async e=>e.filter(t=>t!=="webp")};W.add(jD);const Ng=["png","jpg","jpeg"],WD={extension:{type:L.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async e=>[...e,...Ng],remove:async e=>e.filter(t=>!Ng.includes(t))};W.add(WD);const XD={extension:L.ResolveParser,test:mo.test,parse:e=>{var t;return{resolution:parseFloat(((t=z.RETINA_PREFIX.exec(e))==null?void 0:t[1])??"1"),format:e.split(".").pop(),src:e}}};W.add(XD);var me=(e=>(e[e.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",e[e.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",e[e.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",e[e.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",e[e.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",e[e.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",e[e.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",e[e.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",e[e.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",e[e.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",e[e.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",e[e.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",e[e.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",e[e.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",e[e.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",e[e.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",e[e.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",e[e.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",e[e.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",e))(me||{});const Tl={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let xi,sr;function Lg(){sr={s3tc:xi.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:xi.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:xi.getExtension("WEBGL_compressed_texture_etc"),etc1:xi.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:xi.getExtension("WEBGL_compressed_texture_pvrtc")||xi.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:xi.getExtension("WEBGL_compressed_texture_atc"),astc:xi.getExtension("WEBGL_compressed_texture_astc")}}const VD={extension:{type:L.DetectionParser,priority:2},test:async()=>{const t=z.ADAPTER.createCanvas().getContext("webgl");return t?(xi=t,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async e=>{sr||Lg();const t=[];for(const i in sr)sr[i]&&t.push(i);return[...t,...e]},remove:async e=>(sr||Lg(),e.filter(t=>!(t in sr)))};W.add(VD);class YD extends To{constructor(t,i={width:1,height:1,autoLoad:!0}){let n,r;typeof t=="string"?(n=t,r=new Uint8Array):(n=null,r=t),super(r,i),this.origin=n,this.buffer=r?new Yc(r):null,this.origin&&i.autoLoad!==!1&&this.load(),r!=null&&r.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(t){}async load(){const n=await(await(await fetch(this.origin)).blob()).arrayBuffer();return this.data=new Uint32Array(n),this.buffer=new Yc(n),this.loaded=!0,this.onBlobLoaded(n),this.update(),this}}class Dn extends YD{constructor(t,i){super(t,i),this.format=i.format,this.levels=i.levels||1,this._width=i.width,this._height=i.height,this._extension=Dn._formatToExtension(this.format),(i.levelBuffers||this.buffer)&&(this._levelBuffers=i.levelBuffers||Dn._createLevelBuffers(t instanceof Uint8Array?t:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(t,i,n){const r=t.gl;if(!t.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:h,levelHeight:u,levelBuffer:c}=this._levelBuffers[o];r.compressedTexImage2D(r.TEXTURE_2D,l,this.format,h,u,0,c)}return!0}onBlobLoaded(){this._levelBuffers=Dn._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(t){if(t>=33776&&t<=33779)return"s3tc";if(t>=37488&&t<=37497)return"etc";if(t>=35840&&t<=35843)return"pvrtc";if(t>=36196)return"etc1";if(t>=35986&&t<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(t,i,n,r,s,o,a){const l=new Array(n);let h=t.byteOffset,u=o,c=a,d=u+r-1&~(r-1),f=c+s-1&~(s-1),p=d*f*Tl[i];for(let y=0;y<n;y++)l[y]={levelID:y,levelWidth:n>1?u:d,levelHeight:n>1?c:f,levelBuffer:new Uint8Array(t.buffer,h,p)},h+=p,u=u>>1||1,c=c>>1||1,d=u+r-1&~(r-1),f=c+s-1&~(s-1),p=d*f*Tl[i];return l}}const du=4,aa=124,qD=32,Fg=20,KD=542327876,la={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},ZD={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},ha={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},QD=1,JD=2,t3=4,e3=64,i3=512,n3=131072,r3=827611204,s3=861165636,o3=894720068,a3=808540228,l3=4,h3={[r3]:me.COMPRESSED_RGBA_S3TC_DXT1_EXT,[s3]:me.COMPRESSED_RGBA_S3TC_DXT3_EXT,[o3]:me.COMPRESSED_RGBA_S3TC_DXT5_EXT},u3={[70]:me.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:me.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:me.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:me.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:me.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:me.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:me.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:me.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:me.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function c3(e){const t=new Uint32Array(e);if(t[0]!==KD)throw new Error("Invalid DDS file magic word");const n=new Uint32Array(e,0,aa/Uint32Array.BYTES_PER_ELEMENT),r=n[la.HEIGHT],s=n[la.WIDTH],o=n[la.MIPMAP_COUNT],a=new Uint32Array(e,la.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,qD/Uint32Array.BYTES_PER_ELEMENT),l=a[QD];if(l&t3){const h=a[ZD.FOURCC];if(h!==a3){const v=h3[h],x=du+aa,b=new Uint8Array(e,x);return[new Dn(b,{format:v,width:s,height:r,levels:o})]}const u=du+aa,c=new Uint32Array(t.buffer,u,Fg/Uint32Array.BYTES_PER_ELEMENT),d=c[ha.DXGI_FORMAT],f=c[ha.RESOURCE_DIMENSION],p=c[ha.MISC_FLAG],y=c[ha.ARRAY_SIZE],_=u3[d];if(_===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(p===l3)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const m=new Array,g=du+aa+Fg;if(y===1)m.push(new Uint8Array(e,g));else{const v=Tl[_];let x=0,b=s,T=r;for(let w=0;w<o;w++){const S=Math.max(1,b+3&-4),A=Math.max(1,T+3&-4),P=S*A*v;x+=P,b=b>>>1,T=T>>>1}let E=g;for(let w=0;w<y;w++)m.push(new Uint8Array(e,E,x)),E+=x}return m.map(v=>new Dn(v,{format:_,width:s,height:r,levels:o}))}throw l&e3?new Error("DDSParser does not support uncompressed texture data."):l&i3?new Error("DDSParser does not supported YUV uncompressed texture data."):l&n3?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&JD?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const Ug=[171,75,84,88,32,49,49,187,13,10,26,10],d3=67305985,Ne={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},ld=64,zg={[V.UNSIGNED_BYTE]:1,[V.UNSIGNED_SHORT]:2,[V.INT]:4,[V.UNSIGNED_INT]:4,[V.FLOAT]:4,[V.HALF_FLOAT]:8},f3={[N.RGBA]:4,[N.RGB]:3,[N.RG]:2,[N.RED]:1,[N.LUMINANCE]:1,[N.LUMINANCE_ALPHA]:2,[N.ALPHA]:1},p3={[V.UNSIGNED_SHORT_4_4_4_4]:2,[V.UNSIGNED_SHORT_5_5_5_1]:2,[V.UNSIGNED_SHORT_5_6_5]:2};function m3(e,t,i=!1){const n=new DataView(t);if(!g3(e,n))return null;const r=n.getUint32(Ne.ENDIANNESS,!0)===d3,s=n.getUint32(Ne.GL_TYPE,r),o=n.getUint32(Ne.GL_FORMAT,r),a=n.getUint32(Ne.GL_INTERNAL_FORMAT,r),l=n.getUint32(Ne.PIXEL_WIDTH,r),h=n.getUint32(Ne.PIXEL_HEIGHT,r)||1,u=n.getUint32(Ne.PIXEL_DEPTH,r)||1,c=n.getUint32(Ne.NUMBER_OF_ARRAY_ELEMENTS,r)||1,d=n.getUint32(Ne.NUMBER_OF_FACES,r),f=n.getUint32(Ne.NUMBER_OF_MIPMAP_LEVELS,r),p=n.getUint32(Ne.BYTES_OF_KEY_VALUE_DATA,r);if(h===0||u!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(c!==1)throw new Error("WebGL does not support array textures");const y=4,_=4,m=l+3&-4,g=h+3&-4,v=new Array(c);let x=l*h;s===0&&(x=m*g);let b;if(s!==0?zg[s]?b=zg[s]*f3[o]:b=p3[s]:b=Tl[a],b===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const T=i?y3(n,p,r):null;let w=x*b,S=l,A=h,P=m,k=g,R=ld+p;for(let I=0;I<f;I++){const J=n.getUint32(R,r);let et=R+4;for(let F=0;F<c;F++){let O=v[F];O||(O=v[F]=new Array(f)),O[I]={levelID:I,levelWidth:f>1||s!==0?S:P,levelHeight:f>1||s!==0?A:k,levelBuffer:new Uint8Array(t,et,w)},et+=w}R+=J+4,R=R%4!==0?R+4-R%4:R,S=S>>1||1,A=A>>1||1,P=S+y-1&~(y-1),k=A+_-1&~(_-1),w=P*k*b}return s!==0?{uncompressed:v.map(I=>{let J=I[0].levelBuffer,et=!1;return s===V.FLOAT?J=new Float32Array(I[0].levelBuffer.buffer,I[0].levelBuffer.byteOffset,I[0].levelBuffer.byteLength/4):s===V.UNSIGNED_INT?(et=!0,J=new Uint32Array(I[0].levelBuffer.buffer,I[0].levelBuffer.byteOffset,I[0].levelBuffer.byteLength/4)):s===V.INT&&(et=!0,J=new Int32Array(I[0].levelBuffer.buffer,I[0].levelBuffer.byteOffset,I[0].levelBuffer.byteLength/4)),{resource:new To(J,{width:I[0].levelWidth,height:I[0].levelHeight}),type:s,format:et?v3(o):o}}),kvData:T}:{compressed:v.map(I=>new Dn(null,{format:a,width:l,height:h,levels:f,levelBuffers:I})),kvData:T}}function g3(e,t){for(let i=0;i<Ug.length;i++)if(t.getUint8(i)!==Ug[i])return console.error(`${e} is not a valid *.ktx file!`),!1;return!0}function v3(e){switch(e){case N.RGBA:return N.RGBA_INTEGER;case N.RGB:return N.RGB_INTEGER;case N.RG:return N.RG_INTEGER;case N.RED:return N.RED_INTEGER;default:return e}}function y3(e,t,i){const n=new Map;let r=0;for(;r<t;){const s=e.getUint32(ld+r,i),o=ld+r+4,a=3-(s+3)%4;if(s===0||s>t-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&e.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const h=new TextDecoder().decode(new Uint8Array(e.buffer,o,l)),u=new DataView(e.buffer,o+l+1,s-l-1);n.set(h,u),r+=4+s+a}return n}const _3={extension:{type:L.LoadParser,priority:yi.High},test(e){return hh(e,".dds")},async load(e,t,i){const r=await(await z.ADAPTER.fetch(e)).arrayBuffer(),o=c3(r).map(a=>{const l=new tt(a,{mipmap:gi.OFF,alphaMode:ti.NO_PREMULTIPLIED_ALPHA,resolution:hn(e),...t.data});return uh(l,i,e)});return o.length===1?o[0]:o},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};W.add(_3);const x3={extension:{type:L.LoadParser,priority:yi.High},test(e){return hh(e,".ktx")},async load(e,t,i){const r=await(await z.ADAPTER.fetch(e)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=m3(e,r),l=s??o,h={mipmap:gi.OFF,alphaMode:ti.NO_PREMULTIPLIED_ALPHA,resolution:hn(e),...t.data},u=l.map(c=>{l===o&&Object.assign(h,{type:c.type,format:c.format});const d=new tt(c,h);return d.ktxKeyValueData=a,uh(d,i,e)});return u.length===1?u[0]:u},unload(e){Array.isArray(e)?e.forEach(t=>t.destroy(!0)):e.destroy(!0)}};W.add(x3);const w3={extension:L.ResolveParser,test:e=>{const i=e.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(i)},parse:e=>{var n,r;if(e.split("?")[0].split(".").pop()==="ktx"){const s=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(s.some(o=>e.endsWith(o)))return{resolution:parseFloat(((n=z.RETINA_PREFIX.exec(e))==null?void 0:n[1])??"1"),format:s.find(o=>e.endsWith(o)),src:e}}return{resolution:parseFloat(((r=z.RETINA_PREFIX.exec(e))==null?void 0:r[1])??"1"),format:e.split(".").pop(),src:e}}};W.add(w3);const b3=new it,E3=4,hd=class{constructor(e){this.renderer=e}async image(e,t,i){const n=new Image;return n.src=await this.base64(e,t,i),n}async base64(e,t,i){const n=this.canvas(e);if(n.toDataURL!==void 0)return n.toDataURL(t,i);if(n.convertToBlob!==void 0){const r=await n.convertToBlob({type:t,quality:i});return await new Promise(s=>{const o=new FileReader;o.onload=()=>s(o.result),o.readAsDataURL(r)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(e,t){const{pixels:i,width:n,height:r,flipY:s}=this._rawPixels(e,t);let o=new gg(n,r,1);const a=o.context.getImageData(0,0,n,r);if(hd.arrayPostDivide(i,a.data),o.context.putImageData(a,0,0),s){const l=new gg(o.width,o.height,1);l.context.scale(1,-1),l.context.drawImage(o.canvas,0,-r),o.destroy(),o=l}return o.canvas}pixels(e,t){const{pixels:i}=this._rawPixels(e,t);return hd.arrayPostDivide(i,i),i}_rawPixels(e,t){const i=this.renderer;let n,r=!1,s,o=!1;if(e)if(e instanceof dn)s=e;else{const c=i.context.webGLVersion>=2?i.multisample:Pt.NONE;if(s=this.renderer.generateTexture(e,{multisample:c}),c!==Pt.NONE){const d=dn.create({width:s.width,height:s.height});i.framebuffer.bind(s.framebuffer),i.framebuffer.blit(d.framebuffer),i.framebuffer.bind(null),s.destroy(!0),s=d}o=!0}s?(n=s.baseTexture.resolution,t=t??s.frame,r=!1,i.renderTexture.bind(s)):(n=i.resolution,t||(t=b3,t.width=i.width,t.height=i.height),r=!0,i.renderTexture.bind(null));const a=Math.round(t.width*n),l=Math.round(t.height*n),h=new Uint8Array(E3*a*l),u=i.gl;return u.readPixels(Math.round(t.x*n),Math.round(t.y*n),a,l,u.RGBA,u.UNSIGNED_BYTE,h),o&&s.destroy(!0),{pixels:h,width:a,height:l,flipY:r}}destroy(){this.renderer=null}static arrayPostDivide(e,t){for(let i=0;i<e.length;i+=4){const n=t[i+3]=e[i+3];n!==0?(t[i]=Math.round(Math.min(e[i]*255/n,255)),t[i+1]=Math.round(Math.min(e[i+1]*255/n,255)),t[i+2]=Math.round(Math.min(e[i+2]*255/n,255))):(t[i]=e[i],t[i+1]=e[i+1],t[i+2]=e[i+2])}}};let dx=hd;dx.extension={name:"extract",type:L.RendererSystem};W.add(dx);const Sl={build(e){const t=e.points;let i,n,r,s,o,a;if(e.type===Ht.CIRC){const p=e.shape;i=p.x,n=p.y,o=a=p.radius,r=s=0}else if(e.type===Ht.ELIP){const p=e.shape;i=p.x,n=p.y,o=p.width,a=p.height,r=s=0}else{const p=e.shape,y=p.width/2,_=p.height/2;i=p.x+y,n=p.y+_,o=a=Math.max(0,Math.min(p.radius,Math.min(y,_))),r=y-o,s=_-a}if(!(o>=0&&a>=0&&r>=0&&s>=0)){t.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),h=l*8+(r?4:0)+(s?4:0);if(t.length=h,h===0)return;if(l===0){t.length=8,t[0]=t[6]=i+r,t[1]=t[3]=n+s,t[2]=t[4]=i-r,t[5]=t[7]=n-s;return}let u=0,c=l*4+(r?2:0)+2,d=c,f=h;{const p=r+o,y=s,_=i+p,m=i-p,g=n+y;if(t[u++]=_,t[u++]=g,t[--c]=g,t[--c]=m,s){const v=n-y;t[d++]=m,t[d++]=v,t[--f]=v,t[--f]=_}}for(let p=1;p<l;p++){const y=Math.PI/2*(p/l),_=r+Math.cos(y)*o,m=s+Math.sin(y)*a,g=i+_,v=i-_,x=n+m,b=n-m;t[u++]=g,t[u++]=x,t[--c]=x,t[--c]=v,t[d++]=v,t[d++]=b,t[--f]=b,t[--f]=g}{const p=r,y=s+a,_=i+p,m=i-p,g=n+y,v=n-y;t[u++]=_,t[u++]=g,t[--f]=v,t[--f]=_,r&&(t[u++]=m,t[u++]=g,t[--f]=v,t[--f]=m)}},triangulate(e,t){const i=e.points,n=t.points,r=t.indices;if(i.length===0)return;let s=n.length/2;const o=s;let a,l;if(e.type!==Ht.RREC){const u=e.shape;a=u.x,l=u.y}else{const u=e.shape;a=u.x+u.width/2,l=u.y+u.height/2}const h=e.matrix;n.push(e.matrix?h.a*a+h.c*l+h.tx:a,e.matrix?h.b*a+h.d*l+h.ty:l),s++,n.push(i[0],i[1]);for(let u=2;u<i.length;u+=2)n.push(i[u],i[u+1]),r.push(s++,o,s);r.push(o+1,o,s)}};function Gg(e,t=!1){const i=e.length;if(i<6)return;let n=0;for(let r=0,s=e[i-2],o=e[i-1];r<i;r+=2){const a=e[r],l=e[r+1];n+=(a-s)*(l+o),s=a,o=l}if(!t&&n>0||t&&n<=0){const r=i/2;for(let s=r+r%2;s<i;s+=2){const o=i-s-2,a=i-s-1,l=s,h=s+1;[e[o],e[l]]=[e[l],e[o]],[e[a],e[h]]=[e[h],e[a]]}}}const fx={build(e){e.points=e.shape.points.slice()},triangulate(e,t){let i=e.points;const n=e.holes,r=t.points,s=t.indices;if(i.length>=6){Gg(i,!1);const o=[];for(let h=0;h<n.length;h++){const u=n[h];Gg(u.points,!0),o.push(i.length/2),i=i.concat(u.points)}const a=gl(i,o,2);if(!a)return;const l=r.length/2;for(let h=0;h<a.length;h+=3)s.push(a[h]+l),s.push(a[h+1]+l),s.push(a[h+2]+l);for(let h=0;h<i.length;h++)r.push(i[h])}}},T3={build(e){const t=e.shape,i=t.x,n=t.y,r=t.width,s=t.height,o=e.points;o.length=0,r>=0&&s>=0&&o.push(i,n,i+r,n,i+r,n+s,i,n+s)},triangulate(e,t){const i=e.points,n=t.points;if(i.length===0)return;const r=n.length/2;n.push(i[0],i[1],i[2],i[3],i[6],i[7],i[4],i[5]),t.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},S3={build(e){Sl.build(e)},triangulate(e,t){Sl.triangulate(e,t)}};var Ge=(e=>(e.MITER="miter",e.BEVEL="bevel",e.ROUND="round",e))(Ge||{}),Rn=(e=>(e.BUTT="butt",e.ROUND="round",e.SQUARE="square",e))(Rn||{});const Wr={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(e,t=20){if(!this.adaptive||!e||isNaN(e))return t;let i=Math.ceil(e/this.maxLength);return i<this.minSegments?i=this.minSegments:i>this.maxSegments&&(i=this.maxSegments),i}};class $g{static curveTo(t,i,n,r,s,o){const a=o[o.length-2],h=o[o.length-1]-i,u=a-t,c=r-i,d=n-t,f=Math.abs(h*d-u*c);if(f<1e-8||s===0)return(o[o.length-2]!==t||o[o.length-1]!==i)&&o.push(t,i),null;const p=h*h+u*u,y=c*c+d*d,_=h*c+u*d,m=s*Math.sqrt(p)/f,g=s*Math.sqrt(y)/f,v=m*_/p,x=g*_/y,b=m*d+g*u,T=m*c+g*h,E=u*(g+v),w=h*(g+v),S=d*(m+x),A=c*(m+x),P=Math.atan2(w-T,E-b),k=Math.atan2(A-T,S-b);return{cx:b+t,cy:T+i,radius:s,startAngle:P,endAngle:k,anticlockwise:u*c>d*h}}static arc(t,i,n,r,s,o,a,l,h){const u=a-o,c=Wr._segmentsCount(Math.abs(u)*s,Math.ceil(Math.abs(u)/xl)*40),d=u/(c*2),f=d*2,p=Math.cos(d),y=Math.sin(d),_=c-1,m=_%1/_;for(let g=0;g<=_;++g){const v=g+m*g,x=d+o+f*v,b=Math.cos(x),T=-Math.sin(x);h.push((p*b+y*T)*s+n,(p*-T+y*b)*s+r)}}}class C3{constructor(){this.reset()}begin(t,i,n){this.reset(),this.style=t,this.start=i,this.attribStart=n}end(t,i){this.attribSize=i-this.attribStart,this.size=t-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class Jf{static curveLength(t,i,n,r,s,o,a,l){let u=0,c=0,d=0,f=0,p=0,y=0,_=0,m=0,g=0,v=0,x=0,b=t,T=i;for(let E=1;E<=10;++E)c=E/10,d=c*c,f=d*c,p=1-c,y=p*p,_=y*p,m=_*t+3*y*c*n+3*p*d*s+f*a,g=_*i+3*y*c*r+3*p*d*o+f*l,v=b-m,x=T-g,b=m,T=g,u+=Math.sqrt(v*v+x*x);return u}static curveTo(t,i,n,r,s,o,a){const l=a[a.length-2],h=a[a.length-1];a.length-=2;const u=Wr._segmentsCount(Jf.curveLength(l,h,t,i,n,r,s,o));let c=0,d=0,f=0,p=0,y=0;a.push(l,h);for(let _=1,m=0;_<=u;++_)m=_/u,c=1-m,d=c*c,f=d*c,p=m*m,y=p*m,a.push(f*l+3*d*m*t+3*c*p*n+y*s,f*h+3*d*m*i+3*c*p*r+y*o)}}function Hg(e,t,i,n,r,s,o,a){const l=e-i*r,h=t-n*r,u=e+i*s,c=t+n*s;let d,f;o?(d=n,f=-i):(d=-n,f=i);const p=l+d,y=h+f,_=u+d,m=c+f;return a.push(p,y,_,m),2}function yn(e,t,i,n,r,s,o,a){const l=i-e,h=n-t;let u=Math.atan2(l,h),c=Math.atan2(r-e,s-t);a&&u<c?u+=Math.PI*2:!a&&u>c&&(c+=Math.PI*2);let d=u;const f=c-u,p=Math.abs(f),y=Math.sqrt(l*l+h*h),_=(15*p*Math.sqrt(y)/Math.PI>>0)+1,m=f/_;if(d+=m,a){o.push(e,t,i,n);for(let g=1,v=d;g<_;g++,v+=m)o.push(e,t,e+Math.sin(v)*y,t+Math.cos(v)*y);o.push(e,t,r,s)}else{o.push(i,n,e,t);for(let g=1,v=d;g<_;g++,v+=m)o.push(e+Math.sin(v)*y,t+Math.cos(v)*y,e,t);o.push(r,s,e,t)}return _*2}function A3(e,t){const i=e.shape;let n=e.points||i.points.slice();const r=t.closePointEps;if(n.length===0)return;const s=e.lineStyle,o=new Y(n[0],n[1]),a=new Y(n[n.length-2],n[n.length-1]),l=i.type!==Ht.POLY||i.closeStroke,h=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(l){n=n.slice(),h&&(n.pop(),n.pop(),a.set(n[n.length-2],n[n.length-1]));const F=(o.x+a.x)*.5,O=(a.y+o.y)*.5;n.unshift(F,O),n.push(F,O)}const u=t.points,c=n.length/2;let d=n.length;const f=u.length/2,p=s.width/2,y=p*p,_=s.miterLimit*s.miterLimit;let m=n[0],g=n[1],v=n[2],x=n[3],b=0,T=0,E=-(g-x),w=m-v,S=0,A=0,P=Math.sqrt(E*E+w*w);E/=P,w/=P,E*=p,w*=p;const k=s.alignment,R=(1-k)*2,I=k*2;l||(s.cap===Rn.ROUND?d+=yn(m-E*(R-I)*.5,g-w*(R-I)*.5,m-E*R,g-w*R,m+E*I,g+w*I,u,!0)+2:s.cap===Rn.SQUARE&&(d+=Hg(m,g,E,w,R,I,!0,u))),u.push(m-E*R,g-w*R,m+E*I,g+w*I);for(let F=1;F<c-1;++F){m=n[(F-1)*2],g=n[(F-1)*2+1],v=n[F*2],x=n[F*2+1],b=n[(F+1)*2],T=n[(F+1)*2+1],E=-(g-x),w=m-v,P=Math.sqrt(E*E+w*w),E/=P,w/=P,E*=p,w*=p,S=-(x-T),A=v-b,P=Math.sqrt(S*S+A*A),S/=P,A/=P,S*=p,A*=p;const O=v-m,$=g-x,C=v-b,U=T-x,X=O*C+$*U,ot=$*C-U*O,rt=ot<0;if(Math.abs(ot)<.001*Math.abs(X)){u.push(v-E*R,x-w*R,v+E*I,x+w*I),X>=0&&(s.join===Ge.ROUND?d+=yn(v,x,v-E*R,x-w*R,v-S*R,x-A*R,u,!1)+4:d+=2,u.push(v-S*I,x-A*I,v+S*R,x+A*R));continue}const Ct=(-E+m)*(-w+x)-(-E+v)*(-w+g),ut=(-S+b)*(-A+x)-(-S+v)*(-A+T),_t=(O*ut-C*Ct)/ot,Yt=(U*Ct-$*ut)/ot,de=(_t-v)*(_t-v)+(Yt-x)*(Yt-x),zt=v+(_t-v)*R,gt=x+(Yt-x)*R,Mt=v-(_t-v)*I,Ot=x-(Yt-x)*I,ei=Math.min(O*O+$*$,C*C+U*U),ii=rt?R:I,Qr=ei+ii*ii*y,Mx=de<=Qr;let Ao=s.join;if(Ao===Ge.MITER&&de/y>_&&(Ao=Ge.BEVEL),Mx)switch(Ao){case Ge.MITER:{u.push(zt,gt,Mt,Ot);break}case Ge.BEVEL:{rt?u.push(zt,gt,v+E*I,x+w*I,zt,gt,v+S*I,x+A*I):u.push(v-E*R,x-w*R,Mt,Ot,v-S*R,x-A*R,Mt,Ot),d+=2;break}case Ge.ROUND:{rt?(u.push(zt,gt,v+E*I,x+w*I),d+=yn(v,x,v+E*I,x+w*I,v+S*I,x+A*I,u,!0)+4,u.push(zt,gt,v+S*I,x+A*I)):(u.push(v-E*R,x-w*R,Mt,Ot),d+=yn(v,x,v-E*R,x-w*R,v-S*R,x-A*R,u,!1)+4,u.push(v-S*R,x-A*R,Mt,Ot));break}}else{switch(u.push(v-E*R,x-w*R,v+E*I,x+w*I),Ao){case Ge.MITER:{rt?u.push(Mt,Ot,Mt,Ot):u.push(zt,gt,zt,gt),d+=2;break}case Ge.ROUND:{rt?d+=yn(v,x,v+E*I,x+w*I,v+S*I,x+A*I,u,!0)+2:d+=yn(v,x,v-E*R,x-w*R,v-S*R,x-A*R,u,!1)+2;break}}u.push(v-S*R,x-A*R,v+S*I,x+A*I),d+=2}}m=n[(c-2)*2],g=n[(c-2)*2+1],v=n[(c-1)*2],x=n[(c-1)*2+1],E=-(g-x),w=m-v,P=Math.sqrt(E*E+w*w),E/=P,w/=P,E*=p,w*=p,u.push(v-E*R,x-w*R,v+E*I,x+w*I),l||(s.cap===Rn.ROUND?d+=yn(v-E*(R-I)*.5,x-w*(R-I)*.5,v-E*R,x-w*R,v+E*I,x+w*I,u,!1)+2:s.cap===Rn.SQUARE&&(d+=Hg(v,x,E,w,R,I,!1,u)));const J=t.indices,et=Wr.epsilon*Wr.epsilon;for(let F=f;F<d+f-2;++F)m=u[F*2],g=u[F*2+1],v=u[(F+1)*2],x=u[(F+1)*2+1],b=u[(F+2)*2],T=u[(F+2)*2+1],!(Math.abs(m*(x-T)+v*(T-g)+b*(g-x))<et)&&J.push(F,F+1,F+2)}function P3(e,t){let i=0;const n=e.shape,r=e.points||n.points,s=n.type!==Ht.POLY||n.closeStroke;if(r.length===0)return;const o=t.points,a=t.indices,l=r.length/2,h=o.length/2;let u=h;for(o.push(r[0],r[1]),i=1;i<l;i++)o.push(r[i*2],r[i*2+1]),a.push(u,u+1),u++;s&&a.push(u,h)}function jg(e,t){e.lineStyle.native?P3(e,t):A3(e,t)}class tp{static curveLength(t,i,n,r,s,o){const a=t-2*n+s,l=i-2*r+o,h=2*n-2*t,u=2*r-2*i,c=4*(a*a+l*l),d=4*(a*h+l*u),f=h*h+u*u,p=2*Math.sqrt(c+d+f),y=Math.sqrt(c),_=2*c*y,m=2*Math.sqrt(f),g=d/y;return(_*p+y*d*(p-m)+(4*f*c-d*d)*Math.log((2*y+g+p)/(g+m)))/(4*_)}static curveTo(t,i,n,r,s){const o=s[s.length-2],a=s[s.length-1],l=Wr._segmentsCount(tp.curveLength(o,a,t,i,n,r));let h=0,u=0;for(let c=1;c<=l;++c){const d=c/l;h=o+(t-o)*d,u=a+(i-a)*d,s.push(h+(t+(n-t)*d-h)*d,u+(i+(r-i)*d-u)*d)}}}const fu={[Ht.POLY]:fx,[Ht.CIRC]:Sl,[Ht.ELIP]:Sl,[Ht.RECT]:T3,[Ht.RREC]:S3},Wg=[],ua=[];class Cl{constructor(t,i=null,n=null,r=null){this.points=[],this.holes=[],this.shape=t,this.lineStyle=n,this.fillStyle=i,this.matrix=r,this.type=t.type}clone(){return new Cl(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const ir=new Y,px=class extends v_{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new wl,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let e=0;e<this.drawCalls.length;e++)this.drawCalls[e].texArray.clear(),ua.push(this.drawCalls[e]);this.drawCalls.length=0;for(let e=0;e<this.batches.length;e++){const t=this.batches[e];t.reset(),Wg.push(t)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(e,t=null,i=null,n=null){const r=new Cl(e,t,i,n);return this.graphicsData.push(r),this.dirty++,this}drawHole(e,t=null){if(!this.graphicsData.length)return null;const i=new Cl(e,null,null,t),n=this.graphicsData[this.graphicsData.length-1];return i.lineStyle=n.lineStyle,n.holes.push(i),this.dirty++,this}destroy(){super.destroy();for(let e=0;e<this.graphicsData.length;++e)this.graphicsData[e].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(e){const t=this.graphicsData;for(let i=0;i<t.length;++i){const n=t[i];if(n.fillStyle.visible&&n.shape&&(n.matrix?n.matrix.applyInverse(e,ir):ir.copyFrom(e),n.shape.contains(ir.x,ir.y))){let r=!1;if(n.holes){for(let s=0;s<n.holes.length;s++)if(n.holes[s].shape.contains(ir.x,ir.y)){r=!0;break}}if(!r)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const e=this.uvs,t=this.graphicsData;let i=null,n=null;this.batches.length>0&&(i=this.batches[this.batches.length-1],n=i.style);for(let a=this.shapeIndex;a<t.length;a++){this.shapeIndex++;const l=t[a],h=l.fillStyle,u=l.lineStyle;fu[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(h.visible||u.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=d===0?h:u;if(!f.visible)continue;const p=f.texture.baseTexture,y=this.indices.length,_=this.points.length/2;p.wrapMode=sn.REPEAT,d===0?this.processFill(l):this.processLine(l);const m=this.points.length/2-_;m!==0&&(i&&!this._compareStyles(n,f)&&(i.end(y,_),i=null),i||(i=Wg.pop()||new C3,i.begin(f,y,_),this.batches.push(i),n=f),this.addUvs(this.points,e,f.texture,_,m,f.matrix))}}const r=this.indices.length,s=this.points.length/2;if(i&&i.end(r,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(e,t){return!(!e||!t||e.texture.baseTexture!==t.texture.baseTexture||e.color+e.alpha!==t.color+t.alpha||!!e.native!=!!t.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let e=0,t=this.graphicsData.length;e<t;e++){const i=this.graphicsData[e],n=i.fillStyle,r=i.lineStyle;if(n&&!n.texture.baseTexture.valid||r&&!r.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const e=this.batches;for(let t=0,i=e.length;t<i;t++){const n=e[t];for(let r=0;r<n.size;r++){const s=n.start+r;this.indicesUint16[s]=this.indicesUint16[s]-n.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const e=this.batches;for(let t=0;t<e.length;t++)if(e[t].style.native)return!1;return this.points.length<px.BATCHABLE_SIZE*2}buildDrawCalls(){let e=++tt._globalBatch;for(let u=0;u<this.drawCalls.length;u++)this.drawCalls[u].texArray.clear(),ua.push(this.drawCalls[u]);this.drawCalls.length=0;const t=this.colors,i=this.textureIds;let n=ua.pop();n||(n=new Kc,n.texArray=new Qc),n.texArray.count=0,n.start=0,n.size=0,n.type=ui.TRIANGLES;let r=0,s=null,o=0,a=!1,l=ui.TRIANGLES,h=0;this.drawCalls.push(n);for(let u=0;u<this.batches.length;u++){const c=this.batches[u],d=8,f=c.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?ui.LINES:ui.TRIANGLES,s=null,r=d,e++),s!==p&&(s=p,p._batchEnabled!==e&&(r===d&&(e++,r=0,n.size>0&&(n=ua.pop(),n||(n=new Kc,n.texArray=new Qc),this.drawCalls.push(n)),n.start=h,n.size=0,n.texArray.count=0,n.type=l),p.touched=1,p._batchEnabled=e,p._batchLocation=r,p.wrapMode=sn.REPEAT,n.texArray.elements[n.texArray.count++]=p,r++)),n.size+=c.size,h+=c.size,o=p._batchLocation,this.addColors(t,f.color,f.alpha,c.attribSize,c.attribStart),this.addTextureIds(i,o,c.attribSize,c.attribStart)}tt._globalBatch=e,this.packAttributes()}packAttributes(){const e=this.points,t=this.uvs,i=this.colors,n=this.textureIds,r=new ArrayBuffer(e.length*3*4),s=new Float32Array(r),o=new Uint32Array(r);let a=0;for(let l=0;l<e.length/2;l++)s[a++]=e[l*2],s[a++]=e[l*2+1],s[a++]=t[l*2],s[a++]=t[l*2+1],o[a++]=i[l],s[a++]=n[l];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)}processFill(e){e.holes.length?fx.triangulate(e,this):fu[e.type].triangulate(e,this)}processLine(e){jg(e,this);for(let t=0;t<e.holes.length;t++)jg(e.holes[t],this)}processHoles(e){for(let t=0;t<e.length;t++){const i=e[t];fu[i.type].build(i),i.matrix&&this.transformPoints(i.points,i.matrix)}}calculateBounds(){const e=this._bounds;e.clear(),e.addVertexData(this.points,0,this.points.length),e.pad(this.boundsPadding,this.boundsPadding)}transformPoints(e,t){for(let i=0;i<e.length/2;i++){const n=e[i*2],r=e[i*2+1];e[i*2]=t.a*n+t.c*r+t.tx,e[i*2+1]=t.b*n+t.d*r+t.ty}}addColors(e,t,i,n,r=0){const s=(t>>16)+(t&65280)+((t&255)<<16),o=Yf(s,i);e.length=Math.max(e.length,r+n);for(let a=0;a<n;a++)e[r+a]=o}addTextureIds(e,t,i,n=0){e.length=Math.max(e.length,n+i);for(let r=0;r<i;r++)e[n+r]=t}addUvs(e,t,i,n,r,s=null){let o=0;const a=t.length,l=i.frame;for(;o<r;){let u=e[(n+o)*2],c=e[(n+o)*2+1];if(s){const d=s.a*u+s.c*c+s.tx;c=s.b*u+s.d*c+s.ty,u=d}o++,t.push(u/l.width,c/l.height)}const h=i.baseTexture;(l.width<h.width||l.height<h.height)&&this.adjustUvs(t,i,a,r)}adjustUvs(e,t,i,n){const r=t.baseTexture,s=1e-6,o=i+n*2,a=t.frame,l=a.width/r.width,h=a.height/r.height;let u=a.x/a.width,c=a.y/a.height,d=Math.floor(e[i]+s),f=Math.floor(e[i+1]+s);for(let p=i+2;p<o;p+=2)d=Math.min(d,Math.floor(e[p]+s)),f=Math.min(f,Math.floor(e[p+1]+s));u-=d,c-=f;for(let p=i;p<o;p+=2)e[p]=(e[p]+u)*l,e[p+1]=(e[p+1]+c)*h}};let mx=px;mx.BATCHABLE_SIZE=100;class ch{constructor(){this.color=16777215,this.alpha=1,this.texture=j.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const t=new ch;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t}reset(){this.color=16777215,this.alpha=1,this.texture=j.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class ep extends ch{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=Rn.BUTT,this.join=Ge.MITER,this.miterLimit=10}clone(){const t=new ep;return t.color=this.color,t.alpha=this.alpha,t.texture=this.texture,t.matrix=this.matrix,t.visible=this.visible,t.width=this.width,t.alignment=this.alignment,t.native=this.native,t.cap=this.cap,t.join=this.join,t.miterLimit=this.miterLimit,t}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const I3=new Float32Array(3),pu={},Ba=class extends be{constructor(e=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new ch,this._lineStyle=new ep,this._matrix=null,this._holeMode=!1,this.state=Fi.for2d(),this._geometry=e||new mx,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=q.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Ba(this._geometry)}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(e){this._tint=e}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(e=null,t=0,i=1,n=.5,r=!1){return typeof e=="number"&&(e={width:e,color:t,alpha:i,alignment:n,native:r}),this.lineTextureStyle(e)}lineTextureStyle(e){e=Object.assign({width:0,texture:j.WHITE,color:e!=null&&e.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:Rn.BUTT,join:Ge.MITER,miterLimit:10},e),this.currentPath&&this.startPoly();const t=e.width>0&&e.alpha>0;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._lineStyle,{visible:t},e)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const e=this.currentPath.points,t=this.currentPath.points.length;t>2&&(this.drawShape(this.currentPath),this.currentPath=new Mr,this.currentPath.closeStroke=!1,this.currentPath.points.push(e[t-2],e[t-1]))}else this.currentPath=new Mr,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(e,t){return this.startPoly(),this.currentPath.points[0]=e,this.currentPath.points[1]=t,this}lineTo(e,t){this.currentPath||this.moveTo(0,0);const i=this.currentPath.points,n=i[i.length-2],r=i[i.length-1];return(n!==e||r!==t)&&i.push(e,t),this}_initCurve(e=0,t=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[e,t]):this.moveTo(e,t)}quadraticCurveTo(e,t,i,n){this._initCurve();const r=this.currentPath.points;return r.length===0&&this.moveTo(0,0),tp.curveTo(e,t,i,n,r),this}bezierCurveTo(e,t,i,n,r,s){return this._initCurve(),Jf.curveTo(e,t,i,n,r,s,this.currentPath.points),this}arcTo(e,t,i,n,r){this._initCurve(e,t);const s=this.currentPath.points,o=$g.curveTo(e,t,i,n,r,s);if(o){const{cx:a,cy:l,radius:h,startAngle:u,endAngle:c,anticlockwise:d}=o;this.arc(a,l,h,u,c,d)}return this}arc(e,t,i,n,r,s=!1){if(n===r)return this;if(!s&&r<=n?r+=xl:s&&n<=r&&(n+=xl),r-n===0)return this;const a=e+Math.cos(n)*i,l=t+Math.sin(n)*i,h=this._geometry.closePointEps;let u=this.currentPath?this.currentPath.points:null;if(u){const c=Math.abs(u[u.length-2]-a),d=Math.abs(u[u.length-1]-l);c<h&&d<h||u.push(a,l)}else this.moveTo(a,l),u=this.currentPath.points;return $g.arc(a,l,e,t,i,n,r,s,u),this}beginFill(e=0,t=1){return this.beginTextureFill({texture:j.WHITE,color:e,alpha:t})}beginTextureFill(e){e=Object.assign({texture:j.WHITE,color:16777215,alpha:1,matrix:null},e),this.currentPath&&this.startPoly();const t=e.alpha>0;return t?(e.matrix&&(e.matrix=e.matrix.clone(),e.matrix.invert()),Object.assign(this._fillStyle,{visible:t},e)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(e,t,i,n){return this.drawShape(new it(e,t,i,n))}drawRoundedRect(e,t,i,n,r){return this.drawShape(new ah(e,t,i,n,r))}drawCircle(e,t,i){return this.drawShape(new oh(e,t,i))}drawEllipse(e,t,i,n){return this.drawShape(new qf(e,t,i,n))}drawPolygon(...e){let t,i=!0;const n=e[0];n.points?(i=n.closeStroke,t=n.points):Array.isArray(e[0])?t=e[0]:t=e;const r=new Mr(t);return r.closeStroke=i,this.drawShape(r),this}drawShape(e){return this._holeMode?this._geometry.drawHole(e,this._matrix):this._geometry.drawShape(e,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const e=this._geometry.graphicsData;return e.length===1&&e[0].shape.type===Ht.RECT&&!e[0].matrix&&!e[0].holes.length&&!(e[0].lineStyle.visible&&e[0].lineStyle.width)}_render(e){this.finishPoly();const t=this._geometry;t.updateBatches(),t.batchable?(this.batchDirty!==t.batchDirty&&this._populateBatches(),this._renderBatched(e)):(e.batch.flush(),this._renderDirect(e))}_populateBatches(){const e=this._geometry,t=this.blendMode,i=e.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=e.batchDirty,this.batches.length=i,this.vertexData=new Float32Array(e.points);for(let n=0;n<i;n++){const r=e.batches[n],s=r.style.color,o=new Float32Array(this.vertexData.buffer,r.attribStart*4*2,r.attribSize*2),a=new Float32Array(e.uvsFloat32.buffer,r.attribStart*4*2,r.attribSize*2),l=new Uint16Array(e.indicesUint16.buffer,r.start*2,r.size),h={vertexData:o,blendMode:t,indices:l,uvs:a,_batchRGB:co(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[n]=h}}_renderBatched(e){if(this.batches.length){e.batch.setObjectRenderer(e.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let t=0,i=this.batches.length;t<i;t++){const n=this.batches[t];n.worldAlpha=this.worldAlpha*n.alpha,e.plugins[this.pluginName].render(n)}}}_renderDirect(e){const t=this._resolveDirectShader(e),i=this._geometry,n=this.tint,r=this.worldAlpha,s=t.uniforms,o=i.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(n>>16&255)/255*r,s.tint[1]=(n>>8&255)/255*r,s.tint[2]=(n&255)/255*r,s.tint[3]=r,e.shader.bind(t),e.geometry.bind(i,t),e.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(e,i.drawCalls[a])}_renderDrawCallDirect(e,t){const{texArray:i,type:n,size:r,start:s}=t,o=i.count;for(let a=0;a<o;a++)e.texture.bind(i.elements[a],a);e.geometry.draw(n,r,s)}_resolveDirectShader(e){let t=this.shader;const i=this.pluginName;if(!t){if(!pu[i]){const{maxTextures:n}=e.plugins[i],r=new Int32Array(n);for(let a=0;a<n;a++)r[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new yt,default:Ze.from({uSamplers:r},!0)},o=e.plugins[i]._shader.program;pu[i]=new mi(o,s)}t=pu[i]}return t}_calculateBounds(){this.finishPoly();const e=this._geometry;if(!e.graphicsData.length)return;const{minX:t,minY:i,maxX:n,maxY:r}=e.bounds;this._bounds.addFrame(this.transform,t,i,n,r)}containsPoint(e){return this.worldTransform.applyInverse(e,Ba._TEMP_POINT),this._geometry.containsPoint(Ba._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const e=co(this.tint,I3);for(let t=0;t<this.batches.length;t++){const i=this.batches[t],n=i._batchRGB,r=e[0]*n[0]*255,s=e[1]*n[1]*255,o=e[2]*n[2]*255,a=(r<<16)+(s<<8)+(o|0);i._tintRGB=(a>>16)+(a&65280)+((a&255)<<16)}}}calculateVertices(){const e=this.transform._worldID;if(this._transformID===e)return;this._transformID=e;const t=this.transform.worldTransform,i=t.a,n=t.b,r=t.c,s=t.d,o=t.tx,a=t.ty,l=this._geometry.points,h=this.vertexData;let u=0;for(let c=0;c<l.length;c+=2){const d=l[c],f=l[c+1];h[u++]=i*d+r*f+o,h[u++]=s*f+n*d+a}}closePath(){const e=this.currentPath;return e&&(e.closeStroke=!0,this.finishPoly()),this}setMatrix(e){return this._matrix=e,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(e){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(e)}};let Xr=Ba;Xr.curves=Wr;Xr._TEMP_POINT=new Y;class R3{constructor(t,i){this.uvBuffer=t,this.uvMatrix=i,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(t){if(!t&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const i=this.uvBuffer.data;(!this.data||this.data.length!==i.length)&&(this.data=new Float32Array(i.length)),this.uvMatrix.multiplyUvs(i,this.data),this._updateID++}}const mu=new Y,Xg=new Mr,gx=class extends be{constructor(e,t,i,n=ui.TRIANGLES){super(),this.geometry=e,this.shader=t,this.state=i||Fi.for2d(),this.drawMode=n,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=z.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(e){this._geometry!==e&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=e,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(e){this.shader=e}get material(){return this.shader}set blendMode(e){this.state.blendMode=e}get blendMode(){return this.state.blendMode}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(e){this.shader.tint=e}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(e){this.shader.texture=e}_render(e){const t=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===ui.TRIANGLES&&t.length<gx.BATCHABLE_SIZE*2?this._renderToBatch(e):this._renderDefault(e)}_renderDefault(e){const t=this.shader;t.alpha=this.worldAlpha,t.update&&t.update(),e.batch.flush(),t.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),e.shader.bind(t),e.state.set(this.state),e.geometry.bind(this.geometry,t),e.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(e){const t=this.geometry,i=this.shader;i.uvMatrix&&(i.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=t.indexBuffer.data,this._tintRGB=i._tintRGB,this._texture=i.texture;const n=this.material.pluginName;e.batch.setObjectRenderer(e.plugins[n]),e.plugins[n].render(this)}calculateVertices(){const t=this.geometry.buffers[0],i=t.data,n=t._updateID;if(n===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==i.length&&(this.vertexData=new Float32Array(i.length));const r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,l=r.d,h=r.tx,u=r.ty,c=this.vertexData;for(let d=0;d<c.length/2;d++){const f=i[d*2],p=i[d*2+1];c[d*2]=s*f+a*p+h,c[d*2+1]=o*f+l*p+u}if(this._roundPixels){const d=z.RESOLUTION;for(let f=0;f<c.length;++f)c[f]=Math.round(c[f]*d)/d}this.vertexDirty=n}calculateUvs(){const e=this.geometry.buffers[1],t=this.shader;t.uvMatrix.isSimple?this.uvs=e.data:(this.batchUvs||(this.batchUvs=new R3(e,t.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(e){if(!this.getBounds().contains(e.x,e.y))return!1;this.worldTransform.applyInverse(e,mu);const t=this.geometry.getBuffer("aVertexPosition").data,i=Xg.points,n=this.geometry.getIndex().data,r=n.length,s=this.drawMode===4?3:1;for(let o=0;o+2<r;o+=s){const a=n[o]*2,l=n[o+1]*2,h=n[o+2]*2;if(i[0]=t[a],i[1]=t[a+1],i[2]=t[l],i[3]=t[l+1],i[4]=t[h],i[5]=t[h+1],Xg.contains(mu.x,mu.y))return!0}return!1}destroy(e){super.destroy(e),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let ud=gx;ud.BATCHABLE_SIZE=100;class M3 extends un{constructor(t,i,n){super();const r=new It(t),s=new It(i,!0),o=new It(n,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,V.FLOAT).addAttribute("aTextureCoord",s,2,!1,V.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var k3=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,O3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class Vg extends mi{constructor(t,i){const n={uSampler:t,alpha:1,uTextureMatrix:yt.IDENTITY,uColor:new Float32Array([1,1,1,1])};i=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},i),i.uniforms&&Object.assign(n,i.uniforms),super(i.program||Xe.from(O3,k3),n),this._colorDirty=!1,this.uvMatrix=new B_(t),this.batchable=i.program===void 0,this.pluginName=i.pluginName,this.tint=i.tint,this.alpha=i.alpha}get texture(){return this.uniforms.uSampler}set texture(t){this.uniforms.uSampler!==t&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!t.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=t,this.uvMatrix.texture=t)}set alpha(t){t!==this._alpha&&(this._alpha=t,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(t){t!==this._tint&&(this._tint=t,this._tintRGB=(t>>16)+(t&65280)+((t&255)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const t=this.texture.baseTexture;f_(this._tint,this._alpha,this.uniforms.uColor,t.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class Yg{constructor(t,i,n){this.geometry=new un,this.indexBuffer=null,this.size=n,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<t.length;++r){let s=t[r];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||V.FLOAT,offset:s.offset},i[r]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const t=this.geometry;let i=0;this.indexBuffer=new It(Ek(this.size),!0,!0),t.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=i,i+=a.size,this.dynamicStride+=a.size}const n=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(n),this.dynamicDataUint32=new Uint32Array(n),this.dynamicBuffer=new It(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new It(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];t.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===V.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];t.addAttribute(a.attributeName,this.staticBuffer,0,a.type===V.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(t,i,n){for(let r=0;r<this.dynamicProperties.length;r++){const s=this.dynamicProperties[r];s.uploadFunction(t,i,n,s.type===V.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(t,i,n){for(let r=0;r<this.staticProperties.length;r++){const s=this.staticProperties[r];s.uploadFunction(t,i,n,s.type===V.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var D3=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,B3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class vx extends lh{constructor(t){super(t),this.shader=null,this.properties=null,this.tempMatrix=new yt,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:V.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=mi.from(B3,D3,{}),this.state=Fi.for2d()}render(t){const i=t.children,n=t._maxSize,r=t._batchSize,s=this.renderer;let o=i.length;if(o===0)return;o>n&&!t.autoResize&&(o=n);let a=t._buffers;a||(a=t._buffers=this.generateBuffers(t));const l=i[0]._texture.baseTexture,h=l.alphaMode>0;this.state.blendMode=d_(t.blendMode,h),s.state.set(this.state);const u=s.gl,c=t.worldTransform.copyTo(this.tempMatrix);c.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=c.toArray(!0),this.shader.uniforms.uColor=bk(t.tintRgb,t.worldAlpha,this.shader.uniforms.uColor,h),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=r,p+=1){let y=o-f;y>r&&(y=r),p>=a.length&&a.push(this._generateOneMoreBuffer(t));const _=a[p];_.uploadDynamic(i,f,y);const m=t._bufferUpdateIDs[p]||0;d=d||_._updateID<m,d&&(_._updateID=t._updateID,_.uploadStatic(i,f,y)),s.geometry.bind(_.geometry),u.drawElements(u.TRIANGLES,y*6,u.UNSIGNED_SHORT,0)}}generateBuffers(t){const i=[],n=t._maxSize,r=t._batchSize,s=t._properties;for(let o=0;o<n;o+=r)i.push(new Yg(this.properties,s,r));return i}_generateOneMoreBuffer(t){const i=t._batchSize,n=t._properties;return new Yg(this.properties,n,i)}uploadVertices(t,i,n,r,s,o){let a=0,l=0,h=0,u=0;for(let c=0;c<n;++c){const d=t[i+c],f=d._texture,p=d.scale.x,y=d.scale.y,_=f.trim,m=f.orig;_?(l=_.x-d.anchor.x*m.width,a=l+_.width,u=_.y-d.anchor.y*m.height,h=u+_.height):(a=m.width*(1-d.anchor.x),l=m.width*-d.anchor.x,h=m.height*(1-d.anchor.y),u=m.height*-d.anchor.y),r[o]=l*p,r[o+1]=u*y,r[o+s]=a*p,r[o+s+1]=u*y,r[o+s*2]=a*p,r[o+s*2+1]=h*y,r[o+s*3]=l*p,r[o+s*3+1]=h*y,o+=s*4}}uploadPosition(t,i,n,r,s,o){for(let a=0;a<n;a++){const l=t[i+a].position;r[o]=l.x,r[o+1]=l.y,r[o+s]=l.x,r[o+s+1]=l.y,r[o+s*2]=l.x,r[o+s*2+1]=l.y,r[o+s*3]=l.x,r[o+s*3+1]=l.y,o+=s*4}}uploadRotation(t,i,n,r,s,o){for(let a=0;a<n;a++){const l=t[i+a].rotation;r[o]=l,r[o+s]=l,r[o+s*2]=l,r[o+s*3]=l,o+=s*4}}uploadUvs(t,i,n,r,s,o){for(let a=0;a<n;++a){const l=t[i+a]._texture._uvs;l?(r[o]=l.x0,r[o+1]=l.y0,r[o+s]=l.x1,r[o+s+1]=l.y1,r[o+s*2]=l.x2,r[o+s*2+1]=l.y2,r[o+s*3]=l.x3,r[o+s*3+1]=l.y3,o+=s*4):(r[o]=0,r[o+1]=0,r[o+s]=0,r[o+s+1]=0,r[o+s*2]=0,r[o+s*2+1]=0,r[o+s*3]=0,r[o+s*3+1]=0,o+=s*4)}}uploadTint(t,i,n,r,s,o){for(let a=0;a<n;++a){const l=t[i+a],h=l._texture.baseTexture.alphaMode>0,u=l.alpha,c=u<1&&h?Yf(l._tintRGB,u):l._tintRGB+(u*255<<24);r[o]=c,r[o+s]=c,r[o+s*2]=c,r[o+s*3]=c,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}vx.extension={name:"particle",type:L.RendererPlugin};W.add(vx);var dh=(e=>(e[e.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",e[e.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",e))(dh||{});const ca={willReadFrequently:!0},H=class{static get experimentalLetterSpacingSupported(){let e=H._experimentalLetterSpacingSupported;if(e!==void 0){const t=z.ADAPTER.getCanvasRenderingContext2D().prototype;e=H._experimentalLetterSpacingSupported="letterSpacing"in t||"textLetterSpacing"in t}return e}constructor(e,t,i,n,r,s,o,a,l){this.text=e,this.style=t,this.width=i,this.height=n,this.lines=r,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(e,t,i,n=H._canvas){i=i??t.wordWrap;const r=t.toFontString(),s=H.measureFont(r);s.fontSize===0&&(s.fontSize=t.fontSize,s.ascent=t.fontSize);const o=n.getContext("2d",ca);o.font=r;const l=(i?H.wordWrap(e,t,n):e).split(/(?:\r\n|\r|\n)/),h=new Array(l.length);let u=0;for(let p=0;p<l.length;p++){const y=H._measureText(l[p],t.letterSpacing,o);h[p]=y,u=Math.max(u,y)}let c=u+t.strokeThickness;t.dropShadow&&(c+=t.dropShadowDistance);const d=t.lineHeight||s.fontSize+t.strokeThickness;let f=Math.max(d,s.fontSize+t.strokeThickness*2)+(l.length-1)*(d+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new H(e,t,c,f,l,h,d+t.leading,u,s)}static _measureText(e,t,i){let n=!1;H.experimentalLetterSpacingSupported&&(H.experimentalLetterSpacing?(i.letterSpacing=`${t}px`,i.textLetterSpacing=`${t}px`,n=!0):(i.letterSpacing="0px",i.textLetterSpacing="0px"));let r=i.measureText(e).width;return r>0&&(n?r-=t:r+=(H.graphemeSegmenter(e).length-1)*t),r}static wordWrap(e,t,i=H._canvas){const n=i.getContext("2d",ca);let r=0,s="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:h}=t,u=H.collapseSpaces(h),c=H.collapseNewlines(h);let d=!u;const f=t.wordWrapWidth+l,p=H.tokenize(e);for(let y=0;y<p.length;y++){let _=p[y];if(H.isNewline(_)){if(!c){o+=H.addLine(s),d=!u,s="",r=0;continue}_=" "}if(u){const g=H.isBreakingSpace(_),v=H.isBreakingSpace(s[s.length-1]);if(g&&v)continue}const m=H.getFromCache(_,l,a,n);if(m>f)if(s!==""&&(o+=H.addLine(s),s="",r=0),H.canBreakWords(_,t.breakWords)){const g=H.wordWrapSplit(_);for(let v=0;v<g.length;v++){let x=g[v],b=x,T=1;for(;g[v+T];){const w=g[v+T];if(!H.canBreakChars(b,w,_,v,t.breakWords))x+=w;else break;b=w,T++}v+=T-1;const E=H.getFromCache(x,l,a,n);E+r>f&&(o+=H.addLine(s),d=!1,s="",r=0),s+=x,r+=E}}else{s.length>0&&(o+=H.addLine(s),s="",r=0);const g=y===p.length-1;o+=H.addLine(_,!g),d=!1,s="",r=0}else m+r>f&&(d=!1,o+=H.addLine(s),s="",r=0),(s.length>0||!H.isBreakingSpace(_)||d)&&(s+=_,r+=m)}return o+=H.addLine(s,!1),o}static addLine(e,t=!0){return e=H.trimRight(e),e=t?`${e}
`:e,e}static getFromCache(e,t,i,n){let r=i[e];return typeof r!="number"&&(r=H._measureText(e,t,n)+t,i[e]=r),r}static collapseSpaces(e){return e==="normal"||e==="pre-line"}static collapseNewlines(e){return e==="normal"}static trimRight(e){if(typeof e!="string")return"";for(let t=e.length-1;t>=0;t--){const i=e[t];if(!H.isBreakingSpace(i))break;e=e.slice(0,-1)}return e}static isNewline(e){return typeof e!="string"?!1:H._newlines.includes(e.charCodeAt(0))}static isBreakingSpace(e,t){return typeof e!="string"?!1:H._breakingSpaces.includes(e.charCodeAt(0))}static tokenize(e){const t=[];let i="";if(typeof e!="string")return t;for(let n=0;n<e.length;n++){const r=e[n],s=e[n+1];if(H.isBreakingSpace(r,s)||H.isNewline(r)){i!==""&&(t.push(i),i=""),t.push(r);continue}i+=r}return i!==""&&t.push(i),t}static canBreakWords(e,t){return t}static canBreakChars(e,t,i,n,r){return!0}static wordWrapSplit(e){return H.graphemeSegmenter(e)}static measureFont(e){if(H._fonts[e])return H._fonts[e];const t={ascent:0,descent:0,fontSize:0},i=H._canvas,n=H._context;n.font=e;const r=H.METRICS_STRING+H.BASELINE_SYMBOL,s=Math.ceil(n.measureText(r).width);let o=Math.ceil(n.measureText(H.BASELINE_SYMBOL).width);const a=Math.ceil(H.HEIGHT_MULTIPLIER*o);if(o=o*H.BASELINE_MULTIPLIER|0,s===0||a===0)return H._fonts[e]=t,t;i.width=s,i.height=a,n.fillStyle="#f00",n.fillRect(0,0,s,a),n.font=e,n.textBaseline="alphabetic",n.fillStyle="#000",n.fillText(r,0,o);const l=n.getImageData(0,0,s,a).data,h=l.length,u=s*4;let c=0,d=0,f=!1;for(c=0;c<o;++c){for(let p=0;p<u;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d+=u;else break}for(t.ascent=o-c,d=h-u,f=!1,c=a;c>o;--c){for(let p=0;p<u;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d-=u;else break}return t.descent=c-o,t.fontSize=t.ascent+t.descent,H._fonts[e]=t,t}static clearMetrics(e=""){e?delete H._fonts[e]:H._fonts={}}static get _canvas(){if(!H.__canvas){let e;try{const t=new OffscreenCanvas(0,0),i=t.getContext("2d",ca);if(i!=null&&i.measureText)return H.__canvas=t,t;e=z.ADAPTER.createCanvas()}catch{e=z.ADAPTER.createCanvas()}e.width=e.height=10,H.__canvas=e}return H.__canvas}static get _context(){return H.__context||(H.__context=H._canvas.getContext("2d",ca)),H.__context}};let $t=H;$t.METRICS_STRING="|ÉqÅ";$t.BASELINE_SYMBOL="M";$t.BASELINE_MULTIPLIER=1.4;$t.HEIGHT_MULTIPLIER=2;$t.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const e=new Intl.Segmenter;return t=>[...e.segment(t)].map(i=>i.segment)}return e=>[...e]})();$t.experimentalLetterSpacing=!1;$t._fonts={};$t._newlines=[10,13];$t._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const N3=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],Ss=class{constructor(e){this.styleID=0,this.reset(),vu(this,e,e)}clone(){const e={};return vu(e,this,Ss.defaultStyle),new Ss(e)}reset(){vu(this,Ss.defaultStyle,Ss.defaultStyle)}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(e){this._breakWords!==e&&(this._breakWords=e,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(e){this._dropShadow!==e&&(this._dropShadow=e,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(e){this._dropShadowAlpha!==e&&(this._dropShadowAlpha=e,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(e){this._dropShadowAngle!==e&&(this._dropShadowAngle=e,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(e){this._dropShadowBlur!==e&&(this._dropShadowBlur=e,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(e){const t=gu(e);this._dropShadowColor!==t&&(this._dropShadowColor=t,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(e){this._dropShadowDistance!==e&&(this._dropShadowDistance=e,this.styleID++)}get fill(){return this._fill}set fill(e){const t=gu(e);this._fill!==t&&(this._fill=t,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(e){this._fillGradientType!==e&&(this._fillGradientType=e,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(e){L3(this._fillGradientStops,e)||(this._fillGradientStops=e,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(e){this.fontFamily!==e&&(this._fontFamily=e,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(e){this._fontStyle!==e&&(this._fontStyle=e,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(e){this._fontVariant!==e&&(this._fontVariant=e,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(e){this._fontWeight!==e&&(this._fontWeight=e,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(e){this._lineHeight!==e&&(this._lineHeight=e,this.styleID++)}get leading(){return this._leading}set leading(e){this._leading!==e&&(this._leading=e,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(e){this._lineJoin!==e&&(this._lineJoin=e,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(e){this._miterLimit!==e&&(this._miterLimit=e,this.styleID++)}get padding(){return this._padding}set padding(e){this._padding!==e&&(this._padding=e,this.styleID++)}get stroke(){return this._stroke}set stroke(e){const t=gu(e);this._stroke!==t&&(this._stroke=t,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(e){this._strokeThickness!==e&&(this._strokeThickness=e,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(e){this._textBaseline!==e&&(this._textBaseline=e,this.styleID++)}get trim(){return this._trim}set trim(e){this._trim!==e&&(this._trim=e,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(e){this._whiteSpace!==e&&(this._whiteSpace=e,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(e){this._wordWrap!==e&&(this._wordWrap=e,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(e){this._wordWrapWidth!==e&&(this._wordWrapWidth=e,this.styleID++)}toFontString(){const e=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let t=this.fontFamily;Array.isArray(this.fontFamily)||(t=this.fontFamily.split(","));for(let i=t.length-1;i>=0;i--){let n=t[i].trim();!/([\"\'])[^\'\"]+\1/.test(n)&&!N3.includes(n)&&(n=`"${n}"`),t[i]=n}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${e} ${t.join(",")}`}};let Wn=Ss;Wn.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:dh.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function qg(e){return typeof e=="number"?u_(e):(typeof e=="string"&&e.startsWith("0x")&&(e=e.replace("0x","#")),e)}function gu(e){if(Array.isArray(e)){for(let t=0;t<e.length;++t)e[t]=qg(e[t]);return e}else return qg(e)}function L3(e,t){if(!Array.isArray(e)||!Array.isArray(t)||e.length!==t.length)return!1;for(let i=0;i<e.length;++i)if(e[i]!==t[i])return!1;return!0}function vu(e,t,i){for(const n in i)Array.isArray(t[n])?e[n]=t[n].slice():e[n]=t[n]}const F3={texture:!0,children:!1,baseTexture:!0},cd=class extends So{constructor(e,t,i){let n=!1;i||(i=z.ADAPTER.createCanvas(),n=!0),i.width=3,i.height=3;const r=j.from(i);r.orig=new it,r.trim=new it,super(r),this._ownCanvas=n,this.canvas=i,this.context=i.getContext("2d",{willReadFrequently:!0}),this._resolution=cd.defaultResolution??z.RESOLUTION,this._autoResolution=cd.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=e,this.style=t,this.localStyleID=-1}static get experimentalLetterSpacing(){return $t.experimentalLetterSpacing}static set experimentalLetterSpacing(e){lt("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),$t.experimentalLetterSpacing=e}updateText(e){const t=this._style;if(this.localStyleID!==t.styleID&&(this.dirty=!0,this.localStyleID=t.styleID),!this.dirty&&e)return;this._font=this._style.toFontString();const i=this.context,n=$t.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),r=n.width,s=n.height,o=n.lines,a=n.lineHeight,l=n.lineWidths,h=n.maxLineWidth,u=n.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,r)+t.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+t.padding*2)*this._resolution),i.scale(this._resolution,this._resolution),i.clearRect(0,0,this.canvas.width,this.canvas.height),i.font=this._font,i.lineWidth=t.strokeThickness,i.textBaseline=t.textBaseline,i.lineJoin=t.lineJoin,i.miterLimit=t.miterLimit;let c,d;const f=t.dropShadow?2:1;for(let p=0;p<f;++p){const y=t.dropShadow&&p===0,_=y?Math.ceil(Math.max(1,s)+t.padding*2):0,m=_*this._resolution;if(y){i.fillStyle="black",i.strokeStyle="black";const v=t.dropShadowColor,x=co(typeof v=="number"?v:Vf(v)),b=t.dropShadowBlur*this._resolution,T=t.dropShadowDistance*this._resolution;i.shadowColor=`rgba(${x[0]*255},${x[1]*255},${x[2]*255},${t.dropShadowAlpha})`,i.shadowBlur=b,i.shadowOffsetX=Math.cos(t.dropShadowAngle)*T,i.shadowOffsetY=Math.sin(t.dropShadowAngle)*T+m}else i.fillStyle=this._generateFillStyle(t,o,n),i.strokeStyle=t.stroke,i.shadowColor="black",i.shadowBlur=0,i.shadowOffsetX=0,i.shadowOffsetY=0;let g=(a-u.fontSize)/2;a-u.fontSize<0&&(g=0);for(let v=0;v<o.length;v++)c=t.strokeThickness/2,d=t.strokeThickness/2+v*a+u.ascent+g,t.align==="right"?c+=h-l[v]:t.align==="center"&&(c+=(h-l[v])/2),t.stroke&&t.strokeThickness&&this.drawLetterSpacing(o[v],c+t.padding,d+t.padding-_,!0),t.fill&&this.drawLetterSpacing(o[v],c+t.padding,d+t.padding-_)}this.updateTexture()}drawLetterSpacing(e,t,i,n=!1){const s=this._style.letterSpacing;let o=!1;if($t.experimentalLetterSpacingSupported&&($t.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){n?this.context.strokeText(e,t,i):this.context.fillText(e,t,i);return}let a=t;const l=$t.graphemeSegmenter(e);let h=this.context.measureText(e).width,u=0;for(let c=0;c<l.length;++c){const d=l[c];n?this.context.strokeText(d,a,i):this.context.fillText(d,a,i);let f="";for(let p=c+1;p<l.length;++p)f+=l[p];u=this.context.measureText(f).width,a+=h-u+s,h=u}}updateTexture(){const e=this.canvas;if(this._style.trim){const s=Ck(e);s.data&&(e.width=s.width,e.height=s.height,this.context.putImageData(s.data,0,0))}const t=this._texture,i=this._style,n=i.trim?0:i.padding,r=t.baseTexture;t.trim.width=t._frame.width=e.width/this._resolution,t.trim.height=t._frame.height=e.height/this._resolution,t.trim.x=-n,t.trim.y=-n,t.orig.width=t._frame.width-n*2,t.orig.height=t._frame.height-n*2,this._onTextureUpdate(),r.setRealSize(e.width,e.height,this._resolution),t.updateUvs(),this.dirty=!1}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0),this.updateText(!0),super._render(e)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(e,t){return this.updateText(!0),this._textureID===-1&&(e=!1),super.getBounds(e,t)}getLocalBounds(e){return this.updateText(!0),super.getLocalBounds.call(this,e)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(e,t,i){const n=e.fill;if(Array.isArray(n)){if(n.length===1)return n[0]}else return n;let r;const s=e.dropShadow?e.dropShadowDistance:0,o=e.padding||0,a=this.canvas.width/this._resolution-s-o*2,l=this.canvas.height/this._resolution-s-o*2,h=n.slice(),u=e.fillGradientStops.slice();if(!u.length){const c=h.length+1;for(let d=1;d<c;++d)u.push(d/c)}if(h.unshift(n[0]),u.unshift(0),h.push(n[n.length-1]),u.push(1),e.fillGradientType===dh.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,o,a/2,l+o);const c=i.fontProperties.fontSize+e.strokeThickness;for(let d=0;d<t.length;d++){const f=i.lineHeight*(d-1)+c,p=i.lineHeight*d;let y=p;d>0&&f>p&&(y=(p+f)/2);const _=p+c,m=i.lineHeight*(d+1);let g=_;d+1<t.length&&m<_&&(g=(_+m)/2);const v=(g-y)/l;for(let x=0;x<h.length;x++){let b=0;typeof u[x]=="number"?b=u[x]:b=x/h.length;let T=Math.min(1,Math.max(0,y/l+b*v));T=Number(T.toFixed(5)),r.addColorStop(T,h[x])}}}else{r=this.context.createLinearGradient(o,l/2,a+o,l/2);const c=h.length+1;let d=1;for(let f=0;f<h.length;f++){let p;typeof u[f]=="number"?p=u[f]:p=d/c,r.addColorStop(p,h[f]),d++}}return r}destroy(e){typeof e=="boolean"&&(e={children:e}),e=Object.assign({},F3,e),super.destroy(e),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(e){this.updateText(!0);const t=_r(this.scale.x)||1;this.scale.x=t*e/this._texture.orig.width,this._width=e}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(e){this.updateText(!0);const t=_r(this.scale.y)||1;this.scale.y=t*e/this._texture.orig.height,this._height=e}get style(){return this._style}set style(e){e=e||{},e instanceof Wn?this._style=e:this._style=new Wn(e),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}};let fh=cd;fh.defaultAutoResolution=!0;class U3{constructor(t){this.maxItemsPerFrame=t,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function z3(e,t){var n;let i=!1;if((n=e==null?void 0:e._textures)!=null&&n.length){for(let r=0;r<e._textures.length;r++)if(e._textures[r]instanceof j){const s=e._textures[r].baseTexture;t.includes(s)||(t.push(s),i=!0)}}return i}function G3(e,t){if(e.baseTexture instanceof tt){const i=e.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function $3(e,t){if(e._texture&&e._texture instanceof j){const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function H3(e,t){return t instanceof fh?(t.updateText(!0),!0):!1}function j3(e,t){if(t instanceof Wn){const i=t.toFontString();return $t.measureFont(i),!0}return!1}function W3(e,t){if(e instanceof fh){t.includes(e.style)||t.push(e.style),t.includes(e)||t.push(e);const i=e._texture.baseTexture;return t.includes(i)||t.push(i),!0}return!1}function X3(e,t){return e instanceof Wn?(t.includes(e)||t.push(e),!0):!1}const yx=class{constructor(e){this.limiter=new U3(yx.uploadsPerFrame),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(W3),this.registerFindHook(X3),this.registerFindHook(z3),this.registerFindHook(G3),this.registerFindHook($3),this.registerUploadHook(H3),this.registerUploadHook(j3)}upload(e){return new Promise(t=>{e&&this.add(e),this.queue.length?(this.completes.push(t),this.ticking||(this.ticking=!0,te.system.addOnce(this.tick,this,Hr.UTILITY))):t()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const e=this.queue[0];let t=!1;if(e&&!e._destroyed){for(let i=0,n=this.uploadHooks.length;i<n;i++)if(this.uploadHooks[i](this.uploadHookHelper,e)){this.queue.shift(),t=!0;break}}t||this.queue.shift()}if(this.queue.length)te.system.addOnce(this.tick,this,Hr.UTILITY);else{this.ticking=!1;const e=this.completes.slice(0);this.completes.length=0;for(let t=0,i=e.length;t<i;t++)e[t]()}}registerFindHook(e){return e&&this.addHooks.push(e),this}registerUploadHook(e){return e&&this.uploadHooks.push(e),this}add(e){for(let t=0,i=this.addHooks.length;t<i&&!this.addHooks[t](e,this.queue);t++);if(e instanceof be)for(let t=e.children.length-1;t>=0;t--)this.add(e.children[t]);return this}destroy(){this.ticking&&te.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Al=yx;Al.uploadsPerFrame=4;Object.defineProperties(z,{UPLOADS_PER_FRAME:{get(){return Al.uploadsPerFrame},set(e){lt("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Al.uploadsPerFrame=e}}});function _x(e,t){return t instanceof tt?(t._glTextures[e.CONTEXT_UID]||e.texture.bind(t),!0):!1}function V3(e,t){if(!(t instanceof Xr))return!1;const{geometry:i}=t;t.finishPoly(),i.updateBatches();const{batches:n}=i;for(let r=0;r<n.length;r++){const{texture:s}=n[r].style;s&&_x(e,s.baseTexture)}return i.batchable||e.geometry.bind(i,t._resolveDirectShader(e)),!0}function Y3(e,t){return e instanceof Xr?(t.push(e),!0):!1}class xx extends Al{constructor(t){super(t),this.uploadHookHelper=this.renderer,this.registerFindHook(Y3),this.registerUploadHook(_x),this.registerUploadHook(V3)}}xx.extension={name:"prepare",type:L.RendererSystem};W.add(xx);var q3=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,K3=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Z3=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,Kg=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,Q3=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const da=new yt;class wx extends lh{constructor(t){super(t),t.runners.contextChange.add(this),this.quad=new M_,this.state=Fi.for2d()}contextChange(){const t=this.renderer,i={globals:t.globalUniforms};this.simpleShader=mi.from(Kg,Q3,i),this.shader=t.context.webGLVersion>1?mi.from(K3,q3,i):mi.from(Kg,Z3,i)}render(t){const i=this.renderer,n=this.quad;let r=n.vertices;r[0]=r[6]=t._width*-t.anchor.x,r[1]=r[3]=t._height*-t.anchor.y,r[2]=r[4]=t._width*(1-t.anchor.x),r[5]=r[7]=t._height*(1-t.anchor.y);const s=t.uvRespectAnchor?t.anchor.x:0,o=t.uvRespectAnchor?t.anchor.y:0;r=n.uvs,r[0]=r[6]=-s,r[1]=r[3]=-o,r[2]=r[4]=1-s,r[5]=r[7]=1-o,n.invalidate();const a=t._texture,l=a.baseTexture,h=l.alphaMode>0,u=t.tileTransform.localTransform,c=t.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[i.CONTEXT_UID]?d=l.wrapMode!==sn.CLAMP:l.wrapMode===sn.CLAMP&&(l.wrapMode=sn.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,y=a.height,_=t._width,m=t._height;da.set(u.a*p/_,u.b*p/m,u.c*y/_,u.d*y/m,u.tx/_,u.ty/m),da.invert(),d?da.prepend(c.mapCoord):(f.uniforms.uMapCoord=c.mapCoord.toArray(!0),f.uniforms.uClampFrame=c.uClampFrame,f.uniforms.uClampOffset=c.uClampOffset),f.uniforms.uTransform=da.toArray(!0),f.uniforms.uColor=f_(t.tint,t.worldAlpha,f.uniforms.uColor,h),f.uniforms.translationMatrix=t.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,i.shader.bind(f),i.geometry.bind(n),this.state.blendMode=d_(t.blendMode,h),i.state.set(this.state),i.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}wx.extension={name:"tilingSprite",type:L.RendererPlugin};W.add(wx);const Cs=class{constructor(e,t,i=null){this.linkedSheets=[],this._texture=e instanceof j?e:null,this.baseTexture=e instanceof tt?e:this._texture.baseTexture,this.textures={},this.animations={},this.data=t;const n=this.baseTexture.resource;this.resolution=this._updateResolution(i||(n?n.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(e=null){const{scale:t}=this.data.meta;let i=hn(e,null);return i===null&&(i=parseFloat(t??"1")),i!==1&&this.baseTexture.setResolution(i),i}parse(){return new Promise(e=>{this._callback=e,this._batchIndex=0,this._frameKeys.length<=Cs.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(e){let t=e;const i=Cs.BATCH_SIZE;for(;t-e<i&&t<this._frameKeys.length;){const n=this._frameKeys[t],r=this._frames[n],s=r.frame;if(s){let o=null,a=null;const l=r.trimmed!==!1&&r.sourceSize?r.sourceSize:r.frame,h=new it(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);r.rotated?o=new it(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new it(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),r.trimmed!==!1&&r.spriteSourceSize&&(a=new it(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[n]=new j(this.baseTexture,o,h,a,r.rotated?2:0,r.anchor),j.addToCache(this.textures[n],n)}t++}}_processAnimations(){const e=this.data.animations||{};for(const t in e){this.animations[t]=[];for(let i=0;i<e[t].length;i++){const n=e[t][i];this.animations[t].push(this.textures[n])}}}_parseComplete(){const e=this._callback;this._callback=null,this._batchIndex=0,e.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*Cs.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*Cs.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(e=!1){var t;for(const i in this.textures)this.textures[i].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,e&&((t=this._texture)==null||t.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let dd=Cs;dd.BATCH_SIZE=1e3;const J3=["jpg","png","jpeg","avif","webp"];function bx(e,t,i){const n={};if(e.forEach(r=>{n[r]=t}),Object.keys(t.textures).forEach(r=>{n[r]=t.textures[r]}),!i){const r=Xt.dirname(e[0]);t.linkedSheets.forEach((s,o)=>{const a=bx([`${r}/${t.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(n,a)})}return n}const tB={extension:L.Asset,cache:{test:e=>e instanceof dd,getCacheableAssets:(e,t)=>bx(e,t,!1)},resolver:{test:e=>{const i=e.split("?")[0].split("."),n=i.pop(),r=i.pop();return n==="json"&&J3.includes(r)},parse:e=>{var i;const t=e.split(".");return{resolution:parseFloat(((i=z.RETINA_PREFIX.exec(e))==null?void 0:i[1])??"1"),format:t[t.length-2],src:e}}},loader:{extension:{type:L.LoadParser,priority:yi.Normal},async testParse(e,t){return Xt.extname(t.src).toLowerCase()===".json"&&!!e.frames},async parse(e,t,i){var h,u;let n=Xt.dirname(t.src);n&&n.lastIndexOf("/")!==n.length-1&&(n+="/");let r=n+e.meta.image;r=ad(r,t.src);const o=(await i.load([r]))[r],a=new dd(o.baseTexture,e,t.src);await a.parse();const l=(h=e==null?void 0:e.meta)==null?void 0:h.related_multi_packs;if(Array.isArray(l)){const c=[];for(const f of l){if(typeof f!="string")continue;let p=n+f;(u=t.data)!=null&&u.ignoreMultiPack||(p=ad(p,t.src),c.push(i.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(c);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},unload(e){e.destroy(!0)}}};W.add(tB);class Pl{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Na{static test(t){return typeof t=="string"&&t.startsWith("info face=")}static parse(t){const i=t.match(/^[a-z]+\s+.+$/gm),n={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in i){const o=i[s].match(/^[a-z]+/gm)[0],a=i[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const h in a){const u=a[h].split("="),c=u[0],d=u[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[c]=p}n[o].push(l)}const r=new Pl;return n.info.forEach(s=>r.info.push({face:s.face,size:parseInt(s.size,10)})),n.common.forEach(s=>r.common.push({lineHeight:parseInt(s.lineHeight,10)})),n.page.forEach(s=>r.page.push({id:parseInt(s.id,10),file:s.file})),n.char.forEach(s=>r.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),n.kerning.forEach(s=>r.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),n.distanceField.forEach(s=>r.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),r}}class fd{static test(t){const i=t;return"getElementsByTagName"in i&&i.getElementsByTagName("page").length&&i.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(t){const i=new Pl,n=t.getElementsByTagName("info"),r=t.getElementsByTagName("common"),s=t.getElementsByTagName("page"),o=t.getElementsByTagName("char"),a=t.getElementsByTagName("kerning"),l=t.getElementsByTagName("distanceField");for(let h=0;h<n.length;h++)i.info.push({face:n[h].getAttribute("face"),size:parseInt(n[h].getAttribute("size"),10)});for(let h=0;h<r.length;h++)i.common.push({lineHeight:parseInt(r[h].getAttribute("lineHeight"),10)});for(let h=0;h<s.length;h++)i.page.push({id:parseInt(s[h].getAttribute("id"),10)||0,file:s[h].getAttribute("file")});for(let h=0;h<o.length;h++){const u=o[h];i.char.push({id:parseInt(u.getAttribute("id"),10),page:parseInt(u.getAttribute("page"),10)||0,x:parseInt(u.getAttribute("x"),10),y:parseInt(u.getAttribute("y"),10),width:parseInt(u.getAttribute("width"),10),height:parseInt(u.getAttribute("height"),10),xoffset:parseInt(u.getAttribute("xoffset"),10),yoffset:parseInt(u.getAttribute("yoffset"),10),xadvance:parseInt(u.getAttribute("xadvance"),10)})}for(let h=0;h<a.length;h++)i.kerning.push({first:parseInt(a[h].getAttribute("first"),10),second:parseInt(a[h].getAttribute("second"),10),amount:parseInt(a[h].getAttribute("amount"),10)});for(let h=0;h<l.length;h++)i.distanceField.push({fieldType:l[h].getAttribute("fieldType"),distanceRange:parseInt(l[h].getAttribute("distanceRange"),10)});return i}}class pd{static test(t){return typeof t=="string"&&t.includes("<font>")?fd.test(z.ADAPTER.parseXML(t)):!1}static parse(t){return fd.parse(z.ADAPTER.parseXML(t))}}const yu=[Na,fd,pd];function eB(e){for(let t=0;t<yu.length;t++)if(yu[t].test(e))return yu[t];return null}function iB(e,t,i,n,r,s){const o=i.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=i.dropShadow?i.dropShadowDistance:0,h=i.padding||0,u=e.width/n-l-h*2,c=e.height/n-l-h*2,d=o.slice(),f=i.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let y=1;y<p;++y)f.push(y/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),i.fillGradientType===dh.LINEAR_VERTICAL){a=t.createLinearGradient(u/2,h,u/2,c+h);let p=0;const _=(s.fontProperties.fontSize+i.strokeThickness)/c;for(let m=0;m<r.length;m++){const g=s.lineHeight*m;for(let v=0;v<d.length;v++){let x=0;typeof f[v]=="number"?x=f[v]:x=v/d.length;const b=g/c+x*_;let T=Math.max(p,b);T=Math.min(T,1),a.addColorStop(T,d[v]),p=T}}}else{a=t.createLinearGradient(h,c/2,u+h,c/2);const p=d.length+1;let y=1;for(let _=0;_<d.length;_++){let m;typeof f[_]=="number"?m=f[_]:m=y/p,a.addColorStop(m,d[_]),y++}}return a}function nB(e,t,i,n,r,s,o){const a=i.text,l=i.fontProperties;t.translate(n,r),t.scale(s,s);const h=o.strokeThickness/2,u=-(o.strokeThickness/2);if(t.font=o.toFontString(),t.lineWidth=o.strokeThickness,t.textBaseline=o.textBaseline,t.lineJoin=o.lineJoin,t.miterLimit=o.miterLimit,t.fillStyle=iB(e,t,o,s,[a],i),t.strokeStyle=o.stroke,o.dropShadow){const c=o.dropShadowColor,d=co(typeof c=="number"?c:Vf(c)),f=o.dropShadowBlur*s,p=o.dropShadowDistance*s;t.shadowColor=`rgba(${d[0]*255},${d[1]*255},${d[2]*255},${o.dropShadowAlpha})`,t.shadowBlur=f,t.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,t.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else t.shadowColor="black",t.shadowBlur=0,t.shadowOffsetX=0,t.shadowOffsetY=0;o.stroke&&o.strokeThickness&&t.strokeText(a,h,u+i.lineHeight-l.descent),o.fill&&t.fillText(a,h,u+i.lineHeight-l.descent),t.setTransform(1,0,0,1,0,0),t.fillStyle="rgba(0, 0, 0, 0)"}function La(e){return e.codePointAt?e.codePointAt(0):e.charCodeAt(0)}function Ex(e){return Array.from?Array.from(e):e.split("")}function rB(e){typeof e=="string"&&(e=[e]);const t=[];for(let i=0,n=e.length;i<n;i++){const r=e[i];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)t.push(String.fromCharCode(a))}else t.push(...Ex(r))}if(t.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return t}const Ue=class{constructor(e,t,i){var h;const[n]=e.info,[r]=e.common,[s]=e.page,[o]=e.distanceField,a=hn(s.file),l={};this._ownsTextures=i,this.font=n.face,this.size=n.size,this.lineHeight=r.lineHeight/a,this.chars={},this.pageTextures=l;for(let u=0;u<e.page.length;u++){const{id:c,file:d}=e.page[u];l[c]=t instanceof Array?t[u]:t[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[c].baseTexture.alphaMode=ti.NO_PREMULTIPLIED_ALPHA,l[c].baseTexture.mipmap=gi.OFF)}for(let u=0;u<e.char.length;u++){const{id:c,page:d}=e.char[u];let{x:f,y:p,width:y,height:_,xoffset:m,yoffset:g,xadvance:v}=e.char[u];f/=a,p/=a,y/=a,_/=a,m/=a,g/=a,v/=a;const x=new it(f+l[d].frame.x/a,p+l[d].frame.y/a,y,_);this.chars[c]={xOffset:m,yOffset:g,xAdvance:v,kerning:{},texture:new j(l[d].baseTexture,x),page:d}}for(let u=0;u<e.kerning.length;u++){let{first:c,second:d,amount:f}=e.kerning[u];c/=a,d/=a,f/=a,this.chars[d]&&(this.chars[d].kerning[c]=f)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((h=o==null?void 0:o.fieldType)==null?void 0:h.toLowerCase())??"none"}destroy(){for(const e in this.chars)this.chars[e].texture.destroy(),this.chars[e].texture=null;for(const e in this.pageTextures)this._ownsTextures&&this.pageTextures[e].destroy(!0),this.pageTextures[e]=null;this.chars=null,this.pageTextures=null}static install(e,t,i){let n;if(e instanceof Pl)n=e;else{const s=eB(e);if(!s)throw new Error("Unrecognized data format for font.");n=s.parse(e)}t instanceof j&&(t=[t]);const r=new Ue(n,t,i);return Ue.available[r.font]=r,r}static uninstall(e){const t=Ue.available[e];if(!t)throw new Error(`No font found named '${e}'`);t.destroy(),delete Ue.available[e]}static from(e,t,i){if(!e)throw new Error("[BitmapFont] Property `name` is required.");const{chars:n,padding:r,resolution:s,textureWidth:o,textureHeight:a,...l}=Object.assign({},Ue.defaultOptions,i),h=rB(n),u=t instanceof Wn?t:new Wn(t),c=o,d=new Pl;d.info[0]={face:u.fontFamily,size:u.fontSize},d.common[0]={lineHeight:u.fontSize};let f=0,p=0,y,_,m,g=0;const v=[];for(let b=0;b<h.length;b++){y||(y=z.ADAPTER.createCanvas(),y.width=o,y.height=a,_=y.getContext("2d"),m=new tt(y,{resolution:s,...l}),v.push(new j(m)),d.page.push({id:v.length-1,file:""}));const T=h[b],E=$t.measureText(T,u,!1,y),w=E.width,S=Math.ceil(E.height),A=Math.ceil((u.fontStyle==="italic"?2:1)*w);if(p>=a-S*s){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${T}')`);--b,y=null,_=null,m=null,p=0,f=0,g=0;continue}if(g=Math.max(S+E.fontProperties.descent,g),A*s+f>=c){if(f===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${u.fontFamily}', fontSize: ${u.fontSize}px, char: '${T}')`);--b,p+=g*s,p=Math.ceil(p),f=0,g=0;continue}nB(y,_,E,f,p,s,u);const P=La(E.text);d.char.push({id:P,page:v.length-1,x:f/s,y:p/s,width:A,height:S,xoffset:0,yoffset:0,xadvance:w-(u.dropShadow?u.dropShadowDistance:0)-(u.stroke?u.strokeThickness:0)}),f+=(A+2*r)*s,f=Math.ceil(f)}for(let b=0,T=h.length;b<T;b++){const E=h[b];for(let w=0;w<T;w++){const S=h[w],A=_.measureText(E).width,P=_.measureText(S).width,R=_.measureText(E+S).width-(A+P);R&&d.kerning.push({first:La(E),second:La(S),amount:R})}}const x=new Ue(d,v,!0);return Ue.available[e]!==void 0&&Ue.uninstall(e),Ue.available[e]=x,x}};let oe=Ue;oe.ALPHA=[["a","z"],["A","Z"]," "];oe.NUMERIC=[["0","9"]];oe.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];oe.ASCII=[[" ","~"]];oe.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:Ue.ALPHANUMERIC};oe.available={};var sB=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,oB=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const Zg=[],Qg=[],Jg=[],Tx=class extends be{constructor(e,t={}){super(),this._tint=16777215;const{align:i,tint:n,maxWidth:r,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},Tx.styleDefaults,t);if(!oe.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=i,this._tint=n,this._font=void 0,this._fontName=o,this._fontSize=a,this.text=e,this._maxWidth=r,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new qi(()=>{this.dirty=!0},this,0,0),this._roundPixels=z.ROUND_PIXELS,this.dirty=!0,this._resolution=z.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var A;const e=oe.available[this._fontName],t=this.fontSize,i=t/e.size,n=new Y,r=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Ex(a),h=this._maxWidth*e.size/t,u=e.distanceFieldType==="none"?Zg:Qg;let c=null,d=0,f=0,p=0,y=-1,_=0,m=0,g=0,v=0;for(let P=0;P<l.length;P++){const k=l[P],R=La(k);if(/(?:\s)/.test(k)&&(y=P,_=d,v++),k==="\r"||k===`
`){s.push(d),o.push(-1),f=Math.max(f,d),++p,++m,n.x=0,n.y+=e.lineHeight,c=null,v=0;continue}const I=e.chars[R];if(!I)continue;c&&I.kerning[c]&&(n.x+=I.kerning[c]);const J=Jg.pop()||{texture:j.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Y};J.texture=I.texture,J.line=p,J.charCode=R,J.position.x=Math.round(n.x+I.xOffset+this._letterSpacing/2),J.position.y=Math.round(n.y+I.yOffset),J.prevSpaces=v,r.push(J),d=J.position.x+Math.max(I.xAdvance-I.xOffset,I.texture.orig.width),n.x+=I.xAdvance+this._letterSpacing,g=Math.max(g,I.yOffset+I.texture.height),c=R,y!==-1&&h>0&&n.x>h&&(++m,Rr(r,1+y-m,1+P-y),P=y,y=-1,s.push(_),o.push(r.length>0?r[r.length-1].prevSpaces:0),f=Math.max(f,_),p++,n.x=0,n.y+=e.lineHeight,c=null,v=0)}const x=l[l.length-1];x!=="\r"&&x!==`
`&&(/(?:\s)/.test(x)&&(d=_),s.push(d),f=Math.max(f,d),o.push(-1));const b=[];for(let P=0;P<=p;P++){let k=0;this._align==="right"?k=f-s[P]:this._align==="center"?k=(f-s[P])/2:this._align==="justify"&&(k=o[P]<0?0:(f-s[P])/o[P]),b.push(k)}const T=r.length,E={},w=[],S=this._activePagesMeshData;u.push(...S);for(let P=0;P<T;P++){const k=r[P].texture,R=k.baseTexture.uid;if(!E[R]){let I=u.pop();if(!I){const et=new M3;let F,O;e.distanceFieldType==="none"?(F=new Vg(j.EMPTY),O=q.NORMAL):(F=new Vg(j.EMPTY,{program:Xe.from(oB,sB),uniforms:{uFWidth:0}}),O=q.NORMAL_NPM);const $=new ud(et,F);$.blendMode=O,I={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:$,vertices:null,uvs:null,indices:null}}I.index=0,I.indexCount=0,I.vertexCount=0,I.uvsCount=0,I.total=0;const{_textureCache:J}=this;J[R]=J[R]||new j(k.baseTexture),I.mesh.texture=J[R],I.mesh.tint=this._tint,w.push(I),E[R]=I}E[R].total++}for(let P=0;P<S.length;P++)w.includes(S[P])||this.removeChild(S[P].mesh);for(let P=0;P<w.length;P++)w[P].mesh.parent!==this&&this.addChild(w[P].mesh);this._activePagesMeshData=w;for(const P in E){const k=E[P],R=k.total;if(!(((A=k.indices)==null?void 0:A.length)>6*R)||k.vertices.length<ud.BATCHABLE_SIZE*2)k.vertices=new Float32Array(4*2*R),k.uvs=new Float32Array(4*2*R),k.indices=new Uint16Array(6*R);else{const I=k.total,J=k.vertices;for(let et=I*4*2;et<J.length;et++)J[et]=0}k.mesh.size=6*R}for(let P=0;P<T;P++){const k=r[P];let R=k.position.x+b[k.line]*(this._align==="justify"?k.prevSpaces:1);this._roundPixels&&(R=Math.round(R));const I=R*i,J=k.position.y*i,et=k.texture,F=E[et.baseTexture.uid],O=et.frame,$=et._uvs,C=F.index++;F.indices[C*6+0]=0+C*4,F.indices[C*6+1]=1+C*4,F.indices[C*6+2]=2+C*4,F.indices[C*6+3]=0+C*4,F.indices[C*6+4]=2+C*4,F.indices[C*6+5]=3+C*4,F.vertices[C*8+0]=I,F.vertices[C*8+1]=J,F.vertices[C*8+2]=I+O.width*i,F.vertices[C*8+3]=J,F.vertices[C*8+4]=I+O.width*i,F.vertices[C*8+5]=J+O.height*i,F.vertices[C*8+6]=I,F.vertices[C*8+7]=J+O.height*i,F.uvs[C*8+0]=$.x0,F.uvs[C*8+1]=$.y0,F.uvs[C*8+2]=$.x1,F.uvs[C*8+3]=$.y1,F.uvs[C*8+4]=$.x2,F.uvs[C*8+5]=$.y2,F.uvs[C*8+6]=$.x3,F.uvs[C*8+7]=$.y3}this._textWidth=f*i,this._textHeight=(n.y+e.lineHeight)*i;for(const P in E){const k=E[P];if(this.anchor.x!==0||this.anchor.y!==0){let et=0;const F=this._textWidth*this.anchor.x,O=this._textHeight*this.anchor.y;for(let $=0;$<k.total;$++)k.vertices[et++]-=F,k.vertices[et++]-=O,k.vertices[et++]-=F,k.vertices[et++]-=O,k.vertices[et++]-=F,k.vertices[et++]-=O,k.vertices[et++]-=F,k.vertices[et++]-=O}this._maxLineHeight=g*i;const R=k.mesh.geometry.getBuffer("aVertexPosition"),I=k.mesh.geometry.getBuffer("aTextureCoord"),J=k.mesh.geometry.getIndex();R.data=k.vertices,I.data=k.uvs,J.data=k.indices,R.update(),I.update(),J.update()}for(let P=0;P<r.length;P++)Jg.push(r[P]);this._font=e,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(e){this._autoResolution&&this._resolution!==e.resolution&&(this._resolution=e.resolution,this.dirty=!0);const{distanceFieldRange:t,distanceFieldType:i,size:n}=oe.available[this._fontName];if(i!=="none"){const{a:r,b:s,c:o,d:a}=this.worldTransform,l=Math.sqrt(r*r+s*s),h=Math.sqrt(o*o+a*a),u=(Math.abs(l)+Math.abs(h))/2,c=this.fontSize/n,d=e._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=u*t*c*d}super._render(e)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const e=oe.available[this._fontName];if(!e)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==e&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(e){if(this._tint!==e){this._tint=e;for(let t=0;t<this._activePagesMeshData.length;t++)this._activePagesMeshData[t].mesh.tint=e}}get align(){return this._align}set align(e){this._align!==e&&(this._align=e,this.dirty=!0)}get fontName(){return this._fontName}set fontName(e){if(!oe.available[e])throw new Error(`Missing BitmapFont "${e}"`);this._fontName!==e&&(this._fontName=e,this.dirty=!0)}get fontSize(){return this._fontSize??oe.available[this._fontName].size}set fontSize(e){this._fontSize!==e&&(this._fontSize=e,this.dirty=!0)}get anchor(){return this._anchor}set anchor(e){typeof e=="number"?this._anchor.set(e):this._anchor.copyFrom(e)}get text(){return this._text}set text(e){e=String(e??""),this._text!==e&&(this._text=e,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(e){this._maxWidth!==e&&(this._maxWidth=e,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(e){this._letterSpacing!==e&&(this._letterSpacing=e,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(e){e!==this._roundPixels&&(this._roundPixels=e,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(e){this._autoResolution=!1,this._resolution!==e&&(this._resolution=e,this.dirty=!0)}destroy(e){const{_textureCache:t}=this,n=oe.available[this._fontName].distanceFieldType==="none"?Zg:Qg;n.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],n.filter(r=>t[r.mesh.texture.baseTexture.uid]).forEach(r=>{r.mesh.texture=j.EMPTY});for(const r in t)t[r].destroy(),delete t[r];this._font=null,this._textureCache=null,super.destroy(e)}};let aB=Tx;aB.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const lB=[".xml",".fnt"],hB={extension:{type:L.LoadParser,priority:yi.Normal},test(e){return lB.includes(Xt.extname(e).toLowerCase())},async testParse(e){return Na.test(e)||pd.test(e)},async parse(e,t,i){const n=Na.test(e)?Na.parse(e):pd.parse(e),{src:r}=t,{page:s}=n,o=[];for(let h=0;h<s.length;++h){const u=s[h].file;let c=Xt.join(Xt.dirname(r),u);c=ad(c,r),o.push(c)}const a=await i.load(o),l=o.map(h=>a[h]);return oe.install(n,l,!0)},async load(e,t){return(await z.ADAPTER.fetch(e)).text()},unload(e){e.destroy()}};W.add(hB);var uB=Object.defineProperty,cB=(e,t,i)=>t in e?uB(e,t,{enumerable:!0,configurable:!0,writable:!0,value:i}):e[t]=i,M=(e,t,i)=>(cB(e,typeof t!="symbol"?t+"":t,i),i);class Oe{constructor(t){M(this,"parent"),M(this,"paused"),this.parent=t,this.paused=!1}destroy(){}down(t){return!1}move(t){return!1}up(t){return!1}wheel(t){return!1}update(t){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}}var dB=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Sx={exports:{}};(function(e,t){(function(){var i,n;n=function(r){return e.exports=r},i={linear:function(r,s,o,a){return o*r/a+s},easeInQuad:function(r,s,o,a){return o*(r/=a)*r+s},easeOutQuad:function(r,s,o,a){return-o*(r/=a)*(r-2)+s},easeInOutQuad:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r+s:-o/2*(--r*(r-2)-1)+s},easeInCubic:function(r,s,o,a){return o*(r/=a)*r*r+s},easeOutCubic:function(r,s,o,a){return o*((r=r/a-1)*r*r+1)+s},easeInOutCubic:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r*r+s:o/2*((r-=2)*r*r+2)+s},easeInQuart:function(r,s,o,a){return o*(r/=a)*r*r*r+s},easeOutQuart:function(r,s,o,a){return-o*((r=r/a-1)*r*r*r-1)+s},easeInOutQuart:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r*r*r+s:-o/2*((r-=2)*r*r*r-2)+s},easeInQuint:function(r,s,o,a){return o*(r/=a)*r*r*r*r+s},easeOutQuint:function(r,s,o,a){return o*((r=r/a-1)*r*r*r*r+1)+s},easeInOutQuint:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r*r*r*r+s:o/2*((r-=2)*r*r*r*r+2)+s},easeInSine:function(r,s,o,a){return-o*Math.cos(r/a*(Math.PI/2))+o+s},easeOutSine:function(r,s,o,a){return o*Math.sin(r/a*(Math.PI/2))+s},easeInOutSine:function(r,s,o,a){return-o/2*(Math.cos(Math.PI*r/a)-1)+s},easeInExpo:function(r,s,o,a){return r===0?s:o*Math.pow(2,10*(r/a-1))+s},easeOutExpo:function(r,s,o,a){return r===a?s+o:o*(-Math.pow(2,-10*r/a)+1)+s},easeInOutExpo:function(r,s,o,a){return(r/=a/2)<1?o/2*Math.pow(2,10*(r-1))+s:o/2*(-Math.pow(2,-10*--r)+2)+s},easeInCirc:function(r,s,o,a){return-o*(Math.sqrt(1-(r/=a)*r)-1)+s},easeOutCirc:function(r,s,o,a){return o*Math.sqrt(1-(r=r/a-1)*r)+s},easeInOutCirc:function(r,s,o,a){return(r/=a/2)<1?-o/2*(Math.sqrt(1-r*r)-1)+s:o/2*(Math.sqrt(1-(r-=2)*r)+1)+s},easeInElastic:function(r,s,o,a){var l,h,u;return u=1.70158,h=0,l=o,r===0||(r/=a),h||(h=a*.3),l<Math.abs(o)?(l=o,u=h/4):u=h/(2*Math.PI)*Math.asin(o/l),-(l*Math.pow(2,10*(r-=1))*Math.sin((r*a-u)*(2*Math.PI)/h))+s},easeOutElastic:function(r,s,o,a){var l,h,u;return u=1.70158,h=0,l=o,r===0||(r/=a),h||(h=a*.3),l<Math.abs(o)?(l=o,u=h/4):u=h/(2*Math.PI)*Math.asin(o/l),l*Math.pow(2,-10*r)*Math.sin((r*a-u)*(2*Math.PI)/h)+o+s},easeInOutElastic:function(r,s,o,a){var l,h,u;return u=1.70158,h=0,l=o,r===0||(r/=a/2),h||(h=a*(.3*1.5)),l<Math.abs(o)?(l=o,u=h/4):u=h/(2*Math.PI)*Math.asin(o/l),r<1?-.5*(l*Math.pow(2,10*(r-=1))*Math.sin((r*a-u)*(2*Math.PI)/h))+s:l*Math.pow(2,-10*(r-=1))*Math.sin((r*a-u)*(2*Math.PI)/h)*.5+o+s},easeInBack:function(r,s,o,a,l){return l===void 0&&(l=1.70158),o*(r/=a)*r*((l+1)*r-l)+s},easeOutBack:function(r,s,o,a,l){return l===void 0&&(l=1.70158),o*((r=r/a-1)*r*((l+1)*r+l)+1)+s},easeInOutBack:function(r,s,o,a,l){return l===void 0&&(l=1.70158),(r/=a/2)<1?o/2*(r*r*(((l*=1.525)+1)*r-l))+s:o/2*((r-=2)*r*(((l*=1.525)+1)*r+l)+2)+s},easeInBounce:function(r,s,o,a){var l;return l=i.easeOutBounce(a-r,0,o,a),o-l+s},easeOutBounce:function(r,s,o,a){return(r/=a)<1/2.75?o*(7.5625*r*r)+s:r<2/2.75?o*(7.5625*(r-=1.5/2.75)*r+.75)+s:r<2.5/2.75?o*(7.5625*(r-=2.25/2.75)*r+.9375)+s:o*(7.5625*(r-=2.625/2.75)*r+.984375)+s},easeInOutBounce:function(r,s,o,a){var l;return r<a/2?(l=i.easeInBounce(r*2,0,o,a),l*.5+s):(l=i.easeOutBounce(r*2-a,0,o,a),l*.5+o*.5+s)}},n(i)}).call(dB)})(Sx);const tv=Sx.exports;function ph(e,t){if(e){if(typeof e=="function")return e;if(typeof e=="string")return tv[e]}else return tv[t]}const fB={removeOnInterrupt:!1,ease:"linear",time:1e3};class pB extends Oe{constructor(t,i={}){super(t),M(this,"options"),M(this,"startX"),M(this,"startY"),M(this,"deltaX"),M(this,"deltaY"),M(this,"keepCenter"),M(this,"startWidth",null),M(this,"startHeight",null),M(this,"deltaWidth",null),M(this,"deltaHeight",null),M(this,"width",null),M(this,"height",null),M(this,"time",0),this.options=Object.assign({},fB,i),this.options.ease=ph(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(t){if(this.paused)return;this.time+=t;const i=new Y(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const n=this.parent.width,r=this.parent.height;this.complete(),(n!==this.parent.width||r!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:i,type:"animate"})}else{const n=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const r=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(r+s*n,this.keepCenter,this.height===null)}if(this.height!==null){const r=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(r+s*n,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const r=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,l=new Y(this.parent.x,this.parent.y);this.parent.moveCenter(r+o*n,s+a*n),this.parent.emit("moved",{viewport:this.parent,original:l,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:i,type:"animate"})}}}const mB={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};class gB extends Oe{constructor(t,i={}){super(t),M(this,"options"),M(this,"left"),M(this,"top"),M(this,"right"),M(this,"bottom"),M(this,"underflowX"),M(this,"underflowY"),M(this,"ease"),M(this,"toX"),M(this,"toY"),this.options=Object.assign({},mB,i),this.ease=ph(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const n=this.options.underflow.toLowerCase();n==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=n.indexOf("left")!==-1?-1:n.indexOf("right")!==-1?1:0,this.underflowY=n.indexOf("top")!==-1?-1:n.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(t){if(!this.paused){if(this.bounce(),this.toX){const i=this.toX;i.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),i.time>=this.options.time?(this.parent.x=i.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(i.time,i.start,i.delta,this.options.time)}if(this.toY){const i=this.toY;i.time+=t,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),i.time>=this.options.time?(this.parent.y=i.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(i.time,i.start,i.delta,this.options.time)}}}calcUnderflowX(){let t;switch(this.underflowX){case-1:t=0;break;case 1:t=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:t=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return t}calcUnderflowY(){let t;switch(this.underflowY){case-1:t=0;break;case 1:t=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:t=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return t}oob(){const t=this.options.bounceBox;if(t){const i=typeof t.x>"u"?0:t.x,n=typeof t.y>"u"?0:t.y,r=typeof t.width>"u"?this.parent.worldWidth:t.width,s=typeof t.height>"u"?this.parent.worldHeight:t.height;return{left:this.parent.left<i,right:this.parent.right>r,top:this.parent.top<n,bottom:this.parent.bottom>s,topLeft:new Y(i*this.parent.scale.x,n*this.parent.scale.y),bottomRight:new Y(r*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new Y(0,0),bottomRight:new Y(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var t,i;if(this.paused)return;let n,r=this.parent.plugins.get("decelerate",!0);r&&(r.x||r.y)&&(r.x&&r.percentChangeX===((t=r.options)==null?void 0:t.friction)||r.y&&r.percentChangeY===((i=r.options)==null?void 0:i.friction))&&(n=this.oob(),(n.left&&this.left||n.right&&this.right)&&(r.percentChangeX=this.options.friction),(n.top&&this.top||n.bottom&&this.bottom)&&(r.percentChangeY=this.options.friction));const s=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(r=r||{},!(s!=null&&s.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!r.x||!r.y)){n=n||this.oob();const a=n.topLeft,l=n.bottomRight;if(!this.toX&&!r.x){let h=null;n.left&&this.left?h=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:n.right&&this.right&&(h=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-l.x),h!==null&&this.parent.x!==h&&(this.toX={time:0,start:this.parent.x,delta:h-this.parent.x,end:h},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!r.y){let h=null;n.top&&this.top?h=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:n.bottom&&this.bottom&&(h=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-l.y),h!==null&&this.parent.y!==h&&(this.toY={time:0,start:this.parent.y,delta:h-this.parent.y,end:h},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}}const vB={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};class yB extends Oe{constructor(t,i={}){super(t),M(this,"options"),M(this,"last"),M(this,"noUnderflow"),M(this,"underflowX"),M(this,"underflowY"),this.options=Object.assign({},vB,i),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="none"?this.noUnderflow=!0:t==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=t.indexOf("left")!==-1?-1:t.indexOf("right")!==-1?1:0,this.underflowY=t.indexOf("top")!==-1?-1:t.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const t=new Y(this.parent.x,this.parent.y),i=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let n=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,n=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,n=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,n=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,i.x=0,n=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,i.x=0,n=!0);n&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let n=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,n=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,n=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,n=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,i.y=0,n=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,i.y=0,n=!0);n&&this.parent.emit("moved",{viewport:this.parent,original:t,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}}const _B={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};class xB extends Oe{constructor(t,i={}){super(t),M(this,"options"),this.options=Object.assign({},_B,i),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&t<this.options.minWidth){const n=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/n,t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&t>this.options.maxWidth){const n=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/n,t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&i<this.options.minHeight){const n=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/n,t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&i>this.options.maxHeight){const n=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/n,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const t={x:null,y:null},i={x:null,y:null};if(typeof this.options.minScale=="number")t.x=this.options.minScale,t.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;t.x=typeof s.x>"u"?null:s.x,t.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")i.x=this.options.maxScale,i.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;i.x=typeof s.x>"u"?null:s.x,i.y=typeof s.y>"u"?null:s.y}let n=this.parent.scale.x,r=this.parent.scale.y;t.x!==null&&n<t.x&&(n=t.x),i.x!==null&&n>i.x&&(n=i.x),t.y!==null&&r<t.y&&(r=t.y),i.y!==null&&r>i.y&&(r=i.y),(n!==this.parent.scale.x||r!==this.parent.scale.y)&&(this.parent.scale.set(n,r),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}}const wB={friction:.98,bounce:.8,minSpeed:.01},Gi=16;class bB extends Oe{constructor(t,i={}){super(t),M(this,"options"),M(this,"x"),M(this,"y"),M(this,"percentChangeX"),M(this,"percentChangeY"),M(this,"saved"),M(this,"timeSinceRelease"),this.options=Object.assign({},wB,i),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",n=>this.handleMoved(n))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const t=this.parent.input.count();return(t===1||t>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(t){if(this.saved.length){const i=this.saved[this.saved.length-1];t.type==="clamp-x"&&t.original?i.x===t.original.x&&(i.x=this.parent.x):t.type==="clamp-y"&&t.original&&i.y===t.original.y&&(i.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const t=performance.now();for(const i of this.saved)if(i.time>=t-100){const n=t-i.time;this.x=(this.parent.x-i.x)/n,this.y=(this.parent.y-i.y)/n,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(t){t=t||{},typeof t.x<"u"&&(this.x=t.x,this.percentChangeX=this.options.friction),typeof t.y<"u"&&(this.y=t.y,this.percentChangeY=this.options.friction)}update(t){if(this.paused)return;const i=this.x||this.y,n=this.timeSinceRelease,r=this.timeSinceRelease+t;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*Gi/o*(Math.pow(s,r/Gi)-Math.pow(s,n/Gi)),this.x*=Math.pow(this.percentChangeX,t/Gi)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*Gi/o*(Math.pow(s,r/Gi)-Math.pow(s,n/Gi)),this.y*=Math.pow(this.percentChangeY,t/Gi)}this.timeSinceRelease+=t,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),i&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}}const EB={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class TB extends Oe{constructor(t,i={}){super(t),M(this,"options"),M(this,"moved"),M(this,"reverse"),M(this,"xDirection"),M(this,"yDirection"),M(this,"keyIsPressed"),M(this,"mouse"),M(this,"underflowX"),M(this,"underflowY"),M(this,"last"),M(this,"current"),M(this,"windowEventHandlers",[]),this.options=Object.assign({},EB,i),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){const i=r=>{t.includes(r.code)&&(this.keyIsPressed=!0)},n=r=>{t.includes(r.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",n),this.addWindowEventHandler("keydown",i)}addWindowEventHandler(t,i){window.addEventListener(t,i),this.windowEventHandlers.push({event:t,handler:i})}destroy(){this.windowEventHandlers.forEach(({event:t,handler:i})=>{window.removeEventListener(t,i)})}mouseButtons(t){!t||t==="all"?this.mouse=[!0,!0,!0]:this.mouse=[t.indexOf("left")!==-1,t.indexOf("middle")!==-1,t.indexOf("right")!==-1]}parseUnderflow(){const t=this.options.underflow.toLowerCase();t==="center"?(this.underflowX=0,this.underflowY=0):(t.includes("left")?this.underflowX=-1:t.includes("right")?this.underflowX=1:this.underflowX=0,t.includes("top")?this.underflowY=-1:t.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(t){const i=t.pointerType==="mouse",n=this.parent.input.count();return!!((n===1||n>1&&!this.parent.plugins.get("pinch",!0))&&(!i||this.mouse[t.button]))}checkKeyPress(t){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&t.data.pointerType==="touch"}down(t){return this.paused||!this.options.pressDrag?!1:this.checkButtons(t)&&this.checkKeyPress(t)?(this.last={x:t.global.x,y:t.global.y},this.current=t.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(t){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===t.data.pointerId){const i=t.global.x,n=t.global.y,r=this.parent.input.count();if(r===1||r>1&&!this.parent.plugins.get("pinch",!0)){const s=i-this.last.x,o=n-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:i,y:n};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:t,screen:new Y(this.last.x,this.last.y),world:this.parent.toWorld(new Y(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(t){if(this.paused)return!1;const i=this.parent.input.touches;if(i.length===1){const n=i[0];return n.last&&(this.last={x:n.last.x,y:n.last.y},this.current=n.id),this.moved=!1,!0}else if(this.last&&this.moved){const n=new Y(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:t,screen:n,world:this.parent.toWorld(n),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(t){if(this.paused)return!1;if(this.options.wheel){const i=this.parent.plugins.get("wheel",!0);if(!i||!i.options.wheelZoom&&!t.ctrlKey){const n=t.deltaMode?this.options.lineHeight:1,r=[t.deltaX,t.deltaY],[s,o]=this.options.wheelSwapAxes?r.reverse():r;return this.xDirection&&(this.parent.x+=s*n*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*n*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||t.preventDefault(),this.parent.options.stopPropagation&&t.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const t=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,t.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,t.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,t.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,t.y=0)}}const SB={speed:0,acceleration:null,radius:null};class CB extends Oe{constructor(t,i,n={}){super(t),M(this,"options"),M(this,"target"),M(this,"velocity"),this.target=i,this.options=Object.assign({},SB,n),this.velocity={x:0,y:0}}update(t){if(this.paused)return;const i=this.parent.center;let n=this.target.x,r=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-i.y,2)+Math.pow(this.target.x-i.x,2))>this.options.radius){const a=Math.atan2(this.target.y-i.y,this.target.x-i.x);n=this.target.x-Math.cos(a)*this.options.radius,r=this.target.y-Math.sin(a)*this.options.radius}else return;const s=n-i.x,o=r-i.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(r-i.y,n-i.x),l=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(l){const h=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);l>h?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*t,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*t,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const u=Math.cos(a)*this.velocity.x,c=Math.sin(a)*this.velocity.y,d=Math.abs(u)>Math.abs(s)?n:i.x+u,f=Math.abs(c)>Math.abs(o)?r:i.y+c;this.parent.moveCenter(d,f),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(r-i.y,n-i.x),l=Math.cos(a)*this.options.speed,h=Math.sin(a)*this.options.speed,u=Math.abs(l)>Math.abs(s)?n:i.x+l,c=Math.abs(h)>Math.abs(o)?r:i.y+h;this.parent.moveCenter(u,c),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(n,r),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}const AB={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class PB extends Oe{constructor(t,i={}){super(t),M(this,"options"),M(this,"reverse"),M(this,"radiusSquared"),M(this,"left"),M(this,"top"),M(this,"right"),M(this,"bottom"),M(this,"horizontal"),M(this,"vertical"),this.options=Object.assign({},AB,i),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const t=this.options.distance;t!==null?(this.left=t,this.top=t,this.right=this.parent.screenWidth-t,this.bottom=this.parent.screenHeight-t):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(t){if(this.paused||t.pointerType!=="mouse"&&t.pointerId!==1||!this.options.allowButtons&&t.buttons!==0)return!1;const i=t.global.x,n=t.global.y;if(this.radiusSquared){const r=this.parent.toScreen(this.parent.center);if(Math.pow(r.x-i,2)+Math.pow(r.y-n,2)>=this.radiusSquared){const s=Math.atan2(r.y-n,r.x-i);this.options.linear?(this.horizontal=Math.round(Math.cos(s))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(s))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(s)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(s)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&i<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&i>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&n<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&n>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const t=this.parent.plugins.get("decelerate",!0);this.horizontal&&t&&!this.options.noDecelerate&&t.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const t=this.parent.plugins.get("decelerate",!0);this.vertical&&t&&!this.options.noDecelerate&&t.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const t=this.parent.center;this.horizontal&&(t.x+=this.horizontal*this.options.speed),this.vertical&&(t.y+=this.vertical*this.options.speed),this.parent.moveCenter(t),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const IB={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class RB extends Oe{constructor(t,i={}){super(t),M(this,"options"),M(this,"active",!1),M(this,"pinching",!1),M(this,"moved",!1),M(this,"lastCenter"),this.options=Object.assign({},IB,i)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(t){if(this.paused||!this.active)return!1;const i=t.global.x,n=t.global.y,r=this.parent.input.touches;if(r.length>=2){const s=r[0],o=r[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===t.pointerId?s.last={x:i,y:n,data:t}:o.id===t.pointerId&&(o.last={x:i,y:n,data:t}),a){let l;const h=new Y(s.last.x+(o.last.x-s.last.x)/2,s.last.y+(o.last.y-s.last.y)/2);this.options.center||(l=this.parent.toLocal(h));let u=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));u=u===0?u=1e-10:u;const c=(1-a/u)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=c),this.isAxisY()&&(this.parent.scale.y+=c),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:h});const d=this.parent.plugins.get("clamp-zoom",!0);if(d&&d.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const f=this.parent.toGlobal(l);this.parent.x+=(h.x-f.x)*this.options.factor,this.parent.y+=(h.y-f.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(h.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(h.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=h,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const MB={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};class kB extends Oe{constructor(t,i,n,r={}){super(t),M(this,"options"),M(this,"ease"),M(this,"x"),M(this,"y"),M(this,"percent"),M(this,"snapping"),M(this,"deltaX"),M(this,"deltaY"),M(this,"startX"),M(this,"startY"),this.options=Object.assign({},MB,r),this.ease=ph(r.ease,"easeInOutSine"),this.x=i,this.y=n,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const t=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-t.x,this.deltaY=this.y-t.y,this.startX=t.x,this.startY=t.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const t=this.parent.plugins.get("decelerate",!0);t&&(t.x||t.y)&&(t.percentChangeX=t.percentChangeY=this.options.friction)}return!1}update(t){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const i=this.snapping;i.time+=t;let n,r,s;const o=this.startX,a=this.startY,l=this.deltaX,h=this.deltaY;if(i.time>this.options.time)n=!0,r=o+l,s=a+h;else{const u=this.ease(i.time,0,1,this.options.time);r=o+l*u,s=a+h*u}this.options.topLeft?this.parent.moveCorner(r,s):this.parent.moveCenter(r,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),n&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const i=this.options.topLeft?this.parent.corner:this.parent.center;(i.x!==this.x||i.y!==this.y)&&this.snapStart()}}}const OB={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class DB extends Oe{constructor(t,i={}){super(t),M(this,"options"),M(this,"ease"),M(this,"xScale"),M(this,"yScale"),M(this,"xIndependent"),M(this,"yIndependent"),M(this,"snapping"),this.options=Object.assign({},OB,i),this.ease=ph(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=t.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=t.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(t.container.scale.x=this.xScale,t.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):i.forceStart&&this.createSnapping()}createSnapping(){const t=this.parent.worldScreenWidth,i=this.parent.worldScreenHeight,n=this.parent.screenWidth/this.xScale,r=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:t,startY:i,deltaX:n-t,deltaY:r-i},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(t){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let i;if(!this.options.center&&!this.options.noMove&&(i=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const n=this.snapping;if(n.time+=t,n.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const r=this.parent.plugins.get("clamp-zoom",!0);r&&r.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(i))}}resume(){this.snapping=null,super.resume()}}const BB={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class NB extends Oe{constructor(t,i={}){super(t),M(this,"options"),M(this,"smoothing"),M(this,"smoothingCenter"),M(this,"smoothingCount"),M(this,"keyIsPressed"),this.options=Object.assign({},BB,i),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(t){window.addEventListener("keydown",i=>{t.includes(i.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",i=>{t.includes(i.code)&&(this.keyIsPressed=!1)})}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const t=this.smoothingCenter,i=this.smoothing;let n;this.options.center||(n=this.parent.toLocal(t)),this.isAxisX()&&(this.parent.scale.x+=i.x),this.isAxisY()&&(this.parent.scale.y+=i.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const r=this.parent.plugins.get("clamp-zoom",!0);if(r&&r.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(n);this.parent.x+=t.x-s.x,this.parent.y+=t.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(t){if(this.paused)return;const i=this.parent.input.getPointerPosition(t),n=-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/200,r=Math.pow(2,(1+this.options.percent)*n);let s;this.options.center||(s=this.parent.toLocal(i)),this.isAxisX()&&(this.parent.scale.x*=r),this.isAxisY()&&(this.parent.scale.y*=r),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=i.x-a.x,this.parent.y+=i.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}wheel(t){if(this.paused||!this.checkKeyPress())return!1;if(t.ctrlKey&&this.options.trackpadPinch)this.pinch(t);else if(this.options.wheelZoom){const i=this.parent.input.getPointerPosition(t),n=(this.options.reverse?-1:1)*-t.deltaY*(t.deltaMode?this.options.lineHeight:1)/500,r=Math.pow(2,(1+this.options.percent)*n);if(this.options.smooth){const s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*r-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*r-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=i}else{let s;this.options.center||(s=this.parent.toLocal(i)),this.isAxisX()&&(this.parent.scale.x*=r),this.isAxisY()&&(this.parent.scale.y*=r),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=i.x-a.x,this.parent.y+=i.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:t,viewport:this.parent})}return!this.parent.options.passiveWheel}}class LB{constructor(t){M(this,"viewport"),M(this,"clickedAvailable"),M(this,"isMouseDown"),M(this,"last"),M(this,"wheelFunction"),M(this,"touches"),this.viewport=t,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new it(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=t=>this.handleWheel(t),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.events.domElement.removeEventListener("wheel",this.wheelFunction)}down(t){if(!(this.viewport.pause||!this.viewport.worldVisible)){if(t.pointerType==="mouse"?this.isMouseDown=!0:this.get(t.pointerId)||this.touches.push({id:t.pointerId,last:null}),this.count()===1){this.last=t.global.clone();const i=this.viewport.plugins.get("decelerate",!0),n=this.viewport.plugins.get("bounce",!0);(!i||!i.isActive())&&(!n||!n.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(t)&&this.viewport.options.stopPropagation&&t.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(t){return Math.abs(t)>=this.viewport.threshold}move(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const i=this.viewport.plugins.move(t);if(this.clickedAvailable&&this.last){const n=t.global.x-this.last.x,r=t.global.y-this.last.y;(this.checkThreshold(n)||this.checkThreshold(r))&&(this.clickedAvailable=!1)}i&&this.viewport.options.stopPropagation&&t.stopPropagation()}up(t){if(this.viewport.pause||!this.viewport.worldVisible)return;t.pointerType==="mouse"&&(this.isMouseDown=!1),t.pointerType!=="mouse"&&this.remove(t.pointerId);const i=this.viewport.plugins.up(t);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:t,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),i&&this.viewport.options.stopPropagation&&t.stopPropagation()}getPointerPosition(t){const i=new Y;return this.viewport.options.events.mapPositionToPoint(i,t.clientX,t.clientY),i}handleWheel(t){if(this.viewport.pause||!this.viewport.worldVisible)return;const i=this.viewport.toLocal(this.getPointerPosition(t));this.viewport.left<=i.x&&i.x<=this.viewport.right&&this.viewport.top<=i.y&&i.y<=this.viewport.bottom&&this.viewport.plugins.wheel(t)&&!this.viewport.options.passiveWheel&&t.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(t){for(const i of this.touches)if(i.id===t)return i;return null}remove(t){for(let i=0;i<this.touches.length;i++)if(this.touches[i].id===t){this.touches.splice(i,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const ms=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class FB{constructor(t){M(this,"plugins"),M(this,"list"),M(this,"viewport"),this.viewport=t,this.list=[],this.plugins={}}add(t,i,n=ms.length){const r=this.plugins[t];r&&r.destroy(),this.plugins[t]=i;const s=ms.indexOf(t);s!==-1&&ms.splice(s,1),ms.splice(n,0,t),this.sort()}get(t,i){var n;return i&&(n=this.plugins[t])!=null&&n.paused?null:this.plugins[t]}update(t){for(const i of this.list)i.update(t)}resize(){for(const t of this.list)t.resize()}reset(){for(const t of this.list)t.reset()}removeAll(){this.list.forEach(t=>{t.destroy()}),this.plugins={},this.sort()}remove(t){var i;this.plugins[t]&&((i=this.plugins[t])==null||i.destroy(),delete this.plugins[t],this.viewport.emit("plugin-remove",t),this.sort())}pause(t){var i;(i=this.plugins[t])==null||i.pause()}resume(t){var i;(i=this.plugins[t])==null||i.resume()}sort(){this.list=[];for(const t of ms)this.plugins[t]&&this.list.push(this.plugins[t])}down(t){let i=!1;for(const n of this.list)n.down(t)&&(i=!0);return i}move(t){let i=!1;for(const n of this.viewport.plugins.list)n.move(t)&&(i=!0);return i}up(t){let i=!1;for(const n of this.list)n.up(t)&&(i=!0);return i}wheel(t){let i=!1;for(const n of this.list)n.wheel(t)&&(i=!0);return i}}const UB={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:te.shared,allowPreserveDragOutside:!1};class zB extends be{constructor(t){super(),M(this,"moving"),M(this,"screenWidth"),M(this,"screenHeight"),M(this,"threshold"),M(this,"input"),M(this,"plugins"),M(this,"zooming"),M(this,"lastViewport"),M(this,"options"),M(this,"_dirty"),M(this,"_forceHitArea"),M(this,"_hitAreaDefault"),M(this,"_pause"),M(this,"tickerFunction"),M(this,"_worldWidth"),M(this,"_worldHeight"),M(this,"_disableOnContextMenu",i=>i.preventDefault()),this.options={...UB,...t},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new LB(this),this.plugins=new FB(this)}destroy(t){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.events.domElement.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(t)}update(t){this.pause||(this.plugins.update(t),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new it(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(t=window.innerWidth,i=window.innerHeight,n,r){this.screenWidth=t,this.screenHeight=i,typeof n<"u"&&(this._worldWidth=n),typeof r<"u"&&(this._worldHeight=r),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(t){this._worldWidth=t,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(t){this._worldHeight=t,this.plugins.resize()}getVisibleBounds(){return new it(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(t,i){return arguments.length===2?this.toLocal(new Y(t,i)):this.toLocal(t)}toScreen(t,i){return arguments.length===2?this.toGlobal(new Y(t,i)):this.toGlobal(t)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new Y(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(t){this.moveCenter(t)}moveCenter(...t){let i,n;typeof t[0]=="number"?(i=t[0],n=t[1]):(i=t[0].x,n=t[0].y);const r=(this.worldScreenWidth/2-i)*this.scale.x,s=(this.worldScreenHeight/2-n)*this.scale.y;return(this.x!==r||this.y!==s)&&(this.position.set(r,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new Y(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(t){this.moveCorner(t)}moveCorner(...t){let i,n;return t.length===1?(i=-t[0].x*this.scale.x,n=-t[0].y*this.scale.y):(i=-t[0]*this.scale.x,n=-t[1]*this.scale.y),(i!==this.x||n!==this.y)&&(this.position.set(i,n),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(t){return this.screenWidth/t}findFitHeight(t){return this.screenHeight/t}findFit(t,i){const n=this.screenWidth/t,r=this.screenHeight/i;return Math.min(n,r)}findCover(t,i){const n=this.screenWidth/t,r=this.screenHeight/i;return Math.max(n,r)}fitWidth(t=this.worldWidth,i,n=!0,r){let s;i&&(s=this.center),this.scale.x=this.screenWidth/t,n&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!r&&o&&o.clamp(),i&&s&&this.moveCenter(s),this}fitHeight(t=this.worldHeight,i,n=!0,r){let s;i&&(s=this.center),this.scale.y=this.screenHeight/t,n&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!r&&o&&o.clamp(),i&&s&&this.moveCenter(s),this}fitWorld(t){let i;t&&(i=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const n=this.plugins.get("clamp-zoom",!0);return n&&n.clamp(),t&&i&&this.moveCenter(i),this}fit(t,i=this.worldWidth,n=this.worldHeight){let r;t&&(r=this.center),this.scale.x=this.screenWidth/i,this.scale.y=this.screenHeight/n,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),t&&r&&this.moveCenter(r),this}setZoom(t,i){let n;i&&(n=this.center),this.scale.set(t);const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),i&&n&&this.moveCenter(n),this}zoomPercent(t,i){return this.setZoom(this.scale.x+this.scale.x*t,i)}zoom(t,i){return this.fitWidth(t+this.worldScreenWidth,i),this}get scaled(){return this.scale.x}set scaled(t){this.setZoom(t,!0)}snapZoom(t){return this.plugins.add("snap-zoom",new DB(this,t)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new Y(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(t){this.x=-t*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(t){this.x=-t*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(t){this.y=-t*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(t){this.y=-t*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(t){this._dirty=t}get forceHitArea(){return this._forceHitArea}set forceHitArea(t){t?(this._forceHitArea=t,this.hitArea=t):(this._forceHitArea=null,this.hitArea=new it(0,0,this.worldWidth,this.worldHeight))}drag(t){return this.plugins.add("drag",new TB(this,t)),this}clamp(t){return this.plugins.add("clamp",new yB(this,t)),this}decelerate(t){return this.plugins.add("decelerate",new bB(this,t)),this}bounce(t){return this.plugins.add("bounce",new gB(this,t)),this}pinch(t){return this.plugins.add("pinch",new RB(this,t)),this}snap(t,i,n){return this.plugins.add("snap",new kB(this,t,i,n)),this}follow(t,i){return this.plugins.add("follow",new CB(this,t,i)),this}wheel(t){return this.plugins.add("wheel",new NB(this,t)),this}animate(t){return this.plugins.add("animate",new pB(this,t)),this}clampZoom(t){return this.plugins.add("clamp-zoom",new xB(this,t)),this}mouseEdges(t){return this.plugins.add("mouse-edges",new PB(this,t)),this}get pause(){return!!this._pause}set pause(t){this._pause=t,this.lastViewport=null,this.moving=!1,this.zooming=!1,t&&this.input.pause()}ensureVisible(t,i,n,r,s){s&&(n>this.worldScreenWidth||r>this.worldScreenHeight)&&(this.fit(!0,n,r),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;t<this.left?(this.left=t,o=!0):t+n>this.right&&(this.right=t+n,o=!0),i<this.top?(this.top=i,o=!0):i+r>this.bottom&&(this.bottom=i+r,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}const fe=(e,t)=>e.levels?t.acquired[e.id]>0:t.selected[e.id],fa=(e,t)=>t.available[e.id],GB=(e,t,i,n)=>{let r=i;return r.available[e.id]&&(e.levels?(r.acquired[e.id]||(r.acquired[e.id]=0),n&&r.acquired[e.id]>0?r.acquired[e.id]--:r.acquired[e.id]<e.levels&&r.acquired[e.id]++):r.selected[e.id]=!r.selected[e.id]),r=$B(t,e,r),r=HB(t,i),r},$B=(e,t,i)=>{const n=r=>{const s=eh(e,{requires:r.id});s&&hi(s,o=>{t.levels?(o.levelsRequired||t.levels)>i.acquired[t.id]&&(i.selected[o.id]=!1,i.acquired[o.id]=0,n(o)):(i.selected[o.id]=!1,i.acquired[o.id]=0,n(o))})};return n(t),i},HB=(e,t)=>(hi(e,i=>{if(i.requires){const n=Pi(e,{id:i.requires});if(n.levels){const r=i.levelsRequired||i.levels,s=t.acquired[n.id];t.available[i.id]=s>=r}else t.available[i.id]=t.selected[i.requires]}}),t),_u=(e,t,i,n)=>{var r;n.next({node:{...e,acquired:t.acquired[e.id],selected:t.selected[e.id],available:t.available[e.id],requiredName:(r=Pi(i,{id:e.requires}))==null?void 0:r.name}})},jB=[{id:"swimming",name:"Swimming",description:e=>`If this unit can move up to ${e.movement?e.movement+3:3} hexes in the water. If the unit's speed is less than ${e.movement?e.movement+3:3}, it can move up to its speed.`,type:"movement",tags:["aquatic"]},{id:"aquatic-combat",name:"Aquatic Attack",description:e=>"Add +1 to any attack made from the water.",type:"passive",tags:["aquatic"]}],WB=[{id:"guardian",name:"Guardian",type:"reaction",description:e=>`As a reaction, can intercept ${e.attacks||1} attack(s) going towards an adjacent ally. You now take that attack - also take 1 damage.`,tags:["defense"]},{id:"deflect",name:"Deflect",type:"reaction",description:e=>`Block 1 ranged attack that is made at you. Declare before the attack is rolled. For magic attacks, deflect on a roll of ${4+e.lowerRange||4} or higher.`,tags:["defense"]},{id:"reactive-armor",name:"Reactive Armor",description:e=>"When an enemy attacks you, gain 1 AC. Lose 1 AC at the start of each turn.",type:"passive",tags:["defense"]},{id:"attentive",name:"Attentive",type:"movement",description:"This unit always musters",tags:["defense"]},{id:"alert",name:"Alert",type:"movement",description:"This unit always musters and can muster 1 adjacent unit (during movement).",replaces:"attentive",tags:["defense"]}],XB=[{id:"flying",name:"Flying",description:`This unit can fly. It now can exist on two different battlefield planes. The ground, and the air level 1. It costs 1 hex of movement to move upward but not downward.

    Additionally, you are immune to environmental effects.`,type:"passive",tags:["flying"]},{id:"advanced-flying",name:"Advanced Flying",description:`This unit can fly. It now can exist on three different battlefield planes. The ground, and the air level 1, and air level 2, and air level 3. It costs 1 hex of movement to move upward but not downward.

    Additionally, you are immune to environmental effects.`,type:"passive",tags:["flying"],replaces:"flying"},{id:"death-bomb",name:"Death Bomb",type:"action",description:e=>"This unit can dive bomb and forcefully smash itself into enemy units. This kills this unit. It does 2 damage to a target's HP.",tags:["undead","flying"]},{id:"swarm",name:"Swarm",type:"action",tags:["flying"],description:e=>"Swarm around an adjacent enemy unit, co-existing in their hex, and blocking ranged attacks against targets other than itself. This unit can now move 3 hexes as a reaction to stay with its swarmed unit, any more movement breaks the swarm. In addition it can choose to be hit by ranged attacks that would pass through its hex."},{id:"strafing-run",name:"Strafing Run",type:"passive",tags:["flying"],description:e=>`As part of movement can make a breath attack against up to ${e.targets?e.targets:1} target(s) (adjacent to each) that you fly over in a straight line. This costs 1 breath attack use and does half breath damage (but full effect). Costs 1 movement to initiate for each targeted hex.`},{id:"dive-bomb",name:"Dive Bomb",type:"passive",tags:["flying"],description:e=>"When this unit moves from a higher elevation to a lower elevation it gains +1 damage for each air level it decends through for its next attack."},{id:"aerial-combat",name:"Aerial Combat",type:"passive",description:e=>"Gains +1 on attacks made against flying units.",tags:["flying"]},{id:"aerial-evasion",name:"Aerial Evasion",type:"passive",description:e=>"Gains +1 to AC while in the air.",tags:["flying","defense"]}],VB=[{id:"smite",name:"Smite",description:e=>`when an attack hits (does damage to HP), you may spend 1 spell slot to make that attack do +${e.dmg?e.dmg+3:3} damage`,type:"bonus action",tags:["holy"]},{id:"guiding-bolt",name:"Guiding Bolt",description:e=>`You hit an enemy with a blast of light, dealing ${e.dmg?e.dmg+1:1} nonabsorbable damage. Next round, allies have +${e.hit?e.hit+1:1} on all attacks/cantrip strikes against this target.`,type:"action",tags:["holy","piercing"]},{id:"death-ward",name:"Death Ward",description:e=>"Place a ward against death on a unit. If that unit is reduced to 0 HP it instead goes to 2 HP. When this happens the spell is used up and you lose concentration on it.",type:"action",tags:["concentration","holy"]},{id:"restoration",name:"Restoration",description:e=>"Heal a unit 3 HP within spell range.",type:"action",tags:["holy"]},{id:"turn-undead",name:"Turn Undead",description:e=>"Deal 1 damage to adjacent undead units and force them on their turn to move at least 1 hex away from you and get no closer for 1 round.",type:"action",tags:["holy"]},{id:"bless",name:"Bless",description:e=>"Buff up an ally within range, granting them +1 on their first attack/cantrip strike of their turn. Target must be in spell range when cast.",type:"action",tags:["holy"]},{id:"spirit-guardians",name:"Spirit Guardians",description:e=>"Call upon spiritual guardians to protect you. You gain 1 AC and adjacent enemies take 1 unabsorbable damage at the start of your turn.",type:"action",tags:["concentration","holy","piercing"]}],YB=[{id:"dash",name:"Dash",type:"action",description:e=>`Move ${e.movement?e.movement+4:4} hexes.`},{id:"dash-expert",name:"Dash Expert",type:"passive",description:e=>"Once per turn, you can replace any one of your attacks with movement up to your speed.",tags:["movement"]},{id:"charge",name:"Charge",type:"movement",description:e=>`If this unit moves 4 hexes in a straight line before becoming adjacent to an enemy they automatically do +${e.dmg?e.dmg+1:1} damage on first melee attack. The movement for the rest of the turn becomes 0. ${e.breakthrough?`

If after a charge, this unit still has remaining movement, it can use that movement to continue on its charge-line through enemy units.`:""}`}],qB=[{id:"knit-flesh",name:"Knit Flesh",description:e=>`Restore ${1+(e.hp||0)} HP to an adjacent undead unit`,type:"action"},{id:"greater-knitting",name:"Greater Knitting",description:e=>`Restore ${1+(e.hp||0)} HP to all adjacent undead units`,type:"action",replaces:"knit-flesh"},{id:"mass-knitting",name:"Mass Knitting",description:e=>`Restore ${1+(e.hp||0)} HP to all undead units within 2 hexes (100m area)`,type:"action",replaces:"greater-knitting"}],Fs=[...VB,...WB,...qB,...XB,...YB,...jB,{id:"defend",name:"Defend",description:"Idk, ask Ed",type:"action"},{id:"basic-attack",name:"Basic Attack",description:e=>`You make 1 melee attack against an adjacent enemy. Roll 1d6${e.dmg?`+${e.dmg}`:" "}and do that much damage.`,type:"action"},{id:"multi-attack",name:"Multi Attack",description:e=>`You make 1 melee attack against an adjacent enemy.

First Attack: 1d6${e.dmg1?`+${e.dmg1}`:" "}.
Second Attack: 1d6${e.dmg2?`+${e.dmg2}`:" "} `,type:"action",replaces:"basic-attack"},{id:"spellcasting",name:"Spellcasting",description:e=>`You can now cast spells and cantrips. Casting spells and cantrips take action to cast and require 1 spell slot of the coresponding school of magic. 
    Cantrips barrage does not cost a spell slot. 
    
    Range: ${e.range?e.range+1:1}
    Contentration Bonus: ${e.concentration||0}`,type:"passive",tags:["magic"]},{id:"cantrip-barrage",name:"Cantrip Barrage",description:"Deal 1d6 damage to an enemy.",type:"action",tags:["magic"]},{id:"versatile",name:"Versatile",description:e=>"You can choose to take actions prior to movement.",type:"passive"},{id:"extra-versatile",name:"Extra Versatile",description:e=>"You can choose to take actions before or after each unit of movement.",type:"passive",replaces:"versatile"}];cx.load("https://fonts.googleapis.com/css2?family=Inter:wght@100;400;500;700&display=swap");function KB(e,t,i={},n,r,s,o){const a=Ls(t,w=>({...w})),l=[];let h={selected:{},acquired:{},available:{}};function u(){h={selected:{},acquired:{},available:{}},hi(a,w=>{h.selected[w.id]=i[w.id]===!0,h.acquired[w.id]=a2(i[w.id])?i[w.id]:!1}),hi(a,w=>{if(w.requires){const S=Pi(a,{id:w.requires});h.available[w.id]=!w.requires||fe(S,h),l.push({source:w.id,target:S.id})}else h.available[w.id]=!0}),n.next({nodes:Ls(a,w=>({...w,selected:fe(w,h),acquired:h.acquired[w.id]}))})}u();const c=e.getBoundingClientRect(),d=c.height,f=c.width;e.innerHTML="";function p(w,S){const A=fe(S,h);h=GB(S,a,h,w.nativeEvent.shiftKey),n.next({nodes:Ls(a,k=>({...k,selected:fe(k,h),acquired:h.acquired[k.id]}))}),_u(S,h,a,s);const P=fe(S,h)!==A;T(P?S.id:null),b(),setTimeout(()=>{})}const y=new Qf({width:f,height:d,antialias:!0,autoDensity:!0,resizeTo:window,backgroundColor:"#0a0a0f",backgroundAlpha:1});e.appendChild(y.view);const _=new zB({screenWidth:f,screenHeight:d,worldWidth:f*4,worldHeight:d*4,passiveWheel:!1,events:y.renderer.plugins.interaction});y.stage.addChild(_),_.drag().pinch().wheel().decelerate().clampZoom({minWidth:f/4,minHeight:d/4});const m=HP(a).force("link",Ym(l).strength(w=>fe(w.target,h)?.8:.7).id(w=>w.id).distance(w=>fe(w.source,h)?20:30)).force("charge",Km().strength(-600)).force("center",jm(f/4,d/4)).force("collision",Xm().radius(w=>w.radius).iterations(12)).velocityDecay(.6);o.subscribe({next:w=>{w&&(m.nodes(a).force("link",Ym(l).strength(S=>fe(S.target,h)?w.f2*.025:w.f2*.01).id(S=>S.id).distance(S=>fe(S.source,h)?w.f1+5:w.f1+10)).force("charge",Km().strength(-(w.f3*6))).force("center",jm(f/4,d/4)).force("collision",Xm().radius(S=>w.f3).iterations(12)).velocityDecay(w.f4*.01),m.alpha(1).restart())}});let g=new Xr;_.addChild(g),a.forEach(w=>{fa(w,h);const S=p.bind(w);let{name:A,description:P}=w;w.providedAbilities&&Pi(Fs,{id:w.providedAbilities[0].id});let k=!1;w.gfx=new Xr,w.gfx.on("touchstart",I=>{k=!0,_u(w,h,a,s),setTimeout(()=>{k&&p(I,w)},100)}),w.gfx.on("touchend",I=>{k=!1}),w.gfx.on("click",I=>S(I,w)),_.addChild(w.gfx),w.gfx.on("mouseover",I=>{r.next({show:!0,x:I.data.originalEvent.pageX,y:I.data.originalEvent.pageY,node:w}),_u(w,h,a,s)});const R=new fh(A,{fontFamily:"Inter",fontSize:12,fill:"#fff",align:"center"});R.anchor.set(.5,-.75),R.resolution=12,w.gfx.addChild(R)}),T();function v(w){return typeof w=="string"?parseInt(w.replace("#",""),16):0}function x(w){return fa(w,h)?fe(w,h)?v(w.colors.selected):v(w.colors.inactive):v(w.colors.unavailable)}function b(){for(let w=g.children.length-1;w>=0;w--)g.children[w].destroy();g.clear(),g.removeChildren(),g.alpha=.8,l.forEach(w=>{let{source:S,target:A,number:P}=w,k=10198691,R=1;A.id&&(k=x(S),R=fe(A,h)&&fe(S,h)?2:.5),g.lineStyle(R,k),g.moveTo(S.x,S.y),g.lineTo(A.x,A.y)}),g.endFill()}function T(w){a.forEach(S=>{const A=fe(S,h);fa(S,h),S.gfx.clear();let P=S.cost||1;if(S.gfx.cursor=fa(S,h)?"pointer":"default",!w||S.id!==w||S.levels)if(S.levels){const k=S.levels*14,R=h.acquired[S.id];S.gfx.clear(),S.gfx.beginFill(x(S)),S.gfx.drawShape(new ah(-12,-6,k,16,4)),S.gfx.endFill(),S.gfx.beginFill(16777215),Mf(R,I=>{S.gfx.drawCircle(-4+I*12,2,4)}),S.gfx.endFill(),S.gfx.hitArea=new it(-10,-6,k,16)}else{let k=A?P*2+6:P*2+2;S.gfx.beginFill(x(S)),S.gfx.drawCircle(0,0,k),S.gfx.hitArea=new oh(0,0,k+10),S.gfx.endFill()}else if(S.id===w){const k=Pi(a,{id:w});let R=A?P*2+6:P*2+2,I=A?P*2+2:P*2+6,J=0;const et=setInterval(()=>{J++,A?I+=J*.4:I-=J*.4,k.gfx.clear(),k.gfx.beginFill(x(k)),k.gfx.drawCircle(0,0,I),k.gfx.endFill(),A?I>=R&&clearInterval(et):I<=R&&clearInterval(et)},5)}S.gfx.interactive=!0})}const E=()=>{a.forEach(w=>{let{x:S,y:A,gfx:P}=w;P.position=new Y(S,A)}),b()};return m.on("tick",E),{destroy:()=>{m.stop(),a.forEach(w=>{w.gfx.clear()}),g.clear()}}}const ZB="_container_1up64_1",QB="_node_1up64_15",JB="_tooltip_1up64_19",tN="_contextMenu_1up64_32",eN="_menuEntry_1up64_37",iN={container:ZB,node:QB,tooltip:JB,contextMenu:tN,menuEntry:eN};var md=function(e,t){return md=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(i,n){i.__proto__=n}||function(i,n){for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(i[r]=n[r])},md(e,t)};function mh(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");md(e,t);function i(){this.constructor=e}e.prototype=t===null?Object.create(t):(i.prototype=t.prototype,new i)}function gd(e){var t=typeof Symbol=="function"&&Symbol.iterator,i=t&&e[t],n=0;if(i)return i.call(e);if(e&&typeof e.length=="number")return{next:function(){return e&&n>=e.length&&(e=void 0),{value:e&&e[n++],done:!e}}};throw new TypeError(t?"Object is not iterable.":"Symbol.iterator is not defined.")}function Il(e,t){var i=typeof Symbol=="function"&&e[Symbol.iterator];if(!i)return e;var n=i.call(e),r,s=[],o;try{for(;(t===void 0||t-- >0)&&!(r=n.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(i=n.return)&&i.call(n)}finally{if(o)throw o.error}}return s}function Rl(e,t,i){if(i||arguments.length===2)for(var n=0,r=t.length,s;n<r;n++)(s||!(n in t))&&(s||(s=Array.prototype.slice.call(t,0,n)),s[n]=t[n]);return e.concat(s||Array.prototype.slice.call(t))}function Ri(e){return typeof e=="function"}function Cx(e){var t=function(n){Error.call(n),n.stack=new Error().stack},i=e(t);return i.prototype=Object.create(Error.prototype),i.prototype.constructor=i,i}var xu=Cx(function(e){return function(i){e(this),this.message=i?i.length+` errors occurred during unsubscription:
`+i.map(function(n,r){return r+1+") "+n.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=i}});function vd(e,t){if(e){var i=e.indexOf(t);0<=i&&e.splice(i,1)}}var gh=function(){function e(t){this.initialTeardown=t,this.closed=!1,this._parentage=null,this._finalizers=null}return e.prototype.unsubscribe=function(){var t,i,n,r,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=gd(o),l=a.next();!l.done;l=a.next()){var h=l.value;h.remove(this)}}catch(y){t={error:y}}finally{try{l&&!l.done&&(i=a.return)&&i.call(a)}finally{if(t)throw t.error}}else o.remove(this);var u=this.initialTeardown;if(Ri(u))try{u()}catch(y){s=y instanceof xu?y.errors:[y]}var c=this._finalizers;if(c){this._finalizers=null;try{for(var d=gd(c),f=d.next();!f.done;f=d.next()){var p=f.value;try{ev(p)}catch(y){s=s??[],y instanceof xu?s=Rl(Rl([],Il(s)),Il(y.errors)):s.push(y)}}}catch(y){n={error:y}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(n)throw n.error}}}if(s)throw new xu(s)}},e.prototype.add=function(t){var i;if(t&&t!==this)if(this.closed)ev(t);else{if(t instanceof e){if(t.closed||t._hasParent(this))return;t._addParent(this)}(this._finalizers=(i=this._finalizers)!==null&&i!==void 0?i:[]).push(t)}},e.prototype._hasParent=function(t){var i=this._parentage;return i===t||Array.isArray(i)&&i.includes(t)},e.prototype._addParent=function(t){var i=this._parentage;this._parentage=Array.isArray(i)?(i.push(t),i):i?[i,t]:t},e.prototype._removeParent=function(t){var i=this._parentage;i===t?this._parentage=null:Array.isArray(i)&&vd(i,t)},e.prototype.remove=function(t){var i=this._finalizers;i&&vd(i,t),t instanceof e&&t._removeParent(this)},e.EMPTY=function(){var t=new e;return t.closed=!0,t}(),e}(),Ax=gh.EMPTY;function Px(e){return e instanceof gh||e&&"closed"in e&&Ri(e.remove)&&Ri(e.add)&&Ri(e.unsubscribe)}function ev(e){Ri(e)?e():e.unsubscribe()}var Ix={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},yd={setTimeout:function(e,t){for(var i=[],n=2;n<arguments.length;n++)i[n-2]=arguments[n];var r=yd.delegate;return r!=null&&r.setTimeout?r.setTimeout.apply(r,Rl([e,t],Il(i))):setTimeout.apply(void 0,Rl([e,t],Il(i)))},clearTimeout:function(e){var t=yd.delegate;return((t==null?void 0:t.clearTimeout)||clearTimeout)(e)},delegate:void 0};function nN(e){yd.setTimeout(function(){throw e})}function iv(){}function Fa(e){e()}var Rx=function(e){mh(t,e);function t(i){var n=e.call(this)||this;return n.isStopped=!1,i?(n.destination=i,Px(i)&&i.add(n)):n.destination=aN,n}return t.create=function(i,n,r){return new _d(i,n,r)},t.prototype.next=function(i){this.isStopped||this._next(i)},t.prototype.error=function(i){this.isStopped||(this.isStopped=!0,this._error(i))},t.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},t.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,e.prototype.unsubscribe.call(this),this.destination=null)},t.prototype._next=function(i){this.destination.next(i)},t.prototype._error=function(i){try{this.destination.error(i)}finally{this.unsubscribe()}},t.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},t}(gh),rN=Function.prototype.bind;function wu(e,t){return rN.call(e,t)}var sN=function(){function e(t){this.partialObserver=t}return e.prototype.next=function(t){var i=this.partialObserver;if(i.next)try{i.next(t)}catch(n){pa(n)}},e.prototype.error=function(t){var i=this.partialObserver;if(i.error)try{i.error(t)}catch(n){pa(n)}else pa(t)},e.prototype.complete=function(){var t=this.partialObserver;if(t.complete)try{t.complete()}catch(i){pa(i)}},e}(),_d=function(e){mh(t,e);function t(i,n,r){var s=e.call(this)||this,o;if(Ri(i)||!i)o={next:i??void 0,error:n??void 0,complete:r??void 0};else{var a;s&&Ix.useDeprecatedNextContext?(a=Object.create(i),a.unsubscribe=function(){return s.unsubscribe()},o={next:i.next&&wu(i.next,a),error:i.error&&wu(i.error,a),complete:i.complete&&wu(i.complete,a)}):o=i}return s.destination=new sN(o),s}return t}(Rx);function pa(e){nN(e)}function oN(e){throw e}var aN={closed:!0,next:iv,error:oN,complete:iv},lN=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function hN(e){return e}function uN(e){return e.length===0?hN:e.length===1?e[0]:function(i){return e.reduce(function(n,r){return r(n)},i)}}var nv=function(){function e(t){t&&(this._subscribe=t)}return e.prototype.lift=function(t){var i=new e;return i.source=this,i.operator=t,i},e.prototype.subscribe=function(t,i,n){var r=this,s=dN(t)?t:new _d(t,i,n);return Fa(function(){var o=r,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?r._subscribe(s):r._trySubscribe(s))}),s},e.prototype._trySubscribe=function(t){try{return this._subscribe(t)}catch(i){t.error(i)}},e.prototype.forEach=function(t,i){var n=this;return i=rv(i),new i(function(r,s){var o=new _d({next:function(a){try{t(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});n.subscribe(o)})},e.prototype._subscribe=function(t){var i;return(i=this.source)===null||i===void 0?void 0:i.subscribe(t)},e.prototype[lN]=function(){return this},e.prototype.pipe=function(){for(var t=[],i=0;i<arguments.length;i++)t[i]=arguments[i];return uN(t)(this)},e.prototype.toPromise=function(t){var i=this;return t=rv(t),new t(function(n,r){var s;i.subscribe(function(o){return s=o},function(o){return r(o)},function(){return n(s)})})},e.create=function(t){return new e(t)},e}();function rv(e){var t;return(t=e??Ix.Promise)!==null&&t!==void 0?t:Promise}function cN(e){return e&&Ri(e.next)&&Ri(e.error)&&Ri(e.complete)}function dN(e){return e&&e instanceof Rx||cN(e)&&Px(e)}var fN=Cx(function(e){return function(){e(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Us=function(e){mh(t,e);function t(){var i=e.call(this)||this;return i.closed=!1,i.currentObservers=null,i.observers=[],i.isStopped=!1,i.hasError=!1,i.thrownError=null,i}return t.prototype.lift=function(i){var n=new sv(this,this);return n.operator=i,n},t.prototype._throwIfClosed=function(){if(this.closed)throw new fN},t.prototype.next=function(i){var n=this;Fa(function(){var r,s;if(n._throwIfClosed(),!n.isStopped){n.currentObservers||(n.currentObservers=Array.from(n.observers));try{for(var o=gd(n.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(i)}}catch(h){r={error:h}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}}})},t.prototype.error=function(i){var n=this;Fa(function(){if(n._throwIfClosed(),!n.isStopped){n.hasError=n.isStopped=!0,n.thrownError=i;for(var r=n.observers;r.length;)r.shift().error(i)}})},t.prototype.complete=function(){var i=this;Fa(function(){if(i._throwIfClosed(),!i.isStopped){i.isStopped=!0;for(var n=i.observers;n.length;)n.shift().complete()}})},t.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(t.prototype,"observed",{get:function(){var i;return((i=this.observers)===null||i===void 0?void 0:i.length)>0},enumerable:!1,configurable:!0}),t.prototype._trySubscribe=function(i){return this._throwIfClosed(),e.prototype._trySubscribe.call(this,i)},t.prototype._subscribe=function(i){return this._throwIfClosed(),this._checkFinalizedStatuses(i),this._innerSubscribe(i)},t.prototype._innerSubscribe=function(i){var n=this,r=this,s=r.hasError,o=r.isStopped,a=r.observers;return s||o?Ax:(this.currentObservers=null,a.push(i),new gh(function(){n.currentObservers=null,vd(a,i)}))},t.prototype._checkFinalizedStatuses=function(i){var n=this,r=n.hasError,s=n.thrownError,o=n.isStopped;r?i.error(s):o&&i.complete()},t.prototype.asObservable=function(){var i=new nv;return i.source=this,i},t.create=function(i,n){return new sv(i,n)},t}(nv),sv=function(e){mh(t,e);function t(i,n){var r=e.call(this)||this;return r.destination=i,r.source=n,r}return t.prototype.next=function(i){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.next)===null||r===void 0||r.call(n,i)},t.prototype.error=function(i){var n,r;(r=(n=this.destination)===null||n===void 0?void 0:n.error)===null||r===void 0||r.call(n,i)},t.prototype.complete=function(){var i,n;(n=(i=this.destination)===null||i===void 0?void 0:i.complete)===null||n===void 0||n.call(i)},t.prototype._subscribe=function(i){var n,r;return(r=(n=this.source)===null||n===void 0?void 0:n.subscribe(i))!==null&&r!==void 0?r:Ax},t}(Us);const ov=new Us;function pN({trees:e,buildData:t,force:i,nodeSelectionUpdated:n,tooltipUpdated:r,infoUpdated:s}){const o=Q.useRef(null),a=new Us,l=new Us,h=new Us;return a.subscribe({next:u=>{n(u)}}),l.subscribe({next:u=>{r(u)}}),h.subscribe({next:u=>{s(u)}}),Z.useEffect(()=>{ov.next(i)},[i]),Q.useEffect(()=>{let u;if(o.current){const{destroy:c}=KB(o.current,e,t,a,l,h,ov);u=c}return u},[e,t]),B("div",{ref:o,className:iN.container})}const mN=e=>{const t={movement:0,hp:0,armor:0,abilities:{},pointsInvested:0,exportableBuild:{}},i=(o,a,l,h)=>{if(!Vh(h))t[a]=h;else if(o.levels){const u=o.acquired||0;l=l||0,t[a]+=l*u}else t[a]+=l},n=(o,a)=>{const l=Pi(Fs,{id:o});Vh(t.abilities[o])&&(t.abilities[o]=UC(l),t.abilities[o].modifiers={}),t.abilities[o].learned=t.abilities[o].learned||a},r=o=>{const a=Pi(Fs,{id:o});a&&(n(a.id),t.abilities[o].replaced=!0)},s=(o,a,l={},h)=>{const u=Pi(Fs,{id:o});n(o,a),u!=null&&u.replaces&&t.abilities[o].learned&&r(u==null?void 0:u.replaces),l&&hi(Object.keys(l),c=>{let d=l[c];d==="levels"?d=h.acquired:h.levels&&(d=h.acquired*d),Vh(t.abilities[o].modifiers[c])&&(t.abilities[o].modifiers[c]=0),t.abilities[o].modifiers[c]+=d})};return hi(e,o=>{if(o.levels){const a=o.acquired||0;t.exportableBuild[o.id]=o.acquired||0,o.levelCost?Array.isArray(o.levelCost)?Mf(a,l=>{t.pointsInvested+=o.levelCost[l]}):t.pointsInvested+=a*o.levelCost:t.pointsInvested+=o.acquired||0}else t.exportableBuild[o.id]=!0,t.pointsInvested+=o.cost||1;o.providedStats&&hi(o.providedStats,a=>{i(o,a.id,a.modifier,a.set)}),o.providedAbilities&&hi(o.providedAbilities,a=>{s(a.id,a.gain,a.modifiers,o)})}),t};function gN({info:e}){var r,s,o,a,l,h,u,c,d,f;const t=Ls((r=e.node)==null?void 0:r.providedAbilities,p=>({...Pi(Fs,{id:p.id}),modifiers:{}}));let i=(o=(s=e.node)==null?void 0:s.colors)==null?void 0:o.selected;Q.useEffect(()=>{var p,y;i=(y=(p=e.node)==null?void 0:p.colors)==null?void 0:y.selected},[e]);const n=(a=e.node)!=null&&a.levels?B("span",{className:"cost",children:Mf((l=e.node)==null?void 0:l.levels,p=>{var y,_;return B("span",{className:"level-points",style:{background:e.node.acquired>p?i:"#666"},children:(_=(y=e.node)==null?void 0:y.levelCost)!=null&&_.length?e.node.levelCost[p]:e.node.levelCost})})}):B("span",{className:"cost",children:B("span",{className:"level-points",style:{background:(h=e.node)!=null&&h.selected?i:"#666"},children:((u=e.node)==null?void 0:u.cost)>1?(c=e.node)==null?void 0:c.cost:""})});return e.node?st("div",{className:"info-panel",children:[n,B("div",{className:"title",children:(d=e.node)==null?void 0:d.name}),B("div",{className:"divider",style:{backgroundColor:i}}),e.node.available?null:st("div",{className:"requires",children:["Requires"," ",st("span",{className:"skill",children:[e.node.requiredName," ",e.node.levelsRequired?st("span",{children:["(",e.node.levelsRequired,")"]}):null]})]}),B("div",{className:"info-description",children:(f=e.node)==null?void 0:f.description}),t.length>0&&st("div",{className:"abilities",children:[B("div",{className:"title",children:"Related Abilities:"}),Object.keys(t).map(p=>B(J0,{ability:t[p]}))]})]}):B("div",{className:"info-panel",children:"Select a Node"})}function vN({dragon:e,importAttempted:t}){const[i,n]=Z.useState(""),[r,s]=Z.useState({opacity:0});return st("div",{className:"code-panel",children:[st("div",{className:"import",children:[B("textarea",{spellCheck:!1,rows:8,onChange:h=>{n(h.target.value)},placeholder:"Paste exported build here"}),st("button",{className:"attached",onClick:h=>{t(i)},children:["Import Build ",B(q2,{})]})]}),st("div",{className:"export",children:[st("button",{onClick:h=>{navigator.clipboard.writeText(JSON.stringify(e.exportableBuild)),s({opacity:1}),setTimeout(()=>{s({opacity:0})},2e3)},children:["Copy Current Build ",B(X2,{})]}),B("div",{style:r,children:"Text Copied to Clipboard"})]})]})}function av({itemSelected:e}){return st("div",{className:"right-menu",children:[B("button",{type:"button",onClick:r=>e(r,"sheet"),children:B(S2,{})}),B("button",{type:"button",onClick:r=>e(r,"code"),children:B(H2,{})}),B("button",{type:"button",onClick:r=>e(r,"help"),children:B(Q2,{})})]})}function yN({children:e,itemSelected:t,title:i}){const[n,r]=Z.useState(!1),[s,o]=Z.useState(!1),[a,l]=Z.useState(null);let h;const u=(d,f)=>{(f===a||!n)&&r(!n),l(f),t(f)},c=d=>{o(!s)};return h=s?B(z2,{}):B(L2,{}),n?st("div",{className:"sidebar-right expanded",children:[st("div",{className:s?"sidebar-right-panel full":"sidebar-right-panel partial",children:[st("div",{onClick:c,className:"sidebar-right-panel-heading",children:[B("button",{className:"expander",children:h}),i]}),B("div",{className:"sidebar-right-panel-content",children:e})]}),B(av,{itemSelected:u})]}):B("div",{className:"sidebar-right",children:B(av,{itemSelected:u})})}function lv({itemSelected:e}){return st("div",{className:"left-menu",children:[B("button",{type:"button",onClick:n=>e(n,"info"),children:B(eP,{})}),B("button",{type:"button",onClick:n=>e(n,"settings"),children:B(rP,{})})]})}function _N({children:e,itemSelected:t,expanded:i}){const[n,r]=Z.useState(!0);Z.useState(!1);const[s,o]=Z.useState(null),a=(l,h)=>{(h===s||!n)&&r(!n),o(h),t(h)};return n?st("div",{className:"sidebar-left",children:[B(lv,{itemSelected:a}),B("div",{className:"sidebar-left-panel",children:e})]}):B("div",{className:"sidebar-left",children:B(lv,{itemSelected:a})})}function xd(e,t){return xd=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(n,r){return n.__proto__=r,n},xd(e,t)}function xN(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,xd(e,t)}function bu(e){return e&&e.stopPropagation&&e.stopPropagation(),e&&e.preventDefault&&e.preventDefault(),!1}function Eu(e){return e==null?[]:Array.isArray(e)?e.slice():[e]}function ma(e){return e!==null&&e.length===1?e[0]:e.slice()}function ga(e){Object.keys(e).forEach(t=>{typeof document<"u"&&document.addEventListener(t,e[t],!1)})}function _n(e,t){return wd(function(i,n){let r=i;return r<=n.min&&(r=n.min),r>=n.max&&(r=n.max),r}(e,t),t)}function wd(e,t){const i=(e-t.min)%t.step;let n=e-i;return 2*Math.abs(i)>=t.step&&(n+=i>0?t.step:-t.step),parseFloat(n.toFixed(5))}let bd=function(e){function t(n){var r;(r=e.call(this,n)||this).onKeyUp=()=>{r.onEnd()},r.onMouseUp=()=>{r.onEnd(r.getMouseEventMap())},r.onTouchEnd=()=>{r.onEnd(r.getTouchEventMap())},r.onBlur=()=>{r.setState({index:-1},r.onEnd(r.getKeyDownEventMap()))},r.onMouseMove=a=>{r.setState({pending:!0});const l=r.getMousePosition(a),h=r.getDiffPosition(l[0]),u=r.getValueFromPosition(h);r.move(u)},r.onTouchMove=a=>{if(a.touches.length>1)return;r.setState({pending:!0});const l=r.getTouchPosition(a);if(r.isScrolling===void 0){const c=l[0]-r.startPosition[0],d=l[1]-r.startPosition[1];r.isScrolling=Math.abs(d)>Math.abs(c)}if(r.isScrolling)return void r.setState({index:-1});const h=r.getDiffPosition(l[0]),u=r.getValueFromPosition(h);r.move(u)},r.onKeyDown=a=>{if(!(a.ctrlKey||a.shiftKey||a.altKey||a.metaKey))switch(r.setState({pending:!0}),a.key){case"ArrowLeft":case"ArrowDown":case"Left":case"Down":a.preventDefault(),r.moveDownByStep();break;case"ArrowRight":case"ArrowUp":case"Right":case"Up":a.preventDefault(),r.moveUpByStep();break;case"Home":a.preventDefault(),r.move(r.props.min);break;case"End":a.preventDefault(),r.move(r.props.max);break;case"PageDown":a.preventDefault(),r.moveDownByStep(r.props.pageFn(r.props.step));break;case"PageUp":a.preventDefault(),r.moveUpByStep(r.props.pageFn(r.props.step))}},r.onSliderMouseDown=a=>{if(!r.props.disabled&&a.button!==2){if(r.setState({pending:!0}),!r.props.snapDragDisabled){const l=r.getMousePosition(a);r.forceValueFromPosition(l[0],h=>{r.start(h,l[0]),ga(r.getMouseEventMap())})}bu(a)}},r.onSliderClick=a=>{if(!r.props.disabled&&r.props.onSliderClick&&!r.hasMoved){const l=r.getMousePosition(a),h=_n(r.calcValue(r.calcOffsetFromPosition(l[0])),r.props);r.props.onSliderClick(h)}},r.createOnKeyDown=a=>l=>{r.props.disabled||(r.start(a),ga(r.getKeyDownEventMap()),bu(l))},r.createOnMouseDown=a=>l=>{if(r.props.disabled||l.button===2)return;r.setState({pending:!0});const h=r.getMousePosition(l);r.start(a,h[0]),ga(r.getMouseEventMap()),bu(l)},r.createOnTouchStart=a=>l=>{if(r.props.disabled||l.touches.length>1)return;r.setState({pending:!0});const h=r.getTouchPosition(l);r.startPosition=h,r.isScrolling=void 0,r.start(a,h[0]),ga(r.getTouchEventMap()),function(u){u.stopPropagation&&u.stopPropagation()}(l)},r.handleResize=()=>{const a=window.setTimeout(()=>{r.pendingResizeTimeouts.shift(),r.resize()},0);r.pendingResizeTimeouts.push(a)},r.renderThumb=(a,l)=>{const h=r.props.thumbClassName+" "+r.props.thumbClassName+"-"+l+" "+(r.state.index===l?r.props.thumbActiveClassName:""),u={ref:d=>{r["thumb"+l]=d},key:r.props.thumbClassName+"-"+l,className:h,style:a,onMouseDown:r.createOnMouseDown(l),onTouchStart:r.createOnTouchStart(l),onFocus:r.createOnKeyDown(l),tabIndex:0,role:"slider","aria-orientation":r.props.orientation,"aria-valuenow":r.state.value[l],"aria-valuemin":r.props.min,"aria-valuemax":r.props.max,"aria-label":Array.isArray(r.props.ariaLabel)?r.props.ariaLabel[l]:r.props.ariaLabel,"aria-labelledby":Array.isArray(r.props.ariaLabelledby)?r.props.ariaLabelledby[l]:r.props.ariaLabelledby},c={index:l,value:ma(r.state.value),valueNow:r.state.value[l]};return r.props.ariaValuetext&&(u["aria-valuetext"]=typeof r.props.ariaValuetext=="string"?r.props.ariaValuetext:r.props.ariaValuetext(c)),r.props.renderThumb(u,c)},r.renderTrack=(a,l,h)=>{const u={key:r.props.trackClassName+"-"+a,className:r.props.trackClassName+" "+r.props.trackClassName+"-"+a,style:r.buildTrackStyle(l,r.state.upperBound-h)},c={index:a,value:ma(r.state.value)};return r.props.renderTrack(u,c)};let s=Eu(n.value);s.length||(s=Eu(n.defaultValue)),r.pendingResizeTimeouts=[];const o=[];for(let a=0;a<s.length;a+=1)s[a]=_n(s[a],n),o.push(a);return r.resizeObserver=null,r.resizeElementRef=Q.createRef(),r.state={index:-1,upperBound:0,sliderLength:0,value:s,zIndices:o},r}xN(t,e);var i=t.prototype;return i.componentDidMount=function(){typeof window<"u"&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.resizeElementRef.current),this.resize())},t.getDerivedStateFromProps=function(n,r){const s=Eu(n.value);return s.length?r.pending?null:{value:s.map(o=>_n(o,n))}:null},i.componentDidUpdate=function(){this.state.upperBound===0&&this.resize()},i.componentWillUnmount=function(){this.clearPendingResizeTimeouts(),this.resizeObserver&&this.resizeObserver.disconnect()},i.onEnd=function(n){n&&function(r){Object.keys(r).forEach(s=>{typeof document<"u"&&document.removeEventListener(s,r[s],!1)})}(n),this.hasMoved&&this.fireChangeEvent("onAfterChange"),this.setState({pending:!1}),this.hasMoved=!1},i.getValue=function(){return ma(this.state.value)},i.getClosestIndex=function(n){let r=Number.MAX_VALUE,s=-1;const{value:o}=this.state,a=o.length;for(let l=0;l<a;l+=1){const h=this.calcOffset(o[l]),u=Math.abs(n-h);u<r&&(r=u,s=l)}return s},i.getMousePosition=function(n){return[n["page"+this.axisKey()],n["page"+this.orthogonalAxisKey()]]},i.getTouchPosition=function(n){const r=n.touches[0];return[r["page"+this.axisKey()],r["page"+this.orthogonalAxisKey()]]},i.getKeyDownEventMap=function(){return{keydown:this.onKeyDown,keyup:this.onKeyUp,focusout:this.onBlur}},i.getMouseEventMap=function(){return{mousemove:this.onMouseMove,mouseup:this.onMouseUp}},i.getTouchEventMap=function(){return{touchmove:this.onTouchMove,touchend:this.onTouchEnd}},i.getValueFromPosition=function(n){const r=n/(this.state.sliderLength-this.state.thumbSize)*(this.props.max-this.props.min);return _n(this.state.startValue+r,this.props)},i.getDiffPosition=function(n){let r=n-this.state.startPosition;return this.props.invert&&(r*=-1),r},i.resize=function(){const{slider:n,thumb0:r}=this;if(!n||!r)return;const s=this.sizeKey(),o=n.getBoundingClientRect(),a=n[s],l=o[this.posMaxKey()],h=o[this.posMinKey()],u=r.getBoundingClientRect()[s.replace("client","").toLowerCase()],c=a-u,d=Math.abs(l-h);this.state.upperBound===c&&this.state.sliderLength===d&&this.state.thumbSize===u||this.setState({upperBound:c,sliderLength:d,thumbSize:u})},i.calcOffset=function(n){const r=this.props.max-this.props.min;return r===0?0:(n-this.props.min)/r*this.state.upperBound},i.calcValue=function(n){return n/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},i.calcOffsetFromPosition=function(n){const{slider:r}=this,s=r.getBoundingClientRect(),o=s[this.posMaxKey()],a=s[this.posMinKey()];let l=n-(window["page"+this.axisKey()+"Offset"]+(this.props.invert?o:a));return this.props.invert&&(l=this.state.sliderLength-l),l-=this.state.thumbSize/2,l},i.forceValueFromPosition=function(n,r){const s=this.calcOffsetFromPosition(n),o=this.getClosestIndex(s),a=_n(this.calcValue(s),this.props),l=this.state.value.slice();l[o]=a;for(let h=0;h<l.length-1;h+=1)if(l[h+1]-l[h]<this.props.minDistance)return;this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0,this.setState({value:l},()=>{r(o),this.fireChangeEvent("onChange")})},i.clearPendingResizeTimeouts=function(){do{const n=this.pendingResizeTimeouts.shift();clearTimeout(n)}while(this.pendingResizeTimeouts.length)},i.start=function(n,r){const s=this["thumb"+n];s&&s.focus();const{zIndices:o}=this.state;o.splice(o.indexOf(n),1),o.push(n),this.setState(a=>({startValue:a.value[n],startPosition:r!==void 0?r:a.startPosition,index:n,zIndices:o}))},i.moveUpByStep=function(n){n===void 0&&(n=this.props.step);const r=_n(this.state.value[this.state.index]+n,this.props);this.move(Math.min(r,this.props.max))},i.moveDownByStep=function(n){n===void 0&&(n=this.props.step);const r=_n(this.state.value[this.state.index]-n,this.props);this.move(Math.max(r,this.props.min))},i.move=function(n){const{index:r,value:s}=this.state,{length:o}=s,a=s[r];if(n===a)return;this.hasMoved||this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0;const{pearling:l,max:h,min:u,minDistance:c}=this.props;if(!l){if(r>0){const d=s[r-1];n<d+c&&(n=d+c)}if(r<o-1){const d=s[r+1];n>d-c&&(n=d-c)}}s[r]=n,l&&o>1&&(n>a?(this.pushSucceeding(s,c,r),function(d,f,p,y){for(let _=0;_<d;_+=1){const m=y-_*p;f[d-1-_]>m&&(f[d-1-_]=m)}}(o,s,c,h)):n<a&&(this.pushPreceding(s,c,r),function(d,f,p,y){for(let _=0;_<d;_+=1){const m=y+_*p;f[_]<m&&(f[_]=m)}}(o,s,c,u))),this.setState({value:s},this.fireChangeEvent.bind(this,"onChange"))},i.pushSucceeding=function(n,r,s){let o,a;for(o=s,a=n[o]+r;n[o+1]!==null&&a>n[o+1];o+=1,a=n[o]+r)n[o+1]=wd(a,this.props)},i.pushPreceding=function(n,r,s){for(let o=s,a=n[o]-r;n[o-1]!==null&&a<n[o-1];o-=1,a=n[o]-r)n[o-1]=wd(a,this.props)},i.axisKey=function(){return this.props.orientation==="vertical"?"Y":"X"},i.orthogonalAxisKey=function(){return this.props.orientation==="vertical"?"X":"Y"},i.posMinKey=function(){return this.props.orientation==="vertical"?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},i.posMaxKey=function(){return this.props.orientation==="vertical"?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},i.sizeKey=function(){return this.props.orientation==="vertical"?"clientHeight":"clientWidth"},i.fireChangeEvent=function(n){this.props[n]&&this.props[n](ma(this.state.value),this.state.index)},i.buildThumbStyle=function(n,r){const s={position:"absolute",touchAction:"none",willChange:this.state.index>=0?this.posMinKey():void 0,zIndex:this.state.zIndices.indexOf(r)+1};return s[this.posMinKey()]=n+"px",s},i.buildTrackStyle=function(n,r){const s={position:"absolute",willChange:this.state.index>=0?this.posMinKey()+","+this.posMaxKey():void 0};return s[this.posMinKey()]=n,s[this.posMaxKey()]=r,s},i.buildMarkStyle=function(n){var r;return(r={position:"absolute"})[this.posMinKey()]=n,r},i.renderThumbs=function(n){const{length:r}=n,s=[];for(let a=0;a<r;a+=1)s[a]=this.buildThumbStyle(n[a],a);const o=[];for(let a=0;a<r;a+=1)o[a]=this.renderThumb(s[a],a);return o},i.renderTracks=function(n){const r=[],s=n.length-1;r.push(this.renderTrack(0,0,n[0]));for(let o=0;o<s;o+=1)r.push(this.renderTrack(o+1,n[o],n[o+1]));return r.push(this.renderTrack(s+1,n[s],this.state.upperBound)),r},i.renderMarks=function(){let{marks:n}=this.props;const r=this.props.max-this.props.min+1;return typeof n=="boolean"?n=Array.from({length:r}).map((s,o)=>o):typeof n=="number"&&(n=Array.from({length:r}).map((s,o)=>o).filter(s=>s%n==0)),n.map(parseFloat).sort((s,o)=>s-o).map(s=>{const o=this.calcOffset(s),a={key:s,className:this.props.markClassName,style:this.buildMarkStyle(o)};return this.props.renderMark(a)})},i.render=function(){const n=[],{value:r}=this.state,s=r.length;for(let h=0;h<s;h+=1)n[h]=this.calcOffset(r[h],h);const o=this.props.withTracks?this.renderTracks(n):null,a=this.renderThumbs(n),l=this.props.marks?this.renderMarks():null;return Q.createElement("div",{ref:h=>{this.slider=h,this.resizeElementRef.current=h},style:{position:"relative"},className:this.props.className+(this.props.disabled?" disabled":""),onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},o,a,l)},t}(Q.Component);bd.displayName="ReactSlider",bd.defaultProps={min:0,max:100,step:1,pageFn:e=>10*e,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",thumbClassName:"thumb",thumbActiveClassName:"active",trackClassName:"track",markClassName:"mark",withTracks:!0,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1,marks:[],renderThumb:e=>Q.createElement("div",e),renderTrack:e=>Q.createElement("div",e),renderMark:e=>Q.createElement("span",e)};var va=bd;function wN({forceUpdated:e}){const[t,i]=Z.useState(50),[n,r]=Z.useState(50),[s,o]=Z.useState(50),[a,l]=Z.useState(50),h=p=>{i(p),f()},u=p=>{r(p),f()},c=p=>{o(p),f()},d=p=>{l(p),f()},f=()=>e({f1:t,f2:n,f3:s,f4:a});return st("div",{children:[B("div",{className:"slider",children:B(va,{min:0,max:100,className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",onChange:h,renderThumb:(p,y)=>B("div",{...p,children:y.valueNow})})}),B("div",{className:"slider",children:B(va,{min:0,max:50,defaultValue:[25],className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",onChange:u,renderThumb:(p,y)=>B("div",{...p,children:y.valueNow})})}),B("div",{className:"slider",children:B(va,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",onChange:c,renderThumb:(p,y)=>B("div",{...p,children:y.valueNow})})}),B("div",{className:"slider",children:B(va,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",onChange:d,renderThumb:(p,y)=>B("div",{...p,children:y.valueNow})})})]})}const bN={prefix:"Aquatic",colors:{unavailable:"#3f5576",inactive:"#235299",selected:"#1a72f5"},nodes:[{id:"swimming",cost:1,requires:"speed",levelsRequired:1,name:"Swimming",description:"Congrats! You are a unit.",providedAbilities:[{id:"swimming",gain:!0}]},{id:"advanced-swimming",cost:1,name:"Advanded Swimming",requires:"swimming",levelsRequired:1,description:"Increases potential water speed by 3.",providedAbilities:[{id:"swimming",modifiers:{movement:3}}]}]},EN={prefix:"Armor",colors:{unavailable:"#403c3a",inactive:"#5e3c2b",selected:"#cd8150"},nodes:[{id:"armor",requires:"basic",levels:7,levelCost:[1,1,2,2,3,4,4],name:"Armor",description:"Adds 1 Armor",providedStats:[{id:"armor",modifier:1}]},{id:"attentive",requires:"armor",levelsRequired:2,name:"Attentive",description:"Grants the Attentive ability",providedAbilities:[{id:"attentive",gain:!0}]},{id:"alert",requires:"attentive",name:"Alert",description:"Grants the Alert ability",providedAbilities:[{id:"alert",gain:!0}]},{id:"reactive-armor",requires:"armor",levelsRequired:5,cost:1,name:"Reactive Armor",description:"Sets your AC to 1 and grants Reactive Armor.",providedAbilities:[{id:"reactive-armor",gain:!0}],providedStats:[{id:"armor",set:1}]},{id:"reactive-armor-2",requires:"reactive-armor",cost:1,name:"Reactive Armor 2",description:"Increases your base AC to 2",providedStats:[{id:"armor",set:2}]},{id:"defend-1",requires:"armor",levelsRequired:1,cost:1,name:"Defend 1",description:"Grants the ability to defend and adds 1 HP.",providedStats:[{id:"hp",modifier:1}],providedAbilities:[{id:"defend",gain:!0}]},{id:"defend-2",requires:"defend-1",cost:1,name:"Defend 2",description:"Grant 1 HP.",providedStats:[{id:"hp",modifier:1}]},{id:"deflect-1",requires:"defend-2",cost:1,name:"Deflection",description:"Grants the Deflect ability.",providedAbilities:[{id:"deflect",gain:!0}]},{id:"deflect-2",requires:"deflect-1",cost:1,name:"Deflection+",description:"Makes it easier to deflect magic attacks.",providedAbilities:[{id:"deflect",modifiers:{lowerRange:-1}}]},{id:"guardian-1",requires:"defend-1",cost:1,name:"Guardian",description:"Grants the Guardian ability",providedAbilities:[{id:"guardian",gain:!0}]},{id:"guardian-2",requires:"guardian-1",cost:1,name:"Guardian+",description:"Allows you guard an additional attack",providedAbilities:[{id:"guardian",modifiers:{attacks:1}}]}]},TN={prefix:"Flying",colors:{unavailable:"#87645c",inactive:"#875246",selected:"#d44b2c"},nodes:[{id:"attack-1",requires:"basic",cost:1,name:"Attack",description:"Grants your unit the ability to attack",providedAbilities:[{id:"basic-attack",gain:!0}]},{id:"attack-1-dmg",requires:"attack-1",cost:1,name:"Attack+",description:"Increases the damage of your first attack by 1",providedAbilities:[{id:"basic-attack",modifiers:{dmg:1}},{id:"multi-attack",modifiers:{dmg1:1}}]},{id:"attack-2",requires:"attack-1-dmg",cost:1,name:"MultiAttack",description:"Grants your unit the ability to attack twice",providedAbilities:[{id:"multi-attack",gain:!0}]},{id:"attack-2-dmg",requires:"attack-2",cost:1,name:"MultiAttack+",description:"Increases the damage of your second attack by 1",providedAbilities:[{id:"multi-attack",modifiers:{dmg2:1}}]}]},SN={prefix:"Attack",colors:{unavailable:"#121212",inactive:"#232323",selected:"#d2d2d2"},nodes:[{id:"basic",cost:1,name:"Basic",description:"Congrats! You are a unit.",providedStats:[{id:"hp",modifier:5},{id:"armor",modifier:2}]},{id:"basic-magic",requires:"basic",cost:1,name:"Spellcasting",description:"Grants your unit the ability to cast spells",providedAbilities:[{id:"cantrip-barrage",gain:!0},{id:"spellcasting",gain:!0}]}]},CN={prefix:"Flying",colors:{unavailable:"#506b73",inactive:"#6894a1",selected:"#4dd2f7"},nodes:[{id:"flying",requires:"speed",levelsRequired:4,cost:1,name:"Flying",description:"Grants you the ability to fly",providedAbilities:[{id:"flying",gain:!0}]},{id:"death-bomb",requires:"flying",cost:1,name:"Death Bomb",description:"Grants you the Death Bomb ability. Must be undead to use.",providedAbilities:[{id:"death-bomb",gain:!0}]},{id:"swarm",requires:"flying",cost:1,name:"Swarm",description:"Grants you the Swarm ability.",providedAbilities:[{id:"swarm",gain:!0}]},{id:"strafing-run",requires:"flying",cost:1,name:"Strafing Run",description:"Grants you the Strafing Run ability.",providedAbilities:[{id:"strafing-run",gain:!0}]},{id:"advanced-strafing-run",requires:"strafing-run",levels:2,name:"Strafing Run+",description:"Increases the number of targets by 3.",providedAbilities:[{id:"strafing-run",modifiers:{targets:3}}]},{id:"advanced-flying",requires:"flying",cost:1,name:"Advanced Flying",description:"Increases the number of targets by 3.",providedAbilities:[{id:"advanced-flying",gain:!0}]},{id:"dive-bomb",requires:"advanced-flying",cost:1,name:"Dive Bomb",description:"Grants you the Dive Bomb ability.",providedAbilities:[{id:"dive-bomb",gain:!0}]},{id:"aerial-combat",requires:"advanced-flying",cost:1,name:"Aerial Combat",description:"Grants you the Aerial Combat ability.",providedAbilities:[{id:"aerial-combat",gain:!0}]},{id:"aerial-evasion",requires:"aerial-combat",cost:1,name:"Aerial Evasion",description:"Grants you the Aerial Evasion ability.",providedAbilities:[{id:"aerial-evasion",gain:!0}]}]},AN={prefix:"Magic",colors:{unavailable:"#65748f",inactive:"#495d82",selected:"#7391c9"},nodes:[{id:"magic-range-1",requires:"basic-magic",levels:3,name:"Spell Range",description:"Increases the range of your magic.",providedAbilities:[{id:"spellcasting",modifiers:{range:1}}]},{id:"concentration-1",requires:"basic-magic",levels:2,name:"Concentration+",description:"Add +1 to concentration checks.",providedAbilities:[{id:"spellcasting",modifiers:{concentration:"levels"}}]}]},PN={prefix:"Magic",colors:{unavailable:"#7a7354",inactive:"#4a4118",selected:"#c7ab2e"},nodes:[{id:"holy-casting",requires:"basic-magic",cost:1,name:"Holy-Divine Casting",description:"Grants you the ability to cast Holy/Divine Spells.",providedAbilities:[{id:"smite",gain:!0},{id:"guiding-bolt",gain:!0},{id:"death-ward",gain:!0},{id:"restoration",gain:!0},{id:"turn-undead",gain:!0},{id:"bless",gain:!0},{id:"spirit-guardians",gain:!0}]},{id:"holy-power",requires:"holy-casting",cost:1,name:"Holy Power",description:"Increases the damage of Smite and Guiding Bolt by 1",providedAbilities:[{id:"smite",modifiers:{dmg:1}},{id:"guiding-bolt",modifiers:{dmg:1}}]},{id:"advanced-guiding-bolt",requires:"holy-power",cost:1,name:"Advanced Guiding Bolt",description:"Guiding bolt now gives allies +2 to hit the target next round.",providedAbilities:[{id:"guiding-bolt",modifiers:{hit:1}}]}]},IN={prefix:"Movement",colors:{unavailable:"#648264",inactive:"#3a913b",selected:"#51db53"},nodes:[{id:"speed",requires:"basic",levels:8,cost:1,name:"Speed",description:"Allows you to move one additional hex per turn",providedStats:[{id:"movement",modifier:1}]},{id:"versatile",requires:"speed",levelsRequired:4,cost:1,name:"Versatile",description:"Grants the Versatile ability",providedAbilities:[{id:"versatile",gain:!0}]},{id:"extra-versatile",requires:"versatile",cost:1,name:"Extra Versatile",description:"Grants the Extra Versatile ability",providedAbilities:[{id:"extra-versatile",gain:!0}]},{id:"dash",requires:"speed",levelsRequired:2,cost:1,name:"Dash",description:"Grants the Dash ability",providedAbilities:[{id:"dash",gain:!0}]},{id:"advanced-dash",requires:"charge",cost:1,levels:2,name:"Dash+",description:"Increases the movement of Dash by 2",providedAbilities:[{id:"dash",modifiers:{movement:2}}]},{id:"dash-expert",requires:"advanced-dash",levelsRequired:2,cost:1,name:"Dash Expert",description:"Grants the Dash Expert ability",providedAbilities:[{id:"dash-expert",gain:!0}]},{id:"charge",requires:"dash",cost:1,name:"Charge",description:"Grants the Charge ability",providedAbilities:[{id:"charge",gain:!0}]},{id:"breakthrough",requires:"charge",cost:1,name:"Breakthrough",description:"Grants you the ability to continue moving through units after a charge.",providedAbilities:[{id:"charge",modifiers:{breakthrough:!0}}]},{id:"advanced-charge",requires:"charge",cost:1,name:"Charge+",description:"Increases the movement of Charge by 2",providedAbilities:[{id:"charge",modifiers:{dmg:1}}]}]},RN=h2([SN,IN,CN,TN,EN,AN,PN,bN],(e,t)=>zC(e,Ls(t.nodes,i=>({...i,colors:t.colors}))),[]);function MN({pointsSpent:e}){return st("div",{className:"point-counter",children:["Spent: ",e]})}function kN(){const e=localStorage.getItem("dragon-build");return e?JSON.parse(e):{}}function ON(e){localStorage.setItem("dragon-build",JSON.stringify(e))}function DN(){const[e,t]=Z.useState({armor:0,hp:0}),[i,n]=Z.useState({show:!1}),[r,s]=Z.useState({show:!1}),[o,a]=Z.useState("sheet"),[l,h]=Z.useState(""),[u,c]=Z.useState("info"),[d,f]=Z.useState(!1),[p,y]=Z.useState(()=>kN()),[_,m]=Z.useState(null);Z.useEffect(()=>{ON(e.exportableBuild)},[e]);const g=P=>{n(P)},v=P=>{const k=eh(P.nodes,R=>R.selected||R.acquired);t(R=>mN(k))},x=P=>{c(P)},b=P=>{switch(a(P),P){case"sheet":h("Character Sheet");break;case"code":h("Import/Export");break;case"help":h("Reference")}},T=P=>{y(JSON.parse(P))},E=P=>{s(P),f(!0),P.node||f(!1)},w=P=>{m(P)};let S,A;return o==="sheet"?S=B(hP,{dragon:e}):o==="code"?S=B(vN,{dragon:e,importAttempted:T}):o==="help"&&(S=st("div",{children:[B("h2",{children:"Mobile Controls"}),B("div",{children:"Short Tap: View Info"}),B("div",{children:"Long Tap: Select Skill"})]})),u==="info"?A=B(gN,{info:r}):u==="settings"&&(A=B("div",{children:B(wN,{forceUpdated:w})})),st("div",{className:"App",children:[st("div",{className:"appLeft",children:[B(_N,{itemSelected:x,expanded:d,children:A}),B(MN,{pointsSpent:e.pointsInvested})]}),B("div",{className:"appRight",children:B(yN,{itemSelected:b,title:l,children:S})}),st("div",{className:"skill-panel",children:[B(pN,{trees:RN,buildData:p,force:_,nodeSelectionUpdated:v,tooltipUpdated:g,infoUpdated:E}),B("div",{className:"infoPanel"})]})]})}Tu.createRoot(document.getElementById("root")).render(B(Q.StrictMode,{children:B(DN,{})}))});export default BN();
