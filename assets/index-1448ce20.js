var SE=(t,e)=>()=>(e||t((e={exports:{}}).exports,e),e.exports);var R8=SE((Dt,Ft)=>{function TE(t,e){for(var n=0;n<e.length;n++){const i=e[n];if(typeof i!="string"&&!Array.isArray(i)){for(const r in i)if(r!=="default"&&!(r in t)){const s=Object.getOwnPropertyDescriptor(i,r);s&&Object.defineProperty(t,r,s.get?s:{enumerable:!0,get:()=>i[r]})}}}return Object.freeze(Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}))}(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))i(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const o of s.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&i(o)}).observe(document,{childList:!0,subtree:!0});function n(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerPolicy&&(s.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?s.credentials="include":r.crossOrigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function i(r){if(r.ep)return;r.ep=!0;const s=n(r);fetch(r.href,s)}})();var Lc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function CE(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}var Nl={},AE={get exports(){return Nl},set exports(t){Nl=t}},$u={},A={},PE={get exports(){return A},set exports(t){A=t}},ce={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var ta=Symbol.for("react.element"),IE=Symbol.for("react.portal"),ME=Symbol.for("react.fragment"),OE=Symbol.for("react.strict_mode"),RE=Symbol.for("react.profiler"),kE=Symbol.for("react.provider"),DE=Symbol.for("react.context"),FE=Symbol.for("react.forward_ref"),LE=Symbol.for("react.suspense"),BE=Symbol.for("react.memo"),NE=Symbol.for("react.lazy"),dg=Symbol.iterator;function UE(t){return t===null||typeof t!="object"?null:(t=dg&&t[dg]||t["@@iterator"],typeof t=="function"?t:null)}var Zy={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},Qy=Object.assign,Jy={};function As(t,e,n){this.props=t,this.context=e,this.refs=Jy,this.updater=n||Zy}As.prototype.isReactComponent={};As.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};As.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function e1(){}e1.prototype=As.prototype;function dp(t,e,n){this.props=t,this.context=e,this.refs=Jy,this.updater=n||Zy}var fp=dp.prototype=new e1;fp.constructor=dp;Qy(fp,As.prototype);fp.isPureReactComponent=!0;var fg=Array.isArray,t1=Object.prototype.hasOwnProperty,pp={current:null},n1={key:!0,ref:!0,__self:!0,__source:!0};function i1(t,e,n){var i,r={},s=null,o=null;if(e!=null)for(i in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(s=""+e.key),e)t1.call(e,i)&&!n1.hasOwnProperty(i)&&(r[i]=e[i]);var a=arguments.length-2;if(a===1)r.children=n;else if(1<a){for(var l=Array(a),u=0;u<a;u++)l[u]=arguments[u+2];r.children=l}if(t&&t.defaultProps)for(i in a=t.defaultProps,a)r[i]===void 0&&(r[i]=a[i]);return{$$typeof:ta,type:t,key:s,ref:o,props:r,_owner:pp.current}}function $E(t,e){return{$$typeof:ta,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function mp(t){return typeof t=="object"&&t!==null&&t.$$typeof===ta}function zE(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(n){return e[n]})}var pg=/\/+/g;function Bc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?zE(""+t.key):e.toString(36)}function dl(t,e,n,i,r){var s=typeof t;(s==="undefined"||s==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(s){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case ta:case IE:o=!0}}if(o)return o=t,r=r(o),t=i===""?"."+Bc(o,0):i,fg(r)?(n="",t!=null&&(n=t.replace(pg,"$&/")+"/"),dl(r,e,n,"",function(u){return u})):r!=null&&(mp(r)&&(r=$E(r,n+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(pg,"$&/")+"/")+t)),e.push(r)),1;if(o=0,i=i===""?".":i+":",fg(t))for(var a=0;a<t.length;a++){s=t[a];var l=i+Bc(s,a);o+=dl(s,e,n,l,r)}else if(l=UE(t),typeof l=="function")for(t=l.call(t),a=0;!(s=t.next()).done;)s=s.value,l=i+Bc(s,a++),o+=dl(s,e,n,l,r);else if(s==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ga(t,e,n){if(t==null)return t;var i=[],r=0;return dl(t,i,"","",function(s){return e.call(n,s,r++)}),i}function HE(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(n){(t._status===0||t._status===-1)&&(t._status=1,t._result=n)},function(n){(t._status===0||t._status===-1)&&(t._status=2,t._result=n)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var vt={current:null},fl={transition:null},jE={ReactCurrentDispatcher:vt,ReactCurrentBatchConfig:fl,ReactCurrentOwner:pp};ce.Children={map:ga,forEach:function(t,e,n){ga(t,function(){e.apply(this,arguments)},n)},count:function(t){var e=0;return ga(t,function(){e++}),e},toArray:function(t){return ga(t,function(e){return e})||[]},only:function(t){if(!mp(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};ce.Component=As;ce.Fragment=ME;ce.Profiler=RE;ce.PureComponent=dp;ce.StrictMode=OE;ce.Suspense=LE;ce.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=jE;ce.cloneElement=function(t,e,n){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var i=Qy({},t.props),r=t.key,s=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(s=e.ref,o=pp.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var a=t.type.defaultProps;for(l in e)t1.call(e,l)&&!n1.hasOwnProperty(l)&&(i[l]=e[l]===void 0&&a!==void 0?a[l]:e[l])}var l=arguments.length-2;if(l===1)i.children=n;else if(1<l){a=Array(l);for(var u=0;u<l;u++)a[u]=arguments[u+2];i.children=a}return{$$typeof:ta,type:t.type,key:r,ref:s,props:i,_owner:o}};ce.createContext=function(t){return t={$$typeof:DE,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:kE,_context:t},t.Consumer=t};ce.createElement=i1;ce.createFactory=function(t){var e=i1.bind(null,t);return e.type=t,e};ce.createRef=function(){return{current:null}};ce.forwardRef=function(t){return{$$typeof:FE,render:t}};ce.isValidElement=mp;ce.lazy=function(t){return{$$typeof:NE,_payload:{_status:-1,_result:t},_init:HE}};ce.memo=function(t,e){return{$$typeof:BE,type:t,compare:e===void 0?null:e}};ce.startTransition=function(t){var e=fl.transition;fl.transition={};try{t()}finally{fl.transition=e}};ce.unstable_act=function(){throw Error("act(...) is not supported in production builds of React.")};ce.useCallback=function(t,e){return vt.current.useCallback(t,e)};ce.useContext=function(t){return vt.current.useContext(t)};ce.useDebugValue=function(){};ce.useDeferredValue=function(t){return vt.current.useDeferredValue(t)};ce.useEffect=function(t,e){return vt.current.useEffect(t,e)};ce.useId=function(){return vt.current.useId()};ce.useImperativeHandle=function(t,e,n){return vt.current.useImperativeHandle(t,e,n)};ce.useInsertionEffect=function(t,e){return vt.current.useInsertionEffect(t,e)};ce.useLayoutEffect=function(t,e){return vt.current.useLayoutEffect(t,e)};ce.useMemo=function(t,e){return vt.current.useMemo(t,e)};ce.useReducer=function(t,e,n){return vt.current.useReducer(t,e,n)};ce.useRef=function(t){return vt.current.useRef(t)};ce.useState=function(t){return vt.current.useState(t)};ce.useSyncExternalStore=function(t,e,n){return vt.current.useSyncExternalStore(t,e,n)};ce.useTransition=function(){return vt.current.useTransition()};ce.version="18.2.0";(function(t){t.exports=ce})(PE);const j=CE(A),mg=TE({__proto__:null,default:j},[A]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var GE=A,VE=Symbol.for("react.element"),WE=Symbol.for("react.fragment"),XE=Object.prototype.hasOwnProperty,YE=GE.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,qE={key:!0,ref:!0,__self:!0,__source:!0};function r1(t,e,n){var i,r={},s=null,o=null;n!==void 0&&(s=""+n),e.key!==void 0&&(s=""+e.key),e.ref!==void 0&&(o=e.ref);for(i in e)XE.call(e,i)&&!qE.hasOwnProperty(i)&&(r[i]=e[i]);if(t&&t.defaultProps)for(i in e=t.defaultProps,e)r[i]===void 0&&(r[i]=e[i]);return{$$typeof:VE,type:t,key:s,ref:o,props:r,_owner:YE.current}}$u.Fragment=WE;$u.jsx=r1;$u.jsxs=r1;(function(t){t.exports=$u})(AE);const I=Nl.jsx,q=Nl.jsxs;var Qh={},Ul={},KE={get exports(){return Ul},set exports(t){Ul=t}},$t={},Jh={},ZE={get exports(){return Jh},set exports(t){Jh=t}},s1={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(M,B){var P=M.length;M.push(B);e:for(;0<P;){var G=P-1>>>1,V=M[G];if(0<r(V,B))M[G]=B,M[P]=V,P=G;else break e}}function n(M){return M.length===0?null:M[0]}function i(M){if(M.length===0)return null;var B=M[0],P=M.pop();if(P!==B){M[0]=P;e:for(var G=0,V=M.length,re=V>>>1;G<re;){var oe=2*(G+1)-1,pe=M[oe],ue=oe+1,he=M[ue];if(0>r(pe,P))ue<V&&0>r(he,pe)?(M[G]=he,M[ue]=P,G=ue):(M[G]=pe,M[oe]=P,G=oe);else if(ue<V&&0>r(he,P))M[G]=he,M[ue]=P,G=ue;else break e}}return B}function r(M,B){var P=M.sortIndex-B.sortIndex;return P!==0?P:M.id-B.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;t.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();t.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,h=null,d=3,f=!1,p=!1,g=!1,v=typeof setTimeout=="function"?setTimeout:null,m=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function x(M){for(var B=n(u);B!==null;){if(B.callback===null)i(u);else if(B.startTime<=M)i(u),B.sortIndex=B.expirationTime,e(l,B);else break;B=n(u)}}function _(M){if(g=!1,x(M),!p)if(n(l)!==null)p=!0,z(b);else{var B=n(u);B!==null&&D(_,B.startTime-M)}}function b(M,B){p=!1,g&&(g=!1,m(S),S=-1),f=!0;var P=d;try{for(x(B),h=n(l);h!==null&&(!(h.expirationTime>B)||M&&!F());){var G=h.callback;if(typeof G=="function"){h.callback=null,d=h.priorityLevel;var V=G(h.expirationTime<=B);B=t.unstable_now(),typeof V=="function"?h.callback=V:h===n(l)&&i(l),x(B)}else i(l);h=n(l)}if(h!==null)var re=!0;else{var oe=n(u);oe!==null&&D(_,oe.startTime-B),re=!1}return re}finally{h=null,d=P,f=!1}}var T=!1,E=null,S=-1,k=5,O=-1;function F(){return!(t.unstable_now()-O<k)}function N(){if(E!==null){var M=t.unstable_now();O=M;var B=!0;try{B=E(!0,M)}finally{B?C():(T=!1,E=null)}}else T=!1}var C;if(typeof y=="function")C=function(){y(N)};else if(typeof MessageChannel<"u"){var w=new MessageChannel,R=w.port2;w.port1.onmessage=N,C=function(){R.postMessage(null)}}else C=function(){v(N,0)};function z(M){E=M,T||(T=!0,C())}function D(M,B){S=v(function(){M(t.unstable_now())},B)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(M){M.callback=null},t.unstable_continueExecution=function(){p||f||(p=!0,z(b))},t.unstable_forceFrameRate=function(M){0>M||125<M?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):k=0<M?Math.floor(1e3/M):5},t.unstable_getCurrentPriorityLevel=function(){return d},t.unstable_getFirstCallbackNode=function(){return n(l)},t.unstable_next=function(M){switch(d){case 1:case 2:case 3:var B=3;break;default:B=d}var P=d;d=B;try{return M()}finally{d=P}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(M,B){switch(M){case 1:case 2:case 3:case 4:case 5:break;default:M=3}var P=d;d=M;try{return B()}finally{d=P}},t.unstable_scheduleCallback=function(M,B,P){var G=t.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?G+P:G):P=G,M){case 1:var V=-1;break;case 2:V=250;break;case 5:V=1073741823;break;case 4:V=1e4;break;default:V=5e3}return V=P+V,M={id:c++,callback:B,priorityLevel:M,startTime:P,expirationTime:V,sortIndex:-1},P>G?(M.sortIndex=P,e(u,M),n(l)===null&&M===n(u)&&(g?(m(S),S=-1):g=!0,D(_,P-G))):(M.sortIndex=V,e(l,M),p||f||(p=!0,z(b))),M},t.unstable_shouldYield=F,t.unstable_wrapCallback=function(M){var B=d;return function(){var P=d;d=B;try{return M.apply(this,arguments)}finally{d=P}}}})(s1);(function(t){t.exports=s1})(ZE);/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var o1=A,Nt=Jh;function U(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,n=1;n<arguments.length;n++)e+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a1=new Set,bo={};function wr(t,e){ds(t,e),ds(t+"Capture",e)}function ds(t,e){for(bo[t]=e,t=0;t<e.length;t++)a1.add(e[t])}var ti=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),ed=Object.prototype.hasOwnProperty,QE=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,gg={},vg={};function JE(t){return ed.call(vg,t)?!0:ed.call(gg,t)?!1:QE.test(t)?vg[t]=!0:(gg[t]=!0,!1)}function eS(t,e,n,i){if(n!==null&&n.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return i?!1:n!==null?!n.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function tS(t,e,n,i){if(e===null||typeof e>"u"||eS(t,e,n,i))return!0;if(i)return!1;if(n!==null)switch(n.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function yt(t,e,n,i,r,s,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=i,this.attributeNamespace=r,this.mustUseProperty=n,this.propertyName=t,this.type=e,this.sanitizeURL=s,this.removeEmptyString=o}var at={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){at[t]=new yt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];at[e]=new yt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){at[t]=new yt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){at[t]=new yt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){at[t]=new yt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){at[t]=new yt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){at[t]=new yt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){at[t]=new yt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){at[t]=new yt(t,5,!1,t.toLowerCase(),null,!1,!1)});var gp=/[\-:]([a-z])/g;function vp(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(gp,vp);at[e]=new yt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(gp,vp);at[e]=new yt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(gp,vp);at[e]=new yt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){at[t]=new yt(t,1,!1,t.toLowerCase(),null,!1,!1)});at.xlinkHref=new yt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){at[t]=new yt(t,1,!1,t.toLowerCase(),null,!0,!0)});function yp(t,e,n,i){var r=at.hasOwnProperty(e)?at[e]:null;(r!==null?r.type!==0:i||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(tS(e,n,r,i)&&(n=null),i||r===null?JE(e)&&(n===null?t.removeAttribute(e):t.setAttribute(e,""+n)):r.mustUseProperty?t[r.propertyName]=n===null?r.type===3?!1:"":n:(e=r.attributeName,i=r.attributeNamespace,n===null?t.removeAttribute(e):(r=r.type,n=r===3||r===4&&n===!0?"":""+n,i?t.setAttributeNS(i,e,n):t.setAttribute(e,n))))}var oi=o1.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,va=Symbol.for("react.element"),Lr=Symbol.for("react.portal"),Br=Symbol.for("react.fragment"),xp=Symbol.for("react.strict_mode"),td=Symbol.for("react.profiler"),l1=Symbol.for("react.provider"),u1=Symbol.for("react.context"),_p=Symbol.for("react.forward_ref"),nd=Symbol.for("react.suspense"),id=Symbol.for("react.suspense_list"),wp=Symbol.for("react.memo"),fi=Symbol.for("react.lazy"),c1=Symbol.for("react.offscreen"),yg=Symbol.iterator;function Ds(t){return t===null||typeof t!="object"?null:(t=yg&&t[yg]||t["@@iterator"],typeof t=="function"?t:null)}var Re=Object.assign,Nc;function Js(t){if(Nc===void 0)try{throw Error()}catch(n){var e=n.stack.trim().match(/\n( *(at )?)/);Nc=e&&e[1]||""}return`
`+Nc+t}var Uc=!1;function $c(t,e){if(!t||Uc)return"";Uc=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(u){var i=u}Reflect.construct(t,[],e)}else{try{e.call()}catch(u){i=u}t.call(e.prototype)}else{try{throw Error()}catch(u){i=u}t()}}catch(u){if(u&&i&&typeof u.stack=="string"){for(var r=u.stack.split(`
`),s=i.stack.split(`
`),o=r.length-1,a=s.length-1;1<=o&&0<=a&&r[o]!==s[a];)a--;for(;1<=o&&0<=a;o--,a--)if(r[o]!==s[a]){if(o!==1||a!==1)do if(o--,a--,0>a||r[o]!==s[a]){var l=`
`+r[o].replace(" at new "," at ");return t.displayName&&l.includes("<anonymous>")&&(l=l.replace("<anonymous>",t.displayName)),l}while(1<=o&&0<=a);break}}}finally{Uc=!1,Error.prepareStackTrace=n}return(t=t?t.displayName||t.name:"")?Js(t):""}function nS(t){switch(t.tag){case 5:return Js(t.type);case 16:return Js("Lazy");case 13:return Js("Suspense");case 19:return Js("SuspenseList");case 0:case 2:case 15:return t=$c(t.type,!1),t;case 11:return t=$c(t.type.render,!1),t;case 1:return t=$c(t.type,!0),t;default:return""}}function rd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Br:return"Fragment";case Lr:return"Portal";case td:return"Profiler";case xp:return"StrictMode";case nd:return"Suspense";case id:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case u1:return(t.displayName||"Context")+".Consumer";case l1:return(t._context.displayName||"Context")+".Provider";case _p:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case wp:return e=t.displayName||null,e!==null?e:rd(t.type)||"Memo";case fi:e=t._payload,t=t._init;try{return rd(t(e))}catch{}}return null}function iS(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return rd(e);case 8:return e===xp?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function Oi(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function h1(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function rS(t){var e=h1(t)?"checked":"value",n=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),i=""+t[e];if(!t.hasOwnProperty(e)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var r=n.get,s=n.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){i=""+o,s.call(this,o)}}),Object.defineProperty(t,e,{enumerable:n.enumerable}),{getValue:function(){return i},setValue:function(o){i=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ya(t){t._valueTracker||(t._valueTracker=rS(t))}function d1(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var n=e.getValue(),i="";return t&&(i=h1(t)?t.checked?"true":"false":t.value),t=i,t!==n?(e.setValue(t),!0):!1}function $l(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function sd(t,e){var n=e.checked;return Re({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??t._wrapperState.initialChecked})}function xg(t,e){var n=e.defaultValue==null?"":e.defaultValue,i=e.checked!=null?e.checked:e.defaultChecked;n=Oi(e.value!=null?e.value:n),t._wrapperState={initialChecked:i,initialValue:n,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function f1(t,e){e=e.checked,e!=null&&yp(t,"checked",e,!1)}function od(t,e){f1(t,e);var n=Oi(e.value),i=e.type;if(n!=null)i==="number"?(n===0&&t.value===""||t.value!=n)&&(t.value=""+n):t.value!==""+n&&(t.value=""+n);else if(i==="submit"||i==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?ad(t,e.type,n):e.hasOwnProperty("defaultValue")&&ad(t,e.type,Oi(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function _g(t,e,n){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var i=e.type;if(!(i!=="submit"&&i!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,n||e===t.value||(t.value=e),t.defaultValue=e}n=t.name,n!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,n!==""&&(t.name=n)}function ad(t,e,n){(e!=="number"||$l(t.ownerDocument)!==t)&&(n==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+n&&(t.defaultValue=""+n))}var eo=Array.isArray;function Zr(t,e,n,i){if(t=t.options,e){e={};for(var r=0;r<n.length;r++)e["$"+n[r]]=!0;for(n=0;n<t.length;n++)r=e.hasOwnProperty("$"+t[n].value),t[n].selected!==r&&(t[n].selected=r),r&&i&&(t[n].defaultSelected=!0)}else{for(n=""+Oi(n),e=null,r=0;r<t.length;r++){if(t[r].value===n){t[r].selected=!0,i&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function ld(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(U(91));return Re({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function wg(t,e){var n=e.value;if(n==null){if(n=e.children,e=e.defaultValue,n!=null){if(e!=null)throw Error(U(92));if(eo(n)){if(1<n.length)throw Error(U(93));n=n[0]}e=n}e==null&&(e=""),n=e}t._wrapperState={initialValue:Oi(n)}}function p1(t,e){var n=Oi(e.value),i=Oi(e.defaultValue);n!=null&&(n=""+n,n!==t.value&&(t.value=n),e.defaultValue==null&&t.defaultValue!==n&&(t.defaultValue=n)),i!=null&&(t.defaultValue=""+i)}function bg(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function m1(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function ud(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?m1(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var xa,g1=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,n,i,r){MSApp.execUnsafeLocalFunction(function(){return t(e,n,i,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(xa=xa||document.createElement("div"),xa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=xa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Eo(t,e){if(e){var n=t.firstChild;if(n&&n===t.lastChild&&n.nodeType===3){n.nodeValue=e;return}}t.textContent=e}var ho={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},sS=["Webkit","ms","Moz","O"];Object.keys(ho).forEach(function(t){sS.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ho[e]=ho[t]})});function v1(t,e,n){return e==null||typeof e=="boolean"||e===""?"":n||typeof e!="number"||e===0||ho.hasOwnProperty(t)&&ho[t]?(""+e).trim():e+"px"}function y1(t,e){t=t.style;for(var n in e)if(e.hasOwnProperty(n)){var i=n.indexOf("--")===0,r=v1(n,e[n],i);n==="float"&&(n="cssFloat"),i?t.setProperty(n,r):t[n]=r}}var oS=Re({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function cd(t,e){if(e){if(oS[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(U(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(U(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(U(61))}if(e.style!=null&&typeof e.style!="object")throw Error(U(62))}}function hd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var dd=null;function bp(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var fd=null,Qr=null,Jr=null;function Eg(t){if(t=ra(t)){if(typeof fd!="function")throw Error(U(280));var e=t.stateNode;e&&(e=Vu(e),fd(t.stateNode,t.type,e))}}function x1(t){Qr?Jr?Jr.push(t):Jr=[t]:Qr=t}function _1(){if(Qr){var t=Qr,e=Jr;if(Jr=Qr=null,Eg(t),e)for(t=0;t<e.length;t++)Eg(e[t])}}function w1(t,e){return t(e)}function b1(){}var zc=!1;function E1(t,e,n){if(zc)return t(e,n);zc=!0;try{return w1(t,e,n)}finally{zc=!1,(Qr!==null||Jr!==null)&&(b1(),_1())}}function So(t,e){var n=t.stateNode;if(n===null)return null;var i=Vu(n);if(i===null)return null;n=i[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(i=!i.disabled)||(t=t.type,i=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!i;break e;default:t=!1}if(t)return null;if(n&&typeof n!="function")throw Error(U(231,e,typeof n));return n}var pd=!1;if(ti)try{var Fs={};Object.defineProperty(Fs,"passive",{get:function(){pd=!0}}),window.addEventListener("test",Fs,Fs),window.removeEventListener("test",Fs,Fs)}catch{pd=!1}function aS(t,e,n,i,r,s,o,a,l){var u=Array.prototype.slice.call(arguments,3);try{e.apply(n,u)}catch(c){this.onError(c)}}var fo=!1,zl=null,Hl=!1,md=null,lS={onError:function(t){fo=!0,zl=t}};function uS(t,e,n,i,r,s,o,a,l){fo=!1,zl=null,aS.apply(lS,arguments)}function cS(t,e,n,i,r,s,o,a,l){if(uS.apply(this,arguments),fo){if(fo){var u=zl;fo=!1,zl=null}else throw Error(U(198));Hl||(Hl=!0,md=u)}}function br(t){var e=t,n=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(n=e.return),t=e.return;while(t)}return e.tag===3?n:null}function S1(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Sg(t){if(br(t)!==t)throw Error(U(188))}function hS(t){var e=t.alternate;if(!e){if(e=br(t),e===null)throw Error(U(188));return e!==t?null:t}for(var n=t,i=e;;){var r=n.return;if(r===null)break;var s=r.alternate;if(s===null){if(i=r.return,i!==null){n=i;continue}break}if(r.child===s.child){for(s=r.child;s;){if(s===n)return Sg(r),t;if(s===i)return Sg(r),e;s=s.sibling}throw Error(U(188))}if(n.return!==i.return)n=r,i=s;else{for(var o=!1,a=r.child;a;){if(a===n){o=!0,n=r,i=s;break}if(a===i){o=!0,i=r,n=s;break}a=a.sibling}if(!o){for(a=s.child;a;){if(a===n){o=!0,n=s,i=r;break}if(a===i){o=!0,i=s,n=r;break}a=a.sibling}if(!o)throw Error(U(189))}}if(n.alternate!==i)throw Error(U(190))}if(n.tag!==3)throw Error(U(188));return n.stateNode.current===n?t:e}function T1(t){return t=hS(t),t!==null?C1(t):null}function C1(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=C1(t);if(e!==null)return e;t=t.sibling}return null}var A1=Nt.unstable_scheduleCallback,Tg=Nt.unstable_cancelCallback,dS=Nt.unstable_shouldYield,fS=Nt.unstable_requestPaint,$e=Nt.unstable_now,pS=Nt.unstable_getCurrentPriorityLevel,Ep=Nt.unstable_ImmediatePriority,P1=Nt.unstable_UserBlockingPriority,jl=Nt.unstable_NormalPriority,mS=Nt.unstable_LowPriority,I1=Nt.unstable_IdlePriority,zu=null,Rn=null;function gS(t){if(Rn&&typeof Rn.onCommitFiberRoot=="function")try{Rn.onCommitFiberRoot(zu,t,void 0,(t.current.flags&128)===128)}catch{}}var pn=Math.clz32?Math.clz32:xS,vS=Math.log,yS=Math.LN2;function xS(t){return t>>>=0,t===0?32:31-(vS(t)/yS|0)|0}var _a=64,wa=4194304;function to(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Gl(t,e){var n=t.pendingLanes;if(n===0)return 0;var i=0,r=t.suspendedLanes,s=t.pingedLanes,o=n&268435455;if(o!==0){var a=o&~r;a!==0?i=to(a):(s&=o,s!==0&&(i=to(s)))}else o=n&~r,o!==0?i=to(o):s!==0&&(i=to(s));if(i===0)return 0;if(e!==0&&e!==i&&!(e&r)&&(r=i&-i,s=e&-e,r>=s||r===16&&(s&4194240)!==0))return e;if(i&4&&(i|=n&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=i;0<e;)n=31-pn(e),r=1<<n,i|=t[n],e&=~r;return i}function _S(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function wS(t,e){for(var n=t.suspendedLanes,i=t.pingedLanes,r=t.expirationTimes,s=t.pendingLanes;0<s;){var o=31-pn(s),a=1<<o,l=r[o];l===-1?(!(a&n)||a&i)&&(r[o]=_S(a,e)):l<=e&&(t.expiredLanes|=a),s&=~a}}function gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function M1(){var t=_a;return _a<<=1,!(_a&4194240)&&(_a=64),t}function Hc(t){for(var e=[],n=0;31>n;n++)e.push(t);return e}function na(t,e,n){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-pn(e),t[e]=n}function bS(t,e){var n=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var i=t.eventTimes;for(t=t.expirationTimes;0<n;){var r=31-pn(n),s=1<<r;e[r]=0,i[r]=-1,t[r]=-1,n&=~s}}function Sp(t,e){var n=t.entangledLanes|=e;for(t=t.entanglements;n;){var i=31-pn(n),r=1<<i;r&e|t[i]&e&&(t[i]|=e),n&=~r}}var ve=0;function O1(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var R1,Tp,k1,D1,F1,vd=!1,ba=[],wi=null,bi=null,Ei=null,To=new Map,Co=new Map,mi=[],ES="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Cg(t,e){switch(t){case"focusin":case"focusout":wi=null;break;case"dragenter":case"dragleave":bi=null;break;case"mouseover":case"mouseout":Ei=null;break;case"pointerover":case"pointerout":To.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Co.delete(e.pointerId)}}function Ls(t,e,n,i,r,s){return t===null||t.nativeEvent!==s?(t={blockedOn:e,domEventName:n,eventSystemFlags:i,nativeEvent:s,targetContainers:[r]},e!==null&&(e=ra(e),e!==null&&Tp(e)),t):(t.eventSystemFlags|=i,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function SS(t,e,n,i,r){switch(e){case"focusin":return wi=Ls(wi,t,e,n,i,r),!0;case"dragenter":return bi=Ls(bi,t,e,n,i,r),!0;case"mouseover":return Ei=Ls(Ei,t,e,n,i,r),!0;case"pointerover":var s=r.pointerId;return To.set(s,Ls(To.get(s)||null,t,e,n,i,r)),!0;case"gotpointercapture":return s=r.pointerId,Co.set(s,Ls(Co.get(s)||null,t,e,n,i,r)),!0}return!1}function L1(t){var e=er(t.target);if(e!==null){var n=br(e);if(n!==null){if(e=n.tag,e===13){if(e=S1(n),e!==null){t.blockedOn=e,F1(t.priority,function(){k1(n)});return}}else if(e===3&&n.stateNode.current.memoizedState.isDehydrated){t.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}t.blockedOn=null}function pl(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var n=yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(n===null){n=t.nativeEvent;var i=new n.constructor(n.type,n);dd=i,n.target.dispatchEvent(i),dd=null}else return e=ra(n),e!==null&&Tp(e),t.blockedOn=n,!1;e.shift()}return!0}function Ag(t,e,n){pl(t)&&n.delete(e)}function TS(){vd=!1,wi!==null&&pl(wi)&&(wi=null),bi!==null&&pl(bi)&&(bi=null),Ei!==null&&pl(Ei)&&(Ei=null),To.forEach(Ag),Co.forEach(Ag)}function Bs(t,e){t.blockedOn===e&&(t.blockedOn=null,vd||(vd=!0,Nt.unstable_scheduleCallback(Nt.unstable_NormalPriority,TS)))}function Ao(t){function e(r){return Bs(r,t)}if(0<ba.length){Bs(ba[0],t);for(var n=1;n<ba.length;n++){var i=ba[n];i.blockedOn===t&&(i.blockedOn=null)}}for(wi!==null&&Bs(wi,t),bi!==null&&Bs(bi,t),Ei!==null&&Bs(Ei,t),To.forEach(e),Co.forEach(e),n=0;n<mi.length;n++)i=mi[n],i.blockedOn===t&&(i.blockedOn=null);for(;0<mi.length&&(n=mi[0],n.blockedOn===null);)L1(n),n.blockedOn===null&&mi.shift()}var es=oi.ReactCurrentBatchConfig,Vl=!0;function CS(t,e,n,i){var r=ve,s=es.transition;es.transition=null;try{ve=1,Cp(t,e,n,i)}finally{ve=r,es.transition=s}}function AS(t,e,n,i){var r=ve,s=es.transition;es.transition=null;try{ve=4,Cp(t,e,n,i)}finally{ve=r,es.transition=s}}function Cp(t,e,n,i){if(Vl){var r=yd(t,e,n,i);if(r===null)Qc(t,e,i,Wl,n),Cg(t,i);else if(SS(r,t,e,n,i))i.stopPropagation();else if(Cg(t,i),e&4&&-1<ES.indexOf(t)){for(;r!==null;){var s=ra(r);if(s!==null&&R1(s),s=yd(t,e,n,i),s===null&&Qc(t,e,i,Wl,n),s===r)break;r=s}r!==null&&i.stopPropagation()}else Qc(t,e,i,null,n)}}var Wl=null;function yd(t,e,n,i){if(Wl=null,t=bp(i),t=er(t),t!==null)if(e=br(t),e===null)t=null;else if(n=e.tag,n===13){if(t=S1(e),t!==null)return t;t=null}else if(n===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Wl=t,null}function B1(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(pS()){case Ep:return 1;case P1:return 4;case jl:case mS:return 16;case I1:return 536870912;default:return 16}default:return 16}}var vi=null,Ap=null,ml=null;function N1(){if(ml)return ml;var t,e=Ap,n=e.length,i,r="value"in vi?vi.value:vi.textContent,s=r.length;for(t=0;t<n&&e[t]===r[t];t++);var o=n-t;for(i=1;i<=o&&e[n-i]===r[s-i];i++);return ml=r.slice(t,1<i?1-i:void 0)}function gl(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function Ea(){return!0}function Pg(){return!1}function zt(t){function e(n,i,r,s,o){this._reactName=n,this._targetInst=r,this.type=i,this.nativeEvent=s,this.target=o,this.currentTarget=null;for(var a in t)t.hasOwnProperty(a)&&(n=t[a],this[a]=n?n(s):s[a]);return this.isDefaultPrevented=(s.defaultPrevented!=null?s.defaultPrevented:s.returnValue===!1)?Ea:Pg,this.isPropagationStopped=Pg,this}return Re(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Ea)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Ea)},persist:function(){},isPersistent:Ea}),e}var Ps={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Pp=zt(Ps),ia=Re({},Ps,{view:0,detail:0}),PS=zt(ia),jc,Gc,Ns,Hu=Re({},ia,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Ip,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ns&&(Ns&&t.type==="mousemove"?(jc=t.screenX-Ns.screenX,Gc=t.screenY-Ns.screenY):Gc=jc=0,Ns=t),jc)},movementY:function(t){return"movementY"in t?t.movementY:Gc}}),Ig=zt(Hu),IS=Re({},Hu,{dataTransfer:0}),MS=zt(IS),OS=Re({},ia,{relatedTarget:0}),Vc=zt(OS),RS=Re({},Ps,{animationName:0,elapsedTime:0,pseudoElement:0}),kS=zt(RS),DS=Re({},Ps,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),FS=zt(DS),LS=Re({},Ps,{data:0}),Mg=zt(LS),BS={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},NS={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},US={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function $S(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=US[t])?!!e[t]:!1}function Ip(){return $S}var zS=Re({},ia,{key:function(t){if(t.key){var e=BS[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=gl(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?NS[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Ip,charCode:function(t){return t.type==="keypress"?gl(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?gl(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),HS=zt(zS),jS=Re({},Hu,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),Og=zt(jS),GS=Re({},ia,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Ip}),VS=zt(GS),WS=Re({},Ps,{propertyName:0,elapsedTime:0,pseudoElement:0}),XS=zt(WS),YS=Re({},Hu,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),qS=zt(YS),KS=[9,13,27,32],Mp=ti&&"CompositionEvent"in window,po=null;ti&&"documentMode"in document&&(po=document.documentMode);var ZS=ti&&"TextEvent"in window&&!po,U1=ti&&(!Mp||po&&8<po&&11>=po),Rg=String.fromCharCode(32),kg=!1;function $1(t,e){switch(t){case"keyup":return KS.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function z1(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Nr=!1;function QS(t,e){switch(t){case"compositionend":return z1(e);case"keypress":return e.which!==32?null:(kg=!0,Rg);case"textInput":return t=e.data,t===Rg&&kg?null:t;default:return null}}function JS(t,e){if(Nr)return t==="compositionend"||!Mp&&$1(t,e)?(t=N1(),ml=Ap=vi=null,Nr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return U1&&e.locale!=="ko"?null:e.data;default:return null}}var eT={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Dg(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!eT[t.type]:e==="textarea"}function H1(t,e,n,i){x1(i),e=Xl(e,"onChange"),0<e.length&&(n=new Pp("onChange","change",null,n,i),t.push({event:n,listeners:e}))}var mo=null,Po=null;function tT(t){J1(t,0)}function ju(t){var e=zr(t);if(d1(e))return t}function nT(t,e){if(t==="change")return e}var j1=!1;if(ti){var Wc;if(ti){var Xc="oninput"in document;if(!Xc){var Fg=document.createElement("div");Fg.setAttribute("oninput","return;"),Xc=typeof Fg.oninput=="function"}Wc=Xc}else Wc=!1;j1=Wc&&(!document.documentMode||9<document.documentMode)}function Lg(){mo&&(mo.detachEvent("onpropertychange",G1),Po=mo=null)}function G1(t){if(t.propertyName==="value"&&ju(Po)){var e=[];H1(e,Po,t,bp(t)),E1(tT,e)}}function iT(t,e,n){t==="focusin"?(Lg(),mo=e,Po=n,mo.attachEvent("onpropertychange",G1)):t==="focusout"&&Lg()}function rT(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return ju(Po)}function sT(t,e){if(t==="click")return ju(e)}function oT(t,e){if(t==="input"||t==="change")return ju(e)}function aT(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var xn=typeof Object.is=="function"?Object.is:aT;function Io(t,e){if(xn(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var n=Object.keys(t),i=Object.keys(e);if(n.length!==i.length)return!1;for(i=0;i<n.length;i++){var r=n[i];if(!ed.call(e,r)||!xn(t[r],e[r]))return!1}return!0}function Bg(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ng(t,e){var n=Bg(t);t=0;for(var i;n;){if(n.nodeType===3){if(i=t+n.textContent.length,t<=e&&i>=e)return{node:n,offset:e-t};t=i}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Bg(n)}}function V1(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?V1(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function W1(){for(var t=window,e=$l();e instanceof t.HTMLIFrameElement;){try{var n=typeof e.contentWindow.location.href=="string"}catch{n=!1}if(n)t=e.contentWindow;else break;e=$l(t.document)}return e}function Op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function lT(t){var e=W1(),n=t.focusedElem,i=t.selectionRange;if(e!==n&&n&&n.ownerDocument&&V1(n.ownerDocument.documentElement,n)){if(i!==null&&Op(n)){if(e=i.start,t=i.end,t===void 0&&(t=e),"selectionStart"in n)n.selectionStart=e,n.selectionEnd=Math.min(t,n.value.length);else if(t=(e=n.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=n.textContent.length,s=Math.min(i.start,r);i=i.end===void 0?s:Math.min(i.end,r),!t.extend&&s>i&&(r=i,i=s,s=r),r=Ng(n,s);var o=Ng(n,i);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),s>i?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=n;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<e.length;n++)t=e[n],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var uT=ti&&"documentMode"in document&&11>=document.documentMode,Ur=null,xd=null,go=null,_d=!1;function Ug(t,e,n){var i=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;_d||Ur==null||Ur!==$l(i)||(i=Ur,"selectionStart"in i&&Op(i)?i={start:i.selectionStart,end:i.selectionEnd}:(i=(i.ownerDocument&&i.ownerDocument.defaultView||window).getSelection(),i={anchorNode:i.anchorNode,anchorOffset:i.anchorOffset,focusNode:i.focusNode,focusOffset:i.focusOffset}),go&&Io(go,i)||(go=i,i=Xl(xd,"onSelect"),0<i.length&&(e=new Pp("onSelect","select",null,e,n),t.push({event:e,listeners:i}),e.target=Ur)))}function Sa(t,e){var n={};return n[t.toLowerCase()]=e.toLowerCase(),n["Webkit"+t]="webkit"+e,n["Moz"+t]="moz"+e,n}var $r={animationend:Sa("Animation","AnimationEnd"),animationiteration:Sa("Animation","AnimationIteration"),animationstart:Sa("Animation","AnimationStart"),transitionend:Sa("Transition","TransitionEnd")},Yc={},X1={};ti&&(X1=document.createElement("div").style,"AnimationEvent"in window||(delete $r.animationend.animation,delete $r.animationiteration.animation,delete $r.animationstart.animation),"TransitionEvent"in window||delete $r.transitionend.transition);function Gu(t){if(Yc[t])return Yc[t];if(!$r[t])return t;var e=$r[t],n;for(n in e)if(e.hasOwnProperty(n)&&n in X1)return Yc[t]=e[n];return t}var Y1=Gu("animationend"),q1=Gu("animationiteration"),K1=Gu("animationstart"),Z1=Gu("transitionend"),Q1=new Map,$g="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Ni(t,e){Q1.set(t,e),wr(e,[t])}for(var qc=0;qc<$g.length;qc++){var Kc=$g[qc],cT=Kc.toLowerCase(),hT=Kc[0].toUpperCase()+Kc.slice(1);Ni(cT,"on"+hT)}Ni(Y1,"onAnimationEnd");Ni(q1,"onAnimationIteration");Ni(K1,"onAnimationStart");Ni("dblclick","onDoubleClick");Ni("focusin","onFocus");Ni("focusout","onBlur");Ni(Z1,"onTransitionEnd");ds("onMouseEnter",["mouseout","mouseover"]);ds("onMouseLeave",["mouseout","mouseover"]);ds("onPointerEnter",["pointerout","pointerover"]);ds("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var no="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),dT=new Set("cancel close invalid load scroll toggle".split(" ").concat(no));function zg(t,e,n){var i=t.type||"unknown-event";t.currentTarget=n,cS(i,e,void 0,t),t.currentTarget=null}function J1(t,e){e=(e&4)!==0;for(var n=0;n<t.length;n++){var i=t[n],r=i.event;i=i.listeners;e:{var s=void 0;if(e)for(var o=i.length-1;0<=o;o--){var a=i[o],l=a.instance,u=a.currentTarget;if(a=a.listener,l!==s&&r.isPropagationStopped())break e;zg(r,a,u),s=l}else for(o=0;o<i.length;o++){if(a=i[o],l=a.instance,u=a.currentTarget,a=a.listener,l!==s&&r.isPropagationStopped())break e;zg(r,a,u),s=l}}}if(Hl)throw t=md,Hl=!1,md=null,t}function be(t,e){var n=e[Td];n===void 0&&(n=e[Td]=new Set);var i=t+"__bubble";n.has(i)||(ex(e,t,2,!1),n.add(i))}function Zc(t,e,n){var i=0;e&&(i|=4),ex(n,t,i,e)}var Ta="_reactListening"+Math.random().toString(36).slice(2);function Mo(t){if(!t[Ta]){t[Ta]=!0,a1.forEach(function(n){n!=="selectionchange"&&(dT.has(n)||Zc(n,!1,t),Zc(n,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ta]||(e[Ta]=!0,Zc("selectionchange",!1,e))}}function ex(t,e,n,i){switch(B1(e)){case 1:var r=CS;break;case 4:r=AS;break;default:r=Cp}n=r.bind(null,e,n,t),r=void 0,!pd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),i?r!==void 0?t.addEventListener(e,n,{capture:!0,passive:r}):t.addEventListener(e,n,!0):r!==void 0?t.addEventListener(e,n,{passive:r}):t.addEventListener(e,n,!1)}function Qc(t,e,n,i,r){var s=i;if(!(e&1)&&!(e&2)&&i!==null)e:for(;;){if(i===null)return;var o=i.tag;if(o===3||o===4){var a=i.stateNode.containerInfo;if(a===r||a.nodeType===8&&a.parentNode===r)break;if(o===4)for(o=i.return;o!==null;){var l=o.tag;if((l===3||l===4)&&(l=o.stateNode.containerInfo,l===r||l.nodeType===8&&l.parentNode===r))return;o=o.return}for(;a!==null;){if(o=er(a),o===null)return;if(l=o.tag,l===5||l===6){i=s=o;continue e}a=a.parentNode}}i=i.return}E1(function(){var u=s,c=bp(n),h=[];e:{var d=Q1.get(t);if(d!==void 0){var f=Pp,p=t;switch(t){case"keypress":if(gl(n)===0)break e;case"keydown":case"keyup":f=HS;break;case"focusin":p="focus",f=Vc;break;case"focusout":p="blur",f=Vc;break;case"beforeblur":case"afterblur":f=Vc;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=Ig;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=MS;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=VS;break;case Y1:case q1:case K1:f=kS;break;case Z1:f=XS;break;case"scroll":f=PS;break;case"wheel":f=qS;break;case"copy":case"cut":case"paste":f=FS;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=Og}var g=(e&4)!==0,v=!g&&t==="scroll",m=g?d!==null?d+"Capture":null:d;g=[];for(var y=u,x;y!==null;){x=y;var _=x.stateNode;if(x.tag===5&&_!==null&&(x=_,m!==null&&(_=So(y,m),_!=null&&g.push(Oo(y,_,x)))),v)break;y=y.return}0<g.length&&(d=new f(d,p,null,n,c),h.push({event:d,listeners:g}))}}if(!(e&7)){e:{if(d=t==="mouseover"||t==="pointerover",f=t==="mouseout"||t==="pointerout",d&&n!==dd&&(p=n.relatedTarget||n.fromElement)&&(er(p)||p[ni]))break e;if((f||d)&&(d=c.window===c?c:(d=c.ownerDocument)?d.defaultView||d.parentWindow:window,f?(p=n.relatedTarget||n.toElement,f=u,p=p?er(p):null,p!==null&&(v=br(p),p!==v||p.tag!==5&&p.tag!==6)&&(p=null)):(f=null,p=u),f!==p)){if(g=Ig,_="onMouseLeave",m="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(g=Og,_="onPointerLeave",m="onPointerEnter",y="pointer"),v=f==null?d:zr(f),x=p==null?d:zr(p),d=new g(_,y+"leave",f,n,c),d.target=v,d.relatedTarget=x,_=null,er(c)===u&&(g=new g(m,y+"enter",p,n,c),g.target=x,g.relatedTarget=v,_=g),v=_,f&&p)t:{for(g=f,m=p,y=0,x=g;x;x=Pr(x))y++;for(x=0,_=m;_;_=Pr(_))x++;for(;0<y-x;)g=Pr(g),y--;for(;0<x-y;)m=Pr(m),x--;for(;y--;){if(g===m||m!==null&&g===m.alternate)break t;g=Pr(g),m=Pr(m)}g=null}else g=null;f!==null&&Hg(h,d,f,g,!1),p!==null&&v!==null&&Hg(h,v,p,g,!0)}}e:{if(d=u?zr(u):window,f=d.nodeName&&d.nodeName.toLowerCase(),f==="select"||f==="input"&&d.type==="file")var b=nT;else if(Dg(d))if(j1)b=oT;else{b=rT;var T=iT}else(f=d.nodeName)&&f.toLowerCase()==="input"&&(d.type==="checkbox"||d.type==="radio")&&(b=sT);if(b&&(b=b(t,u))){H1(h,b,n,c);break e}T&&T(t,d,u),t==="focusout"&&(T=d._wrapperState)&&T.controlled&&d.type==="number"&&ad(d,"number",d.value)}switch(T=u?zr(u):window,t){case"focusin":(Dg(T)||T.contentEditable==="true")&&(Ur=T,xd=u,go=null);break;case"focusout":go=xd=Ur=null;break;case"mousedown":_d=!0;break;case"contextmenu":case"mouseup":case"dragend":_d=!1,Ug(h,n,c);break;case"selectionchange":if(uT)break;case"keydown":case"keyup":Ug(h,n,c)}var E;if(Mp)e:{switch(t){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Nr?$1(t,n)&&(S="onCompositionEnd"):t==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(U1&&n.locale!=="ko"&&(Nr||S!=="onCompositionStart"?S==="onCompositionEnd"&&Nr&&(E=N1()):(vi=c,Ap="value"in vi?vi.value:vi.textContent,Nr=!0)),T=Xl(u,S),0<T.length&&(S=new Mg(S,t,null,n,c),h.push({event:S,listeners:T}),E?S.data=E:(E=z1(n),E!==null&&(S.data=E)))),(E=ZS?QS(t,n):JS(t,n))&&(u=Xl(u,"onBeforeInput"),0<u.length&&(c=new Mg("onBeforeInput","beforeinput",null,n,c),h.push({event:c,listeners:u}),c.data=E))}J1(h,e)})}function Oo(t,e,n){return{instance:t,listener:e,currentTarget:n}}function Xl(t,e){for(var n=e+"Capture",i=[];t!==null;){var r=t,s=r.stateNode;r.tag===5&&s!==null&&(r=s,s=So(t,n),s!=null&&i.unshift(Oo(t,s,r)),s=So(t,e),s!=null&&i.push(Oo(t,s,r))),t=t.return}return i}function Pr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Hg(t,e,n,i,r){for(var s=e._reactName,o=[];n!==null&&n!==i;){var a=n,l=a.alternate,u=a.stateNode;if(l!==null&&l===i)break;a.tag===5&&u!==null&&(a=u,r?(l=So(n,s),l!=null&&o.unshift(Oo(n,l,a))):r||(l=So(n,s),l!=null&&o.push(Oo(n,l,a)))),n=n.return}o.length!==0&&t.push({event:e,listeners:o})}var fT=/\r\n?/g,pT=/\u0000|\uFFFD/g;function jg(t){return(typeof t=="string"?t:""+t).replace(fT,`
`).replace(pT,"")}function Ca(t,e,n){if(e=jg(e),jg(t)!==e&&n)throw Error(U(425))}function Yl(){}var wd=null,bd=null;function Ed(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Sd=typeof setTimeout=="function"?setTimeout:void 0,mT=typeof clearTimeout=="function"?clearTimeout:void 0,Gg=typeof Promise=="function"?Promise:void 0,gT=typeof queueMicrotask=="function"?queueMicrotask:typeof Gg<"u"?function(t){return Gg.resolve(null).then(t).catch(vT)}:Sd;function vT(t){setTimeout(function(){throw t})}function Jc(t,e){var n=e,i=0;do{var r=n.nextSibling;if(t.removeChild(n),r&&r.nodeType===8)if(n=r.data,n==="/$"){if(i===0){t.removeChild(r),Ao(e);return}i--}else n!=="$"&&n!=="$?"&&n!=="$!"||i++;n=r}while(n);Ao(e)}function Si(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Vg(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="$"||n==="$!"||n==="$?"){if(e===0)return t;e--}else n==="/$"&&e++}t=t.previousSibling}return null}var Is=Math.random().toString(36).slice(2),In="__reactFiber$"+Is,Ro="__reactProps$"+Is,ni="__reactContainer$"+Is,Td="__reactEvents$"+Is,yT="__reactListeners$"+Is,xT="__reactHandles$"+Is;function er(t){var e=t[In];if(e)return e;for(var n=t.parentNode;n;){if(e=n[ni]||n[In]){if(n=e.alternate,e.child!==null||n!==null&&n.child!==null)for(t=Vg(t);t!==null;){if(n=t[In])return n;t=Vg(t)}return e}t=n,n=t.parentNode}return null}function ra(t){return t=t[In]||t[ni],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function zr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(U(33))}function Vu(t){return t[Ro]||null}var Cd=[],Hr=-1;function Ui(t){return{current:t}}function Se(t){0>Hr||(t.current=Cd[Hr],Cd[Hr]=null,Hr--)}function we(t,e){Hr++,Cd[Hr]=t.current,t.current=e}var Ri={},dt=Ui(Ri),St=Ui(!1),ur=Ri;function fs(t,e){var n=t.type.contextTypes;if(!n)return Ri;var i=t.stateNode;if(i&&i.__reactInternalMemoizedUnmaskedChildContext===e)return i.__reactInternalMemoizedMaskedChildContext;var r={},s;for(s in n)r[s]=e[s];return i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function Tt(t){return t=t.childContextTypes,t!=null}function ql(){Se(St),Se(dt)}function Wg(t,e,n){if(dt.current!==Ri)throw Error(U(168));we(dt,e),we(St,n)}function tx(t,e,n){var i=t.stateNode;if(e=e.childContextTypes,typeof i.getChildContext!="function")return n;i=i.getChildContext();for(var r in i)if(!(r in e))throw Error(U(108,iS(t)||"Unknown",r));return Re({},n,i)}function Kl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Ri,ur=dt.current,we(dt,t),we(St,St.current),!0}function Xg(t,e,n){var i=t.stateNode;if(!i)throw Error(U(169));n?(t=tx(t,e,ur),i.__reactInternalMemoizedMergedChildContext=t,Se(St),Se(dt),we(dt,t)):Se(St),we(St,n)}var Vn=null,Wu=!1,eh=!1;function nx(t){Vn===null?Vn=[t]:Vn.push(t)}function _T(t){Wu=!0,nx(t)}function $i(){if(!eh&&Vn!==null){eh=!0;var t=0,e=ve;try{var n=Vn;for(ve=1;t<n.length;t++){var i=n[t];do i=i(!0);while(i!==null)}Vn=null,Wu=!1}catch(r){throw Vn!==null&&(Vn=Vn.slice(t+1)),A1(Ep,$i),r}finally{ve=e,eh=!1}}return null}var jr=[],Gr=0,Zl=null,Ql=0,Gt=[],Vt=0,cr=null,Wn=1,Xn="";function Xi(t,e){jr[Gr++]=Ql,jr[Gr++]=Zl,Zl=t,Ql=e}function ix(t,e,n){Gt[Vt++]=Wn,Gt[Vt++]=Xn,Gt[Vt++]=cr,cr=t;var i=Wn;t=Xn;var r=32-pn(i)-1;i&=~(1<<r),n+=1;var s=32-pn(e)+r;if(30<s){var o=r-r%5;s=(i&(1<<o)-1).toString(32),i>>=o,r-=o,Wn=1<<32-pn(e)+r|n<<r|i,Xn=s+t}else Wn=1<<s|n<<r|i,Xn=t}function Rp(t){t.return!==null&&(Xi(t,1),ix(t,1,0))}function kp(t){for(;t===Zl;)Zl=jr[--Gr],jr[Gr]=null,Ql=jr[--Gr],jr[Gr]=null;for(;t===cr;)cr=Gt[--Vt],Gt[Vt]=null,Xn=Gt[--Vt],Gt[Vt]=null,Wn=Gt[--Vt],Gt[Vt]=null}var Lt=null,Rt=null,Te=!1,cn=null;function rx(t,e){var n=Xt(5,null,null,0);n.elementType="DELETED",n.stateNode=e,n.return=t,e=t.deletions,e===null?(t.deletions=[n],t.flags|=16):e.push(n)}function Yg(t,e){switch(t.tag){case 5:var n=t.type;return e=e.nodeType!==1||n.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Lt=t,Rt=Si(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Lt=t,Rt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(n=cr!==null?{id:Wn,overflow:Xn}:null,t.memoizedState={dehydrated:e,treeContext:n,retryLane:1073741824},n=Xt(18,null,null,0),n.stateNode=e,n.return=t,t.child=n,Lt=t,Rt=null,!0):!1;default:return!1}}function Ad(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Pd(t){if(Te){var e=Rt;if(e){var n=e;if(!Yg(t,e)){if(Ad(t))throw Error(U(418));e=Si(n.nextSibling);var i=Lt;e&&Yg(t,e)?rx(i,n):(t.flags=t.flags&-4097|2,Te=!1,Lt=t)}}else{if(Ad(t))throw Error(U(418));t.flags=t.flags&-4097|2,Te=!1,Lt=t}}}function qg(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Lt=t}function Aa(t){if(t!==Lt)return!1;if(!Te)return qg(t),Te=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Ed(t.type,t.memoizedProps)),e&&(e=Rt)){if(Ad(t))throw sx(),Error(U(418));for(;e;)rx(t,e),e=Si(e.nextSibling)}if(qg(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(U(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var n=t.data;if(n==="/$"){if(e===0){Rt=Si(t.nextSibling);break e}e--}else n!=="$"&&n!=="$!"&&n!=="$?"||e++}t=t.nextSibling}Rt=null}}else Rt=Lt?Si(t.stateNode.nextSibling):null;return!0}function sx(){for(var t=Rt;t;)t=Si(t.nextSibling)}function ps(){Rt=Lt=null,Te=!1}function Dp(t){cn===null?cn=[t]:cn.push(t)}var wT=oi.ReactCurrentBatchConfig;function an(t,e){if(t&&t.defaultProps){e=Re({},e),t=t.defaultProps;for(var n in t)e[n]===void 0&&(e[n]=t[n]);return e}return e}var Jl=Ui(null),eu=null,Vr=null,Fp=null;function Lp(){Fp=Vr=eu=null}function Bp(t){var e=Jl.current;Se(Jl),t._currentValue=e}function Id(t,e,n){for(;t!==null;){var i=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,i!==null&&(i.childLanes|=e)):i!==null&&(i.childLanes&e)!==e&&(i.childLanes|=e),t===n)break;t=t.return}}function ts(t,e){eu=t,Fp=Vr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Et=!0),t.firstContext=null)}function Kt(t){var e=t._currentValue;if(Fp!==t)if(t={context:t,memoizedValue:e,next:null},Vr===null){if(eu===null)throw Error(U(308));Vr=t,eu.dependencies={lanes:0,firstContext:t}}else Vr=Vr.next=t;return e}var tr=null;function Np(t){tr===null?tr=[t]:tr.push(t)}function ox(t,e,n,i){var r=e.interleaved;return r===null?(n.next=n,Np(e)):(n.next=r.next,r.next=n),e.interleaved=n,ii(t,i)}function ii(t,e){t.lanes|=e;var n=t.alternate;for(n!==null&&(n.lanes|=e),n=t,t=t.return;t!==null;)t.childLanes|=e,n=t.alternate,n!==null&&(n.childLanes|=e),n=t,t=t.return;return n.tag===3?n.stateNode:null}var pi=!1;function Up(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function ax(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Kn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Ti(t,e,n){var i=t.updateQueue;if(i===null)return null;if(i=i.shared,de&2){var r=i.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),i.pending=e,ii(t,n)}return r=i.interleaved,r===null?(e.next=e,Np(i)):(e.next=r.next,r.next=e),i.interleaved=e,ii(t,n)}function vl(t,e,n){if(e=e.updateQueue,e!==null&&(e=e.shared,(n&4194240)!==0)){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Sp(t,n)}}function Kg(t,e){var n=t.updateQueue,i=t.alternate;if(i!==null&&(i=i.updateQueue,n===i)){var r=null,s=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};s===null?r=s=o:s=s.next=o,n=n.next}while(n!==null);s===null?r=s=e:s=s.next=e}else r=s=e;n={baseState:i.baseState,firstBaseUpdate:r,lastBaseUpdate:s,shared:i.shared,effects:i.effects},t.updateQueue=n;return}t=n.lastBaseUpdate,t===null?n.firstBaseUpdate=e:t.next=e,n.lastBaseUpdate=e}function tu(t,e,n,i){var r=t.updateQueue;pi=!1;var s=r.firstBaseUpdate,o=r.lastBaseUpdate,a=r.shared.pending;if(a!==null){r.shared.pending=null;var l=a,u=l.next;l.next=null,o===null?s=u:o.next=u,o=l;var c=t.alternate;c!==null&&(c=c.updateQueue,a=c.lastBaseUpdate,a!==o&&(a===null?c.firstBaseUpdate=u:a.next=u,c.lastBaseUpdate=l))}if(s!==null){var h=r.baseState;o=0,c=u=l=null,a=s;do{var d=a.lane,f=a.eventTime;if((i&d)===d){c!==null&&(c=c.next={eventTime:f,lane:0,tag:a.tag,payload:a.payload,callback:a.callback,next:null});e:{var p=t,g=a;switch(d=e,f=n,g.tag){case 1:if(p=g.payload,typeof p=="function"){h=p.call(f,h,d);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=g.payload,d=typeof p=="function"?p.call(f,h,d):p,d==null)break e;h=Re({},h,d);break e;case 2:pi=!0}}a.callback!==null&&a.lane!==0&&(t.flags|=64,d=r.effects,d===null?r.effects=[a]:d.push(a))}else f={eventTime:f,lane:d,tag:a.tag,payload:a.payload,callback:a.callback,next:null},c===null?(u=c=f,l=h):c=c.next=f,o|=d;if(a=a.next,a===null){if(a=r.shared.pending,a===null)break;d=a,a=d.next,d.next=null,r.lastBaseUpdate=d,r.shared.pending=null}}while(1);if(c===null&&(l=h),r.baseState=l,r.firstBaseUpdate=u,r.lastBaseUpdate=c,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else s===null&&(r.shared.lanes=0);dr|=o,t.lanes=o,t.memoizedState=h}}function Zg(t,e,n){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var i=t[e],r=i.callback;if(r!==null){if(i.callback=null,i=n,typeof r!="function")throw Error(U(191,r));r.call(i)}}}var lx=new o1.Component().refs;function Md(t,e,n,i){e=t.memoizedState,n=n(i,e),n=n==null?e:Re({},e,n),t.memoizedState=n,t.lanes===0&&(t.updateQueue.baseState=n)}var Xu={isMounted:function(t){return(t=t._reactInternals)?br(t)===t:!1},enqueueSetState:function(t,e,n){t=t._reactInternals;var i=gt(),r=Ai(t),s=Kn(i,r);s.payload=e,n!=null&&(s.callback=n),e=Ti(t,s,r),e!==null&&(mn(e,t,r,i),vl(e,t,r))},enqueueReplaceState:function(t,e,n){t=t._reactInternals;var i=gt(),r=Ai(t),s=Kn(i,r);s.tag=1,s.payload=e,n!=null&&(s.callback=n),e=Ti(t,s,r),e!==null&&(mn(e,t,r,i),vl(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var n=gt(),i=Ai(t),r=Kn(n,i);r.tag=2,e!=null&&(r.callback=e),e=Ti(t,r,i),e!==null&&(mn(e,t,i,n),vl(e,t,i))}};function Qg(t,e,n,i,r,s,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(i,s,o):e.prototype&&e.prototype.isPureReactComponent?!Io(n,i)||!Io(r,s):!0}function ux(t,e,n){var i=!1,r=Ri,s=e.contextType;return typeof s=="object"&&s!==null?s=Kt(s):(r=Tt(e)?ur:dt.current,i=e.contextTypes,s=(i=i!=null)?fs(t,r):Ri),e=new e(n,s),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Xu,t.stateNode=e,e._reactInternals=t,i&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=s),e}function Jg(t,e,n,i){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(n,i),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(n,i),e.state!==t&&Xu.enqueueReplaceState(e,e.state,null)}function Od(t,e,n,i){var r=t.stateNode;r.props=n,r.state=t.memoizedState,r.refs=lx,Up(t);var s=e.contextType;typeof s=="object"&&s!==null?r.context=Kt(s):(s=Tt(e)?ur:dt.current,r.context=fs(t,s)),r.state=t.memoizedState,s=e.getDerivedStateFromProps,typeof s=="function"&&(Md(t,e,s,n),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Xu.enqueueReplaceState(r,r.state,null),tu(t,n,r,i),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Us(t,e,n){if(t=n.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(U(309));var i=n.stateNode}if(!i)throw Error(U(147,t));var r=i,s=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===s?e.ref:(e=function(o){var a=r.refs;a===lx&&(a=r.refs={}),o===null?delete a[s]:a[s]=o},e._stringRef=s,e)}if(typeof t!="string")throw Error(U(284));if(!n._owner)throw Error(U(290,t))}return t}function Pa(t,e){throw t=Object.prototype.toString.call(e),Error(U(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function ev(t){var e=t._init;return e(t._payload)}function cx(t){function e(m,y){if(t){var x=m.deletions;x===null?(m.deletions=[y],m.flags|=16):x.push(y)}}function n(m,y){if(!t)return null;for(;y!==null;)e(m,y),y=y.sibling;return null}function i(m,y){for(m=new Map;y!==null;)y.key!==null?m.set(y.key,y):m.set(y.index,y),y=y.sibling;return m}function r(m,y){return m=Pi(m,y),m.index=0,m.sibling=null,m}function s(m,y,x){return m.index=x,t?(x=m.alternate,x!==null?(x=x.index,x<y?(m.flags|=2,y):x):(m.flags|=2,y)):(m.flags|=1048576,y)}function o(m){return t&&m.alternate===null&&(m.flags|=2),m}function a(m,y,x,_){return y===null||y.tag!==6?(y=ah(x,m.mode,_),y.return=m,y):(y=r(y,x),y.return=m,y)}function l(m,y,x,_){var b=x.type;return b===Br?c(m,y,x.props.children,_,x.key):y!==null&&(y.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===fi&&ev(b)===y.type)?(_=r(y,x.props),_.ref=Us(m,y,x),_.return=m,_):(_=El(x.type,x.key,x.props,null,m.mode,_),_.ref=Us(m,y,x),_.return=m,_)}function u(m,y,x,_){return y===null||y.tag!==4||y.stateNode.containerInfo!==x.containerInfo||y.stateNode.implementation!==x.implementation?(y=lh(x,m.mode,_),y.return=m,y):(y=r(y,x.children||[]),y.return=m,y)}function c(m,y,x,_,b){return y===null||y.tag!==7?(y=sr(x,m.mode,_,b),y.return=m,y):(y=r(y,x),y.return=m,y)}function h(m,y,x){if(typeof y=="string"&&y!==""||typeof y=="number")return y=ah(""+y,m.mode,x),y.return=m,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case va:return x=El(y.type,y.key,y.props,null,m.mode,x),x.ref=Us(m,null,y),x.return=m,x;case Lr:return y=lh(y,m.mode,x),y.return=m,y;case fi:var _=y._init;return h(m,_(y._payload),x)}if(eo(y)||Ds(y))return y=sr(y,m.mode,x,null),y.return=m,y;Pa(m,y)}return null}function d(m,y,x,_){var b=y!==null?y.key:null;if(typeof x=="string"&&x!==""||typeof x=="number")return b!==null?null:a(m,y,""+x,_);if(typeof x=="object"&&x!==null){switch(x.$$typeof){case va:return x.key===b?l(m,y,x,_):null;case Lr:return x.key===b?u(m,y,x,_):null;case fi:return b=x._init,d(m,y,b(x._payload),_)}if(eo(x)||Ds(x))return b!==null?null:c(m,y,x,_,null);Pa(m,x)}return null}function f(m,y,x,_,b){if(typeof _=="string"&&_!==""||typeof _=="number")return m=m.get(x)||null,a(y,m,""+_,b);if(typeof _=="object"&&_!==null){switch(_.$$typeof){case va:return m=m.get(_.key===null?x:_.key)||null,l(y,m,_,b);case Lr:return m=m.get(_.key===null?x:_.key)||null,u(y,m,_,b);case fi:var T=_._init;return f(m,y,x,T(_._payload),b)}if(eo(_)||Ds(_))return m=m.get(x)||null,c(y,m,_,b,null);Pa(y,_)}return null}function p(m,y,x,_){for(var b=null,T=null,E=y,S=y=0,k=null;E!==null&&S<x.length;S++){E.index>S?(k=E,E=null):k=E.sibling;var O=d(m,E,x[S],_);if(O===null){E===null&&(E=k);break}t&&E&&O.alternate===null&&e(m,E),y=s(O,y,S),T===null?b=O:T.sibling=O,T=O,E=k}if(S===x.length)return n(m,E),Te&&Xi(m,S),b;if(E===null){for(;S<x.length;S++)E=h(m,x[S],_),E!==null&&(y=s(E,y,S),T===null?b=E:T.sibling=E,T=E);return Te&&Xi(m,S),b}for(E=i(m,E);S<x.length;S++)k=f(E,m,S,x[S],_),k!==null&&(t&&k.alternate!==null&&E.delete(k.key===null?S:k.key),y=s(k,y,S),T===null?b=k:T.sibling=k,T=k);return t&&E.forEach(function(F){return e(m,F)}),Te&&Xi(m,S),b}function g(m,y,x,_){var b=Ds(x);if(typeof b!="function")throw Error(U(150));if(x=b.call(x),x==null)throw Error(U(151));for(var T=b=null,E=y,S=y=0,k=null,O=x.next();E!==null&&!O.done;S++,O=x.next()){E.index>S?(k=E,E=null):k=E.sibling;var F=d(m,E,O.value,_);if(F===null){E===null&&(E=k);break}t&&E&&F.alternate===null&&e(m,E),y=s(F,y,S),T===null?b=F:T.sibling=F,T=F,E=k}if(O.done)return n(m,E),Te&&Xi(m,S),b;if(E===null){for(;!O.done;S++,O=x.next())O=h(m,O.value,_),O!==null&&(y=s(O,y,S),T===null?b=O:T.sibling=O,T=O);return Te&&Xi(m,S),b}for(E=i(m,E);!O.done;S++,O=x.next())O=f(E,m,S,O.value,_),O!==null&&(t&&O.alternate!==null&&E.delete(O.key===null?S:O.key),y=s(O,y,S),T===null?b=O:T.sibling=O,T=O);return t&&E.forEach(function(N){return e(m,N)}),Te&&Xi(m,S),b}function v(m,y,x,_){if(typeof x=="object"&&x!==null&&x.type===Br&&x.key===null&&(x=x.props.children),typeof x=="object"&&x!==null){switch(x.$$typeof){case va:e:{for(var b=x.key,T=y;T!==null;){if(T.key===b){if(b=x.type,b===Br){if(T.tag===7){n(m,T.sibling),y=r(T,x.props.children),y.return=m,m=y;break e}}else if(T.elementType===b||typeof b=="object"&&b!==null&&b.$$typeof===fi&&ev(b)===T.type){n(m,T.sibling),y=r(T,x.props),y.ref=Us(m,T,x),y.return=m,m=y;break e}n(m,T);break}else e(m,T);T=T.sibling}x.type===Br?(y=sr(x.props.children,m.mode,_,x.key),y.return=m,m=y):(_=El(x.type,x.key,x.props,null,m.mode,_),_.ref=Us(m,y,x),_.return=m,m=_)}return o(m);case Lr:e:{for(T=x.key;y!==null;){if(y.key===T)if(y.tag===4&&y.stateNode.containerInfo===x.containerInfo&&y.stateNode.implementation===x.implementation){n(m,y.sibling),y=r(y,x.children||[]),y.return=m,m=y;break e}else{n(m,y);break}else e(m,y);y=y.sibling}y=lh(x,m.mode,_),y.return=m,m=y}return o(m);case fi:return T=x._init,v(m,y,T(x._payload),_)}if(eo(x))return p(m,y,x,_);if(Ds(x))return g(m,y,x,_);Pa(m,x)}return typeof x=="string"&&x!==""||typeof x=="number"?(x=""+x,y!==null&&y.tag===6?(n(m,y.sibling),y=r(y,x),y.return=m,m=y):(n(m,y),y=ah(x,m.mode,_),y.return=m,m=y),o(m)):n(m,y)}return v}var ms=cx(!0),hx=cx(!1),sa={},kn=Ui(sa),ko=Ui(sa),Do=Ui(sa);function nr(t){if(t===sa)throw Error(U(174));return t}function $p(t,e){switch(we(Do,e),we(ko,t),we(kn,sa),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:ud(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=ud(e,t)}Se(kn),we(kn,e)}function gs(){Se(kn),Se(ko),Se(Do)}function dx(t){nr(Do.current);var e=nr(kn.current),n=ud(e,t.type);e!==n&&(we(ko,t),we(kn,n))}function zp(t){ko.current===t&&(Se(kn),Se(ko))}var Ie=Ui(0);function nu(t){for(var e=t;e!==null;){if(e.tag===13){var n=e.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var th=[];function Hp(){for(var t=0;t<th.length;t++)th[t]._workInProgressVersionPrimary=null;th.length=0}var yl=oi.ReactCurrentDispatcher,nh=oi.ReactCurrentBatchConfig,hr=0,Oe=null,We=null,Ke=null,iu=!1,vo=!1,Fo=0,bT=0;function lt(){throw Error(U(321))}function jp(t,e){if(e===null)return!1;for(var n=0;n<e.length&&n<t.length;n++)if(!xn(t[n],e[n]))return!1;return!0}function Gp(t,e,n,i,r,s){if(hr=s,Oe=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,yl.current=t===null||t.memoizedState===null?CT:AT,t=n(i,r),vo){s=0;do{if(vo=!1,Fo=0,25<=s)throw Error(U(301));s+=1,Ke=We=null,e.updateQueue=null,yl.current=PT,t=n(i,r)}while(vo)}if(yl.current=ru,e=We!==null&&We.next!==null,hr=0,Ke=We=Oe=null,iu=!1,e)throw Error(U(300));return t}function Vp(){var t=Fo!==0;return Fo=0,t}function Sn(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Ke===null?Oe.memoizedState=Ke=t:Ke=Ke.next=t,Ke}function Zt(){if(We===null){var t=Oe.alternate;t=t!==null?t.memoizedState:null}else t=We.next;var e=Ke===null?Oe.memoizedState:Ke.next;if(e!==null)Ke=e,We=t;else{if(t===null)throw Error(U(310));We=t,t={memoizedState:We.memoizedState,baseState:We.baseState,baseQueue:We.baseQueue,queue:We.queue,next:null},Ke===null?Oe.memoizedState=Ke=t:Ke=Ke.next=t}return Ke}function Lo(t,e){return typeof e=="function"?e(t):e}function ih(t){var e=Zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=We,r=i.baseQueue,s=n.pending;if(s!==null){if(r!==null){var o=r.next;r.next=s.next,s.next=o}i.baseQueue=r=s,n.pending=null}if(r!==null){s=r.next,i=i.baseState;var a=o=null,l=null,u=s;do{var c=u.lane;if((hr&c)===c)l!==null&&(l=l.next={lane:0,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null}),i=u.hasEagerState?u.eagerState:t(i,u.action);else{var h={lane:c,action:u.action,hasEagerState:u.hasEagerState,eagerState:u.eagerState,next:null};l===null?(a=l=h,o=i):l=l.next=h,Oe.lanes|=c,dr|=c}u=u.next}while(u!==null&&u!==s);l===null?o=i:l.next=a,xn(i,e.memoizedState)||(Et=!0),e.memoizedState=i,e.baseState=o,e.baseQueue=l,n.lastRenderedState=i}if(t=n.interleaved,t!==null){r=t;do s=r.lane,Oe.lanes|=s,dr|=s,r=r.next;while(r!==t)}else r===null&&(n.lanes=0);return[e.memoizedState,n.dispatch]}function rh(t){var e=Zt(),n=e.queue;if(n===null)throw Error(U(311));n.lastRenderedReducer=t;var i=n.dispatch,r=n.pending,s=e.memoizedState;if(r!==null){n.pending=null;var o=r=r.next;do s=t(s,o.action),o=o.next;while(o!==r);xn(s,e.memoizedState)||(Et=!0),e.memoizedState=s,e.baseQueue===null&&(e.baseState=s),n.lastRenderedState=s}return[s,i]}function fx(){}function px(t,e){var n=Oe,i=Zt(),r=e(),s=!xn(i.memoizedState,r);if(s&&(i.memoizedState=r,Et=!0),i=i.queue,Wp(vx.bind(null,n,i,t),[t]),i.getSnapshot!==e||s||Ke!==null&&Ke.memoizedState.tag&1){if(n.flags|=2048,Bo(9,gx.bind(null,n,i,r,e),void 0,null),Ze===null)throw Error(U(349));hr&30||mx(n,e,r)}return r}function mx(t,e,n){t.flags|=16384,t={getSnapshot:e,value:n},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.stores=[t]):(n=e.stores,n===null?e.stores=[t]:n.push(t))}function gx(t,e,n,i){e.value=n,e.getSnapshot=i,yx(e)&&xx(t)}function vx(t,e,n){return n(function(){yx(e)&&xx(t)})}function yx(t){var e=t.getSnapshot;t=t.value;try{var n=e();return!xn(t,n)}catch{return!0}}function xx(t){var e=ii(t,1);e!==null&&mn(e,t,1,-1)}function tv(t){var e=Sn();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Lo,lastRenderedState:t},e.queue=t,t=t.dispatch=TT.bind(null,Oe,t),[e.memoizedState,t]}function Bo(t,e,n,i){return t={tag:t,create:e,destroy:n,deps:i,next:null},e=Oe.updateQueue,e===null?(e={lastEffect:null,stores:null},Oe.updateQueue=e,e.lastEffect=t.next=t):(n=e.lastEffect,n===null?e.lastEffect=t.next=t:(i=n.next,n.next=t,t.next=i,e.lastEffect=t)),t}function _x(){return Zt().memoizedState}function xl(t,e,n,i){var r=Sn();Oe.flags|=t,r.memoizedState=Bo(1|e,n,void 0,i===void 0?null:i)}function Yu(t,e,n,i){var r=Zt();i=i===void 0?null:i;var s=void 0;if(We!==null){var o=We.memoizedState;if(s=o.destroy,i!==null&&jp(i,o.deps)){r.memoizedState=Bo(e,n,s,i);return}}Oe.flags|=t,r.memoizedState=Bo(1|e,n,s,i)}function nv(t,e){return xl(8390656,8,t,e)}function Wp(t,e){return Yu(2048,8,t,e)}function wx(t,e){return Yu(4,2,t,e)}function bx(t,e){return Yu(4,4,t,e)}function Ex(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Sx(t,e,n){return n=n!=null?n.concat([t]):null,Yu(4,4,Ex.bind(null,e,t),n)}function Xp(){}function Tx(t,e){var n=Zt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&jp(e,i[1])?i[0]:(n.memoizedState=[t,e],t)}function Cx(t,e){var n=Zt();e=e===void 0?null:e;var i=n.memoizedState;return i!==null&&e!==null&&jp(e,i[1])?i[0]:(t=t(),n.memoizedState=[t,e],t)}function Ax(t,e,n){return hr&21?(xn(n,e)||(n=M1(),Oe.lanes|=n,dr|=n,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Et=!0),t.memoizedState=n)}function ET(t,e){var n=ve;ve=n!==0&&4>n?n:4,t(!0);var i=nh.transition;nh.transition={};try{t(!1),e()}finally{ve=n,nh.transition=i}}function Px(){return Zt().memoizedState}function ST(t,e,n){var i=Ai(t);if(n={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null},Ix(t))Mx(e,n);else if(n=ox(t,e,n,i),n!==null){var r=gt();mn(n,t,i,r),Ox(n,e,i)}}function TT(t,e,n){var i=Ai(t),r={lane:i,action:n,hasEagerState:!1,eagerState:null,next:null};if(Ix(t))Mx(e,r);else{var s=t.alternate;if(t.lanes===0&&(s===null||s.lanes===0)&&(s=e.lastRenderedReducer,s!==null))try{var o=e.lastRenderedState,a=s(o,n);if(r.hasEagerState=!0,r.eagerState=a,xn(a,o)){var l=e.interleaved;l===null?(r.next=r,Np(e)):(r.next=l.next,l.next=r),e.interleaved=r;return}}catch{}finally{}n=ox(t,e,r,i),n!==null&&(r=gt(),mn(n,t,i,r),Ox(n,e,i))}}function Ix(t){var e=t.alternate;return t===Oe||e!==null&&e===Oe}function Mx(t,e){vo=iu=!0;var n=t.pending;n===null?e.next=e:(e.next=n.next,n.next=e),t.pending=e}function Ox(t,e,n){if(n&4194240){var i=e.lanes;i&=t.pendingLanes,n|=i,e.lanes=n,Sp(t,n)}}var ru={readContext:Kt,useCallback:lt,useContext:lt,useEffect:lt,useImperativeHandle:lt,useInsertionEffect:lt,useLayoutEffect:lt,useMemo:lt,useReducer:lt,useRef:lt,useState:lt,useDebugValue:lt,useDeferredValue:lt,useTransition:lt,useMutableSource:lt,useSyncExternalStore:lt,useId:lt,unstable_isNewReconciler:!1},CT={readContext:Kt,useCallback:function(t,e){return Sn().memoizedState=[t,e===void 0?null:e],t},useContext:Kt,useEffect:nv,useImperativeHandle:function(t,e,n){return n=n!=null?n.concat([t]):null,xl(4194308,4,Ex.bind(null,e,t),n)},useLayoutEffect:function(t,e){return xl(4194308,4,t,e)},useInsertionEffect:function(t,e){return xl(4,2,t,e)},useMemo:function(t,e){var n=Sn();return e=e===void 0?null:e,t=t(),n.memoizedState=[t,e],t},useReducer:function(t,e,n){var i=Sn();return e=n!==void 0?n(e):e,i.memoizedState=i.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},i.queue=t,t=t.dispatch=ST.bind(null,Oe,t),[i.memoizedState,t]},useRef:function(t){var e=Sn();return t={current:t},e.memoizedState=t},useState:tv,useDebugValue:Xp,useDeferredValue:function(t){return Sn().memoizedState=t},useTransition:function(){var t=tv(!1),e=t[0];return t=ET.bind(null,t[1]),Sn().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,n){var i=Oe,r=Sn();if(Te){if(n===void 0)throw Error(U(407));n=n()}else{if(n=e(),Ze===null)throw Error(U(349));hr&30||mx(i,e,n)}r.memoizedState=n;var s={value:n,getSnapshot:e};return r.queue=s,nv(vx.bind(null,i,s,t),[t]),i.flags|=2048,Bo(9,gx.bind(null,i,s,n,e),void 0,null),n},useId:function(){var t=Sn(),e=Ze.identifierPrefix;if(Te){var n=Xn,i=Wn;n=(i&~(1<<32-pn(i)-1)).toString(32)+n,e=":"+e+"R"+n,n=Fo++,0<n&&(e+="H"+n.toString(32)),e+=":"}else n=bT++,e=":"+e+"r"+n.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},AT={readContext:Kt,useCallback:Tx,useContext:Kt,useEffect:Wp,useImperativeHandle:Sx,useInsertionEffect:wx,useLayoutEffect:bx,useMemo:Cx,useReducer:ih,useRef:_x,useState:function(){return ih(Lo)},useDebugValue:Xp,useDeferredValue:function(t){var e=Zt();return Ax(e,We.memoizedState,t)},useTransition:function(){var t=ih(Lo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:fx,useSyncExternalStore:px,useId:Px,unstable_isNewReconciler:!1},PT={readContext:Kt,useCallback:Tx,useContext:Kt,useEffect:Wp,useImperativeHandle:Sx,useInsertionEffect:wx,useLayoutEffect:bx,useMemo:Cx,useReducer:rh,useRef:_x,useState:function(){return rh(Lo)},useDebugValue:Xp,useDeferredValue:function(t){var e=Zt();return We===null?e.memoizedState=t:Ax(e,We.memoizedState,t)},useTransition:function(){var t=rh(Lo)[0],e=Zt().memoizedState;return[t,e]},useMutableSource:fx,useSyncExternalStore:px,useId:Px,unstable_isNewReconciler:!1};function vs(t,e){try{var n="",i=e;do n+=nS(i),i=i.return;while(i);var r=n}catch(s){r=`
Error generating stack: `+s.message+`
`+s.stack}return{value:t,source:e,stack:r,digest:null}}function sh(t,e,n){return{value:t,source:null,stack:n??null,digest:e??null}}function Rd(t,e){try{console.error(e.value)}catch(n){setTimeout(function(){throw n})}}var IT=typeof WeakMap=="function"?WeakMap:Map;function Rx(t,e,n){n=Kn(-1,n),n.tag=3,n.payload={element:null};var i=e.value;return n.callback=function(){ou||(ou=!0,Hd=i),Rd(t,e)},n}function kx(t,e,n){n=Kn(-1,n),n.tag=3;var i=t.type.getDerivedStateFromError;if(typeof i=="function"){var r=e.value;n.payload=function(){return i(r)},n.callback=function(){Rd(t,e)}}var s=t.stateNode;return s!==null&&typeof s.componentDidCatch=="function"&&(n.callback=function(){Rd(t,e),typeof i!="function"&&(Ci===null?Ci=new Set([this]):Ci.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),n}function iv(t,e,n){var i=t.pingCache;if(i===null){i=t.pingCache=new IT;var r=new Set;i.set(e,r)}else r=i.get(e),r===void 0&&(r=new Set,i.set(e,r));r.has(n)||(r.add(n),t=jT.bind(null,t,e,n),e.then(t,t))}function rv(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function sv(t,e,n,i,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(e=Kn(-1,1),e.tag=2,Ti(n,e,1))),n.lanes|=1),t)}var MT=oi.ReactCurrentOwner,Et=!1;function ft(t,e,n,i){e.child=t===null?hx(e,null,n,i):ms(e,t.child,n,i)}function ov(t,e,n,i,r){n=n.render;var s=e.ref;return ts(e,r),i=Gp(t,e,n,i,s,r),n=Vp(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ri(t,e,r)):(Te&&n&&Rp(e),e.flags|=1,ft(t,e,i,r),e.child)}function av(t,e,n,i,r){if(t===null){var s=n.type;return typeof s=="function"&&!tm(s)&&s.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(e.tag=15,e.type=s,Dx(t,e,s,i,r)):(t=El(n.type,null,i,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(s=t.child,!(t.lanes&r)){var o=s.memoizedProps;if(n=n.compare,n=n!==null?n:Io,n(o,i)&&t.ref===e.ref)return ri(t,e,r)}return e.flags|=1,t=Pi(s,i),t.ref=e.ref,t.return=e,e.child=t}function Dx(t,e,n,i,r){if(t!==null){var s=t.memoizedProps;if(Io(s,i)&&t.ref===e.ref)if(Et=!1,e.pendingProps=i=s,(t.lanes&r)!==0)t.flags&131072&&(Et=!0);else return e.lanes=t.lanes,ri(t,e,r)}return kd(t,e,n,i,r)}function Fx(t,e,n){var i=e.pendingProps,r=i.children,s=t!==null?t.memoizedState:null;if(i.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},we(Xr,Ot),Ot|=n;else{if(!(n&1073741824))return t=s!==null?s.baseLanes|n:n,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,we(Xr,Ot),Ot|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},i=s!==null?s.baseLanes:n,we(Xr,Ot),Ot|=i}else s!==null?(i=s.baseLanes|n,e.memoizedState=null):i=n,we(Xr,Ot),Ot|=i;return ft(t,e,r,n),e.child}function Lx(t,e){var n=e.ref;(t===null&&n!==null||t!==null&&t.ref!==n)&&(e.flags|=512,e.flags|=2097152)}function kd(t,e,n,i,r){var s=Tt(n)?ur:dt.current;return s=fs(e,s),ts(e,r),n=Gp(t,e,n,i,s,r),i=Vp(),t!==null&&!Et?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ri(t,e,r)):(Te&&i&&Rp(e),e.flags|=1,ft(t,e,n,r),e.child)}function lv(t,e,n,i,r){if(Tt(n)){var s=!0;Kl(e)}else s=!1;if(ts(e,r),e.stateNode===null)_l(t,e),ux(e,n,i),Od(e,n,i,r),i=!0;else if(t===null){var o=e.stateNode,a=e.memoizedProps;o.props=a;var l=o.context,u=n.contextType;typeof u=="object"&&u!==null?u=Kt(u):(u=Tt(n)?ur:dt.current,u=fs(e,u));var c=n.getDerivedStateFromProps,h=typeof c=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==i||l!==u)&&Jg(e,o,i,u),pi=!1;var d=e.memoizedState;o.state=d,tu(e,i,o,r),l=e.memoizedState,a!==i||d!==l||St.current||pi?(typeof c=="function"&&(Md(e,n,c,i),l=e.memoizedState),(a=pi||Qg(e,n,a,i,d,l,u))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=i,e.memoizedState=l),o.props=i,o.state=l,o.context=u,i=a):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),i=!1)}else{o=e.stateNode,ax(t,e),a=e.memoizedProps,u=e.type===e.elementType?a:an(e.type,a),o.props=u,h=e.pendingProps,d=o.context,l=n.contextType,typeof l=="object"&&l!==null?l=Kt(l):(l=Tt(n)?ur:dt.current,l=fs(e,l));var f=n.getDerivedStateFromProps;(c=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(a!==h||d!==l)&&Jg(e,o,i,l),pi=!1,d=e.memoizedState,o.state=d,tu(e,i,o,r);var p=e.memoizedState;a!==h||d!==p||St.current||pi?(typeof f=="function"&&(Md(e,n,f,i),p=e.memoizedState),(u=pi||Qg(e,n,u,i,d,p,l)||!1)?(c||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(i,p,l),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(i,p,l)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),e.memoizedProps=i,e.memoizedState=p),o.props=i,o.state=p,o.context=l,i=u):(typeof o.componentDidUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||a===t.memoizedProps&&d===t.memoizedState||(e.flags|=1024),i=!1)}return Dd(t,e,n,i,s,r)}function Dd(t,e,n,i,r,s){Lx(t,e);var o=(e.flags&128)!==0;if(!i&&!o)return r&&Xg(e,n,!1),ri(t,e,s);i=e.stateNode,MT.current=e;var a=o&&typeof n.getDerivedStateFromError!="function"?null:i.render();return e.flags|=1,t!==null&&o?(e.child=ms(e,t.child,null,s),e.child=ms(e,null,a,s)):ft(t,e,a,s),e.memoizedState=i.state,r&&Xg(e,n,!0),e.child}function Bx(t){var e=t.stateNode;e.pendingContext?Wg(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Wg(t,e.context,!1),$p(t,e.containerInfo)}function uv(t,e,n,i,r){return ps(),Dp(r),e.flags|=256,ft(t,e,n,i),e.child}var Fd={dehydrated:null,treeContext:null,retryLane:0};function Ld(t){return{baseLanes:t,cachePool:null,transitions:null}}function Nx(t,e,n){var i=e.pendingProps,r=Ie.current,s=!1,o=(e.flags&128)!==0,a;if((a=o)||(a=t!==null&&t.memoizedState===null?!1:(r&2)!==0),a?(s=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),we(Ie,r&1),t===null)return Pd(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=i.children,t=i.fallback,s?(i=e.mode,s=e.child,o={mode:"hidden",children:o},!(i&1)&&s!==null?(s.childLanes=0,s.pendingProps=o):s=Zu(o,i,0,null),t=sr(t,i,n,null),s.return=e,t.return=e,s.sibling=t,e.child=s,e.child.memoizedState=Ld(n),e.memoizedState=Fd,t):Yp(e,o));if(r=t.memoizedState,r!==null&&(a=r.dehydrated,a!==null))return OT(t,e,o,i,a,r,n);if(s){s=i.fallback,o=e.mode,r=t.child,a=r.sibling;var l={mode:"hidden",children:i.children};return!(o&1)&&e.child!==r?(i=e.child,i.childLanes=0,i.pendingProps=l,e.deletions=null):(i=Pi(r,l),i.subtreeFlags=r.subtreeFlags&14680064),a!==null?s=Pi(a,s):(s=sr(s,o,n,null),s.flags|=2),s.return=e,i.return=e,i.sibling=s,e.child=i,i=s,s=e.child,o=t.child.memoizedState,o=o===null?Ld(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},s.memoizedState=o,s.childLanes=t.childLanes&~n,e.memoizedState=Fd,i}return s=t.child,t=s.sibling,i=Pi(s,{mode:"visible",children:i.children}),!(e.mode&1)&&(i.lanes=n),i.return=e,i.sibling=null,t!==null&&(n=e.deletions,n===null?(e.deletions=[t],e.flags|=16):n.push(t)),e.child=i,e.memoizedState=null,i}function Yp(t,e){return e=Zu({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Ia(t,e,n,i){return i!==null&&Dp(i),ms(e,t.child,null,n),t=Yp(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function OT(t,e,n,i,r,s,o){if(n)return e.flags&256?(e.flags&=-257,i=sh(Error(U(422))),Ia(t,e,o,i)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(s=i.fallback,r=e.mode,i=Zu({mode:"visible",children:i.children},r,0,null),s=sr(s,r,o,null),s.flags|=2,i.return=e,s.return=e,i.sibling=s,e.child=i,e.mode&1&&ms(e,t.child,null,o),e.child.memoizedState=Ld(o),e.memoizedState=Fd,s);if(!(e.mode&1))return Ia(t,e,o,null);if(r.data==="$!"){if(i=r.nextSibling&&r.nextSibling.dataset,i)var a=i.dgst;return i=a,s=Error(U(419)),i=sh(s,i,void 0),Ia(t,e,o,i)}if(a=(o&t.childLanes)!==0,Et||a){if(i=Ze,i!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(i.suspendedLanes|o)?0:r,r!==0&&r!==s.retryLane&&(s.retryLane=r,ii(t,r),mn(i,t,r,-1))}return em(),i=sh(Error(U(421))),Ia(t,e,o,i)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=GT.bind(null,t),r._reactRetry=e,null):(t=s.treeContext,Rt=Si(r.nextSibling),Lt=e,Te=!0,cn=null,t!==null&&(Gt[Vt++]=Wn,Gt[Vt++]=Xn,Gt[Vt++]=cr,Wn=t.id,Xn=t.overflow,cr=e),e=Yp(e,i.children),e.flags|=4096,e)}function cv(t,e,n){t.lanes|=e;var i=t.alternate;i!==null&&(i.lanes|=e),Id(t.return,e,n)}function oh(t,e,n,i,r){var s=t.memoizedState;s===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:i,tail:n,tailMode:r}:(s.isBackwards=e,s.rendering=null,s.renderingStartTime=0,s.last=i,s.tail=n,s.tailMode=r)}function Ux(t,e,n){var i=e.pendingProps,r=i.revealOrder,s=i.tail;if(ft(t,e,i.children,n),i=Ie.current,i&2)i=i&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&cv(t,n,e);else if(t.tag===19)cv(t,n,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}i&=1}if(we(Ie,i),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(n=e.child,r=null;n!==null;)t=n.alternate,t!==null&&nu(t)===null&&(r=n),n=n.sibling;n=r,n===null?(r=e.child,e.child=null):(r=n.sibling,n.sibling=null),oh(e,!1,r,n,s);break;case"backwards":for(n=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&nu(t)===null){e.child=r;break}t=r.sibling,r.sibling=n,n=r,r=t}oh(e,!0,n,null,s);break;case"together":oh(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function _l(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ri(t,e,n){if(t!==null&&(e.dependencies=t.dependencies),dr|=e.lanes,!(n&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(U(153));if(e.child!==null){for(t=e.child,n=Pi(t,t.pendingProps),e.child=n,n.return=e;t.sibling!==null;)t=t.sibling,n=n.sibling=Pi(t,t.pendingProps),n.return=e;n.sibling=null}return e.child}function RT(t,e,n){switch(e.tag){case 3:Bx(e),ps();break;case 5:dx(e);break;case 1:Tt(e.type)&&Kl(e);break;case 4:$p(e,e.stateNode.containerInfo);break;case 10:var i=e.type._context,r=e.memoizedProps.value;we(Jl,i._currentValue),i._currentValue=r;break;case 13:if(i=e.memoizedState,i!==null)return i.dehydrated!==null?(we(Ie,Ie.current&1),e.flags|=128,null):n&e.child.childLanes?Nx(t,e,n):(we(Ie,Ie.current&1),t=ri(t,e,n),t!==null?t.sibling:null);we(Ie,Ie.current&1);break;case 19:if(i=(n&e.childLanes)!==0,t.flags&128){if(i)return Ux(t,e,n);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),we(Ie,Ie.current),i)break;return null;case 22:case 23:return e.lanes=0,Fx(t,e,n)}return ri(t,e,n)}var $x,Bd,zx,Hx;$x=function(t,e){for(var n=e.child;n!==null;){if(n.tag===5||n.tag===6)t.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===e)break;for(;n.sibling===null;){if(n.return===null||n.return===e)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Bd=function(){};zx=function(t,e,n,i){var r=t.memoizedProps;if(r!==i){t=e.stateNode,nr(kn.current);var s=null;switch(n){case"input":r=sd(t,r),i=sd(t,i),s=[];break;case"select":r=Re({},r,{value:void 0}),i=Re({},i,{value:void 0}),s=[];break;case"textarea":r=ld(t,r),i=ld(t,i),s=[];break;default:typeof r.onClick!="function"&&typeof i.onClick=="function"&&(t.onclick=Yl)}cd(n,i);var o;n=null;for(u in r)if(!i.hasOwnProperty(u)&&r.hasOwnProperty(u)&&r[u]!=null)if(u==="style"){var a=r[u];for(o in a)a.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else u!=="dangerouslySetInnerHTML"&&u!=="children"&&u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&u!=="autoFocus"&&(bo.hasOwnProperty(u)?s||(s=[]):(s=s||[]).push(u,null));for(u in i){var l=i[u];if(a=r!=null?r[u]:void 0,i.hasOwnProperty(u)&&l!==a&&(l!=null||a!=null))if(u==="style")if(a){for(o in a)!a.hasOwnProperty(o)||l&&l.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in l)l.hasOwnProperty(o)&&a[o]!==l[o]&&(n||(n={}),n[o]=l[o])}else n||(s||(s=[]),s.push(u,n)),n=l;else u==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,a=a?a.__html:void 0,l!=null&&a!==l&&(s=s||[]).push(u,l)):u==="children"?typeof l!="string"&&typeof l!="number"||(s=s||[]).push(u,""+l):u!=="suppressContentEditableWarning"&&u!=="suppressHydrationWarning"&&(bo.hasOwnProperty(u)?(l!=null&&u==="onScroll"&&be("scroll",t),s||a===l||(s=[])):(s=s||[]).push(u,l))}n&&(s=s||[]).push("style",n);var u=s;(e.updateQueue=u)&&(e.flags|=4)}};Hx=function(t,e,n,i){n!==i&&(e.flags|=4)};function $s(t,e){if(!Te)switch(t.tailMode){case"hidden":e=t.tail;for(var n=null;e!==null;)e.alternate!==null&&(n=e),e=e.sibling;n===null?t.tail=null:n.sibling=null;break;case"collapsed":n=t.tail;for(var i=null;n!==null;)n.alternate!==null&&(i=n),n=n.sibling;i===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:i.sibling=null}}function ut(t){var e=t.alternate!==null&&t.alternate.child===t.child,n=0,i=0;if(e)for(var r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags&14680064,i|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)n|=r.lanes|r.childLanes,i|=r.subtreeFlags,i|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=i,t.childLanes=n,e}function kT(t,e,n){var i=e.pendingProps;switch(kp(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return ut(e),null;case 1:return Tt(e.type)&&ql(),ut(e),null;case 3:return i=e.stateNode,gs(),Se(St),Se(dt),Hp(),i.pendingContext&&(i.context=i.pendingContext,i.pendingContext=null),(t===null||t.child===null)&&(Aa(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,cn!==null&&(Vd(cn),cn=null))),Bd(t,e),ut(e),null;case 5:zp(e);var r=nr(Do.current);if(n=e.type,t!==null&&e.stateNode!=null)zx(t,e,n,i,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!i){if(e.stateNode===null)throw Error(U(166));return ut(e),null}if(t=nr(kn.current),Aa(e)){i=e.stateNode,n=e.type;var s=e.memoizedProps;switch(i[In]=e,i[Ro]=s,t=(e.mode&1)!==0,n){case"dialog":be("cancel",i),be("close",i);break;case"iframe":case"object":case"embed":be("load",i);break;case"video":case"audio":for(r=0;r<no.length;r++)be(no[r],i);break;case"source":be("error",i);break;case"img":case"image":case"link":be("error",i),be("load",i);break;case"details":be("toggle",i);break;case"input":xg(i,s),be("invalid",i);break;case"select":i._wrapperState={wasMultiple:!!s.multiple},be("invalid",i);break;case"textarea":wg(i,s),be("invalid",i)}cd(n,s),r=null;for(var o in s)if(s.hasOwnProperty(o)){var a=s[o];o==="children"?typeof a=="string"?i.textContent!==a&&(s.suppressHydrationWarning!==!0&&Ca(i.textContent,a,t),r=["children",a]):typeof a=="number"&&i.textContent!==""+a&&(s.suppressHydrationWarning!==!0&&Ca(i.textContent,a,t),r=["children",""+a]):bo.hasOwnProperty(o)&&a!=null&&o==="onScroll"&&be("scroll",i)}switch(n){case"input":ya(i),_g(i,s,!0);break;case"textarea":ya(i),bg(i);break;case"select":case"option":break;default:typeof s.onClick=="function"&&(i.onclick=Yl)}i=r,e.updateQueue=i,i!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=m1(n)),t==="http://www.w3.org/1999/xhtml"?n==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof i.is=="string"?t=o.createElement(n,{is:i.is}):(t=o.createElement(n),n==="select"&&(o=t,i.multiple?o.multiple=!0:i.size&&(o.size=i.size))):t=o.createElementNS(t,n),t[In]=e,t[Ro]=i,$x(t,e,!1,!1),e.stateNode=t;e:{switch(o=hd(n,i),n){case"dialog":be("cancel",t),be("close",t),r=i;break;case"iframe":case"object":case"embed":be("load",t),r=i;break;case"video":case"audio":for(r=0;r<no.length;r++)be(no[r],t);r=i;break;case"source":be("error",t),r=i;break;case"img":case"image":case"link":be("error",t),be("load",t),r=i;break;case"details":be("toggle",t),r=i;break;case"input":xg(t,i),r=sd(t,i),be("invalid",t);break;case"option":r=i;break;case"select":t._wrapperState={wasMultiple:!!i.multiple},r=Re({},i,{value:void 0}),be("invalid",t);break;case"textarea":wg(t,i),r=ld(t,i),be("invalid",t);break;default:r=i}cd(n,r),a=r;for(s in a)if(a.hasOwnProperty(s)){var l=a[s];s==="style"?y1(t,l):s==="dangerouslySetInnerHTML"?(l=l?l.__html:void 0,l!=null&&g1(t,l)):s==="children"?typeof l=="string"?(n!=="textarea"||l!=="")&&Eo(t,l):typeof l=="number"&&Eo(t,""+l):s!=="suppressContentEditableWarning"&&s!=="suppressHydrationWarning"&&s!=="autoFocus"&&(bo.hasOwnProperty(s)?l!=null&&s==="onScroll"&&be("scroll",t):l!=null&&yp(t,s,l,o))}switch(n){case"input":ya(t),_g(t,i,!1);break;case"textarea":ya(t),bg(t);break;case"option":i.value!=null&&t.setAttribute("value",""+Oi(i.value));break;case"select":t.multiple=!!i.multiple,s=i.value,s!=null?Zr(t,!!i.multiple,s,!1):i.defaultValue!=null&&Zr(t,!!i.multiple,i.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Yl)}switch(n){case"button":case"input":case"select":case"textarea":i=!!i.autoFocus;break e;case"img":i=!0;break e;default:i=!1}}i&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return ut(e),null;case 6:if(t&&e.stateNode!=null)Hx(t,e,t.memoizedProps,i);else{if(typeof i!="string"&&e.stateNode===null)throw Error(U(166));if(n=nr(Do.current),nr(kn.current),Aa(e)){if(i=e.stateNode,n=e.memoizedProps,i[In]=e,(s=i.nodeValue!==n)&&(t=Lt,t!==null))switch(t.tag){case 3:Ca(i.nodeValue,n,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ca(i.nodeValue,n,(t.mode&1)!==0)}s&&(e.flags|=4)}else i=(n.nodeType===9?n:n.ownerDocument).createTextNode(i),i[In]=e,e.stateNode=i}return ut(e),null;case 13:if(Se(Ie),i=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Te&&Rt!==null&&e.mode&1&&!(e.flags&128))sx(),ps(),e.flags|=98560,s=!1;else if(s=Aa(e),i!==null&&i.dehydrated!==null){if(t===null){if(!s)throw Error(U(318));if(s=e.memoizedState,s=s!==null?s.dehydrated:null,!s)throw Error(U(317));s[In]=e}else ps(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;ut(e),s=!1}else cn!==null&&(Vd(cn),cn=null),s=!0;if(!s)return e.flags&65536?e:null}return e.flags&128?(e.lanes=n,e):(i=i!==null,i!==(t!==null&&t.memoizedState!==null)&&i&&(e.child.flags|=8192,e.mode&1&&(t===null||Ie.current&1?Ye===0&&(Ye=3):em())),e.updateQueue!==null&&(e.flags|=4),ut(e),null);case 4:return gs(),Bd(t,e),t===null&&Mo(e.stateNode.containerInfo),ut(e),null;case 10:return Bp(e.type._context),ut(e),null;case 17:return Tt(e.type)&&ql(),ut(e),null;case 19:if(Se(Ie),s=e.memoizedState,s===null)return ut(e),null;if(i=(e.flags&128)!==0,o=s.rendering,o===null)if(i)$s(s,!1);else{if(Ye!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=nu(t),o!==null){for(e.flags|=128,$s(s,!1),i=o.updateQueue,i!==null&&(e.updateQueue=i,e.flags|=4),e.subtreeFlags=0,i=n,n=e.child;n!==null;)s=n,t=i,s.flags&=14680066,o=s.alternate,o===null?(s.childLanes=0,s.lanes=t,s.child=null,s.subtreeFlags=0,s.memoizedProps=null,s.memoizedState=null,s.updateQueue=null,s.dependencies=null,s.stateNode=null):(s.childLanes=o.childLanes,s.lanes=o.lanes,s.child=o.child,s.subtreeFlags=0,s.deletions=null,s.memoizedProps=o.memoizedProps,s.memoizedState=o.memoizedState,s.updateQueue=o.updateQueue,s.type=o.type,t=o.dependencies,s.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),n=n.sibling;return we(Ie,Ie.current&1|2),e.child}t=t.sibling}s.tail!==null&&$e()>ys&&(e.flags|=128,i=!0,$s(s,!1),e.lanes=4194304)}else{if(!i)if(t=nu(o),t!==null){if(e.flags|=128,i=!0,n=t.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),$s(s,!0),s.tail===null&&s.tailMode==="hidden"&&!o.alternate&&!Te)return ut(e),null}else 2*$e()-s.renderingStartTime>ys&&n!==1073741824&&(e.flags|=128,i=!0,$s(s,!1),e.lanes=4194304);s.isBackwards?(o.sibling=e.child,e.child=o):(n=s.last,n!==null?n.sibling=o:e.child=o,s.last=o)}return s.tail!==null?(e=s.tail,s.rendering=e,s.tail=e.sibling,s.renderingStartTime=$e(),e.sibling=null,n=Ie.current,we(Ie,i?n&1|2:n&1),e):(ut(e),null);case 22:case 23:return Jp(),i=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==i&&(e.flags|=8192),i&&e.mode&1?Ot&1073741824&&(ut(e),e.subtreeFlags&6&&(e.flags|=8192)):ut(e),null;case 24:return null;case 25:return null}throw Error(U(156,e.tag))}function DT(t,e){switch(kp(e),e.tag){case 1:return Tt(e.type)&&ql(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return gs(),Se(St),Se(dt),Hp(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return zp(e),null;case 13:if(Se(Ie),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(U(340));ps()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Se(Ie),null;case 4:return gs(),null;case 10:return Bp(e.type._context),null;case 22:case 23:return Jp(),null;case 24:return null;default:return null}}var Ma=!1,ht=!1,FT=typeof WeakSet=="function"?WeakSet:Set,Y=null;function Wr(t,e){var n=t.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(i){Le(t,e,i)}else n.current=null}function Nd(t,e,n){try{n()}catch(i){Le(t,e,i)}}var hv=!1;function LT(t,e){if(wd=Vl,t=W1(),Op(t)){if("selectionStart"in t)var n={start:t.selectionStart,end:t.selectionEnd};else e:{n=(n=t.ownerDocument)&&n.defaultView||window;var i=n.getSelection&&n.getSelection();if(i&&i.rangeCount!==0){n=i.anchorNode;var r=i.anchorOffset,s=i.focusNode;i=i.focusOffset;try{n.nodeType,s.nodeType}catch{n=null;break e}var o=0,a=-1,l=-1,u=0,c=0,h=t,d=null;t:for(;;){for(var f;h!==n||r!==0&&h.nodeType!==3||(a=o+r),h!==s||i!==0&&h.nodeType!==3||(l=o+i),h.nodeType===3&&(o+=h.nodeValue.length),(f=h.firstChild)!==null;)d=h,h=f;for(;;){if(h===t)break t;if(d===n&&++u===r&&(a=o),d===s&&++c===i&&(l=o),(f=h.nextSibling)!==null)break;h=d,d=h.parentNode}h=f}n=a===-1||l===-1?null:{start:a,end:l}}else n=null}n=n||{start:0,end:0}}else n=null;for(bd={focusedElem:t,selectionRange:n},Vl=!1,Y=e;Y!==null;)if(e=Y,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Y=t;else for(;Y!==null;){e=Y;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var g=p.memoizedProps,v=p.memoizedState,m=e.stateNode,y=m.getSnapshotBeforeUpdate(e.elementType===e.type?g:an(e.type,g),v);m.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var x=e.stateNode.containerInfo;x.nodeType===1?x.textContent="":x.nodeType===9&&x.documentElement&&x.removeChild(x.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(U(163))}}catch(_){Le(e,e.return,_)}if(t=e.sibling,t!==null){t.return=e.return,Y=t;break}Y=e.return}return p=hv,hv=!1,p}function yo(t,e,n){var i=e.updateQueue;if(i=i!==null?i.lastEffect:null,i!==null){var r=i=i.next;do{if((r.tag&t)===t){var s=r.destroy;r.destroy=void 0,s!==void 0&&Nd(e,n,s)}r=r.next}while(r!==i)}}function qu(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var n=e=e.next;do{if((n.tag&t)===t){var i=n.create;n.destroy=i()}n=n.next}while(n!==e)}}function Ud(t){var e=t.ref;if(e!==null){var n=t.stateNode;switch(t.tag){case 5:t=n;break;default:t=n}typeof e=="function"?e(t):e.current=t}}function jx(t){var e=t.alternate;e!==null&&(t.alternate=null,jx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[In],delete e[Ro],delete e[Td],delete e[yT],delete e[xT])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Gx(t){return t.tag===5||t.tag===3||t.tag===4}function dv(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Gx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function $d(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.nodeType===8?n.parentNode.insertBefore(t,e):n.insertBefore(t,e):(n.nodeType===8?(e=n.parentNode,e.insertBefore(t,n)):(e=n,e.appendChild(t)),n=n._reactRootContainer,n!=null||e.onclick!==null||(e.onclick=Yl));else if(i!==4&&(t=t.child,t!==null))for($d(t,e,n),t=t.sibling;t!==null;)$d(t,e,n),t=t.sibling}function zd(t,e,n){var i=t.tag;if(i===5||i===6)t=t.stateNode,e?n.insertBefore(t,e):n.appendChild(t);else if(i!==4&&(t=t.child,t!==null))for(zd(t,e,n),t=t.sibling;t!==null;)zd(t,e,n),t=t.sibling}var Je=null,un=!1;function ci(t,e,n){for(n=n.child;n!==null;)Vx(t,e,n),n=n.sibling}function Vx(t,e,n){if(Rn&&typeof Rn.onCommitFiberUnmount=="function")try{Rn.onCommitFiberUnmount(zu,n)}catch{}switch(n.tag){case 5:ht||Wr(n,e);case 6:var i=Je,r=un;Je=null,ci(t,e,n),Je=i,un=r,Je!==null&&(un?(t=Je,n=n.stateNode,t.nodeType===8?t.parentNode.removeChild(n):t.removeChild(n)):Je.removeChild(n.stateNode));break;case 18:Je!==null&&(un?(t=Je,n=n.stateNode,t.nodeType===8?Jc(t.parentNode,n):t.nodeType===1&&Jc(t,n),Ao(t)):Jc(Je,n.stateNode));break;case 4:i=Je,r=un,Je=n.stateNode.containerInfo,un=!0,ci(t,e,n),Je=i,un=r;break;case 0:case 11:case 14:case 15:if(!ht&&(i=n.updateQueue,i!==null&&(i=i.lastEffect,i!==null))){r=i=i.next;do{var s=r,o=s.destroy;s=s.tag,o!==void 0&&(s&2||s&4)&&Nd(n,e,o),r=r.next}while(r!==i)}ci(t,e,n);break;case 1:if(!ht&&(Wr(n,e),i=n.stateNode,typeof i.componentWillUnmount=="function"))try{i.props=n.memoizedProps,i.state=n.memoizedState,i.componentWillUnmount()}catch(a){Le(n,e,a)}ci(t,e,n);break;case 21:ci(t,e,n);break;case 22:n.mode&1?(ht=(i=ht)||n.memoizedState!==null,ci(t,e,n),ht=i):ci(t,e,n);break;default:ci(t,e,n)}}function fv(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var n=t.stateNode;n===null&&(n=t.stateNode=new FT),e.forEach(function(i){var r=VT.bind(null,t,i);n.has(i)||(n.add(i),i.then(r,r))})}}function en(t,e){var n=e.deletions;if(n!==null)for(var i=0;i<n.length;i++){var r=n[i];try{var s=t,o=e,a=o;e:for(;a!==null;){switch(a.tag){case 5:Je=a.stateNode,un=!1;break e;case 3:Je=a.stateNode.containerInfo,un=!0;break e;case 4:Je=a.stateNode.containerInfo,un=!0;break e}a=a.return}if(Je===null)throw Error(U(160));Vx(s,o,r),Je=null,un=!1;var l=r.alternate;l!==null&&(l.return=null),r.return=null}catch(u){Le(r,e,u)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Wx(e,t),e=e.sibling}function Wx(t,e){var n=t.alternate,i=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(en(e,t),bn(t),i&4){try{yo(3,t,t.return),qu(3,t)}catch(g){Le(t,t.return,g)}try{yo(5,t,t.return)}catch(g){Le(t,t.return,g)}}break;case 1:en(e,t),bn(t),i&512&&n!==null&&Wr(n,n.return);break;case 5:if(en(e,t),bn(t),i&512&&n!==null&&Wr(n,n.return),t.flags&32){var r=t.stateNode;try{Eo(r,"")}catch(g){Le(t,t.return,g)}}if(i&4&&(r=t.stateNode,r!=null)){var s=t.memoizedProps,o=n!==null?n.memoizedProps:s,a=t.type,l=t.updateQueue;if(t.updateQueue=null,l!==null)try{a==="input"&&s.type==="radio"&&s.name!=null&&f1(r,s),hd(a,o);var u=hd(a,s);for(o=0;o<l.length;o+=2){var c=l[o],h=l[o+1];c==="style"?y1(r,h):c==="dangerouslySetInnerHTML"?g1(r,h):c==="children"?Eo(r,h):yp(r,c,h,u)}switch(a){case"input":od(r,s);break;case"textarea":p1(r,s);break;case"select":var d=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!s.multiple;var f=s.value;f!=null?Zr(r,!!s.multiple,f,!1):d!==!!s.multiple&&(s.defaultValue!=null?Zr(r,!!s.multiple,s.defaultValue,!0):Zr(r,!!s.multiple,s.multiple?[]:"",!1))}r[Ro]=s}catch(g){Le(t,t.return,g)}}break;case 6:if(en(e,t),bn(t),i&4){if(t.stateNode===null)throw Error(U(162));r=t.stateNode,s=t.memoizedProps;try{r.nodeValue=s}catch(g){Le(t,t.return,g)}}break;case 3:if(en(e,t),bn(t),i&4&&n!==null&&n.memoizedState.isDehydrated)try{Ao(e.containerInfo)}catch(g){Le(t,t.return,g)}break;case 4:en(e,t),bn(t);break;case 13:en(e,t),bn(t),r=t.child,r.flags&8192&&(s=r.memoizedState!==null,r.stateNode.isHidden=s,!s||r.alternate!==null&&r.alternate.memoizedState!==null||(Zp=$e())),i&4&&fv(t);break;case 22:if(c=n!==null&&n.memoizedState!==null,t.mode&1?(ht=(u=ht)||c,en(e,t),ht=u):en(e,t),bn(t),i&8192){if(u=t.memoizedState!==null,(t.stateNode.isHidden=u)&&!c&&t.mode&1)for(Y=t,c=t.child;c!==null;){for(h=Y=c;Y!==null;){switch(d=Y,f=d.child,d.tag){case 0:case 11:case 14:case 15:yo(4,d,d.return);break;case 1:Wr(d,d.return);var p=d.stateNode;if(typeof p.componentWillUnmount=="function"){i=d,n=d.return;try{e=i,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(g){Le(i,n,g)}}break;case 5:Wr(d,d.return);break;case 22:if(d.memoizedState!==null){mv(h);continue}}f!==null?(f.return=d,Y=f):mv(h)}c=c.sibling}e:for(c=null,h=t;;){if(h.tag===5){if(c===null){c=h;try{r=h.stateNode,u?(s=r.style,typeof s.setProperty=="function"?s.setProperty("display","none","important"):s.display="none"):(a=h.stateNode,l=h.memoizedProps.style,o=l!=null&&l.hasOwnProperty("display")?l.display:null,a.style.display=v1("display",o))}catch(g){Le(t,t.return,g)}}}else if(h.tag===6){if(c===null)try{h.stateNode.nodeValue=u?"":h.memoizedProps}catch(g){Le(t,t.return,g)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;c===h&&(c=null),h=h.return}c===h&&(c=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:en(e,t),bn(t),i&4&&fv(t);break;case 21:break;default:en(e,t),bn(t)}}function bn(t){var e=t.flags;if(e&2){try{e:{for(var n=t.return;n!==null;){if(Gx(n)){var i=n;break e}n=n.return}throw Error(U(160))}switch(i.tag){case 5:var r=i.stateNode;i.flags&32&&(Eo(r,""),i.flags&=-33);var s=dv(t);zd(t,s,r);break;case 3:case 4:var o=i.stateNode.containerInfo,a=dv(t);$d(t,a,o);break;default:throw Error(U(161))}}catch(l){Le(t,t.return,l)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function BT(t,e,n){Y=t,Xx(t)}function Xx(t,e,n){for(var i=(t.mode&1)!==0;Y!==null;){var r=Y,s=r.child;if(r.tag===22&&i){var o=r.memoizedState!==null||Ma;if(!o){var a=r.alternate,l=a!==null&&a.memoizedState!==null||ht;a=Ma;var u=ht;if(Ma=o,(ht=l)&&!u)for(Y=r;Y!==null;)o=Y,l=o.child,o.tag===22&&o.memoizedState!==null?gv(r):l!==null?(l.return=o,Y=l):gv(r);for(;s!==null;)Y=s,Xx(s),s=s.sibling;Y=r,Ma=a,ht=u}pv(t)}else r.subtreeFlags&8772&&s!==null?(s.return=r,Y=s):pv(t)}}function pv(t){for(;Y!==null;){var e=Y;if(e.flags&8772){var n=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:ht||qu(5,e);break;case 1:var i=e.stateNode;if(e.flags&4&&!ht)if(n===null)i.componentDidMount();else{var r=e.elementType===e.type?n.memoizedProps:an(e.type,n.memoizedProps);i.componentDidUpdate(r,n.memoizedState,i.__reactInternalSnapshotBeforeUpdate)}var s=e.updateQueue;s!==null&&Zg(e,s,i);break;case 3:var o=e.updateQueue;if(o!==null){if(n=null,e.child!==null)switch(e.child.tag){case 5:n=e.child.stateNode;break;case 1:n=e.child.stateNode}Zg(e,o,n)}break;case 5:var a=e.stateNode;if(n===null&&e.flags&4){n=a;var l=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":l.autoFocus&&n.focus();break;case"img":l.src&&(n.src=l.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var u=e.alternate;if(u!==null){var c=u.memoizedState;if(c!==null){var h=c.dehydrated;h!==null&&Ao(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(U(163))}ht||e.flags&512&&Ud(e)}catch(d){Le(e,e.return,d)}}if(e===t){Y=null;break}if(n=e.sibling,n!==null){n.return=e.return,Y=n;break}Y=e.return}}function mv(t){for(;Y!==null;){var e=Y;if(e===t){Y=null;break}var n=e.sibling;if(n!==null){n.return=e.return,Y=n;break}Y=e.return}}function gv(t){for(;Y!==null;){var e=Y;try{switch(e.tag){case 0:case 11:case 15:var n=e.return;try{qu(4,e)}catch(l){Le(e,n,l)}break;case 1:var i=e.stateNode;if(typeof i.componentDidMount=="function"){var r=e.return;try{i.componentDidMount()}catch(l){Le(e,r,l)}}var s=e.return;try{Ud(e)}catch(l){Le(e,s,l)}break;case 5:var o=e.return;try{Ud(e)}catch(l){Le(e,o,l)}}}catch(l){Le(e,e.return,l)}if(e===t){Y=null;break}var a=e.sibling;if(a!==null){a.return=e.return,Y=a;break}Y=e.return}}var NT=Math.ceil,su=oi.ReactCurrentDispatcher,qp=oi.ReactCurrentOwner,qt=oi.ReactCurrentBatchConfig,de=0,Ze=null,je=null,st=0,Ot=0,Xr=Ui(0),Ye=0,No=null,dr=0,Ku=0,Kp=0,xo=null,bt=null,Zp=0,ys=1/0,Gn=null,ou=!1,Hd=null,Ci=null,Oa=!1,yi=null,au=0,_o=0,jd=null,wl=-1,bl=0;function gt(){return de&6?$e():wl!==-1?wl:wl=$e()}function Ai(t){return t.mode&1?de&2&&st!==0?st&-st:wT.transition!==null?(bl===0&&(bl=M1()),bl):(t=ve,t!==0||(t=window.event,t=t===void 0?16:B1(t.type)),t):1}function mn(t,e,n,i){if(50<_o)throw _o=0,jd=null,Error(U(185));na(t,n,i),(!(de&2)||t!==Ze)&&(t===Ze&&(!(de&2)&&(Ku|=n),Ye===4&&gi(t,st)),Ct(t,i),n===1&&de===0&&!(e.mode&1)&&(ys=$e()+500,Wu&&$i()))}function Ct(t,e){var n=t.callbackNode;wS(t,e);var i=Gl(t,t===Ze?st:0);if(i===0)n!==null&&Tg(n),t.callbackNode=null,t.callbackPriority=0;else if(e=i&-i,t.callbackPriority!==e){if(n!=null&&Tg(n),e===1)t.tag===0?_T(vv.bind(null,t)):nx(vv.bind(null,t)),gT(function(){!(de&6)&&$i()}),n=null;else{switch(O1(i)){case 1:n=Ep;break;case 4:n=P1;break;case 16:n=jl;break;case 536870912:n=I1;break;default:n=jl}n=t_(n,Yx.bind(null,t))}t.callbackPriority=e,t.callbackNode=n}}function Yx(t,e){if(wl=-1,bl=0,de&6)throw Error(U(327));var n=t.callbackNode;if(ns()&&t.callbackNode!==n)return null;var i=Gl(t,t===Ze?st:0);if(i===0)return null;if(i&30||i&t.expiredLanes||e)e=lu(t,i);else{e=i;var r=de;de|=2;var s=Kx();(Ze!==t||st!==e)&&(Gn=null,ys=$e()+500,rr(t,e));do try{zT();break}catch(a){qx(t,a)}while(1);Lp(),su.current=s,de=r,je!==null?e=0:(Ze=null,st=0,e=Ye)}if(e!==0){if(e===2&&(r=gd(t),r!==0&&(i=r,e=Gd(t,r))),e===1)throw n=No,rr(t,0),gi(t,i),Ct(t,$e()),n;if(e===6)gi(t,i);else{if(r=t.current.alternate,!(i&30)&&!UT(r)&&(e=lu(t,i),e===2&&(s=gd(t),s!==0&&(i=s,e=Gd(t,s))),e===1))throw n=No,rr(t,0),gi(t,i),Ct(t,$e()),n;switch(t.finishedWork=r,t.finishedLanes=i,e){case 0:case 1:throw Error(U(345));case 2:Yi(t,bt,Gn);break;case 3:if(gi(t,i),(i&130023424)===i&&(e=Zp+500-$e(),10<e)){if(Gl(t,0)!==0)break;if(r=t.suspendedLanes,(r&i)!==i){gt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Sd(Yi.bind(null,t,bt,Gn),e);break}Yi(t,bt,Gn);break;case 4:if(gi(t,i),(i&4194240)===i)break;for(e=t.eventTimes,r=-1;0<i;){var o=31-pn(i);s=1<<o,o=e[o],o>r&&(r=o),i&=~s}if(i=r,i=$e()-i,i=(120>i?120:480>i?480:1080>i?1080:1920>i?1920:3e3>i?3e3:4320>i?4320:1960*NT(i/1960))-i,10<i){t.timeoutHandle=Sd(Yi.bind(null,t,bt,Gn),i);break}Yi(t,bt,Gn);break;case 5:Yi(t,bt,Gn);break;default:throw Error(U(329))}}}return Ct(t,$e()),t.callbackNode===n?Yx.bind(null,t):null}function Gd(t,e){var n=xo;return t.current.memoizedState.isDehydrated&&(rr(t,e).flags|=256),t=lu(t,e),t!==2&&(e=bt,bt=n,e!==null&&Vd(e)),t}function Vd(t){bt===null?bt=t:bt.push.apply(bt,t)}function UT(t){for(var e=t;;){if(e.flags&16384){var n=e.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var i=0;i<n.length;i++){var r=n[i],s=r.getSnapshot;r=r.value;try{if(!xn(s(),r))return!1}catch{return!1}}}if(n=e.child,e.subtreeFlags&16384&&n!==null)n.return=e,e=n;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function gi(t,e){for(e&=~Kp,e&=~Ku,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var n=31-pn(e),i=1<<n;t[n]=-1,e&=~i}}function vv(t){if(de&6)throw Error(U(327));ns();var e=Gl(t,0);if(!(e&1))return Ct(t,$e()),null;var n=lu(t,e);if(t.tag!==0&&n===2){var i=gd(t);i!==0&&(e=i,n=Gd(t,i))}if(n===1)throw n=No,rr(t,0),gi(t,e),Ct(t,$e()),n;if(n===6)throw Error(U(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,Yi(t,bt,Gn),Ct(t,$e()),null}function Qp(t,e){var n=de;de|=1;try{return t(e)}finally{de=n,de===0&&(ys=$e()+500,Wu&&$i())}}function fr(t){yi!==null&&yi.tag===0&&!(de&6)&&ns();var e=de;de|=1;var n=qt.transition,i=ve;try{if(qt.transition=null,ve=1,t)return t()}finally{ve=i,qt.transition=n,de=e,!(de&6)&&$i()}}function Jp(){Ot=Xr.current,Se(Xr)}function rr(t,e){t.finishedWork=null,t.finishedLanes=0;var n=t.timeoutHandle;if(n!==-1&&(t.timeoutHandle=-1,mT(n)),je!==null)for(n=je.return;n!==null;){var i=n;switch(kp(i),i.tag){case 1:i=i.type.childContextTypes,i!=null&&ql();break;case 3:gs(),Se(St),Se(dt),Hp();break;case 5:zp(i);break;case 4:gs();break;case 13:Se(Ie);break;case 19:Se(Ie);break;case 10:Bp(i.type._context);break;case 22:case 23:Jp()}n=n.return}if(Ze=t,je=t=Pi(t.current,null),st=Ot=e,Ye=0,No=null,Kp=Ku=dr=0,bt=xo=null,tr!==null){for(e=0;e<tr.length;e++)if(n=tr[e],i=n.interleaved,i!==null){n.interleaved=null;var r=i.next,s=n.pending;if(s!==null){var o=s.next;s.next=r,i.next=o}n.pending=i}tr=null}return t}function qx(t,e){do{var n=je;try{if(Lp(),yl.current=ru,iu){for(var i=Oe.memoizedState;i!==null;){var r=i.queue;r!==null&&(r.pending=null),i=i.next}iu=!1}if(hr=0,Ke=We=Oe=null,vo=!1,Fo=0,qp.current=null,n===null||n.return===null){Ye=1,No=e,je=null;break}e:{var s=t,o=n.return,a=n,l=e;if(e=st,a.flags|=32768,l!==null&&typeof l=="object"&&typeof l.then=="function"){var u=l,c=a,h=c.tag;if(!(c.mode&1)&&(h===0||h===11||h===15)){var d=c.alternate;d?(c.updateQueue=d.updateQueue,c.memoizedState=d.memoizedState,c.lanes=d.lanes):(c.updateQueue=null,c.memoizedState=null)}var f=rv(o);if(f!==null){f.flags&=-257,sv(f,o,a,s,e),f.mode&1&&iv(s,u,e),e=f,l=u;var p=e.updateQueue;if(p===null){var g=new Set;g.add(l),e.updateQueue=g}else p.add(l);break e}else{if(!(e&1)){iv(s,u,e),em();break e}l=Error(U(426))}}else if(Te&&a.mode&1){var v=rv(o);if(v!==null){!(v.flags&65536)&&(v.flags|=256),sv(v,o,a,s,e),Dp(vs(l,a));break e}}s=l=vs(l,a),Ye!==4&&(Ye=2),xo===null?xo=[s]:xo.push(s),s=o;do{switch(s.tag){case 3:s.flags|=65536,e&=-e,s.lanes|=e;var m=Rx(s,l,e);Kg(s,m);break e;case 1:a=l;var y=s.type,x=s.stateNode;if(!(s.flags&128)&&(typeof y.getDerivedStateFromError=="function"||x!==null&&typeof x.componentDidCatch=="function"&&(Ci===null||!Ci.has(x)))){s.flags|=65536,e&=-e,s.lanes|=e;var _=kx(s,a,e);Kg(s,_);break e}}s=s.return}while(s!==null)}Qx(n)}catch(b){e=b,je===n&&n!==null&&(je=n=n.return);continue}break}while(1)}function Kx(){var t=su.current;return su.current=ru,t===null?ru:t}function em(){(Ye===0||Ye===3||Ye===2)&&(Ye=4),Ze===null||!(dr&268435455)&&!(Ku&268435455)||gi(Ze,st)}function lu(t,e){var n=de;de|=2;var i=Kx();(Ze!==t||st!==e)&&(Gn=null,rr(t,e));do try{$T();break}catch(r){qx(t,r)}while(1);if(Lp(),de=n,su.current=i,je!==null)throw Error(U(261));return Ze=null,st=0,Ye}function $T(){for(;je!==null;)Zx(je)}function zT(){for(;je!==null&&!dS();)Zx(je)}function Zx(t){var e=e_(t.alternate,t,Ot);t.memoizedProps=t.pendingProps,e===null?Qx(t):je=e,qp.current=null}function Qx(t){var e=t;do{var n=e.alternate;if(t=e.return,e.flags&32768){if(n=DT(n,e),n!==null){n.flags&=32767,je=n;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ye=6,je=null;return}}else if(n=kT(n,e,Ot),n!==null){je=n;return}if(e=e.sibling,e!==null){je=e;return}je=e=t}while(e!==null);Ye===0&&(Ye=5)}function Yi(t,e,n){var i=ve,r=qt.transition;try{qt.transition=null,ve=1,HT(t,e,n,i)}finally{qt.transition=r,ve=i}return null}function HT(t,e,n,i){do ns();while(yi!==null);if(de&6)throw Error(U(327));n=t.finishedWork;var r=t.finishedLanes;if(n===null)return null;if(t.finishedWork=null,t.finishedLanes=0,n===t.current)throw Error(U(177));t.callbackNode=null,t.callbackPriority=0;var s=n.lanes|n.childLanes;if(bS(t,s),t===Ze&&(je=Ze=null,st=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Oa||(Oa=!0,t_(jl,function(){return ns(),null})),s=(n.flags&15990)!==0,n.subtreeFlags&15990||s){s=qt.transition,qt.transition=null;var o=ve;ve=1;var a=de;de|=4,qp.current=null,LT(t,n),Wx(n,t),lT(bd),Vl=!!wd,bd=wd=null,t.current=n,BT(n),fS(),de=a,ve=o,qt.transition=s}else t.current=n;if(Oa&&(Oa=!1,yi=t,au=r),s=t.pendingLanes,s===0&&(Ci=null),gS(n.stateNode),Ct(t,$e()),e!==null)for(i=t.onRecoverableError,n=0;n<e.length;n++)r=e[n],i(r.value,{componentStack:r.stack,digest:r.digest});if(ou)throw ou=!1,t=Hd,Hd=null,t;return au&1&&t.tag!==0&&ns(),s=t.pendingLanes,s&1?t===jd?_o++:(_o=0,jd=t):_o=0,$i(),null}function ns(){if(yi!==null){var t=O1(au),e=qt.transition,n=ve;try{if(qt.transition=null,ve=16>t?16:t,yi===null)var i=!1;else{if(t=yi,yi=null,au=0,de&6)throw Error(U(331));var r=de;for(de|=4,Y=t.current;Y!==null;){var s=Y,o=s.child;if(Y.flags&16){var a=s.deletions;if(a!==null){for(var l=0;l<a.length;l++){var u=a[l];for(Y=u;Y!==null;){var c=Y;switch(c.tag){case 0:case 11:case 15:yo(8,c,s)}var h=c.child;if(h!==null)h.return=c,Y=h;else for(;Y!==null;){c=Y;var d=c.sibling,f=c.return;if(jx(c),c===u){Y=null;break}if(d!==null){d.return=f,Y=d;break}Y=f}}}var p=s.alternate;if(p!==null){var g=p.child;if(g!==null){p.child=null;do{var v=g.sibling;g.sibling=null,g=v}while(g!==null)}}Y=s}}if(s.subtreeFlags&2064&&o!==null)o.return=s,Y=o;else e:for(;Y!==null;){if(s=Y,s.flags&2048)switch(s.tag){case 0:case 11:case 15:yo(9,s,s.return)}var m=s.sibling;if(m!==null){m.return=s.return,Y=m;break e}Y=s.return}}var y=t.current;for(Y=y;Y!==null;){o=Y;var x=o.child;if(o.subtreeFlags&2064&&x!==null)x.return=o,Y=x;else e:for(o=y;Y!==null;){if(a=Y,a.flags&2048)try{switch(a.tag){case 0:case 11:case 15:qu(9,a)}}catch(b){Le(a,a.return,b)}if(a===o){Y=null;break e}var _=a.sibling;if(_!==null){_.return=a.return,Y=_;break e}Y=a.return}}if(de=r,$i(),Rn&&typeof Rn.onPostCommitFiberRoot=="function")try{Rn.onPostCommitFiberRoot(zu,t)}catch{}i=!0}return i}finally{ve=n,qt.transition=e}}return!1}function yv(t,e,n){e=vs(n,e),e=Rx(t,e,1),t=Ti(t,e,1),e=gt(),t!==null&&(na(t,1,e),Ct(t,e))}function Le(t,e,n){if(t.tag===3)yv(t,t,n);else for(;e!==null;){if(e.tag===3){yv(e,t,n);break}else if(e.tag===1){var i=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof i.componentDidCatch=="function"&&(Ci===null||!Ci.has(i))){t=vs(n,t),t=kx(e,t,1),e=Ti(e,t,1),t=gt(),e!==null&&(na(e,1,t),Ct(e,t));break}}e=e.return}}function jT(t,e,n){var i=t.pingCache;i!==null&&i.delete(e),e=gt(),t.pingedLanes|=t.suspendedLanes&n,Ze===t&&(st&n)===n&&(Ye===4||Ye===3&&(st&130023424)===st&&500>$e()-Zp?rr(t,0):Kp|=n),Ct(t,e)}function Jx(t,e){e===0&&(t.mode&1?(e=wa,wa<<=1,!(wa&130023424)&&(wa=4194304)):e=1);var n=gt();t=ii(t,e),t!==null&&(na(t,e,n),Ct(t,n))}function GT(t){var e=t.memoizedState,n=0;e!==null&&(n=e.retryLane),Jx(t,n)}function VT(t,e){var n=0;switch(t.tag){case 13:var i=t.stateNode,r=t.memoizedState;r!==null&&(n=r.retryLane);break;case 19:i=t.stateNode;break;default:throw Error(U(314))}i!==null&&i.delete(e),Jx(t,n)}var e_;e_=function(t,e,n){if(t!==null)if(t.memoizedProps!==e.pendingProps||St.current)Et=!0;else{if(!(t.lanes&n)&&!(e.flags&128))return Et=!1,RT(t,e,n);Et=!!(t.flags&131072)}else Et=!1,Te&&e.flags&1048576&&ix(e,Ql,e.index);switch(e.lanes=0,e.tag){case 2:var i=e.type;_l(t,e),t=e.pendingProps;var r=fs(e,dt.current);ts(e,n),r=Gp(null,e,i,t,r,n);var s=Vp();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,Tt(i)?(s=!0,Kl(e)):s=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Up(e),r.updater=Xu,e.stateNode=r,r._reactInternals=e,Od(e,i,t,n),e=Dd(null,e,i,!0,s,n)):(e.tag=0,Te&&s&&Rp(e),ft(null,e,r,n),e=e.child),e;case 16:i=e.elementType;e:{switch(_l(t,e),t=e.pendingProps,r=i._init,i=r(i._payload),e.type=i,r=e.tag=XT(i),t=an(i,t),r){case 0:e=kd(null,e,i,t,n);break e;case 1:e=lv(null,e,i,t,n);break e;case 11:e=ov(null,e,i,t,n);break e;case 14:e=av(null,e,i,an(i.type,t),n);break e}throw Error(U(306,i,""))}return e;case 0:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:an(i,r),kd(t,e,i,r,n);case 1:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:an(i,r),lv(t,e,i,r,n);case 3:e:{if(Bx(e),t===null)throw Error(U(387));i=e.pendingProps,s=e.memoizedState,r=s.element,ax(t,e),tu(e,i,null,n);var o=e.memoizedState;if(i=o.element,s.isDehydrated)if(s={element:i,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=s,e.memoizedState=s,e.flags&256){r=vs(Error(U(423)),e),e=uv(t,e,i,n,r);break e}else if(i!==r){r=vs(Error(U(424)),e),e=uv(t,e,i,n,r);break e}else for(Rt=Si(e.stateNode.containerInfo.firstChild),Lt=e,Te=!0,cn=null,n=hx(e,null,i,n),e.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(ps(),i===r){e=ri(t,e,n);break e}ft(t,e,i,n)}e=e.child}return e;case 5:return dx(e),t===null&&Pd(e),i=e.type,r=e.pendingProps,s=t!==null?t.memoizedProps:null,o=r.children,Ed(i,r)?o=null:s!==null&&Ed(i,s)&&(e.flags|=32),Lx(t,e),ft(t,e,o,n),e.child;case 6:return t===null&&Pd(e),null;case 13:return Nx(t,e,n);case 4:return $p(e,e.stateNode.containerInfo),i=e.pendingProps,t===null?e.child=ms(e,null,i,n):ft(t,e,i,n),e.child;case 11:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:an(i,r),ov(t,e,i,r,n);case 7:return ft(t,e,e.pendingProps,n),e.child;case 8:return ft(t,e,e.pendingProps.children,n),e.child;case 12:return ft(t,e,e.pendingProps.children,n),e.child;case 10:e:{if(i=e.type._context,r=e.pendingProps,s=e.memoizedProps,o=r.value,we(Jl,i._currentValue),i._currentValue=o,s!==null)if(xn(s.value,o)){if(s.children===r.children&&!St.current){e=ri(t,e,n);break e}}else for(s=e.child,s!==null&&(s.return=e);s!==null;){var a=s.dependencies;if(a!==null){o=s.child;for(var l=a.firstContext;l!==null;){if(l.context===i){if(s.tag===1){l=Kn(-1,n&-n),l.tag=2;var u=s.updateQueue;if(u!==null){u=u.shared;var c=u.pending;c===null?l.next=l:(l.next=c.next,c.next=l),u.pending=l}}s.lanes|=n,l=s.alternate,l!==null&&(l.lanes|=n),Id(s.return,n,e),a.lanes|=n;break}l=l.next}}else if(s.tag===10)o=s.type===e.type?null:s.child;else if(s.tag===18){if(o=s.return,o===null)throw Error(U(341));o.lanes|=n,a=o.alternate,a!==null&&(a.lanes|=n),Id(o,n,e),o=s.sibling}else o=s.child;if(o!==null)o.return=s;else for(o=s;o!==null;){if(o===e){o=null;break}if(s=o.sibling,s!==null){s.return=o.return,o=s;break}o=o.return}s=o}ft(t,e,r.children,n),e=e.child}return e;case 9:return r=e.type,i=e.pendingProps.children,ts(e,n),r=Kt(r),i=i(r),e.flags|=1,ft(t,e,i,n),e.child;case 14:return i=e.type,r=an(i,e.pendingProps),r=an(i.type,r),av(t,e,i,r,n);case 15:return Dx(t,e,e.type,e.pendingProps,n);case 17:return i=e.type,r=e.pendingProps,r=e.elementType===i?r:an(i,r),_l(t,e),e.tag=1,Tt(i)?(t=!0,Kl(e)):t=!1,ts(e,n),ux(e,i,r),Od(e,i,r,n),Dd(null,e,i,!0,t,n);case 19:return Ux(t,e,n);case 22:return Fx(t,e,n)}throw Error(U(156,e.tag))};function t_(t,e){return A1(t,e)}function WT(t,e,n,i){this.tag=t,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=i,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Xt(t,e,n,i){return new WT(t,e,n,i)}function tm(t){return t=t.prototype,!(!t||!t.isReactComponent)}function XT(t){if(typeof t=="function")return tm(t)?1:0;if(t!=null){if(t=t.$$typeof,t===_p)return 11;if(t===wp)return 14}return 2}function Pi(t,e){var n=t.alternate;return n===null?(n=Xt(t.tag,e,t.key,t.mode),n.elementType=t.elementType,n.type=t.type,n.stateNode=t.stateNode,n.alternate=t,t.alternate=n):(n.pendingProps=e,n.type=t.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=t.flags&14680064,n.childLanes=t.childLanes,n.lanes=t.lanes,n.child=t.child,n.memoizedProps=t.memoizedProps,n.memoizedState=t.memoizedState,n.updateQueue=t.updateQueue,e=t.dependencies,n.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},n.sibling=t.sibling,n.index=t.index,n.ref=t.ref,n}function El(t,e,n,i,r,s){var o=2;if(i=t,typeof t=="function")tm(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Br:return sr(n.children,r,s,e);case xp:o=8,r|=8;break;case td:return t=Xt(12,n,e,r|2),t.elementType=td,t.lanes=s,t;case nd:return t=Xt(13,n,e,r),t.elementType=nd,t.lanes=s,t;case id:return t=Xt(19,n,e,r),t.elementType=id,t.lanes=s,t;case c1:return Zu(n,r,s,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case l1:o=10;break e;case u1:o=9;break e;case _p:o=11;break e;case wp:o=14;break e;case fi:o=16,i=null;break e}throw Error(U(130,t==null?t:typeof t,""))}return e=Xt(o,n,e,r),e.elementType=t,e.type=i,e.lanes=s,e}function sr(t,e,n,i){return t=Xt(7,t,i,e),t.lanes=n,t}function Zu(t,e,n,i){return t=Xt(22,t,i,e),t.elementType=c1,t.lanes=n,t.stateNode={isHidden:!1},t}function ah(t,e,n){return t=Xt(6,t,null,e),t.lanes=n,t}function lh(t,e,n){return e=Xt(4,t.children!==null?t.children:[],t.key,e),e.lanes=n,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function YT(t,e,n,i,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hc(0),this.expirationTimes=Hc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hc(0),this.identifierPrefix=i,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function nm(t,e,n,i,r,s,o,a,l){return t=new YT(t,e,n,a,l),e===1?(e=1,s===!0&&(e|=8)):e=0,s=Xt(3,null,null,e),t.current=s,s.stateNode=t,s.memoizedState={element:i,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Up(s),t}function qT(t,e,n){var i=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Lr,key:i==null?null:""+i,children:t,containerInfo:e,implementation:n}}function n_(t){if(!t)return Ri;t=t._reactInternals;e:{if(br(t)!==t||t.tag!==1)throw Error(U(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(Tt(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(U(171))}if(t.tag===1){var n=t.type;if(Tt(n))return tx(t,n,e)}return e}function i_(t,e,n,i,r,s,o,a,l){return t=nm(n,i,!0,t,r,s,o,a,l),t.context=n_(null),n=t.current,i=gt(),r=Ai(n),s=Kn(i,r),s.callback=e??null,Ti(n,s,r),t.current.lanes=r,na(t,r,i),Ct(t,i),t}function Qu(t,e,n,i){var r=e.current,s=gt(),o=Ai(r);return n=n_(n),e.context===null?e.context=n:e.pendingContext=n,e=Kn(s,o),e.payload={element:t},i=i===void 0?null:i,i!==null&&(e.callback=i),t=Ti(r,e,o),t!==null&&(mn(t,r,o,s),vl(t,r,o)),o}function uu(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function xv(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var n=t.retryLane;t.retryLane=n!==0&&n<e?n:e}}function im(t,e){xv(t,e),(t=t.alternate)&&xv(t,e)}function KT(){return null}var r_=typeof reportError=="function"?reportError:function(t){console.error(t)};function rm(t){this._internalRoot=t}Ju.prototype.render=rm.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(U(409));Qu(t,e,null,null)};Ju.prototype.unmount=rm.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;fr(function(){Qu(null,t,null,null)}),e[ni]=null}};function Ju(t){this._internalRoot=t}Ju.prototype.unstable_scheduleHydration=function(t){if(t){var e=D1();t={blockedOn:null,target:t,priority:e};for(var n=0;n<mi.length&&e!==0&&e<mi[n].priority;n++);mi.splice(n,0,t),n===0&&L1(t)}};function sm(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function ec(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function _v(){}function ZT(t,e,n,i,r){if(r){if(typeof i=="function"){var s=i;i=function(){var u=uu(o);s.call(u)}}var o=i_(e,i,t,0,null,!1,!1,"",_v);return t._reactRootContainer=o,t[ni]=o.current,Mo(t.nodeType===8?t.parentNode:t),fr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof i=="function"){var a=i;i=function(){var u=uu(l);a.call(u)}}var l=nm(t,0,!1,null,null,!1,!1,"",_v);return t._reactRootContainer=l,t[ni]=l.current,Mo(t.nodeType===8?t.parentNode:t),fr(function(){Qu(e,l,n,i)}),l}function tc(t,e,n,i,r){var s=n._reactRootContainer;if(s){var o=s;if(typeof r=="function"){var a=r;r=function(){var l=uu(o);a.call(l)}}Qu(e,o,t,r)}else o=ZT(n,e,t,r,i);return uu(o)}R1=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var n=to(e.pendingLanes);n!==0&&(Sp(e,n|1),Ct(e,$e()),!(de&6)&&(ys=$e()+500,$i()))}break;case 13:fr(function(){var i=ii(t,1);if(i!==null){var r=gt();mn(i,t,1,r)}}),im(t,1)}};Tp=function(t){if(t.tag===13){var e=ii(t,134217728);if(e!==null){var n=gt();mn(e,t,134217728,n)}im(t,134217728)}};k1=function(t){if(t.tag===13){var e=Ai(t),n=ii(t,e);if(n!==null){var i=gt();mn(n,t,e,i)}im(t,e)}};D1=function(){return ve};F1=function(t,e){var n=ve;try{return ve=t,e()}finally{ve=n}};fd=function(t,e,n){switch(e){case"input":if(od(t,n),e=n.name,n.type==="radio"&&e!=null){for(n=t;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<n.length;e++){var i=n[e];if(i!==t&&i.form===t.form){var r=Vu(i);if(!r)throw Error(U(90));d1(i),od(i,r)}}}break;case"textarea":p1(t,n);break;case"select":e=n.value,e!=null&&Zr(t,!!n.multiple,e,!1)}};w1=Qp;b1=fr;var QT={usingClientEntryPoint:!1,Events:[ra,zr,Vu,x1,_1,Qp]},zs={findFiberByHostInstance:er,bundleType:0,version:"18.2.0",rendererPackageName:"react-dom"},JT={bundleType:zs.bundleType,version:zs.version,rendererPackageName:zs.rendererPackageName,rendererConfig:zs.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:oi.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=T1(t),t===null?null:t.stateNode},findFiberByHostInstance:zs.findFiberByHostInstance||KT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.2.0-next-9e3b772b8-20220608"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ra=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ra.isDisabled&&Ra.supportsFiber)try{zu=Ra.inject(JT),Rn=Ra}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=QT;$t.createPortal=function(t,e){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!sm(e))throw Error(U(200));return qT(t,e,null,n)};$t.createRoot=function(t,e){if(!sm(t))throw Error(U(299));var n=!1,i="",r=r_;return e!=null&&(e.unstable_strictMode===!0&&(n=!0),e.identifierPrefix!==void 0&&(i=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=nm(t,1,!1,null,null,n,!1,i,r),t[ni]=e.current,Mo(t.nodeType===8?t.parentNode:t),new rm(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(U(188)):(t=Object.keys(t).join(","),Error(U(268,t)));return t=T1(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return fr(t)};$t.hydrate=function(t,e,n){if(!ec(e))throw Error(U(200));return tc(null,t,e,!0,n)};$t.hydrateRoot=function(t,e,n){if(!sm(t))throw Error(U(405));var i=n!=null&&n.hydratedSources||null,r=!1,s="",o=r_;if(n!=null&&(n.unstable_strictMode===!0&&(r=!0),n.identifierPrefix!==void 0&&(s=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),e=i_(e,null,t,1,n??null,r,!1,s,o),t[ni]=e.current,Mo(t),i)for(t=0;t<i.length;t++)n=i[t],r=n._getVersion,r=r(n._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[n,r]:e.mutableSourceEagerHydrationData.push(n,r);return new Ju(e)};$t.render=function(t,e,n){if(!ec(e))throw Error(U(200));return tc(null,t,e,!1,n)};$t.unmountComponentAtNode=function(t){if(!ec(t))throw Error(U(40));return t._reactRootContainer?(fr(function(){tc(null,null,t,!1,function(){t._reactRootContainer=null,t[ni]=null})}),!0):!1};$t.unstable_batchedUpdates=Qp;$t.unstable_renderSubtreeIntoContainer=function(t,e,n,i){if(!ec(n))throw Error(U(200));if(t==null||t._reactInternals===void 0)throw Error(U(38));return tc(t,e,n,!1,i)};$t.version="18.2.0-next-9e3b772b8-20220608";(function(t){function e(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(e)}catch(n){console.error(n)}}e(),t.exports=$t})(KE);var wv=Ul;Qh.createRoot=wv.createRoot,Qh.hydrateRoot=wv.hydrateRoot;var eC={value:()=>{}};function s_(){for(var t=0,e=arguments.length,n={},i;t<e;++t){if(!(i=arguments[t]+"")||i in n||/[\s.]/.test(i))throw new Error("illegal type: "+i);n[i]=[]}return new Sl(n)}function Sl(t){this._=t}function tC(t,e){return t.trim().split(/^|\s+/).map(function(n){var i="",r=n.indexOf(".");if(r>=0&&(i=n.slice(r+1),n=n.slice(0,r)),n&&!e.hasOwnProperty(n))throw new Error("unknown type: "+n);return{type:n,name:i}})}Sl.prototype=s_.prototype={constructor:Sl,on:function(t,e){var n=this._,i=tC(t+"",n),r,s=-1,o=i.length;if(arguments.length<2){for(;++s<o;)if((r=(t=i[s]).type)&&(r=nC(n[r],t.name)))return r;return}if(e!=null&&typeof e!="function")throw new Error("invalid callback: "+e);for(;++s<o;)if(r=(t=i[s]).type)n[r]=bv(n[r],t.name,e);else if(e==null)for(r in n)n[r]=bv(n[r],t.name,null);return this},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new Sl(t)},call:function(t,e){if((r=arguments.length-2)>0)for(var n=new Array(r),i=0,r,s;i<r;++i)n[i]=arguments[i+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(s=this._[t],i=0,r=s.length;i<r;++i)s[i].value.apply(e,n)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var i=this._[t],r=0,s=i.length;r<s;++r)i[r].value.apply(e,n)}};function nC(t,e){for(var n=0,i=t.length,r;n<i;++n)if((r=t[n]).name===e)return r.value}function bv(t,e,n){for(var i=0,r=t.length;i<r;++i)if(t[i].name===e){t[i]=eC,t=t.slice(0,i).concat(t.slice(i+1));break}return n!=null&&t.push({name:e,value:n}),t}var xs=0,io=0,Hs=0,o_=1e3,cu,ro,hu=0,pr=0,nc=0,Uo=typeof performance=="object"&&performance.now?performance:Date,a_=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};function l_(){return pr||(a_(iC),pr=Uo.now()+nc)}function iC(){pr=0}function Wd(){this._call=this._time=this._next=null}Wd.prototype=u_.prototype={constructor:Wd,restart:function(t,e,n){if(typeof t!="function")throw new TypeError("callback is not a function");n=(n==null?l_():+n)+(e==null?0:+e),!this._next&&ro!==this&&(ro?ro._next=this:cu=this,ro=this),this._call=t,this._time=n,Xd()},stop:function(){this._call&&(this._call=null,this._time=1/0,Xd())}};function u_(t,e,n){var i=new Wd;return i.restart(t,e,n),i}function rC(){l_(),++xs;for(var t=cu,e;t;)(e=pr-t._time)>=0&&t._call.call(void 0,e),t=t._next;--xs}function Ev(){pr=(hu=Uo.now())+nc,xs=io=0;try{rC()}finally{xs=0,oC(),pr=0}}function sC(){var t=Uo.now(),e=t-hu;e>o_&&(nc-=e,hu=t)}function oC(){for(var t,e=cu,n,i=1/0;e;)e._call?(i>e._time&&(i=e._time),t=e,e=e._next):(n=e._next,e._next=null,e=t?t._next=n:cu=n);ro=t,Xd(i)}function Xd(t){if(!xs){io&&(io=clearTimeout(io));var e=t-pr;e>24?(t<1/0&&(io=setTimeout(Ev,t-Uo.now()-nc)),Hs&&(Hs=clearInterval(Hs))):(Hs||(hu=Uo.now(),Hs=setInterval(sC,o_)),xs=1,a_(Ev))}}function Sv(t,e){var n,i=1;t==null&&(t=0),e==null&&(e=0);function r(){var s,o=n.length,a,l=0,u=0;for(s=0;s<o;++s)a=n[s],l+=a.x,u+=a.y;for(l=(l/o-t)*i,u=(u/o-e)*i,s=0;s<o;++s)a=n[s],a.x-=l,a.y-=u}return r.initialize=function(s){n=s},r.x=function(s){return arguments.length?(t=+s,r):t},r.y=function(s){return arguments.length?(e=+s,r):e},r.strength=function(s){return arguments.length?(i=+s,r):i},r}function aC(t){const e=+this._x.call(null,t),n=+this._y.call(null,t);return c_(this.cover(e,n),e,n,t)}function c_(t,e,n,i){if(isNaN(e)||isNaN(n))return t;var r,s=t._root,o={data:i},a=t._x0,l=t._y0,u=t._x1,c=t._y1,h,d,f,p,g,v,m,y;if(!s)return t._root=o,t;for(;s.length;)if((g=e>=(h=(a+u)/2))?a=h:u=h,(v=n>=(d=(l+c)/2))?l=d:c=d,r=s,!(s=s[m=v<<1|g]))return r[m]=o,t;if(f=+t._x.call(null,s.data),p=+t._y.call(null,s.data),e===f&&n===p)return o.next=s,r?r[m]=o:t._root=o,t;do r=r?r[m]=new Array(4):t._root=new Array(4),(g=e>=(h=(a+u)/2))?a=h:u=h,(v=n>=(d=(l+c)/2))?l=d:c=d;while((m=v<<1|g)===(y=(p>=d)<<1|f>=h));return r[y]=s,r[m]=o,t}function lC(t){var e,n,i=t.length,r,s,o=new Array(i),a=new Array(i),l=1/0,u=1/0,c=-1/0,h=-1/0;for(n=0;n<i;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(s=+this._y.call(null,e))||(o[n]=r,a[n]=s,r<l&&(l=r),r>c&&(c=r),s<u&&(u=s),s>h&&(h=s));if(l>c||u>h)return this;for(this.cover(l,u).cover(c,h),n=0;n<i;++n)c_(this,o[n],a[n],t[n]);return this}function uC(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,i=this._y0,r=this._x1,s=this._y1;if(isNaN(n))r=(n=Math.floor(t))+1,s=(i=Math.floor(e))+1;else{for(var o=r-n||1,a=this._root,l,u;n>t||t>=r||i>e||e>=s;)switch(u=(e<i)<<1|t<n,l=new Array(4),l[u]=a,a=l,o*=2,u){case 0:r=n+o,s=i+o;break;case 1:n=r-o,s=i+o;break;case 2:r=n+o,i=s-o;break;case 3:n=r-o,i=s-o;break}this._root&&this._root.length&&(this._root=a)}return this._x0=n,this._y0=i,this._x1=r,this._y1=s,this}function cC(){var t=[];return this.visit(function(e){if(!e.length)do t.push(e.data);while(e=e.next)}),t}function hC(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function mt(t,e,n,i,r){this.node=t,this.x0=e,this.y0=n,this.x1=i,this.y1=r}function dC(t,e,n){var i,r=this._x0,s=this._y0,o,a,l,u,c=this._x1,h=this._y1,d=[],f=this._root,p,g;for(f&&d.push(new mt(f,r,s,c,h)),n==null?n=1/0:(r=t-n,s=e-n,c=t+n,h=e+n,n*=n);p=d.pop();)if(!(!(f=p.node)||(o=p.x0)>c||(a=p.y0)>h||(l=p.x1)<r||(u=p.y1)<s))if(f.length){var v=(o+l)/2,m=(a+u)/2;d.push(new mt(f[3],v,m,l,u),new mt(f[2],o,m,v,u),new mt(f[1],v,a,l,m),new mt(f[0],o,a,v,m)),(g=(e>=m)<<1|t>=v)&&(p=d[d.length-1],d[d.length-1]=d[d.length-1-g],d[d.length-1-g]=p)}else{var y=t-+this._x.call(null,f.data),x=e-+this._y.call(null,f.data),_=y*y+x*x;if(_<n){var b=Math.sqrt(n=_);r=t-b,s=e-b,c=t+b,h=e+b,i=f.data}}return i}function fC(t){if(isNaN(c=+this._x.call(null,t))||isNaN(h=+this._y.call(null,t)))return this;var e,n=this._root,i,r,s,o=this._x0,a=this._y0,l=this._x1,u=this._y1,c,h,d,f,p,g,v,m;if(!n)return this;if(n.length)for(;;){if((p=c>=(d=(o+l)/2))?o=d:l=d,(g=h>=(f=(a+u)/2))?a=f:u=f,e=n,!(n=n[v=g<<1|p]))return this;if(!n.length)break;(e[v+1&3]||e[v+2&3]||e[v+3&3])&&(i=e,m=v)}for(;n.data!==t;)if(r=n,!(n=n.next))return this;return(s=n.next)&&delete n.next,r?(s?r.next=s:delete r.next,this):e?(s?e[v]=s:delete e[v],(n=e[0]||e[1]||e[2]||e[3])&&n===(e[3]||e[2]||e[1]||e[0])&&!n.length&&(i?i[m]=n:this._root=n),this):(this._root=s,this)}function pC(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function mC(){return this._root}function gC(){var t=0;return this.visit(function(e){if(!e.length)do++t;while(e=e.next)}),t}function vC(t){var e=[],n,i=this._root,r,s,o,a,l;for(i&&e.push(new mt(i,this._x0,this._y0,this._x1,this._y1));n=e.pop();)if(!t(i=n.node,s=n.x0,o=n.y0,a=n.x1,l=n.y1)&&i.length){var u=(s+a)/2,c=(o+l)/2;(r=i[3])&&e.push(new mt(r,u,c,a,l)),(r=i[2])&&e.push(new mt(r,s,c,u,l)),(r=i[1])&&e.push(new mt(r,u,o,a,c)),(r=i[0])&&e.push(new mt(r,s,o,u,c))}return this}function yC(t){var e=[],n=[],i;for(this._root&&e.push(new mt(this._root,this._x0,this._y0,this._x1,this._y1));i=e.pop();){var r=i.node;if(r.length){var s,o=i.x0,a=i.y0,l=i.x1,u=i.y1,c=(o+l)/2,h=(a+u)/2;(s=r[0])&&e.push(new mt(s,o,a,c,h)),(s=r[1])&&e.push(new mt(s,c,a,l,h)),(s=r[2])&&e.push(new mt(s,o,h,c,u)),(s=r[3])&&e.push(new mt(s,c,h,l,u))}n.push(i)}for(;i=n.pop();)t(i.node,i.x0,i.y0,i.x1,i.y1);return this}function xC(t){return t[0]}function _C(t){return arguments.length?(this._x=t,this):this._x}function wC(t){return t[1]}function bC(t){return arguments.length?(this._y=t,this):this._y}function om(t,e,n){var i=new am(e??xC,n??wC,NaN,NaN,NaN,NaN);return t==null?i:i.addAll(t)}function am(t,e,n,i,r,s){this._x=t,this._y=e,this._x0=n,this._y0=i,this._x1=r,this._y1=s,this._root=void 0}function Tv(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}var xt=om.prototype=am.prototype;xt.copy=function(){var t=new am(this._x,this._y,this._x0,this._y0,this._x1,this._y1),e=this._root,n,i;if(!e)return t;if(!e.length)return t._root=Tv(e),t;for(n=[{source:e,target:t._root=new Array(4)}];e=n.pop();)for(var r=0;r<4;++r)(i=e.source[r])&&(i.length?n.push({source:i,target:e.target[r]=new Array(4)}):e.target[r]=Tv(i));return t};xt.add=aC;xt.addAll=lC;xt.cover=uC;xt.data=cC;xt.extent=hC;xt.find=dC;xt.remove=fC;xt.removeAll=pC;xt.root=mC;xt.size=gC;xt.visit=vC;xt.visitAfter=yC;xt.x=_C;xt.y=bC;function or(t){return function(){return t}}function xi(t){return(t()-.5)*1e-6}function EC(t){return t.x+t.vx}function SC(t){return t.y+t.vy}function Cv(t){var e,n,i,r=1,s=1;typeof t!="function"&&(t=or(t==null?1:+t));function o(){for(var u,c=e.length,h,d,f,p,g,v,m=0;m<s;++m)for(h=om(e,EC,SC).visitAfter(a),u=0;u<c;++u)d=e[u],g=n[d.index],v=g*g,f=d.x+d.vx,p=d.y+d.vy,h.visit(y);function y(x,_,b,T,E){var S=x.data,k=x.r,O=g+k;if(S){if(S.index>d.index){var F=f-S.x-S.vx,N=p-S.y-S.vy,C=F*F+N*N;C<O*O&&(F===0&&(F=xi(i),C+=F*F),N===0&&(N=xi(i),C+=N*N),C=(O-(C=Math.sqrt(C)))/C*r,d.vx+=(F*=C)*(O=(k*=k)/(v+k)),d.vy+=(N*=C)*O,S.vx-=F*(O=1-O),S.vy-=N*O)}return}return _>f+O||T<f-O||b>p+O||E<p-O}}function a(u){if(u.data)return u.r=n[u.data.index];for(var c=u.r=0;c<4;++c)u[c]&&u[c].r>u.r&&(u.r=u[c].r)}function l(){if(e){var u,c=e.length,h;for(n=new Array(c),u=0;u<c;++u)h=e[u],n[h.index]=+t(h,u,e)}}return o.initialize=function(u,c){e=u,i=c,l()},o.iterations=function(u){return arguments.length?(s=+u,o):s},o.strength=function(u){return arguments.length?(r=+u,o):r},o.radius=function(u){return arguments.length?(t=typeof u=="function"?u:or(+u),l(),o):t},o}function TC(t){return t.index}function Av(t,e){var n=t.get(e);if(!n)throw new Error("node not found: "+e);return n}function Pv(t){var e=TC,n=h,i,r=or(30),s,o,a,l,u,c=1;t==null&&(t=[]);function h(v){return 1/Math.min(a[v.source.index],a[v.target.index])}function d(v){for(var m=0,y=t.length;m<c;++m)for(var x=0,_,b,T,E,S,k,O;x<y;++x)_=t[x],b=_.source,T=_.target,E=T.x+T.vx-b.x-b.vx||xi(u),S=T.y+T.vy-b.y-b.vy||xi(u),k=Math.sqrt(E*E+S*S),k=(k-s[x])/k*v*i[x],E*=k,S*=k,T.vx-=E*(O=l[x]),T.vy-=S*O,b.vx+=E*(O=1-O),b.vy+=S*O}function f(){if(o){var v,m=o.length,y=t.length,x=new Map(o.map((b,T)=>[e(b,T,o),b])),_;for(v=0,a=new Array(m);v<y;++v)_=t[v],_.index=v,typeof _.source!="object"&&(_.source=Av(x,_.source)),typeof _.target!="object"&&(_.target=Av(x,_.target)),a[_.source.index]=(a[_.source.index]||0)+1,a[_.target.index]=(a[_.target.index]||0)+1;for(v=0,l=new Array(y);v<y;++v)_=t[v],l[v]=a[_.source.index]/(a[_.source.index]+a[_.target.index]);i=new Array(y),p(),s=new Array(y),g()}}function p(){if(o)for(var v=0,m=t.length;v<m;++v)i[v]=+n(t[v],v,t)}function g(){if(o)for(var v=0,m=t.length;v<m;++v)s[v]=+r(t[v],v,t)}return d.initialize=function(v,m){o=v,u=m,f()},d.links=function(v){return arguments.length?(t=v,f(),d):t},d.id=function(v){return arguments.length?(e=v,d):e},d.iterations=function(v){return arguments.length?(c=+v,d):c},d.strength=function(v){return arguments.length?(n=typeof v=="function"?v:or(+v),p(),d):n},d.distance=function(v){return arguments.length?(r=typeof v=="function"?v:or(+v),g(),d):r},d}const CC=1664525,AC=1013904223,Iv=4294967296;function PC(){let t=1;return()=>(t=(CC*t+AC)%Iv)/Iv}function IC(t){return t.x}function MC(t){return t.y}var OC=10,RC=Math.PI*(3-Math.sqrt(5));function Mv(t){var e,n=1,i=.001,r=1-Math.pow(i,1/300),s=0,o=.6,a=new Map,l=u_(h),u=s_("tick","end"),c=PC();t==null&&(t=[]);function h(){d(),u.call("tick",e),n<i&&(l.stop(),u.call("end",e))}function d(g){var v,m=t.length,y;g===void 0&&(g=1);for(var x=0;x<g;++x)for(n+=(s-n)*r,a.forEach(function(_){_(n)}),v=0;v<m;++v)y=t[v],y.fx==null?y.x+=y.vx*=o:(y.x=y.fx,y.vx=0),y.fy==null?y.y+=y.vy*=o:(y.y=y.fy,y.vy=0);return e}function f(){for(var g=0,v=t.length,m;g<v;++g){if(m=t[g],m.index=g,m.fx!=null&&(m.x=m.fx),m.fy!=null&&(m.y=m.fy),isNaN(m.x)||isNaN(m.y)){var y=OC*Math.sqrt(.5+g),x=g*RC;m.x=y*Math.cos(x),m.y=y*Math.sin(x)}(isNaN(m.vx)||isNaN(m.vy))&&(m.vx=m.vy=0)}}function p(g){return g.initialize&&g.initialize(t,c),g}return f(),e={tick:d,restart:function(){return l.restart(h),e},stop:function(){return l.stop(),e},nodes:function(g){return arguments.length?(t=g,f(),a.forEach(p),e):t},alpha:function(g){return arguments.length?(n=+g,e):n},alphaMin:function(g){return arguments.length?(i=+g,e):i},alphaDecay:function(g){return arguments.length?(r=+g,e):+r},alphaTarget:function(g){return arguments.length?(s=+g,e):s},velocityDecay:function(g){return arguments.length?(o=1-g,e):1-o},randomSource:function(g){return arguments.length?(c=g,a.forEach(p),e):c},force:function(g,v){return arguments.length>1?(v==null?a.delete(g):a.set(g,p(v)),e):a.get(g)},find:function(g,v,m){var y=0,x=t.length,_,b,T,E,S;for(m==null?m=1/0:m*=m,y=0;y<x;++y)E=t[y],_=g-E.x,b=v-E.y,T=_*_+b*b,T<m&&(S=E,m=T);return S},on:function(g,v){return arguments.length>1?(u.on(g,v),e):u.on(g)}}}function Ov(){var t,e,n,i,r=or(-30),s,o=1,a=1/0,l=.81;function u(f){var p,g=t.length,v=om(t,IC,MC).visitAfter(h);for(i=f,p=0;p<g;++p)e=t[p],v.visit(d)}function c(){if(t){var f,p=t.length,g;for(s=new Array(p),f=0;f<p;++f)g=t[f],s[g.index]=+r(g,f,t)}}function h(f){var p=0,g,v,m=0,y,x,_;if(f.length){for(y=x=_=0;_<4;++_)(g=f[_])&&(v=Math.abs(g.value))&&(p+=g.value,m+=v,y+=v*g.x,x+=v*g.y);f.x=y/m,f.y=x/m}else{g=f,g.x=g.data.x,g.y=g.data.y;do p+=s[g.data.index];while(g=g.next)}f.value=p}function d(f,p,g,v){if(!f.value)return!0;var m=f.x-e.x,y=f.y-e.y,x=v-p,_=m*m+y*y;if(x*x/l<_)return _<a&&(m===0&&(m=xi(n),_+=m*m),y===0&&(y=xi(n),_+=y*y),_<o&&(_=Math.sqrt(o*_)),e.vx+=m*f.value*i/_,e.vy+=y*f.value*i/_),!0;if(f.length||_>=a)return;(f.data!==e||f.next)&&(m===0&&(m=xi(n),_+=m*m),y===0&&(y=xi(n),_+=y*y),_<o&&(_=Math.sqrt(o*_)));do f.data!==e&&(x=s[f.data.index]*i/_,e.vx+=m*x,e.vy+=y*x);while(f=f.next)}return u.initialize=function(f,p){t=f,n=p,c()},u.strength=function(f){return arguments.length?(r=typeof f=="function"?f:or(+f),c(),u):r},u.distanceMin=function(f){return arguments.length?(o=f*f,u):Math.sqrt(o)},u.distanceMax=function(f){return arguments.length?(a=f*f,u):Math.sqrt(a)},u.theta=function(f){return arguments.length?(l=f*f,u):Math.sqrt(l)},u}function so(t,e,n){this.k=t,this.x=e,this.y=n}so.prototype={constructor:so,scale:function(t){return t===1?this:new so(this.k*t,this.x,this.y)},translate:function(t,e){return t===0&e===0?this:new so(this.k,this.x+this.k*t,this.y+this.k*e)},apply:function(t){return[t[0]*this.k+this.x,t[1]*this.k+this.y]},applyX:function(t){return t*this.k+this.x},applyY:function(t){return t*this.k+this.y},invert:function(t){return[(t[0]-this.x)/this.k,(t[1]-this.y)/this.k]},invertX:function(t){return(t-this.x)/this.k},invertY:function(t){return(t-this.y)/this.k},rescaleX:function(t){return t.copy().domain(t.range().map(this.invertX,this).map(t.invert,t))},rescaleY:function(t){return t.copy().domain(t.range().map(this.invertY,this).map(t.invert,t))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};so.prototype;var Er=(t=>(t[t.WEBGL_LEGACY=0]="WEBGL_LEGACY",t[t.WEBGL=1]="WEBGL",t[t.WEBGL2=2]="WEBGL2",t))(Er||{}),h_=(t=>(t[t.UNKNOWN=0]="UNKNOWN",t[t.WEBGL=1]="WEBGL",t[t.CANVAS=2]="CANVAS",t))(h_||{}),Yd=(t=>(t[t.COLOR=16384]="COLOR",t[t.DEPTH=256]="DEPTH",t[t.STENCIL=1024]="STENCIL",t))(Yd||{}),ne=(t=>(t[t.NORMAL=0]="NORMAL",t[t.ADD=1]="ADD",t[t.MULTIPLY=2]="MULTIPLY",t[t.SCREEN=3]="SCREEN",t[t.OVERLAY=4]="OVERLAY",t[t.DARKEN=5]="DARKEN",t[t.LIGHTEN=6]="LIGHTEN",t[t.COLOR_DODGE=7]="COLOR_DODGE",t[t.COLOR_BURN=8]="COLOR_BURN",t[t.HARD_LIGHT=9]="HARD_LIGHT",t[t.SOFT_LIGHT=10]="SOFT_LIGHT",t[t.DIFFERENCE=11]="DIFFERENCE",t[t.EXCLUSION=12]="EXCLUSION",t[t.HUE=13]="HUE",t[t.SATURATION=14]="SATURATION",t[t.COLOR=15]="COLOR",t[t.LUMINOSITY=16]="LUMINOSITY",t[t.NORMAL_NPM=17]="NORMAL_NPM",t[t.ADD_NPM=18]="ADD_NPM",t[t.SCREEN_NPM=19]="SCREEN_NPM",t[t.NONE=20]="NONE",t[t.SRC_OVER=0]="SRC_OVER",t[t.SRC_IN=21]="SRC_IN",t[t.SRC_OUT=22]="SRC_OUT",t[t.SRC_ATOP=23]="SRC_ATOP",t[t.DST_OVER=24]="DST_OVER",t[t.DST_IN=25]="DST_IN",t[t.DST_OUT=26]="DST_OUT",t[t.DST_ATOP=27]="DST_ATOP",t[t.ERASE=26]="ERASE",t[t.SUBTRACT=28]="SUBTRACT",t[t.XOR=29]="XOR",t))(ne||{}),Mn=(t=>(t[t.POINTS=0]="POINTS",t[t.LINES=1]="LINES",t[t.LINE_LOOP=2]="LINE_LOOP",t[t.LINE_STRIP=3]="LINE_STRIP",t[t.TRIANGLES=4]="TRIANGLES",t[t.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",t[t.TRIANGLE_FAN=6]="TRIANGLE_FAN",t))(Mn||{}),H=(t=>(t[t.RGBA=6408]="RGBA",t[t.RGB=6407]="RGB",t[t.RG=33319]="RG",t[t.RED=6403]="RED",t[t.RGBA_INTEGER=36249]="RGBA_INTEGER",t[t.RGB_INTEGER=36248]="RGB_INTEGER",t[t.RG_INTEGER=33320]="RG_INTEGER",t[t.RED_INTEGER=36244]="RED_INTEGER",t[t.ALPHA=6406]="ALPHA",t[t.LUMINANCE=6409]="LUMINANCE",t[t.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",t[t.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",t[t.DEPTH_STENCIL=34041]="DEPTH_STENCIL",t))(H||{}),is=(t=>(t[t.TEXTURE_2D=3553]="TEXTURE_2D",t[t.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",t[t.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",t[t.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",t[t.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",t[t.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",t[t.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",t[t.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",t))(is||{}),J=(t=>(t[t.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",t[t.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",t[t.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",t[t.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",t[t.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",t[t.UNSIGNED_INT=5125]="UNSIGNED_INT",t[t.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",t[t.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",t[t.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",t[t.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",t[t.BYTE=5120]="BYTE",t[t.SHORT=5122]="SHORT",t[t.INT=5124]="INT",t[t.FLOAT=5126]="FLOAT",t[t.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",t[t.HALF_FLOAT=36193]="HALF_FLOAT",t))(J||{}),qd=(t=>(t[t.FLOAT=0]="FLOAT",t[t.INT=1]="INT",t[t.UINT=2]="UINT",t))(qd||{}),Yn=(t=>(t[t.NEAREST=0]="NEAREST",t[t.LINEAR=1]="LINEAR",t))(Yn||{}),Ii=(t=>(t[t.CLAMP=33071]="CLAMP",t[t.REPEAT=10497]="REPEAT",t[t.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",t))(Ii||{}),Nn=(t=>(t[t.OFF=0]="OFF",t[t.POW2=1]="POW2",t[t.ON=2]="ON",t[t.ON_MANUAL=3]="ON_MANUAL",t))(Nn||{}),wn=(t=>(t[t.NPM=0]="NPM",t[t.UNPACK=1]="UNPACK",t[t.PMA=2]="PMA",t[t.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",t[t.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",t[t.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",t))(wn||{}),Tn=(t=>(t[t.NO=0]="NO",t[t.YES=1]="YES",t[t.AUTO=2]="AUTO",t[t.BLEND=0]="BLEND",t[t.CLEAR=1]="CLEAR",t[t.BLIT=2]="BLIT",t))(Tn||{}),lm=(t=>(t[t.AUTO=0]="AUTO",t[t.MANUAL=1]="MANUAL",t))(lm||{}),Yt=(t=>(t.LOW="lowp",t.MEDIUM="mediump",t.HIGH="highp",t))(Yt||{}),Ve=(t=>(t[t.NONE=0]="NONE",t[t.SCISSOR=1]="SCISSOR",t[t.STENCIL=2]="STENCIL",t[t.SPRITE=3]="SPRITE",t[t.COLOR=4]="COLOR",t))(Ve||{}),Be=(t=>(t[t.NONE=0]="NONE",t[t.LOW=2]="LOW",t[t.MEDIUM=4]="MEDIUM",t[t.HIGH=8]="HIGH",t))(Be||{}),Dn=(t=>(t[t.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",t[t.ARRAY_BUFFER=34962]="ARRAY_BUFFER",t[t.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",t))(Dn||{});const kC={createCanvas:(t,e)=>{const n=document.createElement("canvas");return n.width=t,n.height=e,n},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(t,e)=>fetch(t,e),parseXML:t=>new DOMParser().parseFromString(t,"text/xml")},X={ADAPTER:kC,RESOLUTION:1,RENDER_OPTIONS:{view:null,width:800,height:600,autoDensity:!1,backgroundColor:0,backgroundAlpha:1,clearBeforeRender:!0,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,hello:!1},CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var uh=/iPhone/i,Rv=/iPod/i,kv=/iPad/i,Dv=/\biOS-universal(?:.+)Mac\b/i,ch=/\bAndroid(?:.+)Mobile\b/i,Fv=/Android/i,Ir=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,ka=/Silk/i,Hn=/Windows Phone/i,Lv=/\bWindows(?:.+)ARM\b/i,Bv=/BlackBerry/i,Nv=/BB10/i,Uv=/Opera Mini/i,$v=/\b(CriOS|Chrome)(?:.+)Mobile/i,zv=/Mobile(?:.+)Firefox\b/i,Hv=function(t){return typeof t<"u"&&t.platform==="MacIntel"&&typeof t.maxTouchPoints=="number"&&t.maxTouchPoints>1&&typeof MSStream>"u"};function DC(t){return function(e){return e.test(t)}}function FC(t){var e={userAgent:"",platform:"",maxTouchPoints:0};!t&&typeof navigator<"u"?e={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof t=="string"?e.userAgent=t:t&&t.userAgent&&(e={userAgent:t.userAgent,platform:t.platform,maxTouchPoints:t.maxTouchPoints||0});var n=e.userAgent,i=n.split("[FBAN");typeof i[1]<"u"&&(n=i[0]),i=n.split("Twitter"),typeof i[1]<"u"&&(n=i[0]);var r=DC(n),s={apple:{phone:r(uh)&&!r(Hn),ipod:r(Rv),tablet:!r(uh)&&(r(kv)||Hv(e))&&!r(Hn),universal:r(Dv),device:(r(uh)||r(Rv)||r(kv)||r(Dv)||Hv(e))&&!r(Hn)},amazon:{phone:r(Ir),tablet:!r(Ir)&&r(ka),device:r(Ir)||r(ka)},android:{phone:!r(Hn)&&r(Ir)||!r(Hn)&&r(ch),tablet:!r(Hn)&&!r(Ir)&&!r(ch)&&(r(ka)||r(Fv)),device:!r(Hn)&&(r(Ir)||r(ka)||r(ch)||r(Fv))||r(/\bokhttp\b/i)},windows:{phone:r(Hn),tablet:r(Lv),device:r(Hn)||r(Lv)},other:{blackberry:r(Bv),blackberry10:r(Nv),opera:r(Uv),firefox:r(zv),chrome:r($v),device:r(Bv)||r(Nv)||r(Uv)||r(zv)||r($v)},any:!1,phone:!1,tablet:!1};return s.any=s.apple.device||s.android.device||s.windows.device||s.other.device,s.phone=s.apple.phone||s.android.phone||s.windows.phone,s.tablet=s.apple.tablet||s.android.tablet||s.windows.tablet,s}const qn=FC(globalThis.navigator);X.RETINA_PREFIX=/@([0-9\.]+)x/;X.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var mr={},LC={get exports(){return mr},set exports(t){mr=t}};(function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}Object.create&&(i.prototype=Object.create(null),new i().__proto__||(n=!1));function r(l,u,c){this.fn=l,this.context=u,this.once=c||!1}function s(l,u,c,h,d){if(typeof c!="function")throw new TypeError("The listener must be a function");var f=new r(c,h||l,d),p=n?n+u:u;return l._events[p]?l._events[p].fn?l._events[p]=[l._events[p],f]:l._events[p].push(f):(l._events[p]=f,l._eventsCount++),l}function o(l,u){--l._eventsCount===0?l._events=new i:delete l._events[u]}function a(){this._events=new i,this._eventsCount=0}a.prototype.eventNames=function(){var u=[],c,h;if(this._eventsCount===0)return u;for(h in c=this._events)e.call(c,h)&&u.push(n?h.slice(1):h);return Object.getOwnPropertySymbols?u.concat(Object.getOwnPropertySymbols(c)):u},a.prototype.listeners=function(u){var c=n?n+u:u,h=this._events[c];if(!h)return[];if(h.fn)return[h.fn];for(var d=0,f=h.length,p=new Array(f);d<f;d++)p[d]=h[d].fn;return p},a.prototype.listenerCount=function(u){var c=n?n+u:u,h=this._events[c];return h?h.fn?1:h.length:0},a.prototype.emit=function(u,c,h,d,f,p){var g=n?n+u:u;if(!this._events[g])return!1;var v=this._events[g],m=arguments.length,y,x;if(v.fn){switch(v.once&&this.removeListener(u,v.fn,void 0,!0),m){case 1:return v.fn.call(v.context),!0;case 2:return v.fn.call(v.context,c),!0;case 3:return v.fn.call(v.context,c,h),!0;case 4:return v.fn.call(v.context,c,h,d),!0;case 5:return v.fn.call(v.context,c,h,d,f),!0;case 6:return v.fn.call(v.context,c,h,d,f,p),!0}for(x=1,y=new Array(m-1);x<m;x++)y[x-1]=arguments[x];v.fn.apply(v.context,y)}else{var _=v.length,b;for(x=0;x<_;x++)switch(v[x].once&&this.removeListener(u,v[x].fn,void 0,!0),m){case 1:v[x].fn.call(v[x].context);break;case 2:v[x].fn.call(v[x].context,c);break;case 3:v[x].fn.call(v[x].context,c,h);break;case 4:v[x].fn.call(v[x].context,c,h,d);break;default:if(!y)for(b=1,y=new Array(m-1);b<m;b++)y[b-1]=arguments[b];v[x].fn.apply(v[x].context,y)}}return!0},a.prototype.on=function(u,c,h){return s(this,u,c,h,!1)},a.prototype.once=function(u,c,h){return s(this,u,c,h,!0)},a.prototype.removeListener=function(u,c,h,d){var f=n?n+u:u;if(!this._events[f])return this;if(!c)return o(this,f),this;var p=this._events[f];if(p.fn)p.fn===c&&(!d||p.once)&&(!h||p.context===h)&&o(this,f);else{for(var g=0,v=[],m=p.length;g<m;g++)(p[g].fn!==c||d&&!p[g].once||h&&p[g].context!==h)&&v.push(p[g]);v.length?this._events[f]=v.length===1?v[0]:v:o(this,f)}return this},a.prototype.removeAllListeners=function(u){var c;return u?(c=n?n+u:u,this._events[c]&&o(this,c)):(this._events=new i,this._eventsCount=0),this},a.prototype.off=a.prototype.removeListener,a.prototype.addListener=a.prototype.on,a.prefixed=n,a.EventEmitter=a,t.exports=a})(LC);var du={},BC={get exports(){return du},set exports(t){du=t}};BC.exports=ic;du.default=ic;function ic(t,e,n){n=n||2;var i=e&&e.length,r=i?e[0]*n:t.length,s=d_(t,0,r,n,!0),o=[];if(!s||s.next===s.prev)return o;var a,l,u,c,h,d,f;if(i&&(s=HC(t,e,s,n)),t.length>80*n){a=u=t[0],l=c=t[1];for(var p=n;p<r;p+=n)h=t[p],d=t[p+1],h<a&&(a=h),d<l&&(l=d),h>u&&(u=h),d>c&&(c=d);f=Math.max(u-a,c-l),f=f!==0?32767/f:0}return $o(s,o,n,a,l,f,0),o}function d_(t,e,n,i,r){var s,o;if(r===Qd(t,e,n,i)>0)for(s=e;s<n;s+=i)o=jv(s,t[s],t[s+1],o);else for(s=n-i;s>=e;s-=i)o=jv(s,t[s],t[s+1],o);return o&&rc(o,o.next)&&(Ho(o),o=o.next),o}function gr(t,e){if(!t)return t;e||(e=t);var n=t,i;do if(i=!1,!n.steiner&&(rc(n,n.next)||Me(n.prev,n,n.next)===0)){if(Ho(n),n=e=n.prev,n===n.next)break;i=!0}else n=n.next;while(i||n!==e);return e}function $o(t,e,n,i,r,s,o){if(t){!o&&s&&XC(t,i,r,s);for(var a=t,l,u;t.prev!==t.next;){if(l=t.prev,u=t.next,s?UC(t,i,r,s):NC(t)){e.push(l.i/n|0),e.push(t.i/n|0),e.push(u.i/n|0),Ho(t),t=u.next,a=u.next;continue}if(t=u,t===a){o?o===1?(t=$C(gr(t),e,n),$o(t,e,n,i,r,s,2)):o===2&&zC(t,e,n,i,r,s):$o(gr(t),e,n,i,r,s,1);break}}}}function NC(t){var e=t.prev,n=t,i=t.next;if(Me(e,n,i)>=0)return!1;for(var r=e.x,s=n.x,o=i.x,a=e.y,l=n.y,u=i.y,c=r<s?r<o?r:o:s<o?s:o,h=a<l?a<u?a:u:l<u?l:u,d=r>s?r>o?r:o:s>o?s:o,f=a>l?a>u?a:u:l>u?l:u,p=i.next;p!==e;){if(p.x>=c&&p.x<=d&&p.y>=h&&p.y<=f&&Yr(r,a,s,l,o,u,p.x,p.y)&&Me(p.prev,p,p.next)>=0)return!1;p=p.next}return!0}function UC(t,e,n,i){var r=t.prev,s=t,o=t.next;if(Me(r,s,o)>=0)return!1;for(var a=r.x,l=s.x,u=o.x,c=r.y,h=s.y,d=o.y,f=a<l?a<u?a:u:l<u?l:u,p=c<h?c<d?c:d:h<d?h:d,g=a>l?a>u?a:u:l>u?l:u,v=c>h?c>d?c:d:h>d?h:d,m=Kd(f,p,e,n,i),y=Kd(g,v,e,n,i),x=t.prevZ,_=t.nextZ;x&&x.z>=m&&_&&_.z<=y;){if(x.x>=f&&x.x<=g&&x.y>=p&&x.y<=v&&x!==r&&x!==o&&Yr(a,c,l,h,u,d,x.x,x.y)&&Me(x.prev,x,x.next)>=0||(x=x.prevZ,_.x>=f&&_.x<=g&&_.y>=p&&_.y<=v&&_!==r&&_!==o&&Yr(a,c,l,h,u,d,_.x,_.y)&&Me(_.prev,_,_.next)>=0))return!1;_=_.nextZ}for(;x&&x.z>=m;){if(x.x>=f&&x.x<=g&&x.y>=p&&x.y<=v&&x!==r&&x!==o&&Yr(a,c,l,h,u,d,x.x,x.y)&&Me(x.prev,x,x.next)>=0)return!1;x=x.prevZ}for(;_&&_.z<=y;){if(_.x>=f&&_.x<=g&&_.y>=p&&_.y<=v&&_!==r&&_!==o&&Yr(a,c,l,h,u,d,_.x,_.y)&&Me(_.prev,_,_.next)>=0)return!1;_=_.nextZ}return!0}function $C(t,e,n){var i=t;do{var r=i.prev,s=i.next.next;!rc(r,s)&&f_(r,i,i.next,s)&&zo(r,s)&&zo(s,r)&&(e.push(r.i/n|0),e.push(i.i/n|0),e.push(s.i/n|0),Ho(i),Ho(i.next),i=t=s),i=i.next}while(i!==t);return gr(i)}function zC(t,e,n,i,r,s){var o=t;do{for(var a=o.next.next;a!==o.prev;){if(o.i!==a.i&&KC(o,a)){var l=p_(o,a);o=gr(o,o.next),l=gr(l,l.next),$o(o,e,n,i,r,s,0),$o(l,e,n,i,r,s,0);return}a=a.next}o=o.next}while(o!==t)}function HC(t,e,n,i){var r=[],s,o,a,l,u;for(s=0,o=e.length;s<o;s++)a=e[s]*i,l=s<o-1?e[s+1]*i:t.length,u=d_(t,a,l,i,!1),u===u.next&&(u.steiner=!0),r.push(qC(u));for(r.sort(jC),s=0;s<r.length;s++)n=GC(r[s],n);return n}function jC(t,e){return t.x-e.x}function GC(t,e){var n=VC(t,e);if(!n)return e;var i=p_(n,t);return gr(i,i.next),gr(n,n.next)}function VC(t,e){var n=e,i=t.x,r=t.y,s=-1/0,o;do{if(r<=n.y&&r>=n.next.y&&n.next.y!==n.y){var a=n.x+(r-n.y)*(n.next.x-n.x)/(n.next.y-n.y);if(a<=i&&a>s&&(s=a,o=n.x<n.next.x?n:n.next,a===i))return o}n=n.next}while(n!==e);if(!o)return null;var l=o,u=o.x,c=o.y,h=1/0,d;n=o;do i>=n.x&&n.x>=u&&i!==n.x&&Yr(r<c?i:s,r,u,c,r<c?s:i,r,n.x,n.y)&&(d=Math.abs(r-n.y)/(i-n.x),zo(n,t)&&(d<h||d===h&&(n.x>o.x||n.x===o.x&&WC(o,n)))&&(o=n,h=d)),n=n.next;while(n!==l);return o}function WC(t,e){return Me(t.prev,t,e.prev)<0&&Me(e.next,t,t.next)<0}function XC(t,e,n,i){var r=t;do r.z===0&&(r.z=Kd(r.x,r.y,e,n,i)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==t);r.prevZ.nextZ=null,r.prevZ=null,YC(r)}function YC(t){var e,n,i,r,s,o,a,l,u=1;do{for(n=t,t=null,s=null,o=0;n;){for(o++,i=n,a=0,e=0;e<u&&(a++,i=i.nextZ,!!i);e++);for(l=u;a>0||l>0&&i;)a!==0&&(l===0||!i||n.z<=i.z)?(r=n,n=n.nextZ,a--):(r=i,i=i.nextZ,l--),s?s.nextZ=r:t=r,r.prevZ=s,s=r;n=i}s.nextZ=null,u*=2}while(o>1);return t}function Kd(t,e,n,i,r){return t=(t-n)*r|0,e=(e-i)*r|0,t=(t|t<<8)&16711935,t=(t|t<<4)&252645135,t=(t|t<<2)&858993459,t=(t|t<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,t|e<<1}function qC(t){var e=t,n=t;do(e.x<n.x||e.x===n.x&&e.y<n.y)&&(n=e),e=e.next;while(e!==t);return n}function Yr(t,e,n,i,r,s,o,a){return(r-o)*(e-a)>=(t-o)*(s-a)&&(t-o)*(i-a)>=(n-o)*(e-a)&&(n-o)*(s-a)>=(r-o)*(i-a)}function KC(t,e){return t.next.i!==e.i&&t.prev.i!==e.i&&!ZC(t,e)&&(zo(t,e)&&zo(e,t)&&QC(t,e)&&(Me(t.prev,t,e.prev)||Me(t,e.prev,e))||rc(t,e)&&Me(t.prev,t,t.next)>0&&Me(e.prev,e,e.next)>0)}function Me(t,e,n){return(e.y-t.y)*(n.x-e.x)-(e.x-t.x)*(n.y-e.y)}function rc(t,e){return t.x===e.x&&t.y===e.y}function f_(t,e,n,i){var r=Fa(Me(t,e,n)),s=Fa(Me(t,e,i)),o=Fa(Me(n,i,t)),a=Fa(Me(n,i,e));return!!(r!==s&&o!==a||r===0&&Da(t,n,e)||s===0&&Da(t,i,e)||o===0&&Da(n,t,i)||a===0&&Da(n,e,i))}function Da(t,e,n){return e.x<=Math.max(t.x,n.x)&&e.x>=Math.min(t.x,n.x)&&e.y<=Math.max(t.y,n.y)&&e.y>=Math.min(t.y,n.y)}function Fa(t){return t>0?1:t<0?-1:0}function ZC(t,e){var n=t;do{if(n.i!==t.i&&n.next.i!==t.i&&n.i!==e.i&&n.next.i!==e.i&&f_(n,n.next,t,e))return!0;n=n.next}while(n!==t);return!1}function zo(t,e){return Me(t.prev,t,t.next)<0?Me(t,e,t.next)>=0&&Me(t,t.prev,e)>=0:Me(t,e,t.prev)<0||Me(t,t.next,e)<0}function QC(t,e){var n=t,i=!1,r=(t.x+e.x)/2,s=(t.y+e.y)/2;do n.y>s!=n.next.y>s&&n.next.y!==n.y&&r<(n.next.x-n.x)*(s-n.y)/(n.next.y-n.y)+n.x&&(i=!i),n=n.next;while(n!==t);return i}function p_(t,e){var n=new Zd(t.i,t.x,t.y),i=new Zd(e.i,e.x,e.y),r=t.next,s=e.prev;return t.next=e,e.prev=t,n.next=r,r.prev=n,i.next=n,n.prev=i,s.next=i,i.prev=s,i}function jv(t,e,n,i){var r=new Zd(t,e,n);return i?(r.next=i.next,r.prev=i,i.next.prev=r,i.next=r):(r.prev=r,r.next=r),r}function Ho(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function Zd(t,e,n){this.i=t,this.x=e,this.y=n,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}ic.deviation=function(t,e,n,i){var r=e&&e.length,s=r?e[0]*n:t.length,o=Math.abs(Qd(t,0,s,n));if(r)for(var a=0,l=e.length;a<l;a++){var u=e[a]*n,c=a<l-1?e[a+1]*n:t.length;o-=Math.abs(Qd(t,u,c,n))}var h=0;for(a=0;a<i.length;a+=3){var d=i[a]*n,f=i[a+1]*n,p=i[a+2]*n;h+=Math.abs((t[d]-t[p])*(t[f+1]-t[d+1])-(t[d]-t[f])*(t[p+1]-t[d+1]))}return o===0&&h===0?0:Math.abs((h-o)/o)};function Qd(t,e,n,i){for(var r=0,s=e,o=n-i;s<n;s+=i)r+=(t[o]-t[s])*(t[s+1]+t[o+1]),o=s;return r}ic.flatten=function(t){for(var e=t[0][0].length,n={vertices:[],holes:[],dimensions:e},i=0,r=0;r<t.length;r++){for(var s=0;s<t[r].length;s++)for(var o=0;o<e;o++)n.vertices.push(t[r][s][o]);r>0&&(i+=t[r-1].length,n.holes.push(i))}return n};var fu={},JC={get exports(){return fu},set exports(t){fu=t}};/*! https://mths.be/punycode v1.3.2 by @mathias */(function(t,e){(function(n){var i=e&&!e.nodeType&&e,r=t&&!t.nodeType&&t,s=typeof Lc=="object"&&Lc;(s.global===s||s.window===s||s.self===s)&&(n=s);var o,a=2147483647,l=36,u=1,c=26,h=38,d=700,f=72,p=128,g="-",v=/^xn--/,m=/[^\x20-\x7E]/,y=/[\x2E\u3002\uFF0E\uFF61]/g,x={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},_=l-u,b=Math.floor,T=String.fromCharCode,E;function S(P){throw RangeError(x[P])}function k(P,G){for(var V=P.length,re=[];V--;)re[V]=G(P[V]);return re}function O(P,G){var V=P.split("@"),re="";V.length>1&&(re=V[0]+"@",P=V[1]),P=P.replace(y,".");var oe=P.split("."),pe=k(oe,G).join(".");return re+pe}function F(P){for(var G=[],V=0,re=P.length,oe,pe;V<re;)oe=P.charCodeAt(V++),oe>=55296&&oe<=56319&&V<re?(pe=P.charCodeAt(V++),(pe&64512)==56320?G.push(((oe&1023)<<10)+(pe&1023)+65536):(G.push(oe),V--)):G.push(oe);return G}function N(P){return k(P,function(G){var V="";return G>65535&&(G-=65536,V+=T(G>>>10&1023|55296),G=56320|G&1023),V+=T(G),V}).join("")}function C(P){return P-48<10?P-22:P-65<26?P-65:P-97<26?P-97:l}function w(P,G){return P+22+75*(P<26)-((G!=0)<<5)}function R(P,G,V){var re=0;for(P=V?b(P/d):P>>1,P+=b(P/G);P>_*c>>1;re+=l)P=b(P/_);return b(re+(_+1)*P/(P+h))}function z(P){var G=[],V=P.length,re,oe=0,pe=p,ue=f,he,De,qe,Ge,xe,Ae,Ue,Pt,jt;for(he=P.lastIndexOf(g),he<0&&(he=0),De=0;De<he;++De)P.charCodeAt(De)>=128&&S("not-basic"),G.push(P.charCodeAt(De));for(qe=he>0?he+1:0;qe<V;){for(Ge=oe,xe=1,Ae=l;qe>=V&&S("invalid-input"),Ue=C(P.charCodeAt(qe++)),(Ue>=l||Ue>b((a-oe)/xe))&&S("overflow"),oe+=Ue*xe,Pt=Ae<=ue?u:Ae>=ue+c?c:Ae-ue,!(Ue<Pt);Ae+=l)jt=l-Pt,xe>b(a/jt)&&S("overflow"),xe*=jt;re=G.length+1,ue=R(oe-Ge,re,Ge==0),b(oe/re)>a-pe&&S("overflow"),pe+=b(oe/re),oe%=re,G.splice(oe++,0,pe)}return N(G)}function D(P){var G,V,re,oe,pe,ue,he,De,qe,Ge,xe,Ae=[],Ue,Pt,jt,ks;for(P=F(P),Ue=P.length,G=p,V=0,pe=f,ue=0;ue<Ue;++ue)xe=P[ue],xe<128&&Ae.push(T(xe));for(re=oe=Ae.length,oe&&Ae.push(g);re<Ue;){for(he=a,ue=0;ue<Ue;++ue)xe=P[ue],xe>=G&&xe<he&&(he=xe);for(Pt=re+1,he-G>b((a-V)/Pt)&&S("overflow"),V+=(he-G)*Pt,G=he,ue=0;ue<Ue;++ue)if(xe=P[ue],xe<G&&++V>a&&S("overflow"),xe==G){for(De=V,qe=l;Ge=qe<=pe?u:qe>=pe+c?c:qe-pe,!(De<Ge);qe+=l)ks=De-Ge,jt=l-Ge,Ae.push(T(w(Ge+ks%jt,0))),De=b(ks/jt);Ae.push(T(w(De,0))),pe=R(V,Pt,re==oe),V=0,++re}++V,++G}return Ae.join("")}function M(P){return O(P,function(G){return v.test(G)?z(G.slice(4).toLowerCase()):G})}function B(P){return O(P,function(G){return m.test(G)?"xn--"+D(G):G})}if(o={version:"1.3.2",ucs2:{decode:F,encode:N},decode:z,encode:D,toASCII:B,toUnicode:M},i&&r)if(t.exports==i)r.exports=o;else for(E in o)o.hasOwnProperty(E)&&(i[E]=o[E]);else n.punycode=o})(Lc)})(JC,fu);var e2={isString:function(t){return typeof t=="string"},isObject:function(t){return typeof t=="object"&&t!==null},isNull:function(t){return t===null},isNullOrUndefined:function(t){return t==null}},jo={};function t2(t,e){return Object.prototype.hasOwnProperty.call(t,e)}var n2=function(t,e,n,i){e=e||"&",n=n||"=";var r={};if(typeof t!="string"||t.length===0)return r;var s=/\+/g;t=t.split(e);var o=1e3;i&&typeof i.maxKeys=="number"&&(o=i.maxKeys);var a=t.length;o>0&&a>o&&(a=o);for(var l=0;l<a;++l){var u=t[l].replace(s,"%20"),c=u.indexOf(n),h,d,f,p;c>=0?(h=u.substr(0,c),d=u.substr(c+1)):(h=u,d=""),f=decodeURIComponent(h),p=decodeURIComponent(d),t2(r,f)?Array.isArray(r[f])?r[f].push(p):r[f]=[r[f],p]:r[f]=p}return r},js=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return""}},i2=function(t,e,n,i){return e=e||"&",n=n||"=",t===null&&(t=void 0),typeof t=="object"?Object.keys(t).map(function(r){var s=encodeURIComponent(js(r))+n;return Array.isArray(t[r])?t[r].map(function(o){return s+encodeURIComponent(js(o))}).join(e):s+encodeURIComponent(js(t[r]))}).join(e):i?encodeURIComponent(js(i))+n+encodeURIComponent(js(t)):""};jo.decode=jo.parse=n2;jo.encode=jo.stringify=i2;var r2=fu,Cn=e2,s2=sc,o2=v2,a2=g2;function gn(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var l2=/^([a-z0-9.+-]+:)/i,u2=/:[0-9]*$/,c2=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,h2=["<",">",'"',"`"," ","\r",`
`,"	"],d2=["{","}","|","\\","^","`"].concat(h2),Jd=["'"].concat(d2),Gv=["%","/","?",";","#"].concat(Jd),Vv=["/","?","#"],f2=255,Wv=/^[+a-z0-9A-Z_-]{0,63}$/,p2=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,m2={javascript:!0,"javascript:":!0},ef={javascript:!0,"javascript:":!0},rs={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},tf=jo;function sc(t,e,n){if(t&&Cn.isObject(t)&&t instanceof gn)return t;var i=new gn;return i.parse(t,e,n),i}gn.prototype.parse=function(t,e,n){if(!Cn.isString(t))throw new TypeError("Parameter 'url' must be a string, not "+typeof t);var i=t.indexOf("?"),r=i!==-1&&i<t.indexOf("#")?"?":"#",s=t.split(r),o=/\\/g;s[0]=s[0].replace(o,"/"),t=s.join(r);var a=t;if(a=a.trim(),!n&&t.split("#").length===1){var l=c2.exec(a);if(l)return this.path=a,this.href=a,this.pathname=l[1],l[2]?(this.search=l[2],e?this.query=tf.parse(this.search.substr(1)):this.query=this.search.substr(1)):e&&(this.search="",this.query={}),this}var u=l2.exec(a);if(u){u=u[0];var c=u.toLowerCase();this.protocol=c,a=a.substr(u.length)}if(n||u||a.match(/^\/\/[^@\/]+@[^@\/]+/)){var h=a.substr(0,2)==="//";h&&!(u&&ef[u])&&(a=a.substr(2),this.slashes=!0)}if(!ef[u]&&(h||u&&!rs[u])){for(var d=-1,f=0;f<Vv.length;f++){var p=a.indexOf(Vv[f]);p!==-1&&(d===-1||p<d)&&(d=p)}var g,v;d===-1?v=a.lastIndexOf("@"):v=a.lastIndexOf("@",d),v!==-1&&(g=a.slice(0,v),a=a.slice(v+1),this.auth=decodeURIComponent(g)),d=-1;for(var f=0;f<Gv.length;f++){var p=a.indexOf(Gv[f]);p!==-1&&(d===-1||p<d)&&(d=p)}d===-1&&(d=a.length),this.host=a.slice(0,d),a=a.slice(d),this.parseHost(),this.hostname=this.hostname||"";var m=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!m)for(var y=this.hostname.split(/\./),f=0,x=y.length;f<x;f++){var _=y[f];if(_&&!_.match(Wv)){for(var b="",T=0,E=_.length;T<E;T++)_.charCodeAt(T)>127?b+="x":b+=_[T];if(!b.match(Wv)){var S=y.slice(0,f),k=y.slice(f+1),O=_.match(p2);O&&(S.push(O[1]),k.unshift(O[2])),k.length&&(a="/"+k.join(".")+a),this.hostname=S.join(".");break}}}this.hostname.length>f2?this.hostname="":this.hostname=this.hostname.toLowerCase(),m||(this.hostname=r2.toASCII(this.hostname));var F=this.port?":"+this.port:"",N=this.hostname||"";this.host=N+F,this.href+=this.host,m&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),a[0]!=="/"&&(a="/"+a))}if(!m2[c])for(var f=0,x=Jd.length;f<x;f++){var C=Jd[f];if(a.indexOf(C)!==-1){var w=encodeURIComponent(C);w===C&&(w=escape(C)),a=a.split(C).join(w)}}var R=a.indexOf("#");R!==-1&&(this.hash=a.substr(R),a=a.slice(0,R));var z=a.indexOf("?");if(z!==-1?(this.search=a.substr(z),this.query=a.substr(z+1),e&&(this.query=tf.parse(this.query)),a=a.slice(0,z)):e&&(this.search="",this.query={}),a&&(this.pathname=a),rs[c]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var F=this.pathname||"",D=this.search||"";this.path=F+D}return this.href=this.format(),this};function g2(t){return Cn.isString(t)&&(t=sc(t)),t instanceof gn?t.format():gn.prototype.format.call(t)}gn.prototype.format=function(){var t=this.auth||"";t&&(t=encodeURIComponent(t),t=t.replace(/%3A/i,":"),t+="@");var e=this.protocol||"",n=this.pathname||"",i=this.hash||"",r=!1,s="";this.host?r=t+this.host:this.hostname&&(r=t+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(r+=":"+this.port)),this.query&&Cn.isObject(this.query)&&Object.keys(this.query).length&&(s=tf.stringify(this.query));var o=this.search||s&&"?"+s||"";return e&&e.substr(-1)!==":"&&(e+=":"),this.slashes||(!e||rs[e])&&r!==!1?(r="//"+(r||""),n&&n.charAt(0)!=="/"&&(n="/"+n)):r||(r=""),i&&i.charAt(0)!=="#"&&(i="#"+i),o&&o.charAt(0)!=="?"&&(o="?"+o),n=n.replace(/[?#]/g,function(a){return encodeURIComponent(a)}),o=o.replace("#","%23"),e+r+n+o+i};function v2(t,e){return sc(t,!1,!0).resolve(e)}gn.prototype.resolve=function(t){return this.resolveObject(sc(t,!1,!0)).format()};gn.prototype.resolveObject=function(t){if(Cn.isString(t)){var e=new gn;e.parse(t,!1,!0),t=e}for(var n=new gn,i=Object.keys(this),r=0;r<i.length;r++){var s=i[r];n[s]=this[s]}if(n.hash=t.hash,t.href==="")return n.href=n.format(),n;if(t.slashes&&!t.protocol){for(var o=Object.keys(t),a=0;a<o.length;a++){var l=o[a];l!=="protocol"&&(n[l]=t[l])}return rs[n.protocol]&&n.hostname&&!n.pathname&&(n.path=n.pathname="/"),n.href=n.format(),n}if(t.protocol&&t.protocol!==n.protocol){if(!rs[t.protocol]){for(var u=Object.keys(t),c=0;c<u.length;c++){var h=u[c];n[h]=t[h]}return n.href=n.format(),n}if(n.protocol=t.protocol,!t.host&&!ef[t.protocol]){for(var x=(t.pathname||"").split("/");x.length&&!(t.host=x.shift()););t.host||(t.host=""),t.hostname||(t.hostname=""),x[0]!==""&&x.unshift(""),x.length<2&&x.unshift(""),n.pathname=x.join("/")}else n.pathname=t.pathname;if(n.search=t.search,n.query=t.query,n.host=t.host||"",n.auth=t.auth,n.hostname=t.hostname||t.host,n.port=t.port,n.pathname||n.search){var d=n.pathname||"",f=n.search||"";n.path=d+f}return n.slashes=n.slashes||t.slashes,n.href=n.format(),n}var p=n.pathname&&n.pathname.charAt(0)==="/",g=t.host||t.pathname&&t.pathname.charAt(0)==="/",v=g||p||n.host&&t.pathname,m=v,y=n.pathname&&n.pathname.split("/")||[],x=t.pathname&&t.pathname.split("/")||[],_=n.protocol&&!rs[n.protocol];if(_&&(n.hostname="",n.port=null,n.host&&(y[0]===""?y[0]=n.host:y.unshift(n.host)),n.host="",t.protocol&&(t.hostname=null,t.port=null,t.host&&(x[0]===""?x[0]=t.host:x.unshift(t.host)),t.host=null),v=v&&(x[0]===""||y[0]==="")),g)n.host=t.host||t.host===""?t.host:n.host,n.hostname=t.hostname||t.hostname===""?t.hostname:n.hostname,n.search=t.search,n.query=t.query,y=x;else if(x.length)y||(y=[]),y.pop(),y=y.concat(x),n.search=t.search,n.query=t.query;else if(!Cn.isNullOrUndefined(t.search)){if(_){n.hostname=n.host=y.shift();var b=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;b&&(n.auth=b.shift(),n.host=n.hostname=b.shift())}return n.search=t.search,n.query=t.query,(!Cn.isNull(n.pathname)||!Cn.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.href=n.format(),n}if(!y.length)return n.pathname=null,n.search?n.path="/"+n.search:n.path=null,n.href=n.format(),n;for(var T=y.slice(-1)[0],E=(n.host||t.host||y.length>1)&&(T==="."||T==="..")||T==="",S=0,k=y.length;k>=0;k--)T=y[k],T==="."?y.splice(k,1):T===".."?(y.splice(k,1),S++):S&&(y.splice(k,1),S--);if(!v&&!m)for(;S--;S)y.unshift("..");v&&y[0]!==""&&(!y[0]||y[0].charAt(0)!=="/")&&y.unshift(""),E&&y.join("/").substr(-1)!=="/"&&y.push("");var O=y[0]===""||y[0]&&y[0].charAt(0)==="/";if(_){n.hostname=n.host=O?"":y.length?y.shift():"";var b=n.host&&n.host.indexOf("@")>0?n.host.split("@"):!1;b&&(n.auth=b.shift(),n.host=n.hostname=b.shift())}return v=v||n.host&&y.length,v&&!O&&y.unshift(""),y.length?n.pathname=y.join("/"):(n.pathname=null,n.path=null),(!Cn.isNull(n.pathname)||!Cn.isNull(n.search))&&(n.path=(n.pathname?n.pathname:"")+(n.search?n.search:"")),n.auth=t.auth||n.auth,n.slashes=n.slashes||t.slashes,n.href=n.format(),n};gn.prototype.parseHost=function(){var t=this.host,e=u2.exec(t);e&&(e=e[0],e!==":"&&(this.port=e.substr(1)),t=t.substr(0,t.length-e.length)),t&&(this.hostname=t)};const y2={parse:s2,format:a2,resolve:o2};function tn(t){if(typeof t!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(t)}`)}function Gs(t){return t.split("?")[0].split("#")[0]}function x2(t){return t.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function _2(t,e,n){return t.replace(new RegExp(x2(e),"g"),n)}function w2(t,e){let n="",i=0,r=-1,s=0,o=-1;for(let a=0;a<=t.length;++a){if(a<t.length)o=t.charCodeAt(a);else{if(o===47)break;o=47}if(o===47){if(!(r===a-1||s===1))if(r!==a-1&&s===2){if(n.length<2||i!==2||n.charCodeAt(n.length-1)!==46||n.charCodeAt(n.length-2)!==46){if(n.length>2){const l=n.lastIndexOf("/");if(l!==n.length-1){l===-1?(n="",i=0):(n=n.slice(0,l),i=n.length-1-n.lastIndexOf("/")),r=a,s=0;continue}}else if(n.length===2||n.length===1){n="",i=0,r=a,s=0;continue}}e&&(n.length>0?n+="/..":n="..",i=2)}else n.length>0?n+=`/${t.slice(r+1,a)}`:n=t.slice(r+1,a),i=a-r-1;r=a,s=0}else o===46&&s!==-1?++s:s=-1}return n}const ot={toPosix(t){return _2(t,"\\","/")},isUrl(t){return/^https?:/.test(this.toPosix(t))},isDataUrl(t){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(t)},hasProtocol(t){return/^[^/:]+:\//.test(this.toPosix(t))},getProtocol(t){tn(t),t=this.toPosix(t);let e="";const n=/^file:\/\/\//.exec(t),i=/^[^/:]+:\/\//.exec(t),r=/^[^/:]+:\//.exec(t);if(n||i||r){const s=(n==null?void 0:n[0])||(i==null?void 0:i[0])||(r==null?void 0:r[0]);e=s,t=t.slice(s.length)}return e},toAbsolute(t,e,n){if(this.isDataUrl(t))return t;const i=Gs(this.toPosix(e??X.ADAPTER.getBaseUrl())),r=Gs(this.toPosix(n??this.rootname(i)));return tn(t),t=this.toPosix(t),t.startsWith("/")?ot.join(r,t.slice(1)):this.isAbsolute(t)?t:this.join(i,t)},normalize(t){if(t=this.toPosix(t),tn(t),t.length===0)return".";let e="";const n=t.startsWith("/");this.hasProtocol(t)&&(e=this.rootname(t),t=t.slice(e.length));const i=t.endsWith("/");return t=w2(t,!1),t.length>0&&i&&(t+="/"),n?`/${t}`:e+t},isAbsolute(t){return tn(t),t=this.toPosix(t),this.hasProtocol(t)?!0:t.startsWith("/")},join(...t){if(t.length===0)return".";let e;for(let n=0;n<t.length;++n){const i=t[n];if(tn(i),i.length>0)if(e===void 0)e=i;else{const r=t[n-1]??"";this.extname(r)?e+=`/../${i}`:e+=`/${i}`}}return e===void 0?".":this.normalize(e)},dirname(t){if(tn(t),t.length===0)return".";t=this.toPosix(t);let e=t.charCodeAt(0);const n=e===47;let i=-1,r=!0;const s=this.getProtocol(t),o=t;t=t.slice(s.length);for(let a=t.length-1;a>=1;--a)if(e=t.charCodeAt(a),e===47){if(!r){i=a;break}}else r=!1;return i===-1?n?"/":this.isUrl(o)?s+t:s:n&&i===1?"//":s+t.slice(0,i)},rootname(t){tn(t),t=this.toPosix(t);let e="";if(t.startsWith("/")?e="/":e=this.getProtocol(t),this.isUrl(t)){const n=t.indexOf("/",e.length);n!==-1?e=t.slice(0,n):e=t,e.endsWith("/")||(e+="/")}return e},basename(t,e){tn(t),e&&tn(e),t=Gs(this.toPosix(t));let n=0,i=-1,r=!0,s;if(e!==void 0&&e.length>0&&e.length<=t.length){if(e.length===t.length&&e===t)return"";let o=e.length-1,a=-1;for(s=t.length-1;s>=0;--s){const l=t.charCodeAt(s);if(l===47){if(!r){n=s+1;break}}else a===-1&&(r=!1,a=s+1),o>=0&&(l===e.charCodeAt(o)?--o===-1&&(i=s):(o=-1,i=a))}return n===i?i=a:i===-1&&(i=t.length),t.slice(n,i)}for(s=t.length-1;s>=0;--s)if(t.charCodeAt(s)===47){if(!r){n=s+1;break}}else i===-1&&(r=!1,i=s+1);return i===-1?"":t.slice(n,i)},extname(t){tn(t),t=Gs(this.toPosix(t));let e=-1,n=0,i=-1,r=!0,s=0;for(let o=t.length-1;o>=0;--o){const a=t.charCodeAt(o);if(a===47){if(!r){n=o+1;break}continue}i===-1&&(r=!1,i=o+1),a===46?e===-1?e=o:s!==1&&(s=1):e!==-1&&(s=-1)}return e===-1||i===-1||s===0||s===1&&e===i-1&&e===n+1?"":t.slice(e,i)},parse(t){tn(t);const e={root:"",dir:"",base:"",ext:"",name:""};if(t.length===0)return e;t=Gs(this.toPosix(t));let n=t.charCodeAt(0);const i=this.isAbsolute(t);let r;e.root=this.rootname(t),i||this.hasProtocol(t)?r=1:r=0;let s=-1,o=0,a=-1,l=!0,u=t.length-1,c=0;for(;u>=r;--u){if(n=t.charCodeAt(u),n===47){if(!l){o=u+1;break}continue}a===-1&&(l=!1,a=u+1),n===46?s===-1?s=u:c!==1&&(c=1):s!==-1&&(c=-1)}return s===-1||a===-1||c===0||c===1&&s===a-1&&s===o+1?a!==-1&&(o===0&&i?e.base=e.name=t.slice(1,a):e.base=e.name=t.slice(o,a)):(o===0&&i?(e.name=t.slice(1,s),e.base=t.slice(1,a)):(e.name=t.slice(o,s),e.base=t.slice(o,a)),e.ext=t.slice(s,a)),e.dir=this.dirname(t),e},sep:"/",delimiter:":"},Xv={};function fe(t,e,n=3){if(Xv[e])return;let i=new Error().stack;typeof i>"u"?console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`):(i=i.split(`
`).splice(n).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${e}
Deprecated since v${t}`),console.warn(i),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${e}
Deprecated since v${t}`),console.warn(i))),Xv[e]=!0}let hh;function b2(){return typeof hh>"u"&&(hh=function(){var n;const e={stencil:!0,failIfMajorPerformanceCaveat:X.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!X.ADAPTER.getWebGLRenderingContext())return!1;const i=X.ADAPTER.createCanvas();let r=i.getContext("webgl",e)||i.getContext("experimental-webgl",e);const s=!!((n=r==null?void 0:r.getContextAttributes())!=null&&n.stencil);if(r){const o=r.getExtension("WEBGL_lose_context");o&&o.loseContext()}return r=null,s}catch{return!1}}()),hh}var E2="#f0f8ff",S2="#faebd7",T2="#00ffff",C2="#7fffd4",A2="#f0ffff",P2="#f5f5dc",I2="#ffe4c4",M2="#000000",O2="#ffebcd",R2="#0000ff",k2="#8a2be2",D2="#a52a2a",F2="#deb887",L2="#5f9ea0",B2="#7fff00",N2="#d2691e",U2="#ff7f50",$2="#6495ed",z2="#fff8dc",H2="#dc143c",j2="#00ffff",G2="#00008b",V2="#008b8b",W2="#b8860b",X2="#a9a9a9",Y2="#006400",q2="#a9a9a9",K2="#bdb76b",Z2="#8b008b",Q2="#556b2f",J2="#ff8c00",eA="#9932cc",tA="#8b0000",nA="#e9967a",iA="#8fbc8f",rA="#483d8b",sA="#2f4f4f",oA="#2f4f4f",aA="#00ced1",lA="#9400d3",uA="#ff1493",cA="#00bfff",hA="#696969",dA="#696969",fA="#1e90ff",pA="#b22222",mA="#fffaf0",gA="#228b22",vA="#ff00ff",yA="#dcdcdc",xA="#f8f8ff",_A="#daa520",wA="#ffd700",bA="#808080",EA="#008000",SA="#adff2f",TA="#808080",CA="#f0fff0",AA="#ff69b4",PA="#cd5c5c",IA="#4b0082",MA="#fffff0",OA="#f0e68c",RA="#fff0f5",kA="#e6e6fa",DA="#7cfc00",FA="#fffacd",LA="#add8e6",BA="#f08080",NA="#e0ffff",UA="#fafad2",$A="#d3d3d3",zA="#90ee90",HA="#d3d3d3",jA="#ffb6c1",GA="#ffa07a",VA="#20b2aa",WA="#87cefa",XA="#778899",YA="#778899",qA="#b0c4de",KA="#ffffe0",ZA="#00ff00",QA="#32cd32",JA="#faf0e6",eP="#ff00ff",tP="#800000",nP="#66cdaa",iP="#0000cd",rP="#ba55d3",sP="#9370db",oP="#3cb371",aP="#7b68ee",lP="#00fa9a",uP="#48d1cc",cP="#c71585",hP="#191970",dP="#f5fffa",fP="#ffe4e1",pP="#ffe4b5",mP="#ffdead",gP="#000080",vP="#fdf5e6",yP="#808000",xP="#6b8e23",_P="#ffa500",wP="#ff4500",bP="#da70d6",EP="#eee8aa",SP="#98fb98",TP="#afeeee",CP="#db7093",AP="#ffefd5",PP="#ffdab9",IP="#cd853f",MP="#ffc0cb",OP="#dda0dd",RP="#b0e0e6",kP="#800080",DP="#663399",FP="#ff0000",LP="#bc8f8f",BP="#4169e1",NP="#8b4513",UP="#fa8072",$P="#f4a460",zP="#2e8b57",HP="#fff5ee",jP="#a0522d",GP="#c0c0c0",VP="#87ceeb",WP="#6a5acd",XP="#708090",YP="#708090",qP="#fffafa",KP="#00ff7f",ZP="#4682b4",QP="#d2b48c",JP="#008080",eI="#d8bfd8",tI="#ff6347",nI="#40e0d0",iI="#ee82ee",rI="#f5deb3",sI="#ffffff",oI="#f5f5f5",aI="#ffff00",lI="#9acd32",uI={aliceblue:E2,antiquewhite:S2,aqua:T2,aquamarine:C2,azure:A2,beige:P2,bisque:I2,black:M2,blanchedalmond:O2,blue:R2,blueviolet:k2,brown:D2,burlywood:F2,cadetblue:L2,chartreuse:B2,chocolate:N2,coral:U2,cornflowerblue:$2,cornsilk:z2,crimson:H2,cyan:j2,darkblue:G2,darkcyan:V2,darkgoldenrod:W2,darkgray:X2,darkgreen:Y2,darkgrey:q2,darkkhaki:K2,darkmagenta:Z2,darkolivegreen:Q2,darkorange:J2,darkorchid:eA,darkred:tA,darksalmon:nA,darkseagreen:iA,darkslateblue:rA,darkslategray:sA,darkslategrey:oA,darkturquoise:aA,darkviolet:lA,deeppink:uA,deepskyblue:cA,dimgray:hA,dimgrey:dA,dodgerblue:fA,firebrick:pA,floralwhite:mA,forestgreen:gA,fuchsia:vA,gainsboro:yA,ghostwhite:xA,goldenrod:_A,gold:wA,gray:bA,green:EA,greenyellow:SA,grey:TA,honeydew:CA,hotpink:AA,indianred:PA,indigo:IA,ivory:MA,khaki:OA,lavenderblush:RA,lavender:kA,lawngreen:DA,lemonchiffon:FA,lightblue:LA,lightcoral:BA,lightcyan:NA,lightgoldenrodyellow:UA,lightgray:$A,lightgreen:zA,lightgrey:HA,lightpink:jA,lightsalmon:GA,lightseagreen:VA,lightskyblue:WA,lightslategray:XA,lightslategrey:YA,lightsteelblue:qA,lightyellow:KA,lime:ZA,limegreen:QA,linen:JA,magenta:eP,maroon:tP,mediumaquamarine:nP,mediumblue:iP,mediumorchid:rP,mediumpurple:sP,mediumseagreen:oP,mediumslateblue:aP,mediumspringgreen:lP,mediumturquoise:uP,mediumvioletred:cP,midnightblue:hP,mintcream:dP,mistyrose:fP,moccasin:pP,navajowhite:mP,navy:gP,oldlace:vP,olive:yP,olivedrab:xP,orange:_P,orangered:wP,orchid:bP,palegoldenrod:EP,palegreen:SP,paleturquoise:TP,palevioletred:CP,papayawhip:AP,peachpuff:PP,peru:IP,pink:MP,plum:OP,powderblue:RP,purple:kP,rebeccapurple:DP,red:FP,rosybrown:LP,royalblue:BP,saddlebrown:NP,salmon:UP,sandybrown:$P,seagreen:zP,seashell:HP,sienna:jP,silver:GP,skyblue:VP,slateblue:WP,slategray:XP,slategrey:YP,snow:qP,springgreen:KP,steelblue:ZP,tan:QP,teal:JP,thistle:eI,tomato:tI,turquoise:nI,violet:iI,wheat:rI,white:sI,whitesmoke:oI,yellow:aI,yellowgreen:lI};function Go(t,e=[]){return e[0]=(t>>16&255)/255,e[1]=(t>>8&255)/255,e[2]=(t&255)/255,e}function m_(t){let e=t.toString(16);return e="000000".substring(0,6-e.length)+e,`#${e}`}function um(t){if(typeof t=="string"&&(t=uI[t.toLowerCase()]||t,t[0]==="#"&&(t=t.slice(1)),t.length===3)){const[e,n,i]=t;t=e+e+n+n+i+i}return parseInt(t,16)}function cI(){const t=[],e=[];for(let i=0;i<32;i++)t[i]=i,e[i]=i;t[ne.NORMAL_NPM]=ne.NORMAL,t[ne.ADD_NPM]=ne.ADD,t[ne.SCREEN_NPM]=ne.SCREEN,e[ne.NORMAL]=ne.NORMAL_NPM,e[ne.ADD]=ne.ADD_NPM,e[ne.SCREEN]=ne.SCREEN_NPM;const n=[];return n.push(e),n.push(t),n}const g_=cI();function v_(t,e){return g_[e?1:0][t]}function hI(t,e,n,i){return n=n||new Float32Array(4),i||i===void 0?(n[0]=t[0]*e,n[1]=t[1]*e,n[2]=t[2]*e):(n[0]=t[0],n[1]=t[1],n[2]=t[2]),n[3]=e,n}function cm(t,e){if(e===1)return(e*255<<24)+t;if(e===0)return 0;let n=t>>16&255,i=t>>8&255,r=t&255;return n=n*e+.5|0,i=i*e+.5|0,r=r*e+.5|0,(e*255<<24)+(n<<16)+(i<<8)+r}function y_(t,e,n,i){return n=n||new Float32Array(4),n[0]=(t>>16&255)/255,n[1]=(t>>8&255)/255,n[2]=(t&255)/255,(i||i===void 0)&&(n[0]*=e,n[1]*=e,n[2]*=e),n[3]=e,n}function dI(t,e=null){const n=t*6;if(e=e||new Uint16Array(n),e.length!==n)throw new Error(`Out buffer length is incorrect, got ${e.length} and expected ${n}`);for(let i=0,r=0;i<n;i+=6,r+=4)e[i+0]=r+0,e[i+1]=r+1,e[i+2]=r+2,e[i+3]=r+0,e[i+4]=r+2,e[i+5]=r+3;return e}function x_(t){if(t.BYTES_PER_ELEMENT===4)return t instanceof Float32Array?"Float32Array":t instanceof Uint32Array?"Uint32Array":"Int32Array";if(t.BYTES_PER_ELEMENT===2){if(t instanceof Uint16Array)return"Uint16Array"}else if(t.BYTES_PER_ELEMENT===1&&t instanceof Uint8Array)return"Uint8Array";return null}function pu(t){return t+=t===0?1:0,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,t|=t>>>16,t+1}function Yv(t){return!(t&t-1)&&!!t}function qv(t){let e=(t>65535?1:0)<<4;t>>>=e;let n=(t>255?1:0)<<3;return t>>>=n,e|=n,n=(t>15?1:0)<<2,t>>>=n,e|=n,n=(t>3?1:0)<<1,t>>>=n,e|=n,e|t>>1}function ss(t,e,n){const i=t.length;let r;if(e>=i||n===0)return;n=e+n>i?i-e:n;const s=i-n;for(r=e;r<s;++r)t[r]=t[r+n];t.length=s}function qr(t){return t===0?0:t<0?-1:1}let fI=0;function vr(){return++fI}const __=class{constructor(t,e,n,i){this.left=t,this.top=e,this.right=n,this.bottom=i}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};let nf=__;nf.EMPTY=new __(0,0,0,0);const Kv={},En=Object.create(null),hi=Object.create(null);class Zv{constructor(e,n,i){this._canvas=X.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=i||X.RESOLUTION,this.resize(e,n)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(e,n){this._checkDestroyed(),this._canvas.width=Math.round(e*this.resolution),this._canvas.height=Math.round(n*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(e){this._checkDestroyed(),this._canvas.width=Math.round(e)}get height(){return this._checkDestroyed(),this._canvas.height}set height(e){this._checkDestroyed(),this._canvas.height=Math.round(e)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function Qv(t,e,n){for(let i=0,r=4*n*e;i<e;++i,r+=4)if(t[r+3]!==0)return!1;return!0}function Jv(t,e,n,i,r){const s=4*e;for(let o=i,a=i*s+4*n;o<=r;++o,a+=s)if(t[a+3]!==0)return!1;return!0}function pI(t){const{width:e,height:n}=t,i=t.getContext("2d",{willReadFrequently:!0});if(i===null)throw new TypeError("Failed to get canvas 2D context");const s=i.getImageData(0,0,e,n).data;let o=0,a=0,l=e-1,u=n-1;for(;a<n&&Qv(s,e,a);)++a;if(a===n)return nf.EMPTY;for(;Qv(s,e,u);)--u;for(;Jv(s,e,o,a,u);)++o;for(;Jv(s,e,l,a,u);)--l;return++l,++u,new nf(o,a,l,u)}function mI(t){const e=pI(t),{width:n,height:i}=e;let r=null;if(!e.isEmpty()){const s=t.getContext("2d");if(s===null)throw new TypeError("Failed to get canvas 2D context");r=s.getImageData(e.left,e.top,n,i)}return{width:n,height:i,data:r}}let La;function gI(t,e=globalThis.location){if(t.startsWith("data:"))return"";e=e||globalThis.location,La||(La=document.createElement("a")),La.href=t;const n=y2.parse(La.href),i=!n.port&&e.port===""||n.port===e.port;return n.hostname!==e.hostname||!i||n.protocol!==e.protocol?"anonymous":""}function ki(t,e=1){var i;const n=(i=X.RETINA_PREFIX)==null?void 0:i.exec(t);return n?parseFloat(n[1]):e}var W=(t=>(t.Renderer="renderer",t.Application="application",t.RendererSystem="renderer-webgl-system",t.RendererPlugin="renderer-webgl-plugin",t.CanvasRendererSystem="renderer-canvas-system",t.CanvasRendererPlugin="renderer-canvas-plugin",t.Asset="asset",t.LoadParser="load-parser",t.ResolveParser="resolve-parser",t.CacheParser="cache-parser",t.DetectionParser="detection-parser",t))(W||{});const rf=t=>{if(typeof t=="function"||typeof t=="object"&&t.extension){if(!t.extension)throw new Error("Extension class must have an extension object");t={...typeof t.extension!="object"?{type:t.extension}:t.extension,ref:t}}if(typeof t=="object")t={...t};else throw new Error("Invalid extension type");return typeof t.type=="string"&&(t.type=[t.type]),t},e0=(t,e)=>rf(t).priority??e,Q={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...t){return t.map(rf).forEach(e=>{e.type.forEach(n=>{var i,r;return(r=(i=this._removeHandlers)[n])==null?void 0:r.call(i,e)})}),this},add(...t){return t.map(rf).forEach(e=>{e.type.forEach(n=>{const i=this._addHandlers,r=this._queue;i[n]?i[n](e):(r[n]=r[n]||[],r[n].push(e))})}),this},handle(t,e,n){const i=this._addHandlers,r=this._removeHandlers;if(i[t]||r[t])throw new Error(`Extension type ${t} already has a handler`);i[t]=e,r[t]=n;const s=this._queue;return s[t]&&(s[t].forEach(o=>e(o)),delete s[t]),this},handleByMap(t,e){return this.handle(t,n=>{e[n.name]=n.ref},n=>{delete e[n.name]})},handleByList(t,e,n=-1){return this.handle(t,i=>{e.includes(i.ref)||(e.push(i.ref),e.sort((r,s)=>e0(s,n)-e0(r,n)))},i=>{const r=e.indexOf(i.ref);r!==-1&&e.splice(r,1)})}};class sf{constructor(e){typeof e=="number"?this.rawBinaryData=new ArrayBuffer(e):e instanceof Uint8Array?this.rawBinaryData=e.buffer:this.rawBinaryData=e,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(e){return this[`${e}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(e){switch(e){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${e} isn't a valid view type`)}}}const vI=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function yI(t){let e="";for(let n=0;n<t;++n)n>0&&(e+=`
else `),n<t-1&&(e+=`if(test == ${n}.0){}`);return e}function xI(t,e){if(t===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const n=e.createShader(e.FRAGMENT_SHADER);for(;;){const i=vI.replace(/%forloop%/gi,yI(t));if(e.shaderSource(n,i),e.compileShader(n),!e.getShaderParameter(n,e.COMPILE_STATUS))t=t/2|0;else break}return t}const dh=0,fh=1,ph=2,mh=3,gh=4,vh=5;class ai{constructor(){this.data=0,this.blendMode=ne.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<dh)}set blend(e){!!(this.data&1<<dh)!==e&&(this.data^=1<<dh)}get offsets(){return!!(this.data&1<<fh)}set offsets(e){!!(this.data&1<<fh)!==e&&(this.data^=1<<fh)}get culling(){return!!(this.data&1<<ph)}set culling(e){!!(this.data&1<<ph)!==e&&(this.data^=1<<ph)}get depthTest(){return!!(this.data&1<<mh)}set depthTest(e){!!(this.data&1<<mh)!==e&&(this.data^=1<<mh)}get depthMask(){return!!(this.data&1<<vh)}set depthMask(e){!!(this.data&1<<vh)!==e&&(this.data^=1<<vh)}get clockwiseFrontFace(){return!!(this.data&1<<gh)}set clockwiseFrontFace(e){!!(this.data&1<<gh)!==e&&(this.data^=1<<gh)}get blendMode(){return this._blendMode}set blendMode(e){this.blend=e!==ne.NONE,this._blendMode=e}get polygonOffset(){return this._polygonOffset}set polygonOffset(e){this.offsets=!!e,this._polygonOffset=e}toString(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`}static for2d(){const e=new ai;return e.depthTest=!1,e.blend=!0,e}}const of=[];function w_(t,e){if(!t)return null;let n="";if(typeof t=="string"){const i=/\.(\w{3,4})(?:$|\?|#)/i.exec(t);i&&(n=i[1].toLowerCase())}for(let i=of.length-1;i>=0;--i){const r=of[i];if(r.test&&r.test(t,n))return new r(t,e)}throw new Error("Unrecognized source type to auto-detect Resource")}class vn{constructor(e){this.items=[],this._name=e,this._aliasCount=0}emit(e,n,i,r,s,o,a,l){if(arguments.length>8)throw new Error("max arguments reached");const{name:u,items:c}=this;this._aliasCount++;for(let h=0,d=c.length;h<d;h++)c[h][u](e,n,i,r,s,o,a,l);return c===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(e){return e[this._name]&&(this.ensureNonAliasedItems(),this.remove(e),this.items.push(e)),this}remove(e){const n=this.items.indexOf(e);return n!==-1&&(this.ensureNonAliasedItems(),this.items.splice(n,1)),this}contains(e){return this.items.includes(e)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(vn.prototype,{dispatch:{value:vn.prototype.emit},run:{value:vn.prototype.emit}});class Vo{constructor(e=0,n=0){this._width=e,this._height=n,this.destroyed=!1,this.internal=!1,this.onResize=new vn("setRealSize"),this.onUpdate=new vn("update"),this.onError=new vn("onError")}bind(e){this.onResize.add(e),this.onUpdate.add(e),this.onError.add(e),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(e){this.onResize.remove(e),this.onUpdate.remove(e),this.onError.remove(e)}resize(e,n){(e!==this._width||n!==this._height)&&(this._width=e,this._height=n,this.onResize.emit(e,n))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(e,n,i){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(e,n){return!1}}class oa extends Vo{constructor(e,n){const{width:i,height:r}=n||{};if(!i||!r)throw new Error("BufferResource width or height invalid");super(i,r),this.data=e}upload(e,n,i){const r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===wn.UNPACK);const s=n.realWidth,o=n.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(n.target,0,0,0,s,o,n.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(n.target,0,i.internalFormat,s,o,0,n.format,i.type,this.data)),!0}dispose(){this.data=null}static test(e){return e instanceof Float32Array||e instanceof Uint8Array||e instanceof Uint32Array}}const _I={scaleMode:Yn.NEAREST,format:H.RGBA,alphaMode:wn.NPM},kr=class extends mr{constructor(t=null,e=null){super(),e=Object.assign({},kr.defaultOptions,e);const{alphaMode:n,mipmap:i,anisotropicLevel:r,scaleMode:s,width:o,height:a,wrapMode:l,format:u,type:c,target:h,resolution:d,resourceOptions:f}=e;t&&!(t instanceof Vo)&&(t=w_(t,f),t.internal=!0),this.resolution=d||X.RESOLUTION,this.width=Math.round((o||0)*this.resolution)/this.resolution,this.height=Math.round((a||0)*this.resolution)/this.resolution,this._mipmap=i,this.anisotropicLevel=r,this._wrapMode=l,this._scaleMode=s,this.format=u,this.type=c,this.target=h,this.alphaMode=n,this.uid=vr(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=o>0&&a>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(t)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(t){this._mipmap!==t&&(this._mipmap=t,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(t){this._scaleMode!==t&&(this._scaleMode=t,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(t){this._wrapMode!==t&&(this._wrapMode=t,this.dirtyStyleId++)}setStyle(t,e){let n;return t!==void 0&&t!==this.scaleMode&&(this.scaleMode=t,n=!0),e!==void 0&&e!==this.mipmap&&(this.mipmap=e,n=!0),n&&this.dirtyStyleId++,this}setSize(t,e,n){return n=n||this.resolution,this.setRealSize(t*n,e*n,n)}setRealSize(t,e,n){return this.resolution=n||this.resolution,this.width=Math.round(t)/this.resolution,this.height=Math.round(e)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=Yv(this.realWidth)&&Yv(this.realHeight)}setResolution(t){const e=this.resolution;return e===t?this:(this.resolution=t,this.valid&&(this.width=Math.round(this.width*e)/t,this.height=Math.round(this.height*e)/t,this.emit("update",this)),this._refreshPOT(),this)}setResource(t){if(this.resource===t)return this;if(this.resource)throw new Error("Resource can be set only once");return t.bind(this),this.resource=t,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(t){this.emit("error",this,t)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete hi[this.cacheId],delete En[this.cacheId],this.cacheId=null),this.dispose(),kr.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(t,e,n=X.STRICT_TEXTURE_CACHE){const i=typeof t=="string";let r=null;if(i)r=t;else{if(!t._pixiId){const o=(e==null?void 0:e.pixiIdPrefix)||"pixiid";t._pixiId=`${o}_${vr()}`}r=t._pixiId}let s=hi[r];if(i&&n&&!s)throw new Error(`The cacheId "${r}" does not exist in BaseTextureCache.`);return s||(s=new kr(t,e),s.cacheId=r,kr.addToCache(s,r)),s}static fromBuffer(t,e,n,i){t=t||new Float32Array(e*n*4);const r=new oa(t,{width:e,height:n}),s=t instanceof Float32Array?J.FLOAT:J.UNSIGNED_BYTE;return new kr(r,Object.assign({},_I,i||{width:e,height:n,type:s}))}static addToCache(t,e){e&&(t.textureCacheIds.includes(e)||t.textureCacheIds.push(e),hi[e]&&hi[e]!==t&&console.warn(`BaseTexture added to the cache with an id [${e}] that already had an entry`),hi[e]=t)}static removeFromCache(t){if(typeof t=="string"){const e=hi[t];if(e){const n=e.textureCacheIds.indexOf(t);return n>-1&&e.textureCacheIds.splice(n,1),delete hi[t],e}}else if(t!=null&&t.textureCacheIds){for(let e=0;e<t.textureCacheIds.length;++e)delete hi[t.textureCacheIds[e]];return t.textureCacheIds.length=0,t}return null}};let ae=kr;ae.defaultOptions={mipmap:Nn.POW2,anisotropicLevel:0,scaleMode:Yn.LINEAR,wrapMode:Ii.CLAMP,alphaMode:wn.UNPACK,target:is.TEXTURE_2D,format:H.RGBA,type:J.UNSIGNED_BYTE};ae._globalBatch=0;class af{constructor(){this.texArray=null,this.blend=0,this.type=Mn.TRIANGLES,this.start=0,this.size=0,this.data=null}}let wI=0,Xe=class b_{constructor(e,n=!0,i=!1){this.data=e||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=i,this.static=n,this.id=wI++,this.disposeRunner=new vn("disposeBuffer")}update(e){e instanceof Array&&(e=new Float32Array(e)),this.data=e||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(e){this.type=e?Dn.ELEMENT_ARRAY_BUFFER:Dn.ARRAY_BUFFER}get index(){return this.type===Dn.ELEMENT_ARRAY_BUFFER}static from(e){return e instanceof Array&&(e=new Float32Array(e)),new b_(e)}};class mu{constructor(e,n=0,i=!1,r=J.FLOAT,s,o,a,l=1){this.buffer=e,this.size=n,this.normalized=i,this.type=r,this.stride=s,this.start=o,this.instance=a,this.divisor=l}destroy(){this.buffer=null}static from(e,n,i,r,s){return new mu(e,n,i,r,s)}}const bI={Float32Array,Uint32Array,Int32Array,Uint8Array};function EI(t,e){let n=0,i=0;const r={};for(let l=0;l<t.length;l++)i+=e[l],n+=t[l].length;const s=new ArrayBuffer(n*4);let o=null,a=0;for(let l=0;l<t.length;l++){const u=e[l],c=t[l],h=x_(c);r[h]||(r[h]=new bI[h](s)),o=r[h];for(let d=0;d<c.length;d++){const f=(d/u|0)*i+a,p=d%u;o[f+p]=c[d]}a+=u}return new Float32Array(s)}const t0={5126:4,5123:2,5121:1};let SI=0;const TI={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Di{constructor(e=[],n={}){this.buffers=e,this.indexBuffer=null,this.attributes=n,this.glVertexArrayObjects={},this.id=SI++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new vn("disposeGeometry"),this.refCount=0}addAttribute(e,n,i=0,r=!1,s,o,a,l=!1){if(!n)throw new Error("You must pass a buffer when creating an attribute");n instanceof Xe||(n instanceof Array&&(n=new Float32Array(n)),n=new Xe(n));const u=e.split("|");if(u.length>1){for(let h=0;h<u.length;h++)this.addAttribute(u[h],n,i,r,s);return this}let c=this.buffers.indexOf(n);return c===-1&&(this.buffers.push(n),c=this.buffers.length-1),this.attributes[e]=new mu(c,i,r,s,o,a,l),this.instanced=this.instanced||l,this}getAttribute(e){return this.attributes[e]}getBuffer(e){return this.buffers[this.getAttribute(e).buffer]}addIndex(e){return e instanceof Xe||(e instanceof Array&&(e=new Uint16Array(e)),e=new Xe(e)),e.type=Dn.ELEMENT_ARRAY_BUFFER,this.indexBuffer=e,this.buffers.includes(e)||this.buffers.push(e),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const e=[],n=[],i=new Xe;let r;for(r in this.attributes){const s=this.attributes[r],o=this.buffers[s.buffer];e.push(o.data),n.push(s.size*t0[s.type]/4),s.buffer=0}for(i.data=EI(e,n),r=0;r<this.buffers.length;r++)this.buffers[r]!==this.indexBuffer&&this.buffers[r].destroy();return this.buffers=[i],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const e in this.attributes){const n=this.attributes[e];return this.buffers[n.buffer].data.length/(n.stride/4||n.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const e=new Di;for(let n=0;n<this.buffers.length;n++)e.buffers[n]=new Xe(this.buffers[n].data.slice(0));for(const n in this.attributes){const i=this.attributes[n];e.attributes[n]=new mu(i.buffer,i.size,i.normalized,i.type,i.stride,i.start,i.instance)}return this.indexBuffer&&(e.indexBuffer=e.buffers[this.buffers.indexOf(this.indexBuffer)],e.indexBuffer.type=Dn.ELEMENT_ARRAY_BUFFER),e}static merge(e){const n=new Di,i=[],r=[],s=[];let o;for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)r[l]=r[l]||0,r[l]+=o.buffers[l].data.length,s[l]=0}for(let a=0;a<o.buffers.length;a++)i[a]=new TI[x_(o.buffers[a].data)](r[a]),n.buffers[a]=new Xe(i[a]);for(let a=0;a<e.length;a++){o=e[a];for(let l=0;l<o.buffers.length;l++)i[l].set(o.buffers[l].data,s[l]),s[l]+=o.buffers[l].data.length}if(n.attributes=o.attributes,o.indexBuffer){n.indexBuffer=n.buffers[o.buffers.indexOf(o.indexBuffer)],n.indexBuffer.type=Dn.ELEMENT_ARRAY_BUFFER;let a=0,l=0,u=0,c=0;for(let h=0;h<o.buffers.length;h++)if(o.buffers[h]!==o.indexBuffer){c=h;break}for(const h in o.attributes){const d=o.attributes[h];(d.buffer|0)===c&&(l+=d.size*t0[d.type]/4)}for(let h=0;h<e.length;h++){const d=e[h].indexBuffer.data;for(let f=0;f<d.length;f++)n.indexBuffer.data[f+u]+=a;a+=e[h].buffers[c].data.length/l,u+=d.length}}return n}}class E_ extends Di{constructor(e=!1){super(),this._buffer=new Xe(null,e,!1),this._indexBuffer=new Xe(null,e,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,J.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,J.FLOAT).addAttribute("aColor",this._buffer,4,!0,J.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,J.FLOAT).addIndex(this._indexBuffer)}}const gu=Math.PI*2,CI=180/Math.PI,AI=Math.PI/180;var it=(t=>(t[t.POLY=0]="POLY",t[t.RECT=1]="RECT",t[t.CIRC=2]="CIRC",t[t.ELIP=3]="ELIP",t[t.RREC=4]="RREC",t))(it||{});class te{constructor(e=0,n=0){this.x=0,this.y=0,this.x=e,this.y=n}clone(){return new te(this.x,this.y)}copyFrom(e){return this.set(e.x,e.y),this}copyTo(e){return e.set(this.x,this.y),e}equals(e){return e.x===this.x&&e.y===this.y}set(e=0,n=e){return this.x=e,this.y=n,this}toString(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`}}const Ba=[new te,new te,new te,new te];class le{constructor(e=0,n=0,i=0,r=0){this.x=Number(e),this.y=Number(n),this.width=Number(i),this.height=Number(r),this.type=it.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new le(0,0,0,0)}clone(){return new le(this.x,this.y,this.width,this.height)}copyFrom(e){return this.x=e.x,this.y=e.y,this.width=e.width,this.height=e.height,this}copyTo(e){return e.x=this.x,e.y=this.y,e.width=this.width,e.height=this.height,e}contains(e,n){return this.width<=0||this.height<=0?!1:e>=this.x&&e<this.x+this.width&&n>=this.y&&n<this.y+this.height}intersects(e,n){if(!n){const S=this.x<e.x?e.x:this.x;if((this.right>e.right?e.right:this.right)<=S)return!1;const O=this.y<e.y?e.y:this.y;return(this.bottom>e.bottom?e.bottom:this.bottom)>O}const i=this.left,r=this.right,s=this.top,o=this.bottom;if(r<=i||o<=s)return!1;const a=Ba[0].set(e.left,e.top),l=Ba[1].set(e.left,e.bottom),u=Ba[2].set(e.right,e.top),c=Ba[3].set(e.right,e.bottom);if(u.x<=a.x||l.y<=a.y)return!1;const h=Math.sign(n.a*n.d-n.b*n.c);if(h===0||(n.apply(a,a),n.apply(l,l),n.apply(u,u),n.apply(c,c),Math.max(a.x,l.x,u.x,c.x)<=i||Math.min(a.x,l.x,u.x,c.x)>=r||Math.max(a.y,l.y,u.y,c.y)<=s||Math.min(a.y,l.y,u.y,c.y)>=o))return!1;const d=h*(l.y-a.y),f=h*(a.x-l.x),p=d*i+f*s,g=d*r+f*s,v=d*i+f*o,m=d*r+f*o;if(Math.max(p,g,v,m)<=d*a.x+f*a.y||Math.min(p,g,v,m)>=d*c.x+f*c.y)return!1;const y=h*(a.y-u.y),x=h*(u.x-a.x),_=y*i+x*s,b=y*r+x*s,T=y*i+x*o,E=y*r+x*o;return!(Math.max(_,b,T,E)<=y*a.x+x*a.y||Math.min(_,b,T,E)>=y*c.x+x*c.y)}pad(e=0,n=e){return this.x-=e,this.y-=n,this.width+=e*2,this.height+=n*2,this}fit(e){const n=Math.max(this.x,e.x),i=Math.min(this.x+this.width,e.x+e.width),r=Math.max(this.y,e.y),s=Math.min(this.y+this.height,e.y+e.height);return this.x=n,this.width=Math.max(i-n,0),this.y=r,this.height=Math.max(s-r,0),this}ceil(e=1,n=.001){const i=Math.ceil((this.x+this.width-n)*e)/e,r=Math.ceil((this.y+this.height-n)*e)/e;return this.x=Math.floor((this.x+n)*e)/e,this.y=Math.floor((this.y+n)*e)/e,this.width=i-this.x,this.height=r-this.y,this}enlarge(e){const n=Math.min(this.x,e.x),i=Math.max(this.x+this.width,e.x+e.width),r=Math.min(this.y,e.y),s=Math.max(this.y+this.height,e.y+e.height);return this.x=n,this.width=i-n,this.y=r,this.height=s-r,this}toString(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class oc{constructor(e=0,n=0,i=0){this.x=e,this.y=n,this.radius=i,this.type=it.CIRC}clone(){return new oc(this.x,this.y,this.radius)}contains(e,n){if(this.radius<=0)return!1;const i=this.radius*this.radius;let r=this.x-e,s=this.y-n;return r*=r,s*=s,r+s<=i}getBounds(){return new le(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}toString(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`}}class hm{constructor(e=0,n=0,i=0,r=0){this.x=e,this.y=n,this.width=i,this.height=r,this.type=it.ELIP}clone(){return new hm(this.x,this.y,this.width,this.height)}contains(e,n){if(this.width<=0||this.height<=0)return!1;let i=(e-this.x)/this.width,r=(n-this.y)/this.height;return i*=i,r*=r,i+r<=1}getBounds(){return new le(this.x-this.width,this.y-this.height,this.width,this.height)}toString(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`}}class os{constructor(...e){let n=Array.isArray(e[0])?e[0]:e;if(typeof n[0]!="number"){const i=[];for(let r=0,s=n.length;r<s;r++)i.push(n[r].x,n[r].y);n=i}this.points=n,this.type=it.POLY,this.closeStroke=!0}clone(){const e=this.points.slice(),n=new os(e);return n.closeStroke=this.closeStroke,n}contains(e,n){let i=!1;const r=this.points.length/2;for(let s=0,o=r-1;s<r;o=s++){const a=this.points[s*2],l=this.points[s*2+1],u=this.points[o*2],c=this.points[o*2+1];l>n!=c>n&&e<(u-a)*((n-l)/(c-l))+a&&(i=!i)}return i}toString(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((e,n)=>`${e}, ${n}`,"")}]`}}class Wo{constructor(e=0,n=0,i=0,r=0,s=20){this.x=e,this.y=n,this.width=i,this.height=r,this.radius=s,this.type=it.RREC}clone(){return new Wo(this.x,this.y,this.width,this.height,this.radius)}contains(e,n){if(this.width<=0||this.height<=0)return!1;if(e>=this.x&&e<=this.x+this.width&&n>=this.y&&n<=this.y+this.height){const i=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(n>=this.y+i&&n<=this.y+this.height-i||e>=this.x+i&&e<=this.x+this.width-i)return!0;let r=e-(this.x+i),s=n-(this.y+i);const o=i*i;if(r*r+s*s<=o||(r=e-(this.x+this.width-i),r*r+s*s<=o)||(s=n-(this.y+this.height-i),r*r+s*s<=o)||(r=e-(this.x+i),r*r+s*s<=o))return!0}return!1}toString(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`}}class Ce{constructor(e=1,n=0,i=0,r=1,s=0,o=0){this.array=null,this.a=e,this.b=n,this.c=i,this.d=r,this.tx=s,this.ty=o}fromArray(e){this.a=e[0],this.b=e[1],this.c=e[3],this.d=e[4],this.tx=e[2],this.ty=e[5]}set(e,n,i,r,s,o){return this.a=e,this.b=n,this.c=i,this.d=r,this.tx=s,this.ty=o,this}toArray(e,n){this.array||(this.array=new Float32Array(9));const i=n||this.array;return e?(i[0]=this.a,i[1]=this.b,i[2]=0,i[3]=this.c,i[4]=this.d,i[5]=0,i[6]=this.tx,i[7]=this.ty,i[8]=1):(i[0]=this.a,i[1]=this.c,i[2]=this.tx,i[3]=this.b,i[4]=this.d,i[5]=this.ty,i[6]=0,i[7]=0,i[8]=1),i}apply(e,n){n=n||new te;const i=e.x,r=e.y;return n.x=this.a*i+this.c*r+this.tx,n.y=this.b*i+this.d*r+this.ty,n}applyInverse(e,n){n=n||new te;const i=1/(this.a*this.d+this.c*-this.b),r=e.x,s=e.y;return n.x=this.d*i*r+-this.c*i*s+(this.ty*this.c-this.tx*this.d)*i,n.y=this.a*i*s+-this.b*i*r+(-this.ty*this.a+this.tx*this.b)*i,n}translate(e,n){return this.tx+=e,this.ty+=n,this}scale(e,n){return this.a*=e,this.d*=n,this.c*=e,this.b*=n,this.tx*=e,this.ty*=n,this}rotate(e){const n=Math.cos(e),i=Math.sin(e),r=this.a,s=this.c,o=this.tx;return this.a=r*n-this.b*i,this.b=r*i+this.b*n,this.c=s*n-this.d*i,this.d=s*i+this.d*n,this.tx=o*n-this.ty*i,this.ty=o*i+this.ty*n,this}append(e){const n=this.a,i=this.b,r=this.c,s=this.d;return this.a=e.a*n+e.b*r,this.b=e.a*i+e.b*s,this.c=e.c*n+e.d*r,this.d=e.c*i+e.d*s,this.tx=e.tx*n+e.ty*r+this.tx,this.ty=e.tx*i+e.ty*s+this.ty,this}setTransform(e,n,i,r,s,o,a,l,u){return this.a=Math.cos(a+u)*s,this.b=Math.sin(a+u)*s,this.c=-Math.sin(a-l)*o,this.d=Math.cos(a-l)*o,this.tx=e-(i*this.a+r*this.c),this.ty=n-(i*this.b+r*this.d),this}prepend(e){const n=this.tx;if(e.a!==1||e.b!==0||e.c!==0||e.d!==1){const i=this.a,r=this.c;this.a=i*e.a+this.b*e.c,this.b=i*e.b+this.b*e.d,this.c=r*e.a+this.d*e.c,this.d=r*e.b+this.d*e.d}return this.tx=n*e.a+this.ty*e.c+e.tx,this.ty=n*e.b+this.ty*e.d+e.ty,this}decompose(e){const n=this.a,i=this.b,r=this.c,s=this.d,o=e.pivot,a=-Math.atan2(-r,s),l=Math.atan2(i,n),u=Math.abs(a+l);return u<1e-5||Math.abs(gu-u)<1e-5?(e.rotation=l,e.skew.x=e.skew.y=0):(e.rotation=0,e.skew.x=a,e.skew.y=l),e.scale.x=Math.sqrt(n*n+i*i),e.scale.y=Math.sqrt(r*r+s*s),e.position.x=this.tx+(o.x*n+o.y*r),e.position.y=this.ty+(o.x*i+o.y*s),e}invert(){const e=this.a,n=this.b,i=this.c,r=this.d,s=this.tx,o=e*r-n*i;return this.a=r/o,this.b=-n/o,this.c=-i/o,this.d=e/o,this.tx=(i*this.ty-r*s)/o,this.ty=-(e*this.ty-n*s)/o,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const e=new Ce;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyTo(e){return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e}copyFrom(e){return this.a=e.a,this.b=e.b,this.c=e.c,this.d=e.d,this.tx=e.tx,this.ty=e.ty,this}toString(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`}static get IDENTITY(){return new Ce}static get TEMP_MATRIX(){return new Ce}}const qi=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Ki=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],Zi=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Qi=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],lf=[],S_=[],Na=Math.sign;function PI(){for(let t=0;t<16;t++){const e=[];lf.push(e);for(let n=0;n<16;n++){const i=Na(qi[t]*qi[n]+Zi[t]*Ki[n]),r=Na(Ki[t]*qi[n]+Qi[t]*Ki[n]),s=Na(qi[t]*Zi[n]+Zi[t]*Qi[n]),o=Na(Ki[t]*Zi[n]+Qi[t]*Qi[n]);for(let a=0;a<16;a++)if(qi[a]===i&&Ki[a]===r&&Zi[a]===s&&Qi[a]===o){e.push(a);break}}}for(let t=0;t<16;t++){const e=new Ce;e.set(qi[t],Ki[t],Zi[t],Qi[t],0,0),S_.push(e)}}PI();const Pe={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:t=>qi[t],uY:t=>Ki[t],vX:t=>Zi[t],vY:t=>Qi[t],inv:t=>t&8?t&15:-t&7,add:(t,e)=>lf[t][e],sub:(t,e)=>lf[t][Pe.inv(e)],rotate180:t=>t^4,isVertical:t=>(t&3)===2,byDirection:(t,e)=>Math.abs(t)*2<=Math.abs(e)?e>=0?Pe.S:Pe.N:Math.abs(e)*2<=Math.abs(t)?t>0?Pe.E:Pe.W:e>0?t>0?Pe.SE:Pe.SW:t>0?Pe.NE:Pe.NW,matrixAppendRotationInv:(t,e,n=0,i=0)=>{const r=S_[Pe.inv(e)];r.tx=n,r.ty=i,t.append(r)}};class _i{constructor(e,n,i=0,r=0){this._x=i,this._y=r,this.cb=e,this.scope=n}clone(e=this.cb,n=this.scope){return new _i(e,n,this._x,this._y)}set(e=0,n=e){return(this._x!==e||this._y!==n)&&(this._x=e,this._y=n,this.cb.call(this.scope)),this}copyFrom(e){return(this._x!==e.x||this._y!==e.y)&&(this._x=e.x,this._y=e.y,this.cb.call(this.scope)),this}copyTo(e){return e.set(this._x,this._y),e}equals(e){return e.x===this._x&&e.y===this._y}toString(){return`[@pixi/math:ObservablePoint x=${0} y=${0} scope=${this.scope}]`}get x(){return this._x}set x(e){this._x!==e&&(this._x=e,this.cb.call(this.scope))}get y(){return this._y}set y(e){this._y!==e&&(this._y=e,this.cb.call(this.scope))}}const T_=class{constructor(){this.worldTransform=new Ce,this.localTransform=new Ce,this.position=new _i(this.onChange,this,0,0),this.scale=new _i(this.onChange,this,1,1),this.pivot=new _i(this.onChange,this,0,0),this.skew=new _i(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}toString(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`}updateLocalTransform(){const t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(t){const e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==t._worldID){const n=t.worldTransform,i=this.worldTransform;i.a=e.a*n.a+e.b*n.c,i.b=e.a*n.b+e.b*n.d,i.c=e.c*n.a+e.d*n.c,i.d=e.c*n.b+e.d*n.d,i.tx=e.tx*n.a+e.ty*n.c+n.tx,i.ty=e.tx*n.b+e.ty*n.d+n.ty,this._parentID=t._worldID,this._worldID++}}setFromMatrix(t){t.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(t){this._rotation!==t&&(this._rotation=t,this.updateSkew())}};let dm=T_;dm.IDENTITY=new T_;var II=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,MI=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function n0(t,e,n){const i=t.createShader(e);return t.shaderSource(i,n),t.compileShader(i),i}function yh(t){const e=new Array(t);for(let n=0;n<e.length;n++)e[n]=!1;return e}function C_(t,e){switch(t){case"float":return 0;case"vec2":return new Float32Array(2*e);case"vec3":return new Float32Array(3*e);case"vec4":return new Float32Array(4*e);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*e);case"ivec3":return new Int32Array(3*e);case"ivec4":return new Int32Array(4*e);case"uvec2":return new Uint32Array(2*e);case"uvec3":return new Uint32Array(3*e);case"uvec4":return new Uint32Array(4*e);case"bool":return!1;case"bvec2":return yh(2*e);case"bvec3":return yh(3*e);case"bvec4":return yh(4*e);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const as=[{test:t=>t.type==="float"&&t.size===1&&!t.isArray,code:t=>`
            if(uv["${t}"] !== ud["${t}"].value)
            {
                ud["${t}"].value = uv["${t}"]
                gl.uniform1f(ud["${t}"].location, uv["${t}"])
            }
            `},{test:(t,e)=>(t.type==="sampler2D"||t.type==="samplerCube"||t.type==="sampler2DArray")&&t.size===1&&!t.isArray&&(e==null||e.castToBaseTexture!==void 0),code:t=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${t}"], t);

            if(ud["${t}"].value !== t)
            {
                ud["${t}"].value = t;
                gl.uniform1i(ud["${t}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(t,e)=>t.type==="mat3"&&t.size===1&&!t.isArray&&e.a!==void 0,code:t=>`
            gl.uniformMatrix3fv(ud["${t}"].location, false, uv["${t}"].toArray(true));
            `,codeUbo:t=>`
                var ${t}_matrix = uv.${t}.toArray(true);

                data[offset] = ${t}_matrix[0];
                data[offset+1] = ${t}_matrix[1];
                data[offset+2] = ${t}_matrix[2];
        
                data[offset + 4] = ${t}_matrix[3];
                data[offset + 5] = ${t}_matrix[4];
                data[offset + 6] = ${t}_matrix[5];
        
                data[offset + 8] = ${t}_matrix[6];
                data[offset + 9] = ${t}_matrix[7];
                data[offset + 10] = ${t}_matrix[8];
            `},{test:(t,e)=>t.type==="vec2"&&t.size===1&&!t.isArray&&e.x!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${t}"].location, v.x, v.y);
                }`,codeUbo:t=>`
                v = uv.${t};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:t=>t.type==="vec2"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${t}"].location, v[0], v[1]);
                }
            `},{test:(t,e)=>t.type==="vec4"&&t.size===1&&!t.isArray&&e.width!==void 0,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${t}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:t=>`
                    v = uv.${t};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:t=>t.type==="vec4"&&t.size===1&&!t.isArray,code:t=>`
                cv = ud["${t}"].value;
                v = uv["${t}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${t}"].location, v[0], v[1], v[2], v[3])
                }`}],OI={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},RI={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function kI(t,e){var i;const n=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const r in t.uniforms){const s=e[r];if(!s){(i=t.uniforms[r])!=null&&i.group&&(t.uniforms[r].ubo?n.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${r}, '${r}');
                    `):n.push(`
                        renderer.shader.syncUniformGroup(uv.${r}, syncData);
                    `));continue}const o=t.uniforms[r];let a=!1;for(let l=0;l<as.length;l++)if(as[l].test(s,o)){n.push(as[l].code(r,o)),a=!0;break}if(!a){const u=(s.size===1&&!s.isArray?OI:RI)[s.type].replace("location",`ud["${r}"].location`);n.push(`
            cu = ud["${r}"];
            cv = cu.value;
            v = uv["${r}"];
            ${u};`)}}return new Function("ud","uv","renderer","syncData",n.join(`
`))}const A_={};let Mr=A_;function DI(){if(Mr===A_||Mr!=null&&Mr.isContextLost()){const t=X.ADAPTER.createCanvas();let e;X.PREFER_ENV>=Er.WEBGL2&&(e=t.getContext("webgl2",{})),e||(e=t.getContext("webgl",{})||t.getContext("experimental-webgl",{}),e?e.getExtension("WEBGL_draw_buffers"):e=null),Mr=e}return Mr}let Ua;function FI(){if(!Ua){Ua=Yt.MEDIUM;const t=DI();t&&t.getShaderPrecisionFormat&&(Ua=t.getShaderPrecisionFormat(t.FRAGMENT_SHADER,t.HIGH_FLOAT).precision?Yt.HIGH:Yt.MEDIUM)}return Ua}function i0(t,e){const n=t.getShaderSource(e).split(`
`).map((u,c)=>`${c}: ${u}`),i=t.getShaderInfoLog(e),r=i.split(`
`),s={},o=r.map(u=>parseFloat(u.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(u=>u&&!s[u]?(s[u]=!0,!0):!1),a=[""];o.forEach(u=>{n[u-1]=`%c${n[u-1]}%c`,a.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const l=n.join(`
`);a[0]=l,console.error(i),console.groupCollapsed("click to view full shader code"),console.warn(...a),console.groupEnd()}function LI(t,e,n,i){t.getProgramParameter(e,t.LINK_STATUS)||(t.getShaderParameter(n,t.COMPILE_STATUS)||i0(t,n),t.getShaderParameter(i,t.COMPILE_STATUS)||i0(t,i),console.error("PixiJS Error: Could not initialize shader."),t.getProgramInfoLog(e)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",t.getProgramInfoLog(e)))}const BI={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function P_(t){return BI[t]}let $a=null;const r0={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function I_(t,e){if(!$a){const n=Object.keys(r0);$a={};for(let i=0;i<n.length;++i){const r=n[i];$a[t[r]]=r0[r]}}return $a[e]}function s0(t,e,n){if(t.substring(0,9)!=="precision"){let i=e;return e===Yt.HIGH&&n!==Yt.HIGH&&(i=Yt.MEDIUM),`precision ${i} float;
${t}`}else if(n!==Yt.HIGH&&t.substring(0,15)==="precision highp")return t.replace("precision highp","precision mediump");return t}let Vs;function NI(){if(typeof Vs=="boolean")return Vs;try{Vs=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{Vs=!1}return Vs}let UI=0;const za={},Dr=class{constructor(t,e,n="pixi-shader",i={}){this.extra={},this.id=UI++,this.vertexSrc=t||Dr.defaultVertexSrc,this.fragmentSrc=e||Dr.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=i,this.vertexSrc.substring(0,8)!=="#version"&&(n=n.replace(/\s+/g,"-"),za[n]?(za[n]++,n+=`-${za[n]}`):za[n]=1,this.vertexSrc=`#define SHADER_NAME ${n}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${n}
${this.fragmentSrc}`,this.vertexSrc=s0(this.vertexSrc,Dr.defaultVertexPrecision,Yt.HIGH),this.fragmentSrc=s0(this.fragmentSrc,Dr.defaultFragmentPrecision,FI())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return MI}static get defaultFragmentSrc(){return II}static from(t,e,n){const i=t+e;let r=Kv[i];return r||(Kv[i]=r=new Dr(t,e,n)),r}};let fn=Dr;fn.defaultVertexPrecision=Yt.HIGH;fn.defaultFragmentPrecision=qn.apple.device?Yt.HIGH:Yt.MEDIUM;let $I=0;class yn{constructor(e,n,i){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=$I++,this.static=!!n,this.ubo=!!i,e instanceof Xe?(this.buffer=e,this.buffer.type=Dn.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=e,this.ubo&&(this.buffer=new Xe(new Float32Array(1)),this.buffer.type=Dn.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(e,n,i){if(!this.ubo)this.uniforms[e]=new yn(n,i);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(e,n,i){return new yn(e,n,i)}static uboFrom(e,n){return new yn(e,n??!0,!0)}}class Fn{constructor(e,n){this.uniformBindCount=0,this.program=e,n?n instanceof yn?this.uniformGroup=n:this.uniformGroup=new yn(n):this.uniformGroup=new yn({}),this.disposeRunner=new vn("disposeShader")}checkUniformExists(e,n){if(n.uniforms[e])return!0;for(const i in n.uniforms){const r=n.uniforms[i];if(r.group&&this.checkUniformExists(e,r))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(e,n,i){const r=fn.from(e,n);return new Fn(r,i)}}class zI{constructor(e,n){if(this.vertexSrc=e,this.fragTemplate=n,this.programCache={},this.defaultGroupCache={},!n.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!n.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(e){if(!this.programCache[e]){const i=new Int32Array(e);for(let s=0;s<e;s++)i[s]=s;this.defaultGroupCache[e]=yn.from({uSamplers:i},!0);let r=this.fragTemplate;r=r.replace(/%count%/gi,`${e}`),r=r.replace(/%forloop%/gi,this.generateSampleSrc(e)),this.programCache[e]=new fn(this.vertexSrc,r)}const n={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ce,default:this.defaultGroupCache[e]};return new Fn(this.programCache[e],n)}generateSampleSrc(e){let n="";n+=`
`,n+=`
`;for(let i=0;i<e;i++)i>0&&(n+=`
else `),i<e-1&&(n+=`if(vTextureId < ${i}.5)`),n+=`
{`,n+=`
	color = texture2D(uSamplers[${i}], vTextureCoord);`,n+=`
}`;return n+=`
`,n+=`
`,n}}class uf{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let e=0;e<this.count;e++)this.elements[e]=null;this.count=0}}function HI(){return!qn.apple.device}function jI(t){let e=!0;const n=X.ADAPTER.getNavigator();if(qn.tablet||qn.phone){if(qn.apple.device){const i=n.userAgent.match(/OS (\d+)_(\d+)?/);i&&parseInt(i[1],10)<11&&(e=!1)}if(qn.android.device){const i=n.userAgent.match(/Android\s([0-9.]*)/);i&&parseInt(i[1],10)<7&&(e=!1)}}return e?t:4}class ac{constructor(e){this.renderer=e}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(e){}}var GI=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,VI=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const rn=class extends ac{constructor(t){super(t),this.setShaderGenerator(),this.geometryClass=E_,this.vertexSize=6,this.state=ai.for2d(),this.size=rn.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),t.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??jI(32),this._defaultMaxTextures}static set defaultMaxTextures(t){this._defaultMaxTextures=t}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??HI(),this._canUploadSameBuffer}static set canUploadSameBuffer(t){this._canUploadSameBuffer=t}get MAX_TEXTURES(){return fe("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return VI}static get defaultFragmentTemplate(){return GI}setShaderGenerator({vertex:t=rn.defaultVertexSrc,fragment:e=rn.defaultFragmentTemplate}={}){this.shaderGenerator=new zI(t,e)}contextChange(){const t=this.renderer.gl;X.PREFER_ENV===Er.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(t.getParameter(t.MAX_TEXTURE_IMAGE_UNITS),rn.defaultMaxTextures),this.maxTextures=xI(this.maxTextures,t)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let e=0;e<this._packedGeometryPoolSize;e++)this._packedGeometries[e]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:t,_textureArrayPool:e}=rn,n=this.size/4,i=Math.floor(n/this.maxTextures)+1;for(;t.length<n;)t.push(new af);for(;e.length<i;)e.push(new uf);for(let r=0;r<this.maxTextures;r++)this._tempBoundTextures[r]=null}onPrerender(){this._flushId=0}render(t){t._texture.valid&&(this._vertexCount+t.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=t.vertexData.length/2,this._indexCount+=t.indices.length,this._bufferedTextures[this._bufferSize]=t._texture.baseTexture,this._bufferedElements[this._bufferSize++]=t)}buildTexturesAndDrawCalls(){const{_bufferedTextures:t,maxTextures:e}=this,n=rn._textureArrayPool,i=this.renderer.batch,r=this._tempBoundTextures,s=this.renderer.textureGC.count;let o=++ae._globalBatch,a=0,l=n[0],u=0;i.copyBoundTextures(r,e);for(let c=0;c<this._bufferSize;++c){const h=t[c];t[c]=null,h._batchEnabled!==o&&(l.count>=e&&(i.boundArray(l,r,o,e),this.buildDrawCalls(l,u,c),u=c,l=n[++a],++o),h._batchEnabled=o,h.touched=s,l.elements[l.count++]=h)}l.count>0&&(i.boundArray(l,r,o,e),this.buildDrawCalls(l,u,this._bufferSize),++a,++o);for(let c=0;c<r.length;c++)r[c]=null;ae._globalBatch=o}buildDrawCalls(t,e,n){const{_bufferedElements:i,_attributeBuffer:r,_indexBuffer:s,vertexSize:o}=this,a=rn._drawCallPool;let l=this._dcIndex,u=this._aIndex,c=this._iIndex,h=a[l];h.start=this._iIndex,h.texArray=t;for(let d=e;d<n;++d){const f=i[d],p=f._texture.baseTexture,g=g_[p.alphaMode?1:0][f.blendMode];i[d]=null,e<d&&h.blend!==g&&(h.size=c-h.start,e=d,h=a[++l],h.texArray=t,h.start=c),this.packInterleavedGeometry(f,r,s,u,c),u+=f.vertexData.length/2*o,c+=f.indices.length,h.blend=g}e<n&&(h.size=c-h.start,++l),this._dcIndex=l,this._aIndex=u,this._iIndex=c}bindAndClearTexArray(t){const e=this.renderer.texture;for(let n=0;n<t.count;n++)e.bind(t.elements[n],t.ids[n]),t.elements[n]=null;t.count=0}updateGeometry(){const{_packedGeometries:t,_attributeBuffer:e,_indexBuffer:n}=this;rn.canUploadSameBuffer?(t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,t[this._flushId]=new this.geometryClass),t[this._flushId]._buffer.update(e.rawBinaryData),t[this._flushId]._indexBuffer.update(n),this.renderer.geometry.bind(t[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const t=this._dcIndex,{gl:e,state:n}=this.renderer,i=rn._drawCallPool;let r=null;for(let s=0;s<t;s++){const{texArray:o,type:a,size:l,start:u,blend:c}=i[s];r!==o&&(r=o,this.bindAndClearTexArray(o)),this.state.blendMode=c,n.set(this.state),e.drawElements(a,l,e.UNSIGNED_SHORT,u*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),rn.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let t=0;t<this._packedGeometryPoolSize;t++)this._packedGeometries[t]&&this._packedGeometries[t].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(t){const e=pu(Math.ceil(t/8)),n=qv(e),i=e*8;this._aBuffers.length<=n&&(this._iBuffers.length=n+1);let r=this._aBuffers[i];return r||(this._aBuffers[i]=r=new sf(i*this.vertexSize*4)),r}getIndexBuffer(t){const e=pu(Math.ceil(t/12)),n=qv(e),i=e*12;this._iBuffers.length<=n&&(this._iBuffers.length=n+1);let r=this._iBuffers[n];return r||(this._iBuffers[n]=r=new Uint16Array(i)),r}packInterleavedGeometry(t,e,n,i,r){const{uint32View:s,float32View:o}=e,a=i/this.vertexSize,l=t.uvs,u=t.indices,c=t.vertexData,h=t._texture.baseTexture._batchLocation,d=Math.min(t.worldAlpha,1),f=d<1&&t._texture.baseTexture.alphaMode?cm(t._tintRGB,d):t._tintRGB+(d*255<<24);for(let p=0;p<c.length;p+=2)o[i++]=c[p],o[i++]=c[p+1],o[i++]=l[p],o[i++]=l[p+1],s[i++]=f,o[i++]=h;for(let p=0;p<u.length;p++)n[r++]=a+u[p]}};let hn=rn;hn.defaultBatchSize=4096;hn.extension={name:"batch",type:W.RendererPlugin};hn._drawCallPool=[];hn._textureArrayPool=[];Q.add(hn);var WI=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,XI=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const oo=class extends Fn{constructor(t,e,n){const i=fn.from(t||oo.defaultVertexSrc,e||oo.defaultFragmentSrc);super(i,n),this.padding=0,this.resolution=oo.defaultResolution,this.multisample=oo.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new ai}apply(t,e,n,i,r){t.applyFilter(this,e,n,i)}get blendMode(){return this.state.blendMode}set blendMode(t){this.state.blendMode=t}get resolution(){return this._resolution}set resolution(t){this._resolution=t}static get defaultVertexSrc(){return XI}static get defaultFragmentSrc(){return WI}};let rt=oo;rt.defaultResolution=1;rt.defaultMultisample=Be.NONE;class M_{constructor(){this.clearBeforeRender=!0,this._backgroundColor=0,this._backgroundColorRgba=[0,0,0,1],this._backgroundColorString="#000000",this.color=this._backgroundColor,this.alpha=1}init(e){this.clearBeforeRender=e.clearBeforeRender,e.color&&(this.color=typeof e.color=="string"?um(e.color):e.color),this.alpha=e.alpha}get color(){return this._backgroundColor}set color(e){this._backgroundColor=e,this._backgroundColorString=m_(e),Go(e,this._backgroundColorRgba)}get alpha(){return this._backgroundColorRgba[3]}set alpha(e){this._backgroundColorRgba[3]=e}get colorRgba(){return this._backgroundColorRgba}get colorString(){return this._backgroundColorString}destroy(){}}M_.extension={type:[W.RendererSystem,W.CanvasRendererSystem],name:"background"};Q.add(M_);class O_{constructor(e){this.renderer=e,this.emptyRenderer=new ac(e),this.currentRenderer=this.emptyRenderer}setObjectRenderer(e){this.currentRenderer!==e&&(this.currentRenderer.stop(),this.currentRenderer=e,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(e,n){const{boundTextures:i}=this.renderer.texture;for(let r=n-1;r>=0;--r)e[r]=i[r]||null,e[r]&&(e[r]._batchLocation=r)}boundArray(e,n,i,r){const{elements:s,ids:o,count:a}=e;let l=0;for(let u=0;u<a;u++){const c=s[u],h=c._batchLocation;if(h>=0&&h<r&&n[h]===c){o[u]=h;continue}for(;l<r;){const d=n[l];if(d&&d._batchEnabled===i&&d._batchLocation===l){l++;continue}o[u]=l,c._batchLocation=l,n[l]=c;break}}}destroy(){this.renderer=null}}O_.extension={type:W.RendererSystem,name:"batch"};Q.add(O_);let o0=0;class R_{constructor(e){this.renderer=e,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(e){this.gl=e,this.renderer.gl=e,this.renderer.CONTEXT_UID=o0++}init(e){if(e.context)this.initFromContext(e.context);else{const n=this.renderer.background.alpha<1,i=e.premultipliedAlpha;this.preserveDrawingBuffer=e.preserveDrawingBuffer,this.useContextAlpha=e.useContextAlpha,this.powerPreference=e.powerPreference,this.initFromOptions({alpha:n,premultipliedAlpha:i,antialias:e.antialias,stencil:!0,preserveDrawingBuffer:e.preserveDrawingBuffer,powerPreference:e.powerPreference})}}initFromContext(e){this.gl=e,this.validateContext(e),this.renderer.gl=e,this.renderer.CONTEXT_UID=o0++,this.renderer.runners.contextChange.emit(e);const n=this.renderer.view;n.addEventListener!==void 0&&(n.addEventListener("webglcontextlost",this.handleContextLost,!1),n.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(e){const n=this.createContext(this.renderer.view,e);this.initFromContext(n)}createContext(e,n){let i;if(X.PREFER_ENV>=Er.WEBGL2&&(i=e.getContext("webgl2",n)),i)this.webGLVersion=2;else if(this.webGLVersion=1,i=e.getContext("webgl",n)||e.getContext("experimental-webgl",n),!i)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=i,this.getExtensions(),this.gl}getExtensions(){const{gl:e}=this,n={loseContext:e.getExtension("WEBGL_lose_context"),anisotropicFiltering:e.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),s3tc:e.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:e.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:e.getExtension("WEBGL_compressed_texture_etc"),etc1:e.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:e.getExtension("WEBGL_compressed_texture_pvrtc")||e.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:e.getExtension("WEBGL_compressed_texture_atc"),astc:e.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,n,{drawBuffers:e.getExtension("WEBGL_draw_buffers"),depthTexture:e.getExtension("WEBGL_depth_texture"),vertexArrayObject:e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:e.getExtension("OES_element_index_uint"),floatTexture:e.getExtension("OES_texture_float"),floatTextureLinear:e.getExtension("OES_texture_float_linear"),textureHalfFloat:e.getExtension("OES_texture_half_float"),textureHalfFloatLinear:e.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,n,{colorBufferFloat:e.getExtension("EXT_color_buffer_float")})}handleContextLost(e){e.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const e=this.renderer.view;this.renderer=null,e.removeEventListener!==void 0&&(e.removeEventListener("webglcontextlost",this.handleContextLost),e.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(e){const n=e.getContextAttributes(),i="WebGL2RenderingContext"in globalThis&&e instanceof globalThis.WebGL2RenderingContext;i&&(this.webGLVersion=2),n&&!n.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const r=i||!!e.getExtension("OES_element_index_uint");this.supports.uint32Indices=r,r||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}R_.extension={type:W.RendererSystem,name:"context"};Q.add(R_);class YI extends oa{upload(e,n,i){const r=e.gl;r.pixelStorei(r.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===wn.UNPACK);const s=n.realWidth,o=n.realHeight;return i.width===s&&i.height===o?r.texSubImage2D(n.target,0,0,0,s,o,n.format,i.type,this.data):(i.width=s,i.height=o,r.texImage2D(n.target,0,i.internalFormat,s,o,0,n.format,i.type,this.data)),!0}}class cf{constructor(e,n){this.width=Math.round(e||100),this.height=Math.round(n||100),this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new vn("disposeFramebuffer"),this.multisample=Be.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(e=0,n){return this.colorTextures[e]=n||new ae(null,{scaleMode:Yn.NEAREST,resolution:1,mipmap:Nn.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(e){return this.depthTexture=e||new ae(new YI(null,{width:this.width,height:this.height}),{scaleMode:Yn.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:Nn.OFF,format:H.DEPTH_COMPONENT,type:J.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(e,n){if(e=Math.round(e),n=Math.round(n),!(e===this.width&&n===this.height)){this.width=e,this.height=n,this.dirtyId++,this.dirtySize++;for(let i=0;i<this.colorTextures.length;i++){const r=this.colorTextures[i],s=r.resolution;r.setSize(e/s,n/s)}if(this.depthTexture){const i=this.depthTexture.resolution;this.depthTexture.setSize(e/i,n/i)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class k_ extends ae{constructor(e={}){if(typeof e=="number"){const n=arguments[0],i=arguments[1],r=arguments[2],s=arguments[3];e={width:n,height:i,scaleMode:r,resolution:s}}e.width=e.width||100,e.height=e.height||100,e.multisample??(e.multisample=Be.NONE),super(null,e),this.mipmap=Nn.OFF,this.valid=!0,this.clearColor=[0,0,0,0],this.framebuffer=new cf(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=e.multisample,this.maskStack=[],this.filterStack=[{}]}resize(e,n){this.framebuffer.resize(e*this.resolution,n*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class Fi extends Vo{constructor(e){const n=e,i=n.naturalWidth||n.videoWidth||n.width,r=n.naturalHeight||n.videoHeight||n.height;super(i,r),this.source=e,this.noSubImage=!1}static crossOrigin(e,n,i){i===void 0&&!n.startsWith("data:")?e.crossOrigin=gI(n):i!==!1&&(e.crossOrigin=typeof i=="string"?i:"anonymous")}upload(e,n,i,r){const s=e.gl,o=n.realWidth,a=n.realHeight;if(r=r||this.source,typeof HTMLImageElement<"u"&&r instanceof HTMLImageElement){if(!r.complete||r.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&r instanceof HTMLVideoElement&&r.readyState<=1&&r.buffered.length===0)return!1;return s.pixelStorei(s.UNPACK_PREMULTIPLY_ALPHA_WEBGL,n.alphaMode===wn.UNPACK),!this.noSubImage&&n.target===s.TEXTURE_2D&&i.width===o&&i.height===a?s.texSubImage2D(s.TEXTURE_2D,0,0,0,n.format,i.type,r):(i.width=o,i.height=a,s.texImage2D(n.target,0,i.internalFormat,n.format,i.type,r)),!0}update(){if(this.destroyed)return;const e=this.source,n=e.naturalWidth||e.videoWidth||e.width,i=e.naturalHeight||e.videoHeight||e.height;this.resize(n,i),super.update()}dispose(){this.source=null}}class D_ extends Fi{constructor(e,n){if(n=n||{},typeof e=="string"){const i=new Image;Fi.crossOrigin(i,e,n.crossorigin),i.src=e,e=i}super(e),!e.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=e.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(n.createBitmap??X.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this.bitmap=null,this._load=null,n.autoLoad!==!1&&this.load()}load(e){return this._load?this._load:(e!==void 0&&(this.createBitmap=e),this._load=new Promise((n,i)=>{const r=this.source;this.url=r.src;const s=()=>{this.destroyed||(r.onload=null,r.onerror=null,this.resize(r.width,r.height),this._load=null,this.createBitmap?n(this.process()):n(this))};r.complete&&r.src?s():(r.onload=s,r.onerror=o=>{i(o),this.onError.emit(o)})}),this._load)}process(){const e=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const n=globalThis.createImageBitmap,i=!e.crossOrigin||e.crossOrigin==="anonymous";return this._process=fetch(e.src,{mode:i?"cors":"no-cors"}).then(r=>r.blob()).then(r=>n(r,0,0,e.width,e.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===wn.UNPACK?"premultiply":"none"})).then(r=>this.destroyed?Promise.reject():(this.bitmap=r,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(e,n,i){if(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(e,n,i);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(e,n,i,this.bitmap),!this.preserveBitmap){let r=!0;const s=n._glTextures;for(const o in s){const a=s[o];if(a!==i&&a.dirtyId!==n.dirtyId){r=!1;break}}r&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(e){return typeof HTMLImageElement<"u"&&(typeof e=="string"||e instanceof HTMLImageElement)}}class F_{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(e,n,i){const r=n.width,s=n.height;if(i){const o=e.width/2/r,a=e.height/2/s,l=e.x/r+o,u=e.y/s+a;i=Pe.add(i,Pe.NW),this.x0=l+o*Pe.uX(i),this.y0=u+a*Pe.uY(i),i=Pe.add(i,2),this.x1=l+o*Pe.uX(i),this.y1=u+a*Pe.uY(i),i=Pe.add(i,2),this.x2=l+o*Pe.uX(i),this.y2=u+a*Pe.uY(i),i=Pe.add(i,2),this.x3=l+o*Pe.uX(i),this.y3=u+a*Pe.uY(i)}else this.x0=e.x/r,this.y0=e.y/s,this.x1=(e.x+e.width)/r,this.y1=e.y/s,this.x2=(e.x+e.width)/r,this.y2=(e.y+e.height)/s,this.x3=e.x/r,this.y3=(e.y+e.height)/s;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}toString(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`}}const a0=new F_;function Ha(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}class Z extends mr{constructor(e,n,i,r,s,o){if(super(),this.noFrame=!1,n||(this.noFrame=!0,n=new le(0,0,1,1)),e instanceof Z&&(e=e.baseTexture),this.baseTexture=e,this._frame=n,this.trim=r,this.valid=!1,this._uvs=a0,this.uvMatrix=null,this.orig=i||n,this._rotate=Number(s||0),s===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=o?new te(o.x,o.y):new te(0,0),this._updateID=0,this.textureCacheIds=[],e.valid?this.noFrame?e.valid&&this.onBaseTextureUpdated(e):this.frame=n:e.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&e.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(e){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=e.width,this._frame.height=e.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(e){if(this.baseTexture){if(e){const{resource:n}=this.baseTexture;n!=null&&n.url&&En[n.url]&&Z.removeFromCache(n.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Z.removeFromCache(this),this.textureCacheIds=null}clone(){var r;const e=this._frame.clone(),n=this._frame===this.orig?e:this.orig.clone(),i=new Z(this.baseTexture,!this.noFrame&&e,n,(r=this.trim)==null?void 0:r.clone(),this.rotate,this.defaultAnchor);return this.noFrame&&(i._frame=e),i}updateUvs(){this._uvs===a0&&(this._uvs=new F_),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(e,n={},i=X.STRICT_TEXTURE_CACHE){const r=typeof e=="string";let s=null;if(r)s=e;else if(e instanceof ae){if(!e.cacheId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e.cacheId=`${a}-${vr()}`,ae.addToCache(e,e.cacheId)}s=e.cacheId}else{if(!e._pixiId){const a=(n==null?void 0:n.pixiIdPrefix)||"pixiid";e._pixiId=`${a}_${vr()}`}s=e._pixiId}let o=En[s];if(r&&i&&!o)throw new Error(`The cacheId "${s}" does not exist in TextureCache.`);return!o&&!(e instanceof ae)?(n.resolution||(n.resolution=ki(e)),o=new Z(new ae(e,n)),o.baseTexture.cacheId=s,ae.addToCache(o.baseTexture,s),Z.addToCache(o,s)):!o&&e instanceof ae&&(o=new Z(e),Z.addToCache(o,s)),o}static fromURL(e,n){const i=Object.assign({autoLoad:!1},n==null?void 0:n.resourceOptions),r=Z.from(e,Object.assign({resourceOptions:i},n),!1),s=r.baseTexture.resource;return r.baseTexture.valid?Promise.resolve(r):s.load().then(()=>Promise.resolve(r))}static fromBuffer(e,n,i,r){return new Z(ae.fromBuffer(e,n,i,r))}static fromLoader(e,n,i,r){const s=new ae(e,Object.assign({scaleMode:ae.defaultOptions.scaleMode,resolution:ki(n)},r)),{resource:o}=s;o instanceof D_&&(o.url=n);const a=new Z(s);return i||(i=n),ae.addToCache(a.baseTexture,i),Z.addToCache(a,i),i!==n&&(ae.addToCache(a.baseTexture,n),Z.addToCache(a,n)),a.baseTexture.valid?Promise.resolve(a):new Promise(l=>{a.baseTexture.once("loaded",()=>l(a))})}static addToCache(e,n){n&&(e.textureCacheIds.includes(n)||e.textureCacheIds.push(n),En[n]&&En[n]!==e&&console.warn(`Texture added to the cache with an id [${n}] that already had an entry`),En[n]=e)}static removeFromCache(e){if(typeof e=="string"){const n=En[e];if(n){const i=n.textureCacheIds.indexOf(e);return i>-1&&n.textureCacheIds.splice(i,1),delete En[e],n}}else if(e!=null&&e.textureCacheIds){for(let n=0;n<e.textureCacheIds.length;++n)En[e.textureCacheIds[n]]===e&&delete En[e.textureCacheIds[n]];return e.textureCacheIds.length=0,e}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(e){this._frame=e,this.noFrame=!1;const{x:n,y:i,width:r,height:s}=e,o=n+r>this.baseTexture.width,a=i+s>this.baseTexture.height;if(o||a){const l=o&&a?"and":"or",u=`X: ${n} + ${r} = ${n+r} > ${this.baseTexture.width}`,c=`Y: ${i} + ${s} = ${i+s} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${u} ${l} ${c}`)}this.valid=r&&s&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=e),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(e){this._rotate=e,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Z._EMPTY||(Z._EMPTY=new Z(new ae),Ha(Z._EMPTY),Ha(Z._EMPTY.baseTexture)),Z._EMPTY}static get WHITE(){if(!Z._WHITE){const e=X.ADAPTER.createCanvas(16,16),n=e.getContext("2d");e.width=16,e.height=16,n.fillStyle="white",n.fillRect(0,0,16,16),Z._WHITE=new Z(ae.from(e)),Ha(Z._WHITE),Ha(Z._WHITE.baseTexture)}return Z._WHITE}}class Li extends Z{constructor(e,n){super(e,n),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(e){this.framebuffer.multisample=e}resize(e,n,i=!0){const r=this.baseTexture.resolution,s=Math.round(e*r)/r,o=Math.round(n*r)/r;this.valid=s>0&&o>0,this._frame.width=this.orig.width=s,this._frame.height=this.orig.height=o,i&&this.baseTexture.resize(s,o),this.updateUvs()}setResolution(e){const{baseTexture:n}=this;n.resolution!==e&&(n.setResolution(e),this.resize(n.width,n.height,!1))}static create(e){return new Li(new k_(e))}}class L_{constructor(e){this.texturePool={},this.textureOptions=e||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(e,n,i=Be.NONE){const r=new k_(Object.assign({width:e,height:n,resolution:1,multisample:i},this.textureOptions));return new Li(r)}getOptimalTexture(e,n,i=1,r=Be.NONE){let s;e=Math.ceil(e*i-1e-6),n=Math.ceil(n*i-1e-6),!this.enableFullScreen||e!==this._pixelsWidth||n!==this._pixelsHeight?(e=pu(e),n=pu(n),s=((e&65535)<<16|n&65535)>>>0,r>1&&(s+=r*4294967296)):s=r>1?-r:-1,this.texturePool[s]||(this.texturePool[s]=[]);let o=this.texturePool[s].pop();return o||(o=this.createTexture(e,n,r)),o.filterPoolKey=s,o.setResolution(i),o}getFilterTexture(e,n,i){const r=this.getOptimalTexture(e.width,e.height,n||e.resolution,i||Be.NONE);return r.filterFrame=e.filterFrame,r}returnTexture(e){const n=e.filterPoolKey;e.filterFrame=null,this.texturePool[n].push(e)}returnFilterTexture(e){this.returnTexture(e)}clear(e){if(e=e!==!1,e)for(const n in this.texturePool){const i=this.texturePool[n];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0)}this.texturePool={}}setScreenSize(e){if(!(e.width===this._pixelsWidth&&e.height===this._pixelsHeight)){this.enableFullScreen=e.width>0&&e.height>0;for(const n in this.texturePool){if(!(Number(n)<0))continue;const i=this.texturePool[n];if(i)for(let r=0;r<i.length;r++)i[r].destroy(!0);this.texturePool[n]=[]}this._pixelsWidth=e.width,this._pixelsHeight=e.height}}}L_.SCREEN_KEY=-1;class qI extends Di{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class B_ extends Di{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Xe(this.vertices),this.uvBuffer=new Xe(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(e,n){let i=0,r=0;return this.uvs[0]=i,this.uvs[1]=r,this.uvs[2]=i+n.width/e.width,this.uvs[3]=r,this.uvs[4]=i+n.width/e.width,this.uvs[5]=r+n.height/e.height,this.uvs[6]=i,this.uvs[7]=r+n.height/e.height,i=n.x,r=n.y,this.vertices[0]=i,this.vertices[1]=r,this.vertices[2]=i+n.width,this.vertices[3]=r,this.vertices[4]=i+n.width,this.vertices[5]=r+n.height,this.vertices[6]=i,this.vertices[7]=r+n.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class KI{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=Be.NONE,this.sourceFrame=new le,this.destinationFrame=new le,this.bindingSourceFrame=new le,this.bindingDestinationFrame=new le,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const ja=[new te,new te,new te,new te],xh=new Ce;class N_{constructor(e){this.renderer=e,this.defaultFilterStack=[{}],this.texturePool=new L_,this.statePool=[],this.quad=new qI,this.quadUv=new B_,this.tempRect=new le,this.activeState={},this.globalUniforms=new yn({outputFrame:new le,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(e,n){const i=this.renderer,r=this.defaultFilterStack,s=this.statePool.pop()||new KI,o=this.renderer.renderTexture;let a=n[0].resolution,l=n[0].multisample,u=n[0].padding,c=n[0].autoFit,h=n[0].legacy??!0;for(let p=1;p<n.length;p++){const g=n[p];a=Math.min(a,g.resolution),l=Math.min(l,g.multisample),u=this.useMaxPadding?Math.max(u,g.padding):u+g.padding,c=c&&g.autoFit,h=h||(g.legacy??!0)}r.length===1&&(this.defaultFilterStack[0].renderTexture=o.current),r.push(s),s.resolution=a,s.multisample=l,s.legacy=h,s.target=e,s.sourceFrame.copyFrom(e.filterArea||e.getBounds(!0)),s.sourceFrame.pad(u);const d=this.tempRect.copyFrom(o.sourceFrame);i.projection.transform&&this.transformAABB(xh.copyFrom(i.projection.transform).invert(),d),c?(s.sourceFrame.fit(d),(s.sourceFrame.width<=0||s.sourceFrame.height<=0)&&(s.sourceFrame.width=0,s.sourceFrame.height=0)):s.sourceFrame.intersects(d)||(s.sourceFrame.width=0,s.sourceFrame.height=0),this.roundFrame(s.sourceFrame,o.current?o.current.resolution:i.resolution,o.sourceFrame,o.destinationFrame,i.projection.transform),s.renderTexture=this.getOptimalFilterTexture(s.sourceFrame.width,s.sourceFrame.height,a,l),s.filters=n,s.destinationFrame.width=s.renderTexture.width,s.destinationFrame.height=s.renderTexture.height;const f=this.tempRect;f.x=0,f.y=0,f.width=s.sourceFrame.width,f.height=s.sourceFrame.height,s.renderTexture.filterFrame=s.sourceFrame,s.bindingSourceFrame.copyFrom(o.sourceFrame),s.bindingDestinationFrame.copyFrom(o.destinationFrame),s.transform=i.projection.transform,i.projection.transform=null,o.bind(s.renderTexture,s.sourceFrame,f),i.framebuffer.clear(0,0,0,0)}pop(){const e=this.defaultFilterStack,n=e.pop(),i=n.filters;this.activeState=n;const r=this.globalUniforms.uniforms;r.outputFrame=n.sourceFrame,r.resolution=n.resolution;const s=r.inputSize,o=r.inputPixel,a=r.inputClamp;if(s[0]=n.destinationFrame.width,s[1]=n.destinationFrame.height,s[2]=1/s[0],s[3]=1/s[1],o[0]=Math.round(s[0]*n.resolution),o[1]=Math.round(s[1]*n.resolution),o[2]=1/o[0],o[3]=1/o[1],a[0]=.5*o[2],a[1]=.5*o[3],a[2]=n.sourceFrame.width*s[2]-.5*o[2],a[3]=n.sourceFrame.height*s[3]-.5*o[3],n.legacy){const u=r.filterArea;u[0]=n.destinationFrame.width,u[1]=n.destinationFrame.height,u[2]=n.sourceFrame.x,u[3]=n.sourceFrame.y,r.filterClamp=r.inputClamp}this.globalUniforms.update();const l=e[e.length-1];if(this.renderer.framebuffer.blit(),i.length===1)i[0].apply(this,n.renderTexture,l.renderTexture,Tn.BLEND,n),this.returnFilterTexture(n.renderTexture);else{let u=n.renderTexture,c=this.getOptimalFilterTexture(u.width,u.height,n.resolution);c.filterFrame=u.filterFrame;let h=0;for(h=0;h<i.length-1;++h){h===1&&n.multisample>1&&(c=this.getOptimalFilterTexture(u.width,u.height,n.resolution),c.filterFrame=u.filterFrame),i[h].apply(this,u,c,Tn.CLEAR,n);const d=u;u=c,c=d}i[h].apply(this,u,l.renderTexture,Tn.BLEND,n),h>1&&n.multisample>1&&this.returnFilterTexture(n.renderTexture),this.returnFilterTexture(u),this.returnFilterTexture(c)}n.clear(),this.statePool.push(n)}bindAndClear(e,n=Tn.CLEAR){const{renderTexture:i,state:r}=this.renderer;if(e===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,e!=null&&e.filterFrame){const o=this.tempRect;o.x=0,o.y=0,o.width=e.filterFrame.width,o.height=e.filterFrame.height,i.bind(e,e.filterFrame,o)}else e!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?i.bind(e):this.renderer.renderTexture.bind(e,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const s=r.stateId&1||this.forceClear;(n===Tn.CLEAR||n===Tn.BLIT&&s)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(e,n,i,r){const s=this.renderer;s.state.set(e.state),this.bindAndClear(i,r),e.uniforms.uSampler=n,e.uniforms.filterGlobals=this.globalUniforms,s.shader.bind(e),e.legacy=!!e.program.attributeData.aTextureCoord,e.legacy?(this.quadUv.map(n._frame,n.filterFrame),s.geometry.bind(this.quadUv),s.geometry.draw(Mn.TRIANGLES)):(s.geometry.bind(this.quad),s.geometry.draw(Mn.TRIANGLE_STRIP))}calculateSpriteMatrix(e,n){const{sourceFrame:i,destinationFrame:r}=this.activeState,{orig:s}=n._texture,o=e.set(r.width,0,0,r.height,i.x,i.y),a=n.worldTransform.copyTo(Ce.TEMP_MATRIX);return a.invert(),o.prepend(a),o.scale(1/s.width,1/s.height),o.translate(n.anchor.x,n.anchor.y),o}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(e,n,i=1,r=Be.NONE){return this.texturePool.getOptimalTexture(e,n,i,r)}getFilterTexture(e,n,i){if(typeof e=="number"){const s=e;e=n,n=s}e=e||this.activeState.renderTexture;const r=this.texturePool.getOptimalTexture(e.width,e.height,n||e.resolution,i||Be.NONE);return r.filterFrame=e.filterFrame,r}returnFilterTexture(e){this.texturePool.returnTexture(e)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(e,n){const i=ja[0],r=ja[1],s=ja[2],o=ja[3];i.set(n.left,n.top),r.set(n.left,n.bottom),s.set(n.right,n.top),o.set(n.right,n.bottom),e.apply(i,i),e.apply(r,r),e.apply(s,s),e.apply(o,o);const a=Math.min(i.x,r.x,s.x,o.x),l=Math.min(i.y,r.y,s.y,o.y),u=Math.max(i.x,r.x,s.x,o.x),c=Math.max(i.y,r.y,s.y,o.y);n.x=a,n.y=l,n.width=u-a,n.height=c-l}roundFrame(e,n,i,r,s){if(!(e.width<=0||e.height<=0||i.width<=0||i.height<=0)){if(s){const{a:o,b:a,c:l,d:u}=s;if((Math.abs(a)>1e-4||Math.abs(l)>1e-4)&&(Math.abs(o)>1e-4||Math.abs(u)>1e-4))return}s=s?xh.copyFrom(s):xh.identity(),s.translate(-i.x,-i.y).scale(r.width/i.width,r.height/i.height).translate(r.x,r.y),this.transformAABB(s,e),e.ceil(n),this.transformAABB(s.invert(),e)}}}N_.extension={type:W.RendererSystem,name:"filter"};Q.add(N_);class ZI{constructor(e){this.framebuffer=e,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=Be.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const QI=new le;class U_{constructor(e){this.renderer=e,this.managedFramebuffers=[],this.unknownFramebuffer=new cf(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new le,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let n=this.renderer.context.extensions.drawBuffers,i=this.renderer.context.extensions.depthTexture;X.PREFER_ENV===Er.WEBGL_LEGACY&&(n=null,i=null),n?e.drawBuffers=r=>n.drawBuffersWEBGL(r):(this.hasMRT=!1,e.drawBuffers=()=>{}),i||(this.writeDepthTexture=!1)}else this.msaaSamples=e.getInternalformatParameter(e.RENDERBUFFER,e.RGBA8,e.SAMPLES)}bind(e,n,i=0){const{gl:r}=this;if(e){const s=e.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(e);this.current!==e&&(this.current=e,r.bindFramebuffer(r.FRAMEBUFFER,s.framebuffer)),s.mipLevel!==i&&(e.dirtyId++,e.dirtyFormat++,s.mipLevel=i),s.dirtyId!==e.dirtyId&&(s.dirtyId=e.dirtyId,s.dirtyFormat!==e.dirtyFormat?(s.dirtyFormat=e.dirtyFormat,s.dirtySize=e.dirtySize,this.updateFramebuffer(e,i)):s.dirtySize!==e.dirtySize&&(s.dirtySize=e.dirtySize,this.resizeFramebuffer(e)));for(let o=0;o<e.colorTextures.length;o++){const a=e.colorTextures[o];this.renderer.texture.unbind(a.parentTextureArray||a)}if(e.depthTexture&&this.renderer.texture.unbind(e.depthTexture),n){const o=n.width>>i,a=n.height>>i,l=o/n.width;this.setViewport(n.x*l,n.y*l,o,a)}else{const o=e.width>>i,a=e.height>>i;this.setViewport(0,0,o,a)}}else this.current&&(this.current=null,r.bindFramebuffer(r.FRAMEBUFFER,null)),n?this.setViewport(n.x,n.y,n.width,n.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(e,n,i,r){const s=this.viewport;e=Math.round(e),n=Math.round(n),i=Math.round(i),r=Math.round(r),(s.width!==i||s.height!==r||s.x!==e||s.y!==n)&&(s.x=e,s.y=n,s.width=i,s.height=r,this.gl.viewport(e,n,i,r))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(e,n,i,r,s=Yd.COLOR|Yd.DEPTH){const{gl:o}=this;o.clearColor(e,n,i,r),o.clear(s)}initFramebuffer(e){const{gl:n}=this,i=new ZI(n.createFramebuffer());return i.multisample=this.detectSamples(e.multisample),e.glFramebuffers[this.CONTEXT_UID]=i,this.managedFramebuffers.push(e),e.disposeRunner.add(this),i}resizeFramebuffer(e){const{gl:n}=this,i=e.glFramebuffers[this.CONTEXT_UID];i.stencil&&(n.bindRenderbuffer(n.RENDERBUFFER,i.stencil),i.msaaBuffer?n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,n.DEPTH24_STENCIL8,e.width,e.height):n.renderbufferStorage(n.RENDERBUFFER,n.DEPTH_STENCIL,e.width,e.height));const r=e.colorTextures;let s=r.length;n.drawBuffers||(s=Math.min(s,1));for(let o=0;o<s;o++){const a=r[o],l=a.parentTextureArray||a;this.renderer.texture.bind(l,0),o===0&&i.msaaBuffer&&(n.bindRenderbuffer(n.RENDERBUFFER,i.msaaBuffer),n.renderbufferStorageMultisample(n.RENDERBUFFER,i.multisample,l._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height))}e.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(e.depthTexture,0)}updateFramebuffer(e,n){const{gl:i}=this,r=e.glFramebuffers[this.CONTEXT_UID],s=e.colorTextures;let o=s.length;i.drawBuffers||(o=Math.min(o,1)),r.multisample>1&&this.canMultisampleFramebuffer(e)?r.msaaBuffer=r.msaaBuffer||i.createRenderbuffer():r.msaaBuffer&&(i.deleteRenderbuffer(r.msaaBuffer),r.msaaBuffer=null,r.blitFramebuffer&&(r.blitFramebuffer.dispose(),r.blitFramebuffer=null));const a=[];for(let l=0;l<o;l++){const u=s[l],c=u.parentTextureArray||u;this.renderer.texture.bind(c,0),l===0&&r.msaaBuffer?(i.bindRenderbuffer(i.RENDERBUFFER,r.msaaBuffer),i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,c._glTextures[this.CONTEXT_UID].internalFormat,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,r.msaaBuffer)):(i.framebufferTexture2D(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+l,u.target,c._glTextures[this.CONTEXT_UID].texture,n),a.push(i.COLOR_ATTACHMENT0+l))}if(a.length>1&&i.drawBuffers(a),e.depthTexture&&this.writeDepthTexture){const u=e.depthTexture;this.renderer.texture.bind(u,0),i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,u._glTextures[this.CONTEXT_UID].texture,n)}(e.stencil||e.depth)&&!(e.depthTexture&&this.writeDepthTexture)?(r.stencil=r.stencil||i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,r.stencil),r.msaaBuffer?i.renderbufferStorageMultisample(i.RENDERBUFFER,r.multisample,i.DEPTH24_STENCIL8,e.width,e.height):i.renderbufferStorage(i.RENDERBUFFER,i.DEPTH_STENCIL,e.width,e.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.RENDERBUFFER,r.stencil)):r.stencil&&(i.deleteRenderbuffer(r.stencil),r.stencil=null)}canMultisampleFramebuffer(e){return this.renderer.context.webGLVersion!==1&&e.colorTextures.length<=1&&!e.depthTexture}detectSamples(e){const{msaaSamples:n}=this;let i=Be.NONE;if(e<=1||n===null)return i;for(let r=0;r<n.length;r++)if(n[r]<=e){i=n[r];break}return i===1&&(i=Be.NONE),i}blit(e,n,i){const{current:r,renderer:s,gl:o,CONTEXT_UID:a}=this;if(s.context.webGLVersion!==2||!r)return;const l=r.glFramebuffers[a];if(!l)return;if(!e){if(!l.msaaBuffer)return;const c=r.colorTextures[0];if(!c)return;l.blitFramebuffer||(l.blitFramebuffer=new cf(r.width,r.height),l.blitFramebuffer.addColorTexture(0,c)),e=l.blitFramebuffer,e.colorTextures[0]!==c&&(e.colorTextures[0]=c,e.dirtyId++,e.dirtyFormat++),(e.width!==r.width||e.height!==r.height)&&(e.width=r.width,e.height=r.height,e.dirtyId++,e.dirtySize++)}n||(n=QI,n.width=r.width,n.height=r.height),i||(i=n);const u=n.width===i.width&&n.height===i.height;this.bind(e),o.bindFramebuffer(o.READ_FRAMEBUFFER,l.framebuffer),o.blitFramebuffer(n.left,n.top,n.right,n.bottom,i.left,i.top,i.right,i.bottom,o.COLOR_BUFFER_BIT,u?o.NEAREST:o.LINEAR)}disposeFramebuffer(e,n){const i=e.glFramebuffers[this.CONTEXT_UID],r=this.gl;if(!i)return;delete e.glFramebuffers[this.CONTEXT_UID];const s=this.managedFramebuffers.indexOf(e);s>=0&&this.managedFramebuffers.splice(s,1),e.disposeRunner.remove(this),n||(r.deleteFramebuffer(i.framebuffer),i.msaaBuffer&&r.deleteRenderbuffer(i.msaaBuffer),i.stencil&&r.deleteRenderbuffer(i.stencil)),i.blitFramebuffer&&i.blitFramebuffer.dispose()}disposeAll(e){const n=this.managedFramebuffers;this.managedFramebuffers=[];for(let i=0;i<n.length;i++)this.disposeFramebuffer(n[i],e)}forceStencil(){const e=this.current;if(!e)return;const n=e.glFramebuffers[this.CONTEXT_UID];if(!n||n.stencil)return;e.stencil=!0;const i=e.width,r=e.height,s=this.gl,o=s.createRenderbuffer();s.bindRenderbuffer(s.RENDERBUFFER,o),n.msaaBuffer?s.renderbufferStorageMultisample(s.RENDERBUFFER,n.multisample,s.DEPTH24_STENCIL8,i,r):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,i,r),n.stencil=o,s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,o)}reset(){this.current=this.unknownFramebuffer,this.viewport=new le}destroy(){this.renderer=null}}U_.extension={type:W.RendererSystem,name:"framebuffer"};Q.add(U_);const _h={5126:4,5123:2,5121:1};class $_{constructor(e){this.renderer=e,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const e=this.gl=this.renderer.gl,n=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,n.webGLVersion!==2){let i=this.renderer.context.extensions.vertexArrayObject;X.PREFER_ENV===Er.WEBGL_LEGACY&&(i=null),i?(e.createVertexArray=()=>i.createVertexArrayOES(),e.bindVertexArray=r=>i.bindVertexArrayOES(r),e.deleteVertexArray=r=>i.deleteVertexArrayOES(r)):(this.hasVao=!1,e.createVertexArray=()=>null,e.bindVertexArray=()=>null,e.deleteVertexArray=()=>null)}if(n.webGLVersion!==2){const i=e.getExtension("ANGLE_instanced_arrays");i?(e.vertexAttribDivisor=(r,s)=>i.vertexAttribDivisorANGLE(r,s),e.drawElementsInstanced=(r,s,o,a,l)=>i.drawElementsInstancedANGLE(r,s,o,a,l),e.drawArraysInstanced=(r,s,o,a)=>i.drawArraysInstancedANGLE(r,s,o,a)):this.hasInstance=!1}this.canUseUInt32ElementIndex=n.webGLVersion===2||!!n.extensions.uint32ElementIndex}bind(e,n){n=n||this.renderer.shader.shader;const{gl:i}=this;let r=e.glVertexArrayObjects[this.CONTEXT_UID],s=!1;r||(this.managedGeometries[e.id]=e,e.disposeRunner.add(this),e.glVertexArrayObjects[this.CONTEXT_UID]=r={},s=!0);const o=r[n.program.id]||this.initGeometryVao(e,n,s);this._activeGeometry=e,this._activeVao!==o&&(this._activeVao=o,this.hasVao?i.bindVertexArray(o):this.activateVao(e,n.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const e=this._activeGeometry,n=this.renderer.buffer;for(let i=0;i<e.buffers.length;i++){const r=e.buffers[i];n.update(r)}}checkCompatibility(e,n){const i=e.attributes,r=n.attributeData;for(const s in r)if(!i[s])throw new Error(`shader and geometry incompatible, geometry missing the "${s}" attribute`)}getSignature(e,n){const i=e.attributes,r=n.attributeData,s=["g",e.id];for(const o in i)r[o]&&s.push(o,r[o].location);return s.join("-")}initGeometryVao(e,n,i=!0){const r=this.gl,s=this.CONTEXT_UID,o=this.renderer.buffer,a=n.program;a.glPrograms[s]||this.renderer.shader.generateProgram(n),this.checkCompatibility(e,a);const l=this.getSignature(e,a),u=e.glVertexArrayObjects[this.CONTEXT_UID];let c=u[l];if(c)return u[a.id]=c,c;const h=e.buffers,d=e.attributes,f={},p={};for(const g in h)f[g]=0,p[g]=0;for(const g in d)!d[g].size&&a.attributeData[g]?d[g].size=a.attributeData[g].size:d[g].size||console.warn(`PIXI Geometry attribute '${g}' size cannot be determined (likely the bound shader does not have the attribute)`),f[d[g].buffer]+=d[g].size*_h[d[g].type];for(const g in d){const v=d[g],m=v.size;v.stride===void 0&&(f[v.buffer]===m*_h[v.type]?v.stride=0:v.stride=f[v.buffer]),v.start===void 0&&(v.start=p[v.buffer],p[v.buffer]+=m*_h[v.type])}c=r.createVertexArray(),r.bindVertexArray(c);for(let g=0;g<h.length;g++){const v=h[g];o.bind(v),i&&v._glBuffers[s].refCount++}return this.activateVao(e,a),u[a.id]=c,u[l]=c,r.bindVertexArray(null),o.unbind(Dn.ARRAY_BUFFER),c}disposeGeometry(e,n){var a;if(!this.managedGeometries[e.id])return;delete this.managedGeometries[e.id];const i=e.glVertexArrayObjects[this.CONTEXT_UID],r=this.gl,s=e.buffers,o=(a=this.renderer)==null?void 0:a.buffer;if(e.disposeRunner.remove(this),!!i){if(o)for(let l=0;l<s.length;l++){const u=s[l]._glBuffers[this.CONTEXT_UID];u&&(u.refCount--,u.refCount===0&&!n&&o.dispose(s[l],n))}if(!n){for(const l in i)if(l[0]==="g"){const u=i[l];this._activeVao===u&&this.unbind(),r.deleteVertexArray(u)}}delete e.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(e){const n=Object.keys(this.managedGeometries);for(let i=0;i<n.length;i++)this.disposeGeometry(this.managedGeometries[n[i]],e)}activateVao(e,n){const i=this.gl,r=this.CONTEXT_UID,s=this.renderer.buffer,o=e.buffers,a=e.attributes;e.indexBuffer&&s.bind(e.indexBuffer);let l=null;for(const u in a){const c=a[u],h=o[c.buffer],d=h._glBuffers[r];if(n.attributeData[u]){l!==d&&(s.bind(h),l=d);const f=n.attributeData[u].location;if(i.enableVertexAttribArray(f),i.vertexAttribPointer(f,c.size,c.type||i.FLOAT,c.normalized,c.stride,c.start),c.instance)if(this.hasInstance)i.vertexAttribDivisor(f,c.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(e,n,i,r){const{gl:s}=this,o=this._activeGeometry;if(o.indexBuffer){const a=o.indexBuffer.data.BYTES_PER_ELEMENT,l=a===2?s.UNSIGNED_SHORT:s.UNSIGNED_INT;a===2||a===4&&this.canUseUInt32ElementIndex?o.instanced?s.drawElementsInstanced(e,n||o.indexBuffer.data.length,l,(i||0)*a,r||1):s.drawElements(e,n||o.indexBuffer.data.length,l,(i||0)*a):console.warn("unsupported index buffer type: uint32")}else o.instanced?s.drawArraysInstanced(e,i,n||o.getSize(),r||1):s.drawArrays(e,i,n||o.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}$_.extension={type:W.RendererSystem,name:"geometry"};Q.add($_);const l0=new Ce;class z_{constructor(e,n){this._texture=e,this.mapCoord=new Ce,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof n>"u"?.5:n,this.isSimple=!1}get texture(){return this._texture}set texture(e){this._texture=e,this._textureID=-1}multiplyUvs(e,n){n===void 0&&(n=e);const i=this.mapCoord;for(let r=0;r<e.length;r+=2){const s=e[r],o=e[r+1];n[r]=s*i.a+o*i.c+i.tx,n[r+1]=s*i.b+o*i.d+i.ty}return n}update(e){const n=this._texture;if(!n||!n.valid||!e&&this._textureID===n._updateID)return!1;this._textureID=n._updateID,this._updateID++;const i=n._uvs;this.mapCoord.set(i.x1-i.x0,i.y1-i.y0,i.x3-i.x0,i.y3-i.y0,i.x0,i.y0);const r=n.orig,s=n.trim;s&&(l0.set(r.width/s.width,0,0,r.height/s.height,-s.x/s.width,-s.y/s.height),this.mapCoord.append(l0));const o=n.baseTexture,a=this.uClampFrame,l=this.clampMargin/o.resolution,u=this.clampOffset;return a[0]=(n._frame.x+l+u)/o.width,a[1]=(n._frame.y+l+u)/o.height,a[2]=(n._frame.x+n._frame.width-l+u)/o.width,a[3]=(n._frame.y+n._frame.height-l+u)/o.height,this.uClampOffset[0]=u/o.realWidth,this.uClampOffset[1]=u/o.realHeight,this.isSimple=n._frame.width===o.width&&n._frame.height===o.height&&n.rotate===0,!0}}var JI=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,eM=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class tM extends rt{constructor(e,n,i){let r=null;typeof e!="string"&&n===void 0&&i===void 0&&(r=e,e=void 0,n=void 0,i=void 0),super(e||eM,n||JI,i),this.maskSprite=r,this.maskMatrix=new Ce}get maskSprite(){return this._maskSprite}set maskSprite(e){this._maskSprite=e,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(e,n,i,r){const s=this._maskSprite,o=s._texture;o.valid&&(o.uvMatrix||(o.uvMatrix=new z_(o,0)),o.uvMatrix.update(),this.uniforms.npmAlpha=o.baseTexture.alphaMode?0:1,this.uniforms.mask=o,this.uniforms.otherMatrix=e.calculateSpriteMatrix(this.maskMatrix,s).prepend(o.uvMatrix.mapCoord),this.uniforms.alpha=s.worldAlpha,this.uniforms.maskClamp=o.uvMatrix.uClampFrame,e.applyFilter(this,n,i,r))}}class nM{constructor(e=null){this.type=Ve.NONE,this.autoDetect=!0,this.maskObject=e||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=rt.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(e){e?this._filters?this._filters[0]=e:this._filters=[e]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=Ve.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(e){e?(this._stencilCounter=e._stencilCounter,this._scissorCounter=e._scissorCounter,this._scissorRect=e._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class H_{constructor(e){this.renderer=e,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(e){this.maskStack=e,this.renderer.scissor.setMaskStack(e),this.renderer.stencil.setMaskStack(e)}push(e,n){let i=n;if(!i.isMaskData){const s=this.maskDataPool.pop()||new nM;s.pooled=!0,s.maskObject=n,i=s}const r=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(i.copyCountersOrReset(r),i._colorMask=r?r._colorMask:15,i.autoDetect&&this.detect(i),i._target=e,i.type!==Ve.SPRITE&&this.maskStack.push(i),i.enabled)switch(i.type){case Ve.SCISSOR:this.renderer.scissor.push(i);break;case Ve.STENCIL:this.renderer.stencil.push(i);break;case Ve.SPRITE:i.copyCountersOrReset(null),this.pushSpriteMask(i);break;case Ve.COLOR:this.pushColorMask(i);break}i.type===Ve.SPRITE&&this.maskStack.push(i)}pop(e){const n=this.maskStack.pop();if(!(!n||n._target!==e)){if(n.enabled)switch(n.type){case Ve.SCISSOR:this.renderer.scissor.pop(n);break;case Ve.STENCIL:this.renderer.stencil.pop(n.maskObject);break;case Ve.SPRITE:this.popSpriteMask(n);break;case Ve.COLOR:this.popColorMask(n);break}if(n.reset(),n.pooled&&this.maskDataPool.push(n),this.maskStack.length!==0){const i=this.maskStack[this.maskStack.length-1];i.type===Ve.SPRITE&&i._filters&&(i._filters[0].maskSprite=i.maskObject)}}}detect(e){const n=e.maskObject;n?n.isSprite?e.type=Ve.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(e)?e.type=Ve.SCISSOR:e.type=Ve.STENCIL:e.type=Ve.COLOR}pushSpriteMask(e){const{maskObject:n}=e,i=e._target;let r=e._filters;r||(r=this.alphaMaskPool[this.alphaMaskIndex],r||(r=this.alphaMaskPool[this.alphaMaskIndex]=[new tM]));const s=this.renderer,o=s.renderTexture;let a,l;if(o.current){const c=o.current;a=e.resolution||c.resolution,l=e.multisample??c.multisample}else a=e.resolution||s.resolution,l=e.multisample??s.multisample;r[0].resolution=a,r[0].multisample=l,r[0].maskSprite=n;const u=i.filterArea;i.filterArea=n.getBounds(!0),s.filter.push(i,r),i.filterArea=u,e._filters||this.alphaMaskIndex++}popSpriteMask(e){this.renderer.filter.pop(),e._filters?e._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(e){const n=e._colorMask,i=e._colorMask=n&e.colorMask;i!==n&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}popColorMask(e){const n=e._colorMask,i=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;i!==n&&this.renderer.gl.colorMask((i&1)!==0,(i&2)!==0,(i&4)!==0,(i&8)!==0)}destroy(){this.renderer=null}}H_.extension={type:W.RendererSystem,name:"mask"};Q.add(H_);class j_{constructor(e){this.renderer=e,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(e){const{gl:n}=this.renderer,i=this.getStackLength();this.maskStack=e;const r=this.getStackLength();r!==i&&(r===0?n.disable(this.glConst):(n.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const u0=new Ce,c0=[],Tl=class extends j_{constructor(t){super(t),this.glConst=X.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const t=this.maskStack[this.maskStack.length-1];return t?t._scissorCounter:0}calcScissorRect(t){if(t._scissorRectLocal)return;const e=t._scissorRect,{maskObject:n}=t,{renderer:i}=this,r=i.renderTexture,s=n.getBounds(!0,c0.pop()??new le);this.roundFrameToPixels(s,r.current?r.current.resolution:i.resolution,r.sourceFrame,r.destinationFrame,i.projection.transform),e&&s.fit(e),t._scissorRectLocal=s}static isMatrixRotated(t){if(!t)return!1;const{a:e,b:n,c:i,d:r}=t;return(Math.abs(n)>1e-4||Math.abs(i)>1e-4)&&(Math.abs(e)>1e-4||Math.abs(r)>1e-4)}testScissor(t){const{maskObject:e}=t;if(!e.isFastRect||!e.isFastRect()||Tl.isMatrixRotated(e.worldTransform)||Tl.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(t);const n=t._scissorRectLocal;return n.width>0&&n.height>0}roundFrameToPixels(t,e,n,i,r){Tl.isMatrixRotated(r)||(r=r?u0.copyFrom(r):u0.identity(),r.translate(-n.x,-n.y).scale(i.width/n.width,i.height/n.height).translate(i.x,i.y),this.renderer.filter.transformAABB(r,t),t.fit(i),t.x=Math.round(t.x*e),t.y=Math.round(t.y*e),t.width=Math.round(t.width*e),t.height=Math.round(t.height*e))}push(t){t._scissorRectLocal||this.calcScissorRect(t);const{gl:e}=this.renderer;t._scissorRect||e.enable(e.SCISSOR_TEST),t._scissorCounter++,t._scissorRect=t._scissorRectLocal,this._useCurrent()}pop(t){const{gl:e}=this.renderer;t&&c0.push(t._scissorRectLocal),this.getStackLength()>0?this._useCurrent():e.disable(e.SCISSOR_TEST)}_useCurrent(){const t=this.maskStack[this.maskStack.length-1]._scissorRect;let e;this.renderer.renderTexture.current?e=t.y:e=this.renderer.height-t.height-t.y,this.renderer.gl.scissor(t.x,e,t.width,t.height)}};let G_=Tl;G_.extension={type:W.RendererSystem,name:"scissor"};Q.add(G_);class V_ extends j_{constructor(e){super(e),this.glConst=X.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const e=this.maskStack[this.maskStack.length-1];return e?e._stencilCounter:0}push(e){const n=e.maskObject,{gl:i}=this.renderer,r=e._stencilCounter;r===0&&(this.renderer.framebuffer.forceStencil(),i.clearStencil(0),i.clear(i.STENCIL_BUFFER_BIT),i.enable(i.STENCIL_TEST)),e._stencilCounter++;const s=e._colorMask;s!==0&&(e._colorMask=0,i.colorMask(!1,!1,!1,!1)),i.stencilFunc(i.EQUAL,r,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.INCR),n.renderable=!0,n.render(this.renderer),this.renderer.batch.flush(),n.renderable=!1,s!==0&&(e._colorMask=s,i.colorMask((s&1)!==0,(s&2)!==0,(s&4)!==0,(s&8)!==0)),this._useCurrent()}pop(e){const n=this.renderer.gl;if(this.getStackLength()===0)n.disable(n.STENCIL_TEST);else{const i=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,r=i?i._colorMask:15;r!==0&&(i._colorMask=0,n.colorMask(!1,!1,!1,!1)),n.stencilOp(n.KEEP,n.KEEP,n.DECR),e.renderable=!0,e.render(this.renderer),this.renderer.batch.flush(),e.renderable=!1,r!==0&&(i._colorMask=r,n.colorMask((r&1)!==0,(r&2)!==0,(r&4)!==0,(r&8)!==0)),this._useCurrent()}}_useCurrent(){const e=this.renderer.gl;e.stencilFunc(e.EQUAL,this.getStackLength(),4294967295),e.stencilOp(e.KEEP,e.KEEP,e.KEEP)}}V_.extension={type:W.RendererSystem,name:"stencil"};Q.add(V_);class W_{constructor(e){this.renderer=e,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return fe("7.0.0","renderer.plugins.extract has moved to renderer.extract"),e.extract}},prepare:{enumerable:!1,get(){return fe("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),e.prepare}},interaction:{enumerable:!1,get(){return fe("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),e.events}}})}init(e){for(const n in e)this.plugins[n]=new e[n](this.renderer)}destroy(){for(const e in this.plugins)this.plugins[e].destroy(),this.plugins[e]=null}}W_.extension={type:[W.RendererSystem,W.CanvasRendererSystem],name:"_plugin"};Q.add(W_);class X_{constructor(e){this.renderer=e,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Ce,this.transform=null}update(e,n,i,r){this.destinationFrame=e||this.destinationFrame||this.defaultFrame,this.sourceFrame=n||this.sourceFrame||e,this.calculateProjection(this.destinationFrame,this.sourceFrame,i,r),this.transform&&this.projectionMatrix.append(this.transform);const s=this.renderer;s.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,s.globalUniforms.update(),s.shader.shader&&s.shader.syncUniformGroup(s.shader.shader.uniforms.globals)}calculateProjection(e,n,i,r){const s=this.projectionMatrix,o=r?-1:1;s.identity(),s.a=1/n.width*2,s.d=o*(1/n.height*2),s.tx=-1-n.x*s.a,s.ty=-o-n.y*s.d}setTransform(e){}destroy(){this.renderer=null}}X_.extension={type:W.RendererSystem,name:"projection"};Q.add(X_);const iM=new dm;class Y_{constructor(e){this.renderer=e,this._tempMatrix=new Ce}generateTexture(e,n){const{region:i,...r}=n||{},s=i||e.getLocalBounds(null,!0);s.width===0&&(s.width=1),s.height===0&&(s.height=1);const o=Li.create({width:s.width,height:s.height,...r});this._tempMatrix.tx=-s.x,this._tempMatrix.ty=-s.y;const a=e.transform;return e.transform=iM,this.renderer.render(e,{renderTexture:o,transform:this._tempMatrix,skipUpdateTransform:!!e.parent,blit:!0}),e.transform=a,o}destroy(){}}Y_.extension={type:[W.RendererSystem,W.CanvasRendererSystem],name:"textureGenerator"};Q.add(Y_);const ji=new le,Ws=new le;class q_{constructor(e){this.renderer=e,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new le,this.destinationFrame=new le,this.viewportFrame=new le}bind(e=null,n,i){const r=this.renderer;this.current=e;let s,o,a;e?(s=e.baseTexture,a=s.resolution,n||(ji.width=e.frame.width,ji.height=e.frame.height,n=ji),i||(Ws.x=e.frame.x,Ws.y=e.frame.y,Ws.width=n.width,Ws.height=n.height,i=Ws),o=s.framebuffer):(a=r.resolution,n||(ji.width=r._view.screen.width,ji.height=r._view.screen.height,n=ji),i||(i=ji,i.width=n.width,i.height=n.height));const l=this.viewportFrame;l.x=i.x*a,l.y=i.y*a,l.width=i.width*a,l.height=i.height*a,e||(l.y=r.view.height-(l.y+l.height)),l.ceil(),this.renderer.framebuffer.bind(o,l),this.renderer.projection.update(i,n,a,!o),e?this.renderer.mask.setMaskStack(s.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(n),this.destinationFrame.copyFrom(i)}clear(e,n){this.current?e=e||this.current.baseTexture.clearColor:e=e||this.renderer.background.colorRgba;const i=this.destinationFrame,r=this.current?this.current.baseTexture:this.renderer._view.screen,s=i.width!==r.width||i.height!==r.height;if(s){let{x:o,y:a,width:l,height:u}=this.viewportFrame;o=Math.round(o),a=Math.round(a),l=Math.round(l),u=Math.round(u),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(o,a,l,u)}this.renderer.framebuffer.clear(e[0],e[1],e[2],e[3],n),s&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}q_.extension={type:W.RendererSystem,name:"renderTexture"};Q.add(q_);class rM{constructor(e,n){this.program=e,this.uniformData=n,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function sM(t,e){const n={},i=e.getProgramParameter(t,e.ACTIVE_ATTRIBUTES);for(let r=0;r<i;r++){const s=e.getActiveAttrib(t,r);if(s.name.startsWith("gl_"))continue;const o=I_(e,s.type),a={type:o,name:s.name,size:P_(o),location:e.getAttribLocation(t,s.name)};n[s.name]=a}return n}function oM(t,e){const n={},i=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<i;r++){const s=e.getActiveUniform(t,r),o=s.name.replace(/\[.*?\]$/,""),a=!!s.name.match(/\[.*?\]$/),l=I_(e,s.type);n[o]={name:o,index:r,type:l,size:s.size,isArray:a,value:C_(l,s.size)}}return n}function aM(t,e){var l;const n=n0(t,t.VERTEX_SHADER,e.vertexSrc),i=n0(t,t.FRAGMENT_SHADER,e.fragmentSrc),r=t.createProgram();t.attachShader(r,n),t.attachShader(r,i);const s=(l=e.extra)==null?void 0:l.transformFeedbackVaryings;if(s&&(typeof t.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):t.transformFeedbackVaryings(r,s.names,s.bufferMode==="separate"?t.SEPARATE_ATTRIBS:t.INTERLEAVED_ATTRIBS)),t.linkProgram(r),t.getProgramParameter(r,t.LINK_STATUS)||LI(t,r,n,i),e.attributeData=sM(r,t),e.uniformData=oM(r,t),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(e.vertexSrc)){const u=Object.keys(e.attributeData);u.sort((c,h)=>c>h?1:-1);for(let c=0;c<u.length;c++)e.attributeData[u[c]].location=c,t.bindAttribLocation(r,c,u[c]);t.linkProgram(r)}t.deleteShader(n),t.deleteShader(i);const o={};for(const u in e.uniformData){const c=e.uniformData[u];o[u]={location:t.getUniformLocation(r,u),value:C_(c.type,c.size)}}return new rM(r,o)}function lM(t,e,n,i,r){n.buffer.update(r)}const uM={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},K_={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function cM(t){const e=t.map(s=>({data:s,offset:0,dataLen:0,dirty:0}));let n=0,i=0,r=0;for(let s=0;s<e.length;s++){const o=e[s];if(n=K_[o.data.type],o.data.size>1&&(n=Math.max(n,16)*o.data.size),o.dataLen=n,i%n!==0&&i<16){const a=i%n%16;i+=a,r+=a}i+n>16?(r=Math.ceil(r/16)*16,o.offset=r,r+=n,i=n):(o.offset=r,i+=n,r+=n)}return r=Math.ceil(r/16)*16,{uboElements:e,size:r}}function hM(t,e){const n=[];for(const i in t)e[i]&&n.push(e[i]);return n.sort((i,r)=>i.index-r.index),n}function dM(t,e){if(!t.autoManage)return{size:0,syncFunc:lM};const n=hM(t.uniforms,e),{uboElements:i,size:r}=cM(n),s=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let o=0;o<i.length;o++){const a=i[o],l=t.uniforms[a.data.name],u=a.data.name;let c=!1;for(let h=0;h<as.length;h++){const d=as[h];if(d.codeUbo&&d.test(a.data,l)){s.push(`offset = ${a.offset/4};`,as[h].codeUbo(a.data.name,l)),c=!0;break}}if(!c)if(a.data.size>1){const h=P_(a.data.type),d=Math.max(K_[a.data.type]/16,1),f=h/d,p=(4-f%4)%4;s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};

                t = 0;

                for(var i=0; i < ${a.data.size*d}; i++)
                {
                    for(var j = 0; j < ${f}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${p};
                }

                `)}else{const h=uM[a.data.type];s.push(`
                cv = ud.${u}.value;
                v = uv.${u};
                offset = ${a.offset/4};
                ${h};
                `)}}return s.push(`
       renderer.buffer.update(buffer);
    `),{size:r,syncFunc:new Function("ud","uv","renderer","syncData","buffer",s.join(`
`))}}let fM=0;const Ga={textureCount:0,uboCount:0};class Z_{constructor(e){this.destroyed=!1,this.renderer=e,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=fM++}systemCheck(){if(!NI())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(e){this.gl=e,this.reset()}bind(e,n){e.disposeRunner.add(this),e.uniforms.globals=this.renderer.globalUniforms;const i=e.program,r=i.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(e);return this.shader=e,this.program!==i&&(this.program=i,this.gl.useProgram(r.program)),n||(Ga.textureCount=0,Ga.uboCount=0,this.syncUniformGroup(e.uniformGroup,Ga)),r}setUniforms(e){const n=this.shader.program,i=n.glPrograms[this.renderer.CONTEXT_UID];n.syncUniforms(i.uniformData,e,this.renderer)}syncUniformGroup(e,n){const i=this.getGlProgram();(!e.static||e.dirtyId!==i.uniformDirtyGroups[e.id])&&(i.uniformDirtyGroups[e.id]=e.dirtyId,this.syncUniforms(e,i,n))}syncUniforms(e,n,i){(e.syncUniforms[this.shader.program.id]||this.createSyncGroups(e))(n.uniformData,e.uniforms,this.renderer,i)}createSyncGroups(e){const n=this.getSignature(e,this.shader.program.uniformData,"u");return this.cache[n]||(this.cache[n]=kI(e,this.shader.program.uniformData)),e.syncUniforms[this.shader.program.id]=this.cache[n],e.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(e,n){const i=this.getGlProgram();if(!e.static||e.dirtyId!==0||!i.uniformGroups[e.id]){e.dirtyId=0;const r=i.uniformGroups[e.id]||this.createSyncBufferGroup(e,i,n);e.buffer.update(),r(i.uniformData,e.uniforms,this.renderer,Ga,e.buffer)}this.renderer.buffer.bindBufferBase(e.buffer,i.uniformBufferBindings[n])}createSyncBufferGroup(e,n,i){const{gl:r}=this.renderer;this.renderer.buffer.bind(e.buffer);const s=this.gl.getUniformBlockIndex(n.program,i);n.uniformBufferBindings[i]=this.shader.uniformBindCount,r.uniformBlockBinding(n.program,s,this.shader.uniformBindCount),this.shader.uniformBindCount++;const o=this.getSignature(e,this.shader.program.uniformData,"ubo");let a=this._uboCache[o];if(a||(a=this._uboCache[o]=dM(e,this.shader.program.uniformData)),e.autoManage){const l=new Float32Array(a.size/4);e.buffer.update(l)}return n.uniformGroups[e.id]=a.syncFunc,n.uniformGroups[e.id]}getSignature(e,n,i){const r=e.uniforms,s=[`${i}-`];for(const o in r)s.push(o),n[o]&&s.push(n[o].type);return s.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(e){const n=this.gl,i=e.program,r=aM(n,i);return i.glPrograms[this.renderer.CONTEXT_UID]=r,r}reset(){this.program=null,this.shader=null}disposeShader(e){this.shader===e&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}Z_.extension={type:W.RendererSystem,name:"shader"};Q.add(Z_);class Q_{constructor(e){this.renderer=e}run(e){const n=this.renderer;n.emitWithCustomOptions(n.runners.init,e),e.hello&&console.log(`PixiJS 7.1.4 - ${n.rendererLogId} - https://pixijs.com`),n.resize(this.renderer.screen.width,this.renderer.screen.height)}destroy(){}}Q_.extension={type:[W.RendererSystem,W.CanvasRendererSystem],name:"startup"};Q.add(Q_);function pM(t,e=[]){return e[ne.NORMAL]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.ADD]=[t.ONE,t.ONE],e[ne.MULTIPLY]=[t.DST_COLOR,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.SCREEN]=[t.ONE,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.OVERLAY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.DARKEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.LIGHTEN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.COLOR_DODGE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.COLOR_BURN]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.HARD_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.SOFT_LIGHT]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.DIFFERENCE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.EXCLUSION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.HUE]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.SATURATION]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.COLOR]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.LUMINOSITY]=[t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.NONE]=[0,0],e[ne.NORMAL_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_ALPHA,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.ADD_NPM]=[t.SRC_ALPHA,t.ONE,t.ONE,t.ONE],e[ne.SCREEN_NPM]=[t.SRC_ALPHA,t.ONE_MINUS_SRC_COLOR,t.ONE,t.ONE_MINUS_SRC_ALPHA],e[ne.SRC_IN]=[t.DST_ALPHA,t.ZERO],e[ne.SRC_OUT]=[t.ONE_MINUS_DST_ALPHA,t.ZERO],e[ne.SRC_ATOP]=[t.DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ne.DST_OVER]=[t.ONE_MINUS_DST_ALPHA,t.ONE],e[ne.DST_IN]=[t.ZERO,t.SRC_ALPHA],e[ne.DST_OUT]=[t.ZERO,t.ONE_MINUS_SRC_ALPHA],e[ne.DST_ATOP]=[t.ONE_MINUS_DST_ALPHA,t.SRC_ALPHA],e[ne.XOR]=[t.ONE_MINUS_DST_ALPHA,t.ONE_MINUS_SRC_ALPHA],e[ne.SUBTRACT]=[t.ONE,t.ONE,t.ONE,t.ONE,t.FUNC_REVERSE_SUBTRACT,t.FUNC_ADD],e}const mM=0,gM=1,vM=2,yM=3,xM=4,_M=5,hf=class{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=ne.NONE,this._blendEq=!1,this.map=[],this.map[mM]=this.setBlend,this.map[gM]=this.setOffset,this.map[vM]=this.setCullFace,this.map[yM]=this.setDepthTest,this.map[xM]=this.setFrontFace,this.map[_M]=this.setDepthMask,this.checks=[],this.defaultState=new ai,this.defaultState.blend=!0}contextChange(t){this.gl=t,this.blendModes=pM(t),this.set(this.defaultState),this.reset()}set(t){if(t=t||this.defaultState,this.stateId!==t.data){let e=this.stateId^t.data,n=0;for(;e;)e&1&&this.map[n].call(this,!!(t.data&1<<n)),e=e>>1,n++;this.stateId=t.data}for(let e=0;e<this.checks.length;e++)this.checks[e](this,t)}forceState(t){t=t||this.defaultState;for(let e=0;e<this.map.length;e++)this.map[e].call(this,!!(t.data&1<<e));for(let e=0;e<this.checks.length;e++)this.checks[e](this,t);this.stateId=t.data}setBlend(t){this.updateCheck(hf.checkBlendMode,t),this.gl[t?"enable":"disable"](this.gl.BLEND)}setOffset(t){this.updateCheck(hf.checkPolygonOffset,t),this.gl[t?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(t){this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(t){this.gl.depthMask(t)}setCullFace(t){this.gl[t?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(t){this.gl.frontFace(this.gl[t?"CW":"CCW"])}setBlendMode(t){if(t===this.blendMode)return;this.blendMode=t;const e=this.blendModes[t],n=this.gl;e.length===2?n.blendFunc(e[0],e[1]):n.blendFuncSeparate(e[0],e[1],e[2],e[3]),e.length===6?(this._blendEq=!0,n.blendEquationSeparate(e[4],e[5])):this._blendEq&&(this._blendEq=!1,n.blendEquationSeparate(n.FUNC_ADD,n.FUNC_ADD))}setPolygonOffset(t,e){this.gl.polygonOffset(t,e)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(t,e){const n=this.checks.indexOf(t);e&&n===-1?this.checks.push(t):!e&&n!==-1&&this.checks.splice(n,1)}static checkBlendMode(t,e){t.setBlendMode(e.blendMode)}static checkPolygonOffset(t,e){t.setPolygonOffset(1,e.polygonOffset)}destroy(){this.gl=null}};let J_=hf;J_.extension={type:W.RendererSystem,name:"state"};Q.add(J_);class wM extends mr{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(e){this.addRunners(...e.runners);const n=(e.priority??[]).filter(r=>e.systems[r]),i=[...n,...Object.keys(e.systems).filter(r=>!n.includes(r))];for(const r of i)this.addSystem(e.systems[r],r)}addRunners(...e){e.forEach(n=>{this.runners[n]=new vn(n)})}addSystem(e,n){const i=new e(this);if(this[n])throw new Error(`Whoops! The name "${n}" is already in use`);this[n]=i,this._systemsHash[n]=i;for(const r in this.runners)this.runners[r].add(i);return this}emitWithCustomOptions(e,n){const i=Object.keys(this._systemsHash);e.items.forEach(r=>{const s=i.find(o=>this._systemsHash[o]===r);r[e.name](n[s])})}destroy(){Object.values(this.runners).forEach(e=>{e.destroy()}),this._systemsHash={}}}const Cl=class{constructor(t){this.renderer=t,this.count=0,this.checkCount=0,this.maxIdle=Cl.defaultMaxIdle,this.checkCountMax=Cl.defaultCheckCountMax,this.mode=Cl.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==lm.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const t=this.renderer.texture,e=t.managedTextures;let n=!1;for(let i=0;i<e.length;i++){const r=e[i];!r.framebuffer&&this.count-r.touched>this.maxIdle&&(t.destroyTexture(r,!0),e[i]=null,n=!0)}if(n){let i=0;for(let r=0;r<e.length;r++)e[r]!==null&&(e[i++]=e[r]);e.length=i}}unload(t){const e=this.renderer.texture,n=t._texture;n&&!n.framebuffer&&e.destroyTexture(n);for(let i=t.children.length-1;i>=0;i--)this.unload(t.children[i])}destroy(){this.renderer=null}};let dn=Cl;dn.defaultMode=lm.AUTO;dn.defaultMaxIdle=60*60;dn.defaultCheckCountMax=60*10;dn.extension={type:W.RendererSystem,name:"textureGC"};Q.add(dn);class wh{constructor(e){this.texture=e,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=J.UNSIGNED_BYTE,this.internalFormat=H.RGBA,this.samplerType=0}}function bM(t){let e;return"WebGL2RenderingContext"in globalThis&&t instanceof globalThis.WebGL2RenderingContext?e={[J.UNSIGNED_BYTE]:{[H.RGBA]:t.RGBA8,[H.RGB]:t.RGB8,[H.RG]:t.RG8,[H.RED]:t.R8,[H.RGBA_INTEGER]:t.RGBA8UI,[H.RGB_INTEGER]:t.RGB8UI,[H.RG_INTEGER]:t.RG8UI,[H.RED_INTEGER]:t.R8UI,[H.ALPHA]:t.ALPHA,[H.LUMINANCE]:t.LUMINANCE,[H.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[J.BYTE]:{[H.RGBA]:t.RGBA8_SNORM,[H.RGB]:t.RGB8_SNORM,[H.RG]:t.RG8_SNORM,[H.RED]:t.R8_SNORM,[H.RGBA_INTEGER]:t.RGBA8I,[H.RGB_INTEGER]:t.RGB8I,[H.RG_INTEGER]:t.RG8I,[H.RED_INTEGER]:t.R8I},[J.UNSIGNED_SHORT]:{[H.RGBA_INTEGER]:t.RGBA16UI,[H.RGB_INTEGER]:t.RGB16UI,[H.RG_INTEGER]:t.RG16UI,[H.RED_INTEGER]:t.R16UI,[H.DEPTH_COMPONENT]:t.DEPTH_COMPONENT16},[J.SHORT]:{[H.RGBA_INTEGER]:t.RGBA16I,[H.RGB_INTEGER]:t.RGB16I,[H.RG_INTEGER]:t.RG16I,[H.RED_INTEGER]:t.R16I},[J.UNSIGNED_INT]:{[H.RGBA_INTEGER]:t.RGBA32UI,[H.RGB_INTEGER]:t.RGB32UI,[H.RG_INTEGER]:t.RG32UI,[H.RED_INTEGER]:t.R32UI,[H.DEPTH_COMPONENT]:t.DEPTH_COMPONENT24},[J.INT]:{[H.RGBA_INTEGER]:t.RGBA32I,[H.RGB_INTEGER]:t.RGB32I,[H.RG_INTEGER]:t.RG32I,[H.RED_INTEGER]:t.R32I},[J.FLOAT]:{[H.RGBA]:t.RGBA32F,[H.RGB]:t.RGB32F,[H.RG]:t.RG32F,[H.RED]:t.R32F,[H.DEPTH_COMPONENT]:t.DEPTH_COMPONENT32F},[J.HALF_FLOAT]:{[H.RGBA]:t.RGBA16F,[H.RGB]:t.RGB16F,[H.RG]:t.RG16F,[H.RED]:t.R16F},[J.UNSIGNED_SHORT_5_6_5]:{[H.RGB]:t.RGB565},[J.UNSIGNED_SHORT_4_4_4_4]:{[H.RGBA]:t.RGBA4},[J.UNSIGNED_SHORT_5_5_5_1]:{[H.RGBA]:t.RGB5_A1},[J.UNSIGNED_INT_2_10_10_10_REV]:{[H.RGBA]:t.RGB10_A2,[H.RGBA_INTEGER]:t.RGB10_A2UI},[J.UNSIGNED_INT_10F_11F_11F_REV]:{[H.RGB]:t.R11F_G11F_B10F},[J.UNSIGNED_INT_5_9_9_9_REV]:{[H.RGB]:t.RGB9_E5},[J.UNSIGNED_INT_24_8]:{[H.DEPTH_STENCIL]:t.DEPTH24_STENCIL8},[J.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[H.DEPTH_STENCIL]:t.DEPTH32F_STENCIL8}}:e={[J.UNSIGNED_BYTE]:{[H.RGBA]:t.RGBA,[H.RGB]:t.RGB,[H.ALPHA]:t.ALPHA,[H.LUMINANCE]:t.LUMINANCE,[H.LUMINANCE_ALPHA]:t.LUMINANCE_ALPHA},[J.UNSIGNED_SHORT_5_6_5]:{[H.RGB]:t.RGB},[J.UNSIGNED_SHORT_4_4_4_4]:{[H.RGBA]:t.RGBA},[J.UNSIGNED_SHORT_5_5_5_1]:{[H.RGBA]:t.RGBA}},e}class ew{constructor(e){this.renderer=e,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new ae,this.hasIntegerTextures=!1}contextChange(){const e=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=bM(e);const n=e.getParameter(e.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=n;for(let r=0;r<n;r++)this.boundTextures[r]=null;this.emptyTextures={};const i=new wh(e.createTexture());e.bindTexture(e.TEXTURE_2D,i.texture),e.texImage2D(e.TEXTURE_2D,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[e.TEXTURE_2D]=i,this.emptyTextures[e.TEXTURE_CUBE_MAP]=new wh(e.createTexture()),e.bindTexture(e.TEXTURE_CUBE_MAP,this.emptyTextures[e.TEXTURE_CUBE_MAP].texture);for(let r=0;r<6;r++)e.texImage2D(e.TEXTURE_CUBE_MAP_POSITIVE_X+r,0,e.RGBA,1,1,0,e.RGBA,e.UNSIGNED_BYTE,null);e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MAG_FILTER,e.LINEAR),e.texParameteri(e.TEXTURE_CUBE_MAP,e.TEXTURE_MIN_FILTER,e.LINEAR);for(let r=0;r<this.boundTextures.length;r++)this.bind(null,r)}bind(e,n=0){const{gl:i}=this;if(e=e==null?void 0:e.castToBaseTexture(),e!=null&&e.valid&&!e.parentTextureArray){e.touched=this.renderer.textureGC.count;const r=e._glTextures[this.CONTEXT_UID]||this.initTexture(e);this.boundTextures[n]!==e&&(this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),i.bindTexture(e.target,r.texture)),r.dirtyId!==e.dirtyId?(this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),this.updateTexture(e)):r.dirtyStyleId!==e.dirtyStyleId&&this.updateTextureStyle(e),this.boundTextures[n]=e}else this.currentLocation!==n&&(this.currentLocation=n,i.activeTexture(i.TEXTURE0+n)),i.bindTexture(i.TEXTURE_2D,this.emptyTextures[i.TEXTURE_2D].texture),this.boundTextures[n]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let e=0;e<this.boundTextures.length;e++)this.boundTextures[e]=this.unknownTexture}unbind(e){const{gl:n,boundTextures:i}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let r=0;r<i.length;r++)i[r]===this.unknownTexture&&this.bind(null,r)}for(let r=0;r<i.length;r++)i[r]===e&&(this.currentLocation!==r&&(n.activeTexture(n.TEXTURE0+r),this.currentLocation=r),n.bindTexture(e.target,this.emptyTextures[e.target].texture),i[r]=null)}ensureSamplerType(e){const{boundTextures:n,hasIntegerTextures:i,CONTEXT_UID:r}=this;if(i)for(let s=e-1;s>=0;--s){const o=n[s];o&&o._glTextures[r].samplerType!==qd.FLOAT&&this.renderer.texture.unbind(o)}}initTexture(e){const n=new wh(this.gl.createTexture());return n.dirtyId=-1,e._glTextures[this.CONTEXT_UID]=n,this.managedTextures.push(e),e.on("dispose",this.destroyTexture,this),n}initTextureType(e,n){var i;n.internalFormat=((i=this.internalFormats[e.type])==null?void 0:i[e.format])??e.format,this.webGLVersion===2&&e.type===J.HALF_FLOAT?n.type=this.gl.HALF_FLOAT:n.type=e.type}updateTexture(e){var r;const n=e._glTextures[this.CONTEXT_UID];if(!n)return;const i=this.renderer;if(this.initTextureType(e,n),(r=e.resource)!=null&&r.upload(i,e,n))n.samplerType!==qd.FLOAT&&(this.hasIntegerTextures=!0);else{const s=e.realWidth,o=e.realHeight,a=i.gl;(n.width!==s||n.height!==o||n.dirtyId<0)&&(n.width=s,n.height=o,a.texImage2D(e.target,0,n.internalFormat,s,o,0,e.format,n.type,null))}e.dirtyStyleId!==n.dirtyStyleId&&this.updateTextureStyle(e),n.dirtyId=e.dirtyId}destroyTexture(e,n){const{gl:i}=this;if(e=e.castToBaseTexture(),e._glTextures[this.CONTEXT_UID]&&(this.unbind(e),i.deleteTexture(e._glTextures[this.CONTEXT_UID].texture),e.off("dispose",this.destroyTexture,this),delete e._glTextures[this.CONTEXT_UID],!n)){const r=this.managedTextures.indexOf(e);r!==-1&&ss(this.managedTextures,r,1)}}updateTextureStyle(e){var i;const n=e._glTextures[this.CONTEXT_UID];n&&((e.mipmap===Nn.POW2||this.webGLVersion!==2)&&!e.isPowerOfTwo?n.mipmap=!1:n.mipmap=e.mipmap>=1,this.webGLVersion!==2&&!e.isPowerOfTwo?n.wrapMode=Ii.CLAMP:n.wrapMode=e.wrapMode,(i=e.resource)!=null&&i.style(this.renderer,e,n)||this.setStyle(e,n),n.dirtyStyleId=e.dirtyStyleId)}setStyle(e,n){const i=this.gl;if(n.mipmap&&e.mipmap!==Nn.ON_MANUAL&&i.generateMipmap(e.target),i.texParameteri(e.target,i.TEXTURE_WRAP_S,n.wrapMode),i.texParameteri(e.target,i.TEXTURE_WRAP_T,n.wrapMode),n.mipmap){i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Yn.LINEAR?i.LINEAR_MIPMAP_LINEAR:i.NEAREST_MIPMAP_NEAREST);const r=this.renderer.context.extensions.anisotropicFiltering;if(r&&e.anisotropicLevel>0&&e.scaleMode===Yn.LINEAR){const s=Math.min(e.anisotropicLevel,i.getParameter(r.MAX_TEXTURE_MAX_ANISOTROPY_EXT));i.texParameterf(e.target,r.TEXTURE_MAX_ANISOTROPY_EXT,s)}}else i.texParameteri(e.target,i.TEXTURE_MIN_FILTER,e.scaleMode===Yn.LINEAR?i.LINEAR:i.NEAREST);i.texParameteri(e.target,i.TEXTURE_MAG_FILTER,e.scaleMode===Yn.LINEAR?i.LINEAR:i.NEAREST)}destroy(){this.renderer=null}}ew.extension={type:W.RendererSystem,name:"texture"};Q.add(ew);class tw{constructor(e){this.renderer=e}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:i}=this,r=e._glTransformFeedbacks[i]||this.createGLTransformFeedback(e);n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,r)}unbind(){const{gl:e}=this;e.bindTransformFeedback(e.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(e,n){const{gl:i,renderer:r}=this;n&&r.shader.bind(n),i.beginTransformFeedback(e)}endTransformFeedback(){const{gl:e}=this;e.endTransformFeedback()}createGLTransformFeedback(e){const{gl:n,renderer:i,CONTEXT_UID:r}=this,s=n.createTransformFeedback();e._glTransformFeedbacks[r]=s,n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,s);for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];a&&(i.buffer.update(a),a._glBuffers[r].refCount++,n.bindBufferBase(n.TRANSFORM_FEEDBACK_BUFFER,o,a._glBuffers[r].buffer||null))}return n.bindTransformFeedback(n.TRANSFORM_FEEDBACK,null),e.disposeRunner.add(this),s}disposeTransformFeedback(e,n){const i=e._glTransformFeedbacks[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this);const s=this.renderer.buffer;if(s)for(let o=0;o<e.buffers.length;o++){const a=e.buffers[o];if(!a)continue;const l=a._glBuffers[this.CONTEXT_UID];l&&(l.refCount--,l.refCount===0&&!n&&s.dispose(a,n))}i&&(n||r.deleteTransformFeedback(i),delete e._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}tw.extension={type:W.RendererSystem,name:"transformFeedback"};Q.add(tw);class nw{constructor(e){this.renderer=e}init(e){this.screen=new le(0,0,e.width,e.height),this.element=e.view||X.ADAPTER.createCanvas(),this.resolution=e.resolution||X.RESOLUTION,this.autoDensity=!!e.autoDensity}resizeView(e,n){this.element.width=Math.round(e*this.resolution),this.element.height=Math.round(n*this.resolution);const i=this.element.width/this.resolution,r=this.element.height/this.resolution;this.screen.width=i,this.screen.height=r,this.autoDensity&&(this.element.style.width=`${i}px`,this.element.style.height=`${r}px`),this.renderer.emit("resize",i,r),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(e){var n;e&&((n=this.element.parentNode)==null||n.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}nw.extension={type:[W.RendererSystem,W.CanvasRendererSystem],name:"_view"};Q.add(nw);X.PREFER_ENV=Er.WEBGL2;X.STRICT_TEXTURE_CACHE=!1;Object.defineProperties(X,{WRAP_MODE:{get(){return ae.defaultOptions.wrapMode},set(t){fe("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),ae.defaultOptions.wrapMode=t}},SCALE_MODE:{get(){return ae.defaultOptions.scaleMode},set(t){fe("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),ae.defaultOptions.scaleMode=t}},MIPMAP_TEXTURES:{get(){return ae.defaultOptions.mipmap},set(t){fe("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),ae.defaultOptions.mipmap=t}},ANISOTROPIC_LEVEL:{get(){return ae.defaultOptions.anisotropicLevel},set(t){fe("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),ae.defaultOptions.anisotropicLevel=t}},FILTER_RESOLUTION:{get(){return fe("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),rt.defaultResolution},set(t){rt.defaultResolution=t}},FILTER_MULTISAMPLE:{get(){return fe("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),rt.defaultMultisample},set(t){rt.defaultMultisample=t}},SPRITE_MAX_TEXTURES:{get(){return hn.defaultMaxTextures},set(t){fe("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),hn.defaultMaxTextures=t}},SPRITE_BATCH_SIZE:{get(){return hn.defaultBatchSize},set(t){fe("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),hn.defaultBatchSize=t}},CAN_UPLOAD_SAME_BUFFER:{get(){return hn.canUploadSameBuffer},set(t){fe("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),hn.canUploadSameBuffer=t}},GC_MODE:{get(){return dn.defaultMode},set(t){fe("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),dn.defaultMode=t}},GC_MAX_IDLE:{get(){return dn.defaultMaxIdle},set(t){fe("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),dn.defaultMaxIdle=t}},GC_MAX_CHECK_COUNT:{get(){return dn.defaultCheckCountMax},set(t){fe("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),dn.defaultCheckCountMax=t}},PRECISION_VERTEX:{get(){return fn.defaultVertexPrecision},set(t){fe("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),fn.defaultVertexPrecision=t}},PRECISION_FRAGMENT:{get(){return fn.defaultFragmentPrecision},set(t){fe("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),fn.defaultFragmentPrecision=t}}});var _s=(t=>(t[t.HIGH=25]="HIGH",t[t.NORMAL=0]="NORMAL",t[t.LOW=-25]="LOW",t[t.UTILITY=-50]="UTILITY",t))(_s||{});class bh{constructor(e,n=null,i=0,r=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=e,this.context=n,this.priority=i,this.once=r}match(e,n=null){return this.fn===e&&this.context===n}emit(e){this.fn&&(this.context?this.fn.call(this.context,e):this.fn(e));const n=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),n}connect(e){this.previous=e,e.next&&(e.next.previous=this),this.next=e.next,e.next=this}destroy(e=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const n=this.next;return this.next=e?null:n,this.previous=null,n}}const It=class{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new bh(null,null,1/0),this.deltaMS=1/It.targetFPMS,this.elapsedMS=1/It.targetFPMS,this._tick=t=>{this._requestId=null,this.started&&(this.update(t),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(t,e,n=_s.NORMAL){return this._addListener(new bh(t,e,n))}addOnce(t,e,n=_s.NORMAL){return this._addListener(new bh(t,e,n,!0))}_addListener(t){let e=this._head.next,n=this._head;if(!e)t.connect(n);else{for(;e;){if(t.priority>e.priority){t.connect(n);break}n=e,e=e.next}t.previous||t.connect(n)}return this._startIfPossible(),this}remove(t,e){let n=this._head.next;for(;n;)n.match(t,e)?n=n.destroy():n=n.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let t=0,e=this._head;for(;e=e.next;)t++;return t}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let t=this._head.next;for(;t;)t=t.destroy(!0);this._head.destroy(),this._head=null}}update(t=performance.now()){let e;if(t>this.lastTime){if(e=this.elapsedMS=t-this.lastTime,e>this._maxElapsedMS&&(e=this._maxElapsedMS),e*=this.speed,this._minElapsedMS){const r=t-this._lastFrame|0;if(r<this._minElapsedMS)return;this._lastFrame=t-r%this._minElapsedMS}this.deltaMS=e,this.deltaTime=this.deltaMS*It.targetFPMS;const n=this._head;let i=n.next;for(;i;)i=i.emit(this.deltaTime);n.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=t}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(t){const e=Math.min(this.maxFPS,t),n=Math.min(Math.max(0,e)/1e3,It.targetFPMS);this._maxElapsedMS=1/n}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(t){if(t===0)this._minElapsedMS=0;else{const e=Math.max(this.minFPS,t);this._minElapsedMS=1/(e/1e3)}}static get shared(){if(!It._shared){const t=It._shared=new It;t.autoStart=!0,t._protected=!0}return It._shared}static get system(){if(!It._system){const t=It._system=new It;t.autoStart=!0,t._protected=!0}return It._system}};let pt=It;pt.targetFPMS=.06;Object.defineProperties(X,{TARGET_FPMS:{get(){return pt.targetFPMS},set(t){fe("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),pt.targetFPMS=t}}});class iw{static init(e){e=Object.assign({autoStart:!0,sharedTicker:!1},e),Object.defineProperty(this,"ticker",{set(n){this._ticker&&this._ticker.remove(this.render,this),this._ticker=n,n&&n.add(this.render,this,_s.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=e.sharedTicker?pt.shared:new pt,e.autoStart&&this.start()}static destroy(){if(this._ticker){const e=this._ticker;this.ticker=null,e.destroy()}}}iw.extension=W.Application;Q.add(iw);const rw=[];Q.handleByList(W.Renderer,rw);function EM(t){for(const e of rw)if(e.test(t))return new e(t);throw new Error("Unable to auto-detect a suitable renderer.")}var SM=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,TM=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const CM=SM,sw=TM;class ow{constructor(e){this.renderer=e}contextChange(e){let n;if(this.renderer.context.webGLVersion===1){const i=e.getParameter(e.FRAMEBUFFER_BINDING);e.bindFramebuffer(e.FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.FRAMEBUFFER,i)}else{const i=e.getParameter(e.DRAW_FRAMEBUFFER_BINDING);e.bindFramebuffer(e.DRAW_FRAMEBUFFER,null),n=e.getParameter(e.SAMPLES),e.bindFramebuffer(e.DRAW_FRAMEBUFFER,i)}n>=Be.HIGH?this.multisample=Be.HIGH:n>=Be.MEDIUM?this.multisample=Be.MEDIUM:n>=Be.LOW?this.multisample=Be.LOW:this.multisample=Be.NONE}destroy(){}}ow.extension={type:W.RendererSystem,name:"_multisample"};Q.add(ow);class AM{constructor(e){this.buffer=e||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class aw{constructor(e){this.renderer=e,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(e){const{gl:n,CONTEXT_UID:i}=this,r=e._glBuffers[i]||this.createGLBuffer(e);n.bindBuffer(e.type,r.buffer)}unbind(e){const{gl:n}=this;n.bindBuffer(e,null)}bindBufferBase(e,n){const{gl:i,CONTEXT_UID:r}=this;if(this.boundBufferBases[n]!==e){const s=e._glBuffers[r]||this.createGLBuffer(e);this.boundBufferBases[n]=e,i.bindBufferBase(i.UNIFORM_BUFFER,n,s.buffer)}}bindBufferRange(e,n,i){const{gl:r,CONTEXT_UID:s}=this;i=i||0;const o=e._glBuffers[s]||this.createGLBuffer(e);r.bindBufferRange(r.UNIFORM_BUFFER,n||0,o.buffer,i*256,256)}update(e){const{gl:n,CONTEXT_UID:i}=this,r=e._glBuffers[i]||this.createGLBuffer(e);if(e._updateID!==r.updateID)if(r.updateID=e._updateID,n.bindBuffer(e.type,r.buffer),r.byteLength>=e.data.byteLength)n.bufferSubData(e.type,0,e.data);else{const s=e.static?n.STATIC_DRAW:n.DYNAMIC_DRAW;r.byteLength=e.data.byteLength,n.bufferData(e.type,e.data,s)}}dispose(e,n){if(!this.managedBuffers[e.id])return;delete this.managedBuffers[e.id];const i=e._glBuffers[this.CONTEXT_UID],r=this.gl;e.disposeRunner.remove(this),i&&(n||r.deleteBuffer(i.buffer),delete e._glBuffers[this.CONTEXT_UID])}disposeAll(e){const n=Object.keys(this.managedBuffers);for(let i=0;i<n.length;i++)this.dispose(this.managedBuffers[n[i]],e)}createGLBuffer(e){const{CONTEXT_UID:n,gl:i}=this;return e._glBuffers[n]=new AM(i.createBuffer()),this.managedBuffers[e.id]=e,e.disposeRunner.add(this),e._glBuffers[n]}}aw.extension={type:W.RendererSystem,name:"buffer"};Q.add(aw);class lw{constructor(e){this.renderer=e}render(e,n){const i=this.renderer;let r,s,o,a;if(n&&(r=n.renderTexture,s=n.clear,o=n.transform,a=n.skipUpdateTransform),this.renderingToScreen=!r,i.runners.prerender.emit(),i.emit("prerender"),i.projection.transform=o,!i.context.isLost){if(r||(this.lastObjectRendered=e),!a){const l=e.enableTempParent();e.updateTransform(),e.disableTempParent(l)}i.renderTexture.bind(r),i.batch.currentRenderer.start(),(s??i.background.clearBeforeRender)&&i.renderTexture.clear(),e.render(i),i.batch.currentRenderer.flush(),r&&(n.blit&&i.framebuffer.blit(),r.baseTexture.update()),i.runners.postrender.emit(),i.projection.transform=null,i.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}lw.extension={type:W.RendererSystem,name:"objectRenderer"};Q.add(lw);const df=class extends wM{constructor(t){super(),this.type=h_.WEBGL,t=Object.assign({},X.RENDER_OPTIONS,t),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new yn({projectionMatrix:new Ce},!0);const e={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:df.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(e),"useContextAlpha"in t&&(fe("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),t.premultipliedAlpha=t.useContextAlpha&&t.useContextAlpha!=="notMultiplied",t.backgroundAlpha=t.useContextAlpha===!1?1:t.backgroundAlpha);const n={hello:t.hello,_plugin:df.__plugins,background:{alpha:t.backgroundAlpha,color:t.background??t.backgroundColor,clearBeforeRender:t.clearBeforeRender},_view:{height:t.height,width:t.width,autoDensity:t.autoDensity,resolution:t.resolution,view:t.view},context:{antialias:t.antialias,context:t.context,powerPreference:t.powerPreference,premultipliedAlpha:t.premultipliedAlpha,preserveDrawingBuffer:t.preserveDrawingBuffer}};this.options=t,this.startup.run(n)}static test(t){return t!=null&&t.forceCanvas?!1:b2()}render(t,e){this.objectRenderer.render(t,e)}resize(t,e){this._view.resizeView(t,e)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(t=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:t}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(t){this._view.resolution=t,this.runners.resolutionChange.emit(t)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return fe("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return fe("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return fe("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return fe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(t){fe("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=t}get backgroundAlpha(){return fe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.color}set backgroundAlpha(t){fe("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=t}get powerPreference(){return fe("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(t,e){return this.textureGenerator.generateTexture(t,e)}};let Ms=df;Ms.extension={type:W.Renderer,priority:1};Ms.__plugins={};Ms.__systems={};Q.handleByMap(W.RendererPlugin,Ms.__plugins);Q.handleByMap(W.RendererSystem,Ms.__systems);Q.add(Ms);class uw extends Vo{constructor(e,n){const{width:i,height:r}=n||{};super(i,r),this.items=[],this.itemDirtyIds=[];for(let s=0;s<e;s++){const o=new ae;this.items.push(o),this.itemDirtyIds.push(-2)}this.length=e,this._load=null,this.baseTexture=null}initFromArray(e,n){for(let i=0;i<this.length;i++)e[i]&&(e[i].castToBaseTexture?this.addBaseTextureAt(e[i].castToBaseTexture(),i):e[i]instanceof Vo?this.addResourceAt(e[i],i):this.addResourceAt(w_(e[i],n),i))}dispose(){for(let e=0,n=this.length;e<n;e++)this.items[e].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(e,n){if(!this.items[n])throw new Error(`Index ${n} is out of bounds`);return e.valid&&!this.valid&&this.resize(e.width,e.height),this.items[n].setResource(e),this}bind(e){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=e,this.items[n].on("update",e.update,e)}unbind(e){super.unbind(e);for(let n=0;n<this.length;n++)this.items[n].parentTextureArray=null,this.items[n].off("update",e.update,e)}load(){if(this._load)return this._load;const n=this.items.map(i=>i.resource).filter(i=>i).map(i=>i.load());return this._load=Promise.all(n).then(()=>{const{realWidth:i,realHeight:r}=this.items[0];return this.resize(i,r),Promise.resolve(this)}),this._load}}class PM extends uw{constructor(e,n){const{width:i,height:r}=n||{};let s,o;Array.isArray(e)?(s=e,o=e.length):o=e,super(o,{width:i,height:r}),s&&this.initFromArray(s,n)}addBaseTextureAt(e,n){if(e.resource)this.addResourceAt(e.resource,n);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(e){super.bind(e),e.target=is.TEXTURE_2D_ARRAY}upload(e,n,i){const{length:r,itemDirtyIds:s,items:o}=this,{gl:a}=e;i.dirtyId<0&&a.texImage3D(a.TEXTURE_2D_ARRAY,0,i.internalFormat,this._width,this._height,r,0,n.format,i.type,null);for(let l=0;l<r;l++){const u=o[l];s[l]<u.dirtyId&&(s[l]=u.dirtyId,u.valid&&a.texSubImage3D(a.TEXTURE_2D_ARRAY,0,0,0,l,u.resource.width,u.resource.height,1,n.format,i.type,u.resource.source))}return!0}}class IM extends Fi{constructor(e){super(e)}static test(e){const{OffscreenCanvas:n}=globalThis;return n&&e instanceof n?!0:globalThis.HTMLCanvasElement&&e instanceof HTMLCanvasElement}}const ao=class extends uw{constructor(t,e){const{width:n,height:i,autoLoad:r,linkBaseTexture:s}=e||{};if(t&&t.length!==ao.SIDES)throw new Error(`Invalid length. Got ${t.length}, expected 6`);super(6,{width:n,height:i});for(let o=0;o<ao.SIDES;o++)this.items[o].target=is.TEXTURE_CUBE_MAP_POSITIVE_X+o;this.linkBaseTexture=s!==!1,t&&this.initFromArray(t,e),r!==!1&&this.load()}bind(t){super.bind(t),t.target=is.TEXTURE_CUBE_MAP}addBaseTextureAt(t,e,n){if(n===void 0&&(n=this.linkBaseTexture),!this.items[e])throw new Error(`Index ${e} is out of bounds`);if(!this.linkBaseTexture||t.parentTextureArray||Object.keys(t._glTextures).length>0)if(t.resource)this.addResourceAt(t.resource,e);else throw new Error("CubeResource does not support copying of renderTexture.");else t.target=is.TEXTURE_CUBE_MAP_POSITIVE_X+e,t.parentTextureArray=this.baseTexture,this.items[e]=t;return t.valid&&!this.valid&&this.resize(t.realWidth,t.realHeight),this.items[e]=t,this}upload(t,e,n){const i=this.itemDirtyIds;for(let r=0;r<ao.SIDES;r++){const s=this.items[r];(i[r]<s.dirtyId||n.dirtyId<e.dirtyId)&&(s.valid&&s.resource?(s.resource.upload(t,s,n),i[r]=s.dirtyId):i[r]<-1&&(t.gl.texImage2D(s.target,0,n.internalFormat,e.realWidth,e.realHeight,0,e.format,n.type,null),i[r]=-1))}return!0}static test(t){return Array.isArray(t)&&t.length===ao.SIDES}};let cw=ao;cw.SIDES=6;class Kr extends Fi{constructor(e,n){n=n||{};let i,r;typeof e=="string"?(i=Kr.EMPTY,r=e):(i=e,r=null),super(i),this.url=r,this.crossOrigin=n.crossOrigin??!0,this.alphaMode=typeof n.alphaMode=="number"?n.alphaMode:null,this._load=null,n.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(e,n)=>{if(this.url===null){e(this);return}try{const i=await X.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const r=await i.blob();if(this.destroyed)return;const s=await createImageBitmap(r,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===wn.UNPACK?"premultiply":"none"});if(this.destroyed)return;this.source=s,this.update(),e(this)}catch(i){if(this.destroyed)return;n(i),this.onError.emit(i)}}),this._load)}upload(e,n,i){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(n.alphaMode=this.alphaMode),super.upload(e,n,i)):(this.load(),!1)}dispose(){this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(e){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof e=="string"||e instanceof ImageBitmap)}static get EMPTY(){return Kr._EMPTY=Kr._EMPTY??X.ADAPTER.createCanvas(0,0),Kr._EMPTY}}const Al=class extends Fi{constructor(t,e){e=e||{},super(X.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=t,this.scale=e.scale||1,this._overrideWidth=e.width,this._overrideHeight=e.height,this._resolve=null,this._crossorigin=e.crossorigin,this._load=null,e.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(t=>{if(this._resolve=()=>{this.resize(this.source.width,this.source.height),t(this)},Al.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const t=new Image;Fi.crossOrigin(t,this.svg,this._crossorigin),t.src=this.svg,t.onerror=e=>{this._resolve&&(t.onerror=null,this.onError.emit(e))},t.onload=()=>{if(!this._resolve)return;const e=t.width,n=t.height;if(!e||!n)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let i=e*this.scale,r=n*this.scale;(this._overrideWidth||this._overrideHeight)&&(i=this._overrideWidth||this._overrideHeight/n*e,r=this._overrideHeight||this._overrideWidth/e*n),i=Math.round(i),r=Math.round(r);const s=this.source;s.width=i,s.height=r,s._pixiId=`canvas_${vr()}`,s.getContext("2d").drawImage(t,0,0,e,n,0,0,i,r),this._resolve(),this._resolve=null}}static getSize(t){const e=Al.SVG_SIZE.exec(t),n={};return e&&(n[e[1]]=Math.round(parseFloat(e[3])),n[e[5]]=Math.round(parseFloat(e[7]))),n}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(t,e){return e==="svg"||typeof t=="string"&&t.startsWith("data:image/svg+xml")||typeof t=="string"&&Al.SVG_XML.test(t)}};let Xo=Al;Xo.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m;Xo.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;const ff=class extends Fi{constructor(t,e){if(e=e||{},!(t instanceof HTMLVideoElement)){const n=document.createElement("video");n.setAttribute("preload","auto"),n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),typeof t=="string"&&(t=[t]);const i=t[0].src||t[0];Fi.crossOrigin(n,i,e.crossorigin);for(let r=0;r<t.length;++r){const s=document.createElement("source");let{src:o,mime:a}=t[r];o=o||t[r];const l=o.split("?").shift().toLowerCase(),u=l.slice(l.lastIndexOf(".")+1);a=a||ff.MIME_TYPES[u]||`video/${u}`,s.src=o,s.type=a,n.appendChild(s)}t=n}super(t),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=e.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=e.autoPlay!==!1,this._load=null,this._resolve=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),e.autoLoad!==!1&&this.load()}update(t=0){if(!this.destroyed){const e=pt.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-e),(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}load(){if(this._load)return this._load;const t=this.source;return(t.readyState===t.HAVE_ENOUGH_DATA||t.readyState===t.HAVE_FUTURE_DATA)&&t.width&&t.height&&(t.complete=!0),t.addEventListener("play",this._onPlayStart.bind(this)),t.addEventListener("pause",this._onPlayStop.bind(this)),this._isSourceReady()?this._onCanPlay():(t.addEventListener("canplay",this._onCanPlay),t.addEventListener("canplaythrough",this._onCanPlay),t.addEventListener("error",this._onError,!0)),this._load=new Promise(e=>{this.valid?e(this):(this._resolve=e,t.load())}),this._load}_onError(t){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(t)}_isSourcePlaying(){const t=this.source;return!t.paused&&!t.ended&&this._isSourceReady()}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this.autoUpdate&&!this._isConnectedToTicker&&(pt.shared.add(this.update,this),this._isConnectedToTicker=!0)}_onPlayStop(){this._isConnectedToTicker&&(pt.shared.remove(this.update,this),this._isConnectedToTicker=!1)}_onCanPlay(){const t=this.source;t.removeEventListener("canplay",this._onCanPlay),t.removeEventListener("canplaythrough",this._onCanPlay);const e=this.valid;this.resize(t.videoWidth,t.videoHeight),!e&&this._resolve&&(this._resolve(this),this._resolve=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&t.play()}dispose(){this._isConnectedToTicker&&(pt.shared.remove(this.update,this),this._isConnectedToTicker=!1);const t=this.source;t&&(t.removeEventListener("error",this._onError,!0),t.pause(),t.src="",t.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isConnectedToTicker?(pt.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._isSourcePlaying()&&(pt.shared.add(this.update,this),this._isConnectedToTicker=!0))}get updateFPS(){return this._updateFPS}set updateFPS(t){t!==this._updateFPS&&(this._updateFPS=t)}static test(t,e){return globalThis.HTMLVideoElement&&t instanceof HTMLVideoElement||ff.TYPES.includes(e)}};let fm=ff;fm.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"];fm.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};of.push(Kr,D_,IM,fm,Xo,oa,cw,PM);class vu{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(e){return this.minX>this.maxX||this.minY>this.maxY?le.EMPTY:(e=e||new le(0,0,1,1),e.x=this.minX,e.y=this.minY,e.width=this.maxX-this.minX,e.height=this.maxY-this.minY,e)}addPoint(e){this.minX=Math.min(this.minX,e.x),this.maxX=Math.max(this.maxX,e.x),this.minY=Math.min(this.minY,e.y),this.maxY=Math.max(this.maxY,e.y)}addPointMatrix(e,n){const{a:i,b:r,c:s,d:o,tx:a,ty:l}=e,u=i*n.x+s*n.y+a,c=r*n.x+o*n.y+l;this.minX=Math.min(this.minX,u),this.maxX=Math.max(this.maxX,u),this.minY=Math.min(this.minY,c),this.maxY=Math.max(this.maxY,c)}addQuad(e){let n=this.minX,i=this.minY,r=this.maxX,s=this.maxY,o=e[0],a=e[1];n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[2],a=e[3],n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[4],a=e[5],n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,o=e[6],a=e[7],n=o<n?o:n,i=a<i?a:i,r=o>r?o:r,s=a>s?a:s,this.minX=n,this.minY=i,this.maxX=r,this.maxY=s}addFrame(e,n,i,r,s){this.addFrameMatrix(e.worldTransform,n,i,r,s)}addFrameMatrix(e,n,i,r,s){const o=e.a,a=e.b,l=e.c,u=e.d,c=e.tx,h=e.ty;let d=this.minX,f=this.minY,p=this.maxX,g=this.maxY,v=o*n+l*i+c,m=a*n+u*i+h;d=v<d?v:d,f=m<f?m:f,p=v>p?v:p,g=m>g?m:g,v=o*r+l*i+c,m=a*r+u*i+h,d=v<d?v:d,f=m<f?m:f,p=v>p?v:p,g=m>g?m:g,v=o*n+l*s+c,m=a*n+u*s+h,d=v<d?v:d,f=m<f?m:f,p=v>p?v:p,g=m>g?m:g,v=o*r+l*s+c,m=a*r+u*s+h,d=v<d?v:d,f=m<f?m:f,p=v>p?v:p,g=m>g?m:g,this.minX=d,this.minY=f,this.maxX=p,this.maxY=g}addVertexData(e,n,i){let r=this.minX,s=this.minY,o=this.maxX,a=this.maxY;for(let l=n;l<i;l+=2){const u=e[l],c=e[l+1];r=u<r?u:r,s=c<s?c:s,o=u>o?u:o,a=c>a?c:a}this.minX=r,this.minY=s,this.maxX=o,this.maxY=a}addVertices(e,n,i,r){this.addVerticesMatrix(e.worldTransform,n,i,r)}addVerticesMatrix(e,n,i,r,s=0,o=s){const a=e.a,l=e.b,u=e.c,c=e.d,h=e.tx,d=e.ty;let f=this.minX,p=this.minY,g=this.maxX,v=this.maxY;for(let m=i;m<r;m+=2){const y=n[m],x=n[m+1],_=a*y+u*x+h,b=c*x+l*y+d;f=Math.min(f,_-s),g=Math.max(g,_+s),p=Math.min(p,b-o),v=Math.max(v,b+o)}this.minX=f,this.minY=p,this.maxX=g,this.maxY=v}addBounds(e){const n=this.minX,i=this.minY,r=this.maxX,s=this.maxY;this.minX=e.minX<n?e.minX:n,this.minY=e.minY<i?e.minY:i,this.maxX=e.maxX>r?e.maxX:r,this.maxY=e.maxY>s?e.maxY:s}addBoundsMask(e,n){const i=e.minX>n.minX?e.minX:n.minX,r=e.minY>n.minY?e.minY:n.minY,s=e.maxX<n.maxX?e.maxX:n.maxX,o=e.maxY<n.maxY?e.maxY:n.maxY;if(i<=s&&r<=o){const a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=s>u?s:u,this.maxY=o>c?o:c}}addBoundsMatrix(e,n){this.addFrameMatrix(n,e.minX,e.minY,e.maxX,e.maxY)}addBoundsArea(e,n){const i=e.minX>n.x?e.minX:n.x,r=e.minY>n.y?e.minY:n.y,s=e.maxX<n.x+n.width?e.maxX:n.x+n.width,o=e.maxY<n.y+n.height?e.maxY:n.y+n.height;if(i<=s&&r<=o){const a=this.minX,l=this.minY,u=this.maxX,c=this.maxY;this.minX=i<a?i:a,this.minY=r<l?r:l,this.maxX=s>u?s:u,this.maxY=o>c?o:c}}pad(e=0,n=e){this.isEmpty()||(this.minX-=e,this.maxX+=e,this.minY-=n,this.maxY+=n)}addFramePad(e,n,i,r,s,o){e-=s,n-=o,i+=s,r+=o,this.minX=this.minX<e?this.minX:e,this.maxX=this.maxX>i?this.maxX:i,this.minY=this.minY<n?this.minY:n,this.maxY=this.maxY>r?this.maxY:r}}class ke extends mr{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new dm,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new vu,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(e){const n=Object.keys(e);for(let i=0;i<n.length;++i){const r=n[i];Object.defineProperty(ke.prototype,r,Object.getOwnPropertyDescriptor(e,r))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(e,n){return e||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),n||(this._boundsRect||(this._boundsRect=new le),n=this._boundsRect),this._bounds.getRectangle(n)}getLocalBounds(e){e||(this._localBoundsRect||(this._localBoundsRect=new le),e=this._localBoundsRect),this._localBounds||(this._localBounds=new vu);const n=this.transform,i=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform;const r=this._bounds,s=this._boundsID;this._bounds=this._localBounds;const o=this.getBounds(!1,e);return this.parent=i,this.transform=n,this._bounds=r,this._bounds.updateID+=this._boundsID-s,o}toGlobal(e,n,i=!1){return i||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(e,n)}toLocal(e,n,i,r){return n&&(e=n.toGlobal(e,i,r)),r||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(e,i)}setParent(e){if(!e||!e.addChild)throw new Error("setParent: Argument must be a Container");return e.addChild(this),e}removeFromParent(){var e;(e=this.parent)==null||e.removeChild(this)}setTransform(e=0,n=0,i=1,r=1,s=0,o=0,a=0,l=0,u=0){return this.position.x=e,this.position.y=n,this.scale.x=i||1,this.scale.y=r||1,this.rotation=s,this.skew.x=o,this.skew.y=a,this.pivot.x=l,this.pivot.y=u,this}destroy(e){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.interactive=!1,this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new MM),this.tempDisplayObjectParent}enableTempParent(){const e=this.parent;return this.parent=this._tempDisplayObjectParent,e}disableTempParent(e){this.parent=e}get x(){return this.position.x}set x(e){this.transform.position.x=e}get y(){return this.position.y}set y(e){this.transform.position.y=e}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(e){this.transform.position.copyFrom(e)}get scale(){return this.transform.scale}set scale(e){this.transform.scale.copyFrom(e)}get pivot(){return this.transform.pivot}set pivot(e){this.transform.pivot.copyFrom(e)}get skew(){return this.transform.skew}set skew(e){this.transform.skew.copyFrom(e)}get rotation(){return this.transform.rotation}set rotation(e){this.transform.rotation=e}get angle(){return this.transform.rotation*CI}set angle(e){this.transform.rotation=e*AI}get zIndex(){return this._zIndex}set zIndex(e){this._zIndex=e,this.parent&&(this.parent.sortDirty=!0)}get worldVisible(){let e=this;do{if(!e.visible)return!1;e=e.parent}while(e);return!0}get mask(){return this._mask}set mask(e){if(this._mask!==e){if(this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount--,n._maskRefCount===0&&(n.renderable=!0,n.isMask=!1))}if(this._mask=e,this._mask){const n=this._mask.isMaskData?this._mask.maskObject:this._mask;n&&(n._maskRefCount===0&&(n.renderable=!1,n.isMask=!0),n._maskRefCount++)}}}}class MM extends ke{constructor(){super(...arguments),this.sortDirty=null}}ke.prototype.displayObjectUpdateTransform=ke.prototype.updateTransform;const OM=new Ce;function RM(t,e){return t.zIndex===e.zIndex?t._lastSortedIndex-e._lastSortedIndex:t.zIndex-e.zIndex}const pf=class extends ke{constructor(){super(),this.children=[],this.sortableChildren=pf.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(t){}addChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.addChild(t[e]);else{const e=t[0];e.parent&&e.parent.removeChild(e),e.parent=this,this.sortDirty=!0,e.transform._parentID=-1,this.children.push(e),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",e,this,this.children.length-1),e.emit("added",this)}return t[0]}addChildAt(t,e){if(e<0||e>this.children.length)throw new Error(`${t}addChildAt: The index ${e} supplied is out of bounds ${this.children.length}`);return t.parent&&t.parent.removeChild(t),t.parent=this,this.sortDirty=!0,t.transform._parentID=-1,this.children.splice(e,0,t),this._boundsID++,this.onChildrenChange(e),t.emit("added",this),this.emit("childAdded",t,this,e),t}swapChildren(t,e){if(t===e)return;const n=this.getChildIndex(t),i=this.getChildIndex(e);this.children[n]=e,this.children[i]=t,this.onChildrenChange(n<i?n:i)}getChildIndex(t){const e=this.children.indexOf(t);if(e===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return e}setChildIndex(t,e){if(e<0||e>=this.children.length)throw new Error(`The index ${e} supplied is out of bounds ${this.children.length}`);const n=this.getChildIndex(t);ss(this.children,n,1),this.children.splice(e,0,t),this.onChildrenChange(e)}getChildAt(t){if(t<0||t>=this.children.length)throw new Error(`getChildAt: Index (${t}) does not exist.`);return this.children[t]}removeChild(...t){if(t.length>1)for(let e=0;e<t.length;e++)this.removeChild(t[e]);else{const e=t[0],n=this.children.indexOf(e);if(n===-1)return null;e.parent=null,e.transform._parentID=-1,ss(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this),this.emit("childRemoved",e,this,n)}return t[0]}removeChildAt(t){const e=this.getChildAt(t);return e.parent=null,e.transform._parentID=-1,ss(this.children,t,1),this._boundsID++,this.onChildrenChange(t),e.emit("removed",this),this.emit("childRemoved",e,this,t),e}removeChildren(t=0,e=this.children.length){const n=t,i=e,r=i-n;let s;if(r>0&&r<=i){s=this.children.splice(n,r);for(let o=0;o<s.length;++o)s[o].parent=null,s[o].transform&&(s[o].transform._parentID=-1);this._boundsID++,this.onChildrenChange(t);for(let o=0;o<s.length;++o)s[o].emit("removed",this),this.emit("childRemoved",s[o],this,o);return s}else if(r===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let t=!1;for(let e=0,n=this.children.length;e<n;++e){const i=this.children[e];i._lastSortedIndex=e,!t&&i.zIndex!==0&&(t=!0)}t&&this.children.length>1&&this.children.sort(RM),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let t=0,e=this.children.length;t<e;++t){const n=this.children[t];n.visible&&n.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let t=0;t<this.children.length;t++){const e=this.children[t];if(!(!e.visible||!e.renderable))if(e.calculateBounds(),e._mask){const n=e._mask.isMaskData?e._mask.maskObject:e._mask;n?(n.calculateBounds(),this._bounds.addBoundsMask(e._bounds,n._bounds)):this._bounds.addBounds(e._bounds)}else e.filterArea?this._bounds.addBoundsArea(e._bounds,e.filterArea):this._bounds.addBounds(e._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(t,e=!1){const n=super.getLocalBounds(t);if(!e)for(let i=0,r=this.children.length;i<r;++i){const s=this.children[i];s.visible&&s.updateTransform()}return n}_calculateBounds(){}_renderWithCulling(t){const e=t.renderTexture.sourceFrame;if(!(e.width>0&&e.height>0))return;let n,i;this.cullArea?(n=this.cullArea,i=this.worldTransform):this._render!==pf.prototype._render&&(n=this.getBounds(!0));const r=t.projection.transform;if(r&&(i?(i=OM.copyFrom(i),i.prepend(r)):i=r),n&&e.intersects(n,i))this._render(t);else if(this.cullArea)return;for(let s=0,o=this.children.length;s<o;++s){const a=this.children[s],l=a.cullable;a.cullable=l||!this.cullArea,a.render(t),a.cullable=l}}render(t){var e;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(e=this.filters)!=null&&e.length)this.renderAdvanced(t);else if(this.cullable)this._renderWithCulling(t);else{this._render(t);for(let n=0,i=this.children.length;n<i;++n)this.children[n].render(t)}}renderAdvanced(t){var r,s,o;const e=this.filters,n=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let a=0;a<e.length;a++)e[a].enabled&&this._enabledFilters.push(e[a])}const i=e&&((r=this._enabledFilters)==null?void 0:r.length)||n&&(!n.isMaskData||n.enabled&&(n.autoDetect||n.type!==Ve.NONE));if(i&&t.batch.flush(),e&&((s=this._enabledFilters)!=null&&s.length)&&t.filter.push(this,this._enabledFilters),n&&t.mask.push(this,this._mask),this.cullable)this._renderWithCulling(t);else{this._render(t);for(let a=0,l=this.children.length;a<l;++a)this.children[a].render(t)}i&&t.batch.flush(),n&&t.mask.pop(this),e&&((o=this._enabledFilters)!=null&&o.length)&&t.filter.pop()}_render(t){}destroy(t){super.destroy(),this.sortDirty=!1;const e=typeof t=="boolean"?t:t==null?void 0:t.children,n=this.removeChildren(0,this.children.length);if(e)for(let i=0;i<n.length;++i)n[i].destroy(t)}get width(){return this.scale.x*this.getLocalBounds().width}set width(t){const e=this.getLocalBounds().width;e!==0?this.scale.x=t/e:this.scale.x=1,this._width=t}get height(){return this.scale.y*this.getLocalBounds().height}set height(t){const e=this.getLocalBounds().height;e!==0?this.scale.y=t/e:this.scale.y=1,this._height=t}};let Ut=pf;Ut.defaultSortableChildren=!1;Ut.prototype.containerUpdateTransform=Ut.prototype.updateTransform;Object.defineProperties(X,{SORTABLE_CHILDREN:{get(){return Ut.defaultSortableChildren},set(t){fe("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Ut.defaultSortableChildren=t}}});const Xs=new te,kM=new Uint16Array([0,1,2,0,2,3]);class aa extends Ut{constructor(e){super(),this._anchor=new _i(this._onAnchorUpdate,this,e?e.defaultAnchor.x:0,e?e.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tint=null,this._tintRGB=null,this.tint=16777215,this.blendMode=ne.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=e||Z.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=kM,this.pluginName="batch",this.isSprite=!0,this._roundPixels=X.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=qr(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=qr(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const e=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===e._updateID)return;this._textureID!==e._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=e._updateID;const n=this.transform.worldTransform,i=n.a,r=n.b,s=n.c,o=n.d,a=n.tx,l=n.ty,u=this.vertexData,c=e.trim,h=e.orig,d=this._anchor;let f=0,p=0,g=0,v=0;if(c?(p=c.x-d._x*h.width,f=p+c.width,v=c.y-d._y*h.height,g=v+c.height):(p=-d._x*h.width,f=p+h.width,v=-d._y*h.height,g=v+h.height),u[0]=i*p+s*v+a,u[1]=o*v+r*p+l,u[2]=i*f+s*v+a,u[3]=o*v+r*f+l,u[4]=i*f+s*g+a,u[5]=o*g+r*f+l,u[6]=i*p+s*g+a,u[7]=o*g+r*p+l,this._roundPixels){const m=X.RESOLUTION;for(let y=0;y<u.length;++y)u[y]=Math.round(u[y]*m)/m}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const e=this._texture,n=this.vertexTrimmedData,i=e.orig,r=this._anchor,s=this.transform.worldTransform,o=s.a,a=s.b,l=s.c,u=s.d,c=s.tx,h=s.ty,d=-r._x*i.width,f=d+i.width,p=-r._y*i.height,g=p+i.height;n[0]=o*d+l*p+c,n[1]=u*p+a*d+h,n[2]=o*f+l*p+c,n[3]=u*p+a*f+h,n[4]=o*f+l*g+c,n[5]=u*g+a*f+h,n[6]=o*d+l*g+c,n[7]=u*g+a*d+h}_render(e){this.calculateVertices(),e.batch.setObjectRenderer(e.plugins[this.pluginName]),e.plugins[this.pluginName].render(this)}_calculateBounds(){const e=this._texture.trim,n=this._texture.orig;!e||e.width===n.width&&e.height===n.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(e){return this.children.length===0?(this._localBounds||(this._localBounds=new vu),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new le),e=this._localBoundsRect),this._localBounds.getRectangle(e)):super.getLocalBounds.call(this,e)}containsPoint(e){this.worldTransform.applyInverse(e,Xs);const n=this._texture.orig.width,i=this._texture.orig.height,r=-n*this.anchor.x;let s=0;return Xs.x>=r&&Xs.x<r+n&&(s=-i*this.anchor.y,Xs.y>=s&&Xs.y<s+i)}destroy(e){if(super.destroy(e),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof e=="boolean"?e:e==null?void 0:e.texture){const i=typeof e=="boolean"?e:e==null?void 0:e.baseTexture;this._texture.destroy(!!i)}this._texture=null}static from(e,n){const i=e instanceof Z?e:Z.from(e,n);return new aa(i)}set roundPixels(e){this._roundPixels!==e&&(this._transformID=-1),this._roundPixels=e}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(e){const n=qr(this.scale.x)||1;this.scale.x=n*e/this._texture.orig.width,this._width=e}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(e){const n=qr(this.scale.y)||1;this.scale.y=n*e/this._texture.orig.height,this._height=e}get anchor(){return this._anchor}set anchor(e){this._anchor.copyFrom(e)}get tint(){return this._tint}set tint(e){this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16)}get texture(){return this._texture}set texture(e){this._texture!==e&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=e||Z.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,e&&(e.baseTexture.valid?this._onTextureUpdate():e.once("update",this._onTextureUpdate,this)))}}const hw=new Ce;ke.prototype._cacheAsBitmap=!1;ke.prototype._cacheData=null;ke.prototype._cacheAsBitmapResolution=null;ke.prototype._cacheAsBitmapMultisample=null;class DM{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(ke.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(t){t!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(t){t!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=t,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(t){if(this._cacheAsBitmap===t)return;this._cacheAsBitmap=t;let e;t?(this._cacheData||(this._cacheData=new DM),e=this._cacheData,e.originalRender=this.render,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this.calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(e=this._cacheData,e.sprite&&this._destroyCachedDisplayObject(),this.render=e.originalRender,this.renderCanvas=e.originalRenderCanvas,this.calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}});ke.prototype._renderCached=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(e),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(e))};ke.prototype._initCachedDisplayObject=function(e){var d,f;if((d=this._cacheData)!=null&&d.sprite)return;const n=this.alpha;this.alpha=1,e.batch.flush();const i=this.getLocalBounds(null,!0).clone();if((f=this.filters)!=null&&f.length){const p=this.filters[0].padding;i.pad(p)}i.ceil(X.RESOLUTION);const r=e.renderTexture.current,s=e.renderTexture.sourceFrame.clone(),o=e.renderTexture.destinationFrame.clone(),a=e.projection.transform,l=Li.create({width:i.width,height:i.height,resolution:this.cacheAsBitmapResolution||e.resolution,multisample:this.cacheAsBitmapMultisample??e.multisample}),u=`cacheAsBitmap_${vr()}`;this._cacheData.textureCacheId=u,ae.addToCache(l.baseTexture,u),Z.addToCache(l,u);const c=this.transform.localTransform.copyTo(hw).invert().translate(-i.x,-i.y);this.render=this._cacheData.originalRender,e.render(this,{renderTexture:l,clear:!0,transform:c,skipUpdateTransform:!1}),e.framebuffer.blit(),e.projection.transform=a,e.renderTexture.bind(r,s,o),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=n;const h=new aa(l);h.transform.worldTransform=this.transform.worldTransform,h.anchor.x=-(i.x/i.width),h.anchor.y=-(i.y/i.height),h.alpha=n,h._bounds=this._bounds,this._cacheData.sprite=h,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=h.containsPoint.bind(h)};ke.prototype._renderCachedCanvas=function(e){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(e),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(e))};ke.prototype._initCachedDisplayObjectCanvas=function(e){var c;if((c=this._cacheData)!=null&&c.sprite)return;const n=this.getLocalBounds(null,!0),i=this.alpha;this.alpha=1;const r=e.canvasContext.activeContext,s=e._projTransform;n.ceil(X.RESOLUTION);const o=Li.create({width:n.width,height:n.height}),a=`cacheAsBitmap_${vr()}`;this._cacheData.textureCacheId=a,ae.addToCache(o.baseTexture,a),Z.addToCache(o,a);const l=hw;this.transform.localTransform.copyTo(l),l.invert(),l.tx-=n.x,l.ty-=n.y,this.renderCanvas=this._cacheData.originalRenderCanvas,e.render(this,{renderTexture:o,clear:!0,transform:l,skipUpdateTransform:!1}),e.canvasContext.activeContext=r,e._projTransform=s,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=i;const u=new aa(o);u.transform.worldTransform=this.transform.worldTransform,u.anchor.x=-(n.x/n.width),u.anchor.y=-(n.y/n.height),u.alpha=i,u._bounds=this._bounds,this._cacheData.sprite=u,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=e._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=u.containsPoint.bind(u)};ke.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};ke.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};ke.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,ae.removeFromCache(this._cacheData.textureCacheId),Z.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};ke.prototype._cacheAsBitmapDestroy=function(e){this.cacheAsBitmap=!1,this.destroy(e)};ke.prototype.name=null;Ut.prototype.getChildByName=function(e,n){for(let i=0,r=this.children.length;i<r;i++)if(this.children[i].name===e)return this.children[i];if(n)for(let i=0,r=this.children.length;i<r;i++){const s=this.children[i];if(!s.getChildByName)continue;const o=s.getChildByName(e,!0);if(o)return o}return null};ke.prototype.getGlobalPosition=function(e=new te,n=!1){return this.parent?this.parent.toGlobal(this.position,e,n):(e.x=this.position.x,e.y=this.position.y),e};var FM=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class LM extends rt{constructor(e=1){super(CM,FM,{uAlpha:1}),this.alpha=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}const BM={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},NM=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function UM(t){const e=BM[t],n=e.length;let i=NM,r="";const s="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let o;for(let a=0;a<t;a++){let l=s.replace("%index%",a.toString());o=a,a>=n&&(o=t-a-1),l=l.replace("%value%",e[o].toString()),r+=l,r+=`
`}return i=i.replace("%blur%",r),i=i.replace("%size%",t.toString()),i}const $M=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function zM(t,e){const n=Math.ceil(t/2);let i=$M,r="",s;e?s="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":s="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let o=0;o<t;o++){let a=s.replace("%index%",o.toString());a=a.replace("%sampleIndex%",`${o-(n-1)}.0`),r+=a,r+=`
`}return i=i.replace("%blur%",r),i=i.replace("%size%",t.toString()),i}class mf extends rt{constructor(e,n=8,i=4,r=rt.defaultResolution,s=5){const o=zM(s,e),a=UM(s);super(o,a),this.horizontal=e,this.resolution=r,this._quality=0,this.quality=i,this.blur=n}apply(e,n,i,r){if(i?this.horizontal?this.uniforms.strength=1/i.width*(i.width/n.width):this.uniforms.strength=1/i.height*(i.height/n.height):this.horizontal?this.uniforms.strength=1/e.renderer.width*(e.renderer.width/n.width):this.uniforms.strength=1/e.renderer.height*(e.renderer.height/n.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)e.applyFilter(this,n,i,r);else{const s=e.getFilterTexture(),o=e.renderer;let a=n,l=s;this.state.blend=!1,e.applyFilter(this,a,l,Tn.CLEAR);for(let u=1;u<this.passes-1;u++){e.bindAndClear(a,Tn.BLIT),this.uniforms.uSampler=l;const c=l;l=a,a=c,o.shader.bind(this),o.geometry.draw(5)}this.state.blend=!0,e.applyFilter(this,l,i,r),e.returnFilterTexture(s)}}get blur(){return this.strength}set blur(e){this.padding=1+Math.abs(e)*2,this.strength=e}get quality(){return this._quality}set quality(e){this._quality=e,this.passes=e}}class HM extends rt{constructor(e=8,n=4,i=rt.defaultResolution,r=5){super(),this.blurXFilter=new mf(!0,e,n,i,r),this.blurYFilter=new mf(!1,e,n,i,r),this.resolution=i,this.quality=n,this.blur=e,this.repeatEdgePixels=!1}apply(e,n,i,r){const s=Math.abs(this.blurXFilter.strength),o=Math.abs(this.blurYFilter.strength);if(s&&o){const a=e.getFilterTexture();this.blurXFilter.apply(e,n,a,Tn.CLEAR),this.blurYFilter.apply(e,a,i,r),e.returnFilterTexture(a)}else o?this.blurYFilter.apply(e,n,i,r):this.blurXFilter.apply(e,n,i,r)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(e){this.blurXFilter.blur=this.blurYFilter.blur=e,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(e){this.blurXFilter.quality=this.blurYFilter.quality=e}get blurX(){return this.blurXFilter.blur}set blurX(e){this.blurXFilter.blur=e,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(e){this.blurYFilter.blur=e,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(e){this.blurYFilter.blendMode=e}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(e){this._repeatEdgePixels=e,this.updatePadding()}}var jM=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class gf extends rt{constructor(){const e={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(sw,jM,e),this.alpha=1}_loadMatrix(e,n=!1){let i=e;n&&(this._multiply(i,this.uniforms.m,e),i=this._colorMatrix(i)),this.uniforms.m=i}_multiply(e,n,i){return e[0]=n[0]*i[0]+n[1]*i[5]+n[2]*i[10]+n[3]*i[15],e[1]=n[0]*i[1]+n[1]*i[6]+n[2]*i[11]+n[3]*i[16],e[2]=n[0]*i[2]+n[1]*i[7]+n[2]*i[12]+n[3]*i[17],e[3]=n[0]*i[3]+n[1]*i[8]+n[2]*i[13]+n[3]*i[18],e[4]=n[0]*i[4]+n[1]*i[9]+n[2]*i[14]+n[3]*i[19]+n[4],e[5]=n[5]*i[0]+n[6]*i[5]+n[7]*i[10]+n[8]*i[15],e[6]=n[5]*i[1]+n[6]*i[6]+n[7]*i[11]+n[8]*i[16],e[7]=n[5]*i[2]+n[6]*i[7]+n[7]*i[12]+n[8]*i[17],e[8]=n[5]*i[3]+n[6]*i[8]+n[7]*i[13]+n[8]*i[18],e[9]=n[5]*i[4]+n[6]*i[9]+n[7]*i[14]+n[8]*i[19]+n[9],e[10]=n[10]*i[0]+n[11]*i[5]+n[12]*i[10]+n[13]*i[15],e[11]=n[10]*i[1]+n[11]*i[6]+n[12]*i[11]+n[13]*i[16],e[12]=n[10]*i[2]+n[11]*i[7]+n[12]*i[12]+n[13]*i[17],e[13]=n[10]*i[3]+n[11]*i[8]+n[12]*i[13]+n[13]*i[18],e[14]=n[10]*i[4]+n[11]*i[9]+n[12]*i[14]+n[13]*i[19]+n[14],e[15]=n[15]*i[0]+n[16]*i[5]+n[17]*i[10]+n[18]*i[15],e[16]=n[15]*i[1]+n[16]*i[6]+n[17]*i[11]+n[18]*i[16],e[17]=n[15]*i[2]+n[16]*i[7]+n[17]*i[12]+n[18]*i[17],e[18]=n[15]*i[3]+n[16]*i[8]+n[17]*i[13]+n[18]*i[18],e[19]=n[15]*i[4]+n[16]*i[9]+n[17]*i[14]+n[18]*i[19]+n[19],e}_colorMatrix(e){const n=new Float32Array(e);return n[4]/=255,n[9]/=255,n[14]/=255,n[19]/=255,n}brightness(e,n){const i=[e,0,0,0,0,0,e,0,0,0,0,0,e,0,0,0,0,0,1,0];this._loadMatrix(i,n)}tint(e,n){const i=e>>16&255,r=e>>8&255,s=e&255,o=[i/255,0,0,0,0,0,r/255,0,0,0,0,0,s/255,0,0,0,0,0,1,0];this._loadMatrix(o,n)}greyscale(e,n){const i=[e,e,e,0,0,e,e,e,0,0,e,e,e,0,0,0,0,0,1,0];this._loadMatrix(i,n)}blackAndWhite(e){const n=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(n,e)}hue(e,n){e=(e||0)/180*Math.PI;const i=Math.cos(e),r=Math.sin(e),s=Math.sqrt,o=1/3,a=s(o),l=i+(1-i)*o,u=o*(1-i)-a*r,c=o*(1-i)+a*r,h=o*(1-i)+a*r,d=i+o*(1-i),f=o*(1-i)-a*r,p=o*(1-i)-a*r,g=o*(1-i)+a*r,v=i+o*(1-i),m=[l,u,c,0,0,h,d,f,0,0,p,g,v,0,0,0,0,0,1,0];this._loadMatrix(m,n)}contrast(e,n){const i=(e||0)+1,r=-.5*(i-1),s=[i,0,0,0,r,0,i,0,0,r,0,0,i,0,r,0,0,0,1,0];this._loadMatrix(s,n)}saturate(e=0,n){const i=e*2/3+1,r=(i-1)*-.5,s=[i,r,r,0,0,r,i,r,0,0,r,r,i,0,0,0,0,0,1,0];this._loadMatrix(s,n)}desaturate(){this.saturate(-1)}negative(e){const n=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(n,e)}sepia(e){const n=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(n,e)}technicolor(e){const n=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(n,e)}polaroid(e){const n=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(n,e)}toBGR(e){const n=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(n,e)}kodachrome(e){const n=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(n,e)}browni(e){const n=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(n,e)}vintage(e){const n=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(n,e)}colorTone(e,n,i,r,s){e=e||.2,n=n||.15,i=i||16770432,r=r||3375104;const o=(i>>16&255)/255,a=(i>>8&255)/255,l=(i&255)/255,u=(r>>16&255)/255,c=(r>>8&255)/255,h=(r&255)/255,d=[.3,.59,.11,0,0,o,a,l,e,0,u,c,h,n,0,o-u,a-c,l-h,0,0];this._loadMatrix(d,s)}night(e,n){e=e||.1;const i=[e*-2,-e,0,0,0,-e,0,e,0,0,0,e,e*2,0,0,0,0,0,1,0];this._loadMatrix(i,n)}predator(e,n){const i=[11.224130630493164*e,-4.794486999511719*e,-2.8746118545532227*e,0*e,.40342438220977783*e,-3.6330697536468506*e,9.193157196044922*e,-2.951810836791992*e,0*e,-1.316135048866272*e,-3.2184197902679443*e,-4.2375030517578125*e,7.476448059082031*e,0*e,.8044459223747253*e,0,0,0,1,0];this._loadMatrix(i,n)}lsd(e){const n=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(n,e)}reset(){const e=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(e,!1)}get matrix(){return this.uniforms.m}set matrix(e){this.uniforms.m=e}get alpha(){return this.uniforms.uAlpha}set alpha(e){this.uniforms.uAlpha=e}}gf.prototype.grayscale=gf.prototype.greyscale;var GM=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,VM=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class WM extends rt{constructor(e,n){const i=new Ce;e.renderable=!1,super(VM,GM,{mapSampler:e._texture,filterMatrix:i,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=e,this.maskMatrix=i,n==null&&(n=20),this.scale=new te(n,n)}apply(e,n,i,r){this.uniforms.filterMatrix=e.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const s=this.maskSprite.worldTransform,o=Math.sqrt(s.a*s.a+s.b*s.b),a=Math.sqrt(s.c*s.c+s.d*s.d);o!==0&&a!==0&&(this.uniforms.rotation[0]=s.a/o,this.uniforms.rotation[1]=s.b/o,this.uniforms.rotation[2]=s.c/a,this.uniforms.rotation[3]=s.d/a),e.applyFilter(this,n,i,r)}get map(){return this.uniforms.mapSampler}set map(e){this.uniforms.mapSampler=e}}var XM=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,YM=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class qM extends rt{constructor(){super(YM,XM)}}var KM=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class ZM extends rt{constructor(e=.5,n=Math.random()){super(sw,KM,{uNoise:0,uSeed:0}),this.noise=e,this.seed=n}get noise(){return this.uniforms.uNoise}set noise(e){this.uniforms.uNoise=e}get seed(){return this.uniforms.uSeed}set seed(e){this.uniforms.uSeed=e}}const h0={AlphaFilter:LM,BlurFilter:HM,BlurFilterPass:mf,ColorMatrixFilter:gf,DisplacementFilter:WM,FXAAFilter:qM,NoiseFilter:ZM};Object.entries(h0).forEach(([t,e])=>{Object.defineProperty(h0,t,{get(){return fe("7.1.0",`filters.${t} has moved to ${t}`),e}})});class la{constructor(e){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=la.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new te,this.page=new te,this.AT_TARGET=1,this.BUBBLING_PHASE=2,this.CAPTURING_PHASE=3,this.NONE=0,this.manager=e}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(e,n,i){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(e,n,i,r,s){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class yu extends la{constructor(){super(...arguments),this.client=new te,this.movement=new te,this.offset=new te,this.global=new te,this.screen=new te}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getModifierState(e){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(e)}initMouseEvent(e,n,i,r,s,o,a,l,u,c,h,d,f,p,g){throw new Error("Method not implemented.")}}class sn extends yu{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class ws extends yu{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}ws.DOM_DELTA_PIXEL=0;ws.DOM_DELTA_LINE=1;ws.DOM_DELTA_PAGE=2;const QM=2048,JM=new te,Eh=new te;class eO{constructor(e){this.dispatch=new mr,this.moveOnAll=!1,this.mappingState={trackingData:{}},this.eventPool=new Map,this.rootTarget=e,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(e,n){this.mappingTable[e]||(this.mappingTable[e]=[]),this.mappingTable[e].push({fn:n,priority:0}),this.mappingTable[e].sort((i,r)=>i.priority-r.priority)}dispatchEvent(e,n){e.propagationStopped=!1,e.propagationImmediatelyStopped=!1,this.propagate(e,n),this.dispatch.emit(n||e.type,e)}mapEvent(e){if(!this.rootTarget)return;const n=this.mappingTable[e.type];if(n)for(let i=0,r=n.length;i<r;i++)n[i].fn(e);else console.warn(`[EventBoundary]: Event mapping not defined for ${e.type}`)}hitTest(e,n){const i=this.hitTestRecursive(this.rootTarget,this.rootTarget.interactive,JM.set(e,n),this.hitTestFn,this.hitPruneFn);return i&&i[0]}propagate(e,n){if(!e.target)return;const i=e.composedPath();e.eventPhase=e.CAPTURING_PHASE;for(let r=0,s=i.length-1;r<s;r++)if(e.currentTarget=i[r],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return;if(e.eventPhase=e.AT_TARGET,e.currentTarget=e.target,this.notifyTarget(e,n),!(e.propagationStopped||e.propagationImmediatelyStopped)){e.eventPhase=e.BUBBLING_PHASE;for(let r=i.length-2;r>=0;r--)if(e.currentTarget=i[r],this.notifyTarget(e,n),e.propagationStopped||e.propagationImmediatelyStopped)return}}all(e,n,i=this.rootTarget){e.eventPhase=e.BUBBLING_PHASE;const r=i.children;if(r)for(let s=0;s<r.length;s++)this.all(e,n,r[s]);e.currentTarget=i,this.notifyTarget(e,n)}propagationPath(e){const n=[e];for(let i=0;i<QM&&e!==this.rootTarget;i++){if(!e.parent)throw new Error("Cannot find propagation path to disconnected target");n.push(e.parent),e=e.parent}return n.reverse(),n}hitTestRecursive(e,n,i,r,s){if(!e||!e.visible||s(e,i))return null;if(e.interactiveChildren&&e.children){const o=e.children;for(let a=o.length-1;a>=0;a--){const l=o[a],u=this.hitTestRecursive(l,n||l.interactive,i,r,s);if(u){if(u.length>0&&!u[u.length-1].parent)continue;return(u.length>0||e.interactive)&&u.push(e),u}}}return n&&r(e,i)?e.interactive?[e]:[]:null}hitPruneFn(e,n){var i;if(e.hitArea&&(e.worldTransform.applyInverse(n,Eh),!e.hitArea.contains(Eh.x,Eh.y)))return!0;if(e._mask){const r=e._mask.isMaskData?e._mask.maskObject:e._mask;if(r&&!((i=r.containsPoint)!=null&&i.call(r,n)))return!0}return!1}hitTestFn(e,n){return e.hitArea?!0:e.containsPoint?e.containsPoint(n):!1}notifyTarget(e,n){var s,o;n=n??e.type;const i=`on${n}`;(o=(s=e.currentTarget)[i])==null||o.call(s,e);const r=e.eventPhase===e.CAPTURING_PHASE||e.eventPhase===e.AT_TARGET?`${n}capture`:n;this.notifyListeners(e,r),e.eventPhase===e.AT_TARGET&&this.notifyListeners(e,n)}mapPointerDown(e){if(!(e instanceof sn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.createPointerEvent(e);if(this.dispatchEvent(n,"pointerdown"),n.pointerType==="touch")this.dispatchEvent(n,"touchstart");else if(n.pointerType==="mouse"||n.pointerType==="pen"){const r=n.button===2;this.dispatchEvent(n,r?"rightdown":"mousedown")}const i=this.trackingData(e.pointerId);i.pressTargetsByButton[e.button]=n.composedPath(),this.freeEvent(n)}mapPointerMove(e){var a,l;if(!(e instanceof sn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.createPointerEvent(e),i=n.pointerType==="mouse"||n.pointerType==="pen",r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.overTargets);if(((a=r.overTargets)==null?void 0:a.length)>0&&s!==n.target){const u=e.type==="mousemove"?"mouseout":"pointerout",c=this.createPointerEvent(e,u,s);if(this.dispatchEvent(c,"pointerout"),i&&this.dispatchEvent(c,"mouseout"),!n.composedPath().includes(s)){const h=this.createPointerEvent(e,"pointerleave",s);for(h.eventPhase=h.AT_TARGET;h.target&&!n.composedPath().includes(h.target);)h.currentTarget=h.target,this.notifyTarget(h),i&&this.notifyTarget(h,"mouseleave"),h.target=h.target.parent;this.freeEvent(h)}this.freeEvent(c)}if(s!==n.target){const u=e.type==="mousemove"?"mouseover":"pointerover",c=this.clonePointerEvent(n,u);this.dispatchEvent(c,"pointerover"),i&&this.dispatchEvent(c,"mouseover");let h=s==null?void 0:s.parent;for(;h&&h!==this.rootTarget.parent&&h!==n.target;)h=h.parent;if(!h||h===this.rootTarget.parent){const f=this.clonePointerEvent(n,"pointerenter");for(f.eventPhase=f.AT_TARGET;f.target&&f.target!==s&&f.target!==this.rootTarget.parent;)f.currentTarget=f.target,this.notifyTarget(f),i&&this.notifyTarget(f,"mouseenter"),f.target=f.target.parent;this.freeEvent(f)}this.freeEvent(c)}const o=this.moveOnAll?"all":"dispatchEvent";this[o](n,"pointermove"),this.all(n,"globalpointermove"),n.pointerType==="touch"&&(this[o](n,"touchmove"),this.all(n,"globaltouchmove")),i&&(this[o](n,"mousemove"),this.all(n,"globalmousemove"),this.cursor=(l=n.target)==null?void 0:l.cursor),r.overTargets=n.composedPath(),this.freeEvent(n)}mapPointerOver(e){var o;if(!(e instanceof sn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),i=this.createPointerEvent(e),r=i.pointerType==="mouse"||i.pointerType==="pen";this.dispatchEvent(i,"pointerover"),r&&this.dispatchEvent(i,"mouseover"),i.pointerType==="mouse"&&(this.cursor=(o=i.target)==null?void 0:o.cursor);const s=this.clonePointerEvent(i,"pointerenter");for(s.eventPhase=s.AT_TARGET;s.target&&s.target!==this.rootTarget.parent;)s.currentTarget=s.target,this.notifyTarget(s),r&&this.notifyTarget(s,"mouseenter"),s.target=s.target.parent;n.overTargets=i.composedPath(),this.freeEvent(i),this.freeEvent(s)}mapPointerOut(e){if(!(e instanceof sn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId);if(n.overTargets){const i=e.pointerType==="mouse"||e.pointerType==="pen",r=this.findMountedTarget(n.overTargets),s=this.createPointerEvent(e,"pointerout",r);this.dispatchEvent(s),i&&this.dispatchEvent(s,"mouseout");const o=this.createPointerEvent(e,"pointerleave",r);for(o.eventPhase=o.AT_TARGET;o.target&&o.target!==this.rootTarget.parent;)o.currentTarget=o.target,this.notifyTarget(o),i&&this.notifyTarget(o,"mouseleave"),o.target=o.target.parent;n.overTargets=null,this.freeEvent(s),this.freeEvent(o)}this.cursor=null}mapPointerUp(e){if(!(e instanceof sn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=performance.now(),i=this.createPointerEvent(e);if(this.dispatchEvent(i,"pointerup"),i.pointerType==="touch")this.dispatchEvent(i,"touchend");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const a=i.button===2;this.dispatchEvent(i,a?"rightup":"mouseup")}const r=this.trackingData(e.pointerId),s=this.findMountedTarget(r.pressTargetsByButton[e.button]);let o=s;if(s&&!i.composedPath().includes(s)){let a=s;for(;a&&!i.composedPath().includes(a);){if(i.currentTarget=a,this.notifyTarget(i,"pointerupoutside"),i.pointerType==="touch")this.notifyTarget(i,"touchendoutside");else if(i.pointerType==="mouse"||i.pointerType==="pen"){const l=i.button===2;this.notifyTarget(i,l?"rightupoutside":"mouseupoutside")}a=a.parent}delete r.pressTargetsByButton[e.button],o=a}if(o){const a=this.clonePointerEvent(i,"click");a.target=o,a.path=null,r.clicksByButton[e.button]||(r.clicksByButton[e.button]={clickCount:0,target:a.target,timeStamp:n});const l=r.clicksByButton[e.button];if(l.target===a.target&&n-l.timeStamp<200?++l.clickCount:l.clickCount=1,l.target=a.target,l.timeStamp=n,a.detail=l.clickCount,a.pointerType==="mouse"){const u=a.button===2;this.dispatchEvent(a,u?"rightclick":"click")}else a.pointerType==="touch"&&this.dispatchEvent(a,"tap");this.dispatchEvent(a,"pointertap"),this.freeEvent(a)}this.freeEvent(i)}mapPointerUpOutside(e){if(!(e instanceof sn)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const n=this.trackingData(e.pointerId),i=this.findMountedTarget(n.pressTargetsByButton[e.button]),r=this.createPointerEvent(e);if(i){let s=i;for(;s;)r.currentTarget=s,this.notifyTarget(r,"pointerupoutside"),r.pointerType==="touch"?this.notifyTarget(r,"touchendoutside"):(r.pointerType==="mouse"||r.pointerType==="pen")&&this.notifyTarget(r,r.button===2?"rightupoutside":"mouseupoutside"),s=s.parent;delete n.pressTargetsByButton[e.button]}this.freeEvent(r)}mapWheel(e){if(!(e instanceof ws)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const n=this.createWheelEvent(e);this.dispatchEvent(n),this.freeEvent(n)}findMountedTarget(e){if(!e)return null;let n=e[0];for(let i=1;i<e.length&&e[i].parent===n;i++)n=e[i];return n}createPointerEvent(e,n,i){const r=this.allocateEvent(sn);return this.copyPointerData(e,r),this.copyMouseData(e,r),this.copyData(e,r),r.nativeEvent=e.nativeEvent,r.originalEvent=e,r.target=i??this.hitTest(r.global.x,r.global.y),typeof n=="string"&&(r.type=n),r}createWheelEvent(e){const n=this.allocateEvent(ws);return this.copyWheelData(e,n),this.copyMouseData(e,n),this.copyData(e,n),n.nativeEvent=e.nativeEvent,n.originalEvent=e,n.target=this.hitTest(n.global.x,n.global.y),n}clonePointerEvent(e,n){const i=this.allocateEvent(sn);return i.nativeEvent=e.nativeEvent,i.originalEvent=e.originalEvent,this.copyPointerData(e,i),this.copyMouseData(e,i),this.copyData(e,i),i.target=e.target,i.path=e.composedPath().slice(),i.type=n??i.type,i}copyWheelData(e,n){n.deltaMode=e.deltaMode,n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ}copyPointerData(e,n){e instanceof sn&&n instanceof sn&&(n.pointerId=e.pointerId,n.width=e.width,n.height=e.height,n.isPrimary=e.isPrimary,n.pointerType=e.pointerType,n.pressure=e.pressure,n.tangentialPressure=e.tangentialPressure,n.tiltX=e.tiltX,n.tiltY=e.tiltY,n.twist=e.twist)}copyMouseData(e,n){e instanceof yu&&n instanceof yu&&(n.altKey=e.altKey,n.button=e.button,n.buttons=e.buttons,n.client.copyFrom(e.client),n.ctrlKey=e.ctrlKey,n.metaKey=e.metaKey,n.movement.copyFrom(e.movement),n.screen.copyFrom(e.screen),n.global.copyFrom(e.global))}copyData(e,n){n.isTrusted=e.isTrusted,n.srcElement=e.srcElement,n.timeStamp=performance.now(),n.type=e.type,n.detail=e.detail,n.view=e.view,n.which=e.which,n.layer.copyFrom(e.layer),n.page.copyFrom(e.page)}trackingData(e){return this.mappingState.trackingData[e]||(this.mappingState.trackingData[e]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[e]}allocateEvent(e){this.eventPool.has(e)||this.eventPool.set(e,[]);const n=this.eventPool.get(e).pop()||new e(this);return n.eventPhase=n.NONE,n.currentTarget=null,n.path=null,n.target=null,n}freeEvent(e){if(e.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const n=e.constructor;this.eventPool.has(n)||this.eventPool.set(n,[]),this.eventPool.get(n).push(e)}notifyListeners(e,n){const i=e.currentTarget._events[n];if(i)if("fn"in i)i.once&&e.currentTarget.removeListener(n,i.fn,void 0,!0),i.fn.call(i.context,e);else for(let r=0,s=i.length;r<s&&!e.propagationImmediatelyStopped;r++)i[r].once&&e.currentTarget.removeListener(n,i[r].fn,void 0,!0),i[r].fn.call(i[r].context,e)}}const tO=1,nO={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"};class dw{constructor(e){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=e,this.rootBoundary=new eO(null),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new sn(null),this.rootWheelEvent=new ws(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}init(){const{view:e,resolution:n}=this.renderer;this.setTargetElement(e),this.resolution=n}resolutionChange(e){this.resolution=e}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(e){e=e||"default";let n=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(n=!1),this.currentCursor===e)return;this.currentCursor=e;const i=this.cursorStyles[e];if(i)switch(typeof i){case"string":n&&(this.domElement.style.cursor=i);break;case"function":i(e);break;case"object":n&&Object.assign(this.domElement.style,i);break}else n&&typeof e=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,e)&&(this.domElement.style.cursor=e)}onPointerDown(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch")return;const n=this.normalizeToPointerData(e);this.autoPreventDefault&&n[0].isNormalized&&(e.cancelable||!("cancelable"in e))&&e.preventDefault();for(let i=0,r=n.length;i<r;i++){const s=n[i],o=this.bootstrapEvent(this.rootPointerEvent,s);this.rootBoundary.mapEvent(o)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch")return;const n=this.normalizeToPointerData(e);for(let i=0,r=n.length;i<r;i++){const s=this.bootstrapEvent(this.rootPointerEvent,n[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch")return;let n=e.target;e.composedPath&&e.composedPath().length>0&&(n=e.composedPath()[0]);const i=n!==this.domElement?"outside":"",r=this.normalizeToPointerData(e);for(let s=0,o=r.length;s<o;s++){const a=this.bootstrapEvent(this.rootPointerEvent,r[s]);a.type+=i,this.rootBoundary.mapEvent(a)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(e){if(this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.supportsTouchEvents&&e.pointerType==="touch")return;const n=this.normalizeToPointerData(e);for(let i=0,r=n.length;i<r;i++){const s=this.bootstrapEvent(this.rootPointerEvent,n[i]);this.rootBoundary.mapEvent(s)}this.setCursor(this.rootBoundary.cursor)}onWheel(e){const n=this.normalizeWheelEvent(e);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(n)}setTargetElement(e){this.removeEvents(),this.domElement=e,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;const e=this.domElement.style;e&&(globalThis.navigator.msPointerEnabled?(e.msContentZooming="none",e.msTouchAction="none"):this.supportsPointerEvents&&(e.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0)),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;const e=this.domElement.style;globalThis.navigator.msPointerEnabled?(e.msContentZooming="",e.msTouchAction=""):this.supportsPointerEvents&&(e.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(e,n,i){let r;this.domElement.parentElement?r=this.domElement.getBoundingClientRect():r={x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0};const s=1/this.resolution;e.x=(n-r.left)*(this.domElement.width/r.width)*s,e.y=(i-r.top)*(this.domElement.height/r.height)*s}normalizeToPointerData(e){const n=[];if(this.supportsTouchEvents&&e instanceof TouchEvent)for(let i=0,r=e.changedTouches.length;i<r;i++){const s=e.changedTouches[i];typeof s.button>"u"&&(s.button=0),typeof s.buttons>"u"&&(s.buttons=1),typeof s.isPrimary>"u"&&(s.isPrimary=e.touches.length===1&&e.type==="touchstart"),typeof s.width>"u"&&(s.width=s.radiusX||1),typeof s.height>"u"&&(s.height=s.radiusY||1),typeof s.tiltX>"u"&&(s.tiltX=0),typeof s.tiltY>"u"&&(s.tiltY=0),typeof s.pointerType>"u"&&(s.pointerType="touch"),typeof s.pointerId>"u"&&(s.pointerId=s.identifier||0),typeof s.pressure>"u"&&(s.pressure=s.force||.5),typeof s.twist>"u"&&(s.twist=0),typeof s.tangentialPressure>"u"&&(s.tangentialPressure=0),typeof s.layerX>"u"&&(s.layerX=s.offsetX=s.clientX),typeof s.layerY>"u"&&(s.layerY=s.offsetY=s.clientY),s.isNormalized=!0,s.type=e.type,n.push(s)}else if(!globalThis.MouseEvent||e instanceof MouseEvent&&(!this.supportsPointerEvents||!(e instanceof globalThis.PointerEvent))){const i=e;typeof i.isPrimary>"u"&&(i.isPrimary=!0),typeof i.width>"u"&&(i.width=1),typeof i.height>"u"&&(i.height=1),typeof i.tiltX>"u"&&(i.tiltX=0),typeof i.tiltY>"u"&&(i.tiltY=0),typeof i.pointerType>"u"&&(i.pointerType="mouse"),typeof i.pointerId>"u"&&(i.pointerId=tO),typeof i.pressure>"u"&&(i.pressure=.5),typeof i.twist>"u"&&(i.twist=0),typeof i.tangentialPressure>"u"&&(i.tangentialPressure=0),i.isNormalized=!0,n.push(i)}else n.push(e);return n}normalizeWheelEvent(e){const n=this.rootWheelEvent;return this.transferMouseData(n,e),n.deltaX=e.deltaX,n.deltaY=e.deltaY,n.deltaZ=e.deltaZ,n.deltaMode=e.deltaMode,this.mapPositionToPoint(n.screen,e.clientX,e.clientY),n.global.copyFrom(n.screen),n.offset.copyFrom(n.screen),n.nativeEvent=e,n.type=e.type,n}bootstrapEvent(e,n){return e.originalEvent=null,e.nativeEvent=n,e.pointerId=n.pointerId,e.width=n.width,e.height=n.height,e.isPrimary=n.isPrimary,e.pointerType=n.pointerType,e.pressure=n.pressure,e.tangentialPressure=n.tangentialPressure,e.tiltX=n.tiltX,e.tiltY=n.tiltY,e.twist=n.twist,this.transferMouseData(e,n),this.mapPositionToPoint(e.screen,n.clientX,n.clientY),e.global.copyFrom(e.screen),e.offset.copyFrom(e.screen),e.isTrusted=n.isTrusted,e.type==="pointerleave"&&(e.type="pointerout"),e.type.startsWith("mouse")&&(e.type=e.type.replace("mouse","pointer")),e.type.startsWith("touch")&&(e.type=nO[e.type]||e.type),e}transferMouseData(e,n){e.isTrusted=n.isTrusted,e.srcElement=n.srcElement,e.timeStamp=performance.now(),e.type=n.type,e.altKey=n.altKey,e.button=n.button,e.buttons=n.buttons,e.client.x=n.clientX,e.client.y=n.clientY,e.ctrlKey=n.ctrlKey,e.metaKey=n.metaKey,e.movement.x=n.movementX,e.movement.y=n.movementY,e.page.x=n.pageX,e.page.y=n.pageY,e.relatedTarget=null,e.shiftKey=n.shiftKey}}dw.extension={name:"events",type:[W.RendererSystem,W.CanvasRendererSystem]};Q.add(dw);const iO={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,interactive:!1,interactiveChildren:!0,hitArea:null,addEventListener(t,e,n){const i=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,r=typeof e=="function"?void 0:e;t=i?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.on(t,e,r)},removeEventListener(t,e,n){const i=typeof n=="boolean"&&n||typeof n=="object"&&n.capture,r=typeof e=="function"?void 0:e;t=i?`${t}capture`:t,e=typeof e=="function"?e:e.handleEvent,this.off(t,e,r)},dispatchEvent(t){if(!(t instanceof la))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return t.defaultPrevented=!1,t.path=null,t.target=this,t.manager.dispatchEvent(t),!t.defaultPrevented}};ke.mixin(iO);const rO={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};ke.mixin(rO);const sO=9,Va=100,oO=0,aO=0,d0=2,f0=1,lO=-1e3,uO=-1e3,cO=2;class fw{constructor(e){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(qn.tablet||qn.phone)&&this.createTouchHook();const n=document.createElement("div");n.style.width=`${Va}px`,n.style.height=`${Va}px`,n.style.position="absolute",n.style.top=`${oO}px`,n.style.left=`${aO}px`,n.style.zIndex=d0.toString(),this.div=n,this.renderer=e,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const e=document.createElement("button");e.style.width=`${f0}px`,e.style.height=`${f0}px`,e.style.position="absolute",e.style.top=`${lO}px`,e.style.left=`${uO}px`,e.style.zIndex=cO.toString(),e.style.backgroundColor="#FF0000",e.title="select to enable accessibility for this content",e.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(e),this._hookDiv=e}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var e;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(e=this.renderer.view.parentNode)==null||e.appendChild(this.div))}deactivate(){var e;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(e=this.div.parentNode)==null||e.removeChild(this.div))}updateAccessibleObjects(e){if(!e.visible||!e.accessibleChildren)return;e.accessible&&e.interactive&&(e._accessibleActive||this.addChild(e),e.renderId=this.renderId);const n=e.children;if(n)for(let i=0;i<n.length;i++)this.updateAccessibleObjects(n[i])}update(){const e=performance.now();if(qn.android.device&&e<this.androidUpdateCount||(this.androidUpdateCount=e+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:n,y:i,width:r,height:s}=this.renderer.view.getBoundingClientRect(),{width:o,height:a,resolution:l}=this.renderer,u=r/o*l,c=s/a*l;let h=this.div;h.style.left=`${n}px`,h.style.top=`${i}px`,h.style.width=`${o}px`,h.style.height=`${a}px`;for(let d=0;d<this.children.length;d++){const f=this.children[d];if(f.renderId!==this.renderId)f._accessibleActive=!1,ss(this.children,d,1),this.div.removeChild(f._accessibleDiv),this.pool.push(f._accessibleDiv),f._accessibleDiv=null,d--;else{h=f._accessibleDiv;let p=f.hitArea;const g=f.worldTransform;f.hitArea?(h.style.left=`${(g.tx+p.x*g.a)*u}px`,h.style.top=`${(g.ty+p.y*g.d)*c}px`,h.style.width=`${p.width*g.a*u}px`,h.style.height=`${p.height*g.d*c}px`):(p=f.getBounds(),this.capHitArea(p),h.style.left=`${p.x*u}px`,h.style.top=`${p.y*c}px`,h.style.width=`${p.width*u}px`,h.style.height=`${p.height*c}px`,h.title!==f.accessibleTitle&&f.accessibleTitle!==null&&(h.title=f.accessibleTitle),h.getAttribute("aria-label")!==f.accessibleHint&&f.accessibleHint!==null&&h.setAttribute("aria-label",f.accessibleHint)),(f.accessibleTitle!==h.title||f.tabIndex!==h.tabIndex)&&(h.title=f.accessibleTitle,h.tabIndex=f.tabIndex,this.debug&&this.updateDebugHTML(h))}}this.renderId++}updateDebugHTML(e){e.innerHTML=`type: ${e.type}</br> title : ${e.title}</br> tabIndex: ${e.tabIndex}`}capHitArea(e){e.x<0&&(e.width+=e.x,e.x=0),e.y<0&&(e.height+=e.y,e.y=0);const{width:n,height:i}=this.renderer;e.x+e.width>n&&(e.width=n-e.x),e.y+e.height>i&&(e.height=i-e.y)}addChild(e){let n=this.pool.pop();n||(n=document.createElement("button"),n.style.width=`${Va}px`,n.style.height=`${Va}px`,n.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",n.style.position="absolute",n.style.zIndex=d0.toString(),n.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?n.setAttribute("aria-live","off"):n.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?n.setAttribute("aria-relevant","additions"):n.setAttribute("aria-relevant","text"),n.addEventListener("click",this._onClick.bind(this)),n.addEventListener("focus",this._onFocus.bind(this)),n.addEventListener("focusout",this._onFocusOut.bind(this))),n.style.pointerEvents=e.accessiblePointerEvents,n.type=e.accessibleType,e.accessibleTitle&&e.accessibleTitle!==null?n.title=e.accessibleTitle:(!e.accessibleHint||e.accessibleHint===null)&&(n.title=`displayObject ${e.tabIndex}`),e.accessibleHint&&e.accessibleHint!==null&&n.setAttribute("aria-label",e.accessibleHint),this.debug&&this.updateDebugHTML(n),e._accessibleActive=!0,e._accessibleDiv=n,n.displayObject=e,this.children.push(e),this.div.appendChild(e._accessibleDiv),e._accessibleDiv.tabIndex=e.tabIndex}_dispatchEvent(e,n){const{displayObject:i}=e.target,r=this.renderer.events.rootBoundary,s=Object.assign(new la(r),{target:i});r.rootTarget=this.renderer.lastObjectRendered,n.forEach(o=>r.dispatchEvent(s,o))}_onClick(e){this._dispatchEvent(e,["click","pointertap","tap"])}_onFocus(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","assertive"),this._dispatchEvent(e,["mouseover"])}_onFocusOut(e){e.target.getAttribute("aria-live")||e.target.setAttribute("aria-live","polite"),this._dispatchEvent(e,["mouseout"])}_onKeyDown(e){e.keyCode===sO&&this.activate()}_onMouseMove(e){e.movementX===0&&e.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}fw.extension={name:"accessibility",type:[W.RendererPlugin,W.CanvasRendererPlugin]};Q.add(fw);const vf=class{constructor(t){this.stage=new Ut,t=Object.assign({forceCanvas:!1},t),this.renderer=EM(t),vf._plugins.forEach(e=>{e.init.call(this,t)})}render(){this.renderer.render(this.stage)}get view(){return this.renderer.view}get screen(){return this.renderer.screen}destroy(t,e){const n=vf._plugins.slice(0);n.reverse(),n.forEach(i=>{i.destroy.call(this)}),this.stage.destroy(e),this.stage=null,this.renderer.destroy(t),this.renderer=null}};let pm=vf;pm._plugins=[];Q.handleByList(W.Application,pm._plugins);class pw{static init(e){Object.defineProperty(this,"resizeTo",{set(n){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=n,n&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let n,i;if(this._resizeTo===globalThis.window)n=globalThis.innerWidth,i=globalThis.innerHeight;else{const{clientWidth:r,clientHeight:s}=this._resizeTo;n=r,i=s}this.renderer.resize(n,i),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=e.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}pw.extension=W.Application;Q.add(pw);const p0={loader:W.LoadParser,resolver:W.ResolveParser,cache:W.CacheParser,detection:W.DetectionParser};Q.handle(W.Asset,t=>{const e=t.ref;Object.entries(p0).filter(([n])=>!!e[n]).forEach(([n,i])=>Q.add(Object.assign(e[n],{extension:e[n].extension??i})))},t=>{const e=t.ref;Object.keys(p0).filter(n=>!!e[n]).forEach(n=>Q.remove(e[n]))});class hO{constructor(e,n=!1){this._loader=e,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=n}add(e){e.forEach(n=>{this._assetList.push(n)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const e=[],n=Math.min(this._assetList.length,this._maxConcurrent);for(let i=0;i<n;i++)e.push(this._assetList.pop());await this._loader.load(e),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(e){this._isActive!==e&&(this._isActive=e,e&&!this._isLoading&&this._next())}}function mw(t,e){if(Array.isArray(e)){for(const n of e)if(t.startsWith(`data:${n}`))return!0;return!1}return t.startsWith(`data:${e}`)}function lc(t,e){const n=t.split("?")[0],i=ot.extname(n).toLowerCase();return Array.isArray(e)?e.includes(i):i===e}const Zn=(t,e)=>(Array.isArray(t)||(t=[t]),e?t.map(n=>typeof n=="string"?e(n):n):t),yf=(t,e)=>{const n=e.split("?")[1];return n&&(t+=`?${n}`),t};function gw(t,e,n,i,r){const s=e[n];for(let o=0;o<s.length;o++){const a=s[o];n<e.length-1?gw(t.replace(i[n],a),e,n+1,i,r):r.push(t.replace(i[n],a))}}function dO(t){const e=/\{(.*?)\}/g,n=t.match(e),i=[];if(n){const r=[];n.forEach(s=>{const o=s.substring(1,s.length-1).split(",");r.push(o)}),gw(t,r,0,n,i)}else i.push(t);return i}const xu=t=>!Array.isArray(t);class fO{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(e){return this._cache.has(e)}get(e){const n=this._cache.get(e);return n||console.warn(`[Assets] Asset id ${e} was not found in the Cache`),n}set(e,n){const i=Zn(e);let r;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.test(n)){r=l.getCacheableAssets(i,n);break}}r||(r={},i.forEach(a=>{r[a]=n}));const s=Object.keys(r),o={cacheKeys:s,keys:i};if(i.forEach(a=>{this._cacheMap.set(a,o)}),s.forEach(a=>{this._cache.has(a)&&this._cache.get(a)!==n&&console.warn("[Cache] already has key:",a),this._cache.set(a,r[a])}),n instanceof Z){const a=n;i.forEach(l=>{a.baseTexture!==Z.EMPTY.baseTexture&&ae.addToCache(a.baseTexture,l),Z.addToCache(a,l)})}}remove(e){if(this._cacheMap.get(e),!this._cacheMap.has(e)){console.warn(`[Assets] Asset id ${e} was not found in the Cache`);return}const n=this._cacheMap.get(e);n.cacheKeys.forEach(r=>{this._cache.delete(r)}),n.keys.forEach(r=>{this._cacheMap.delete(r)})}get parsers(){return this._parsers}}const Ys=new fO;class pO{constructor(){this._parsers=[],this.promiseCache={}}reset(){this.promiseCache={}}_getLoadPromiseAndParser(e,n){const i={promise:null,parser:null};return i.promise=(async()=>{var s,o;let r=null;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];if(l.load&&((s=l.test)!=null&&s.call(l,e,n,this))){r=await l.load(e,n,this),i.parser=l;break}}if(!i.parser)return console.warn(`[Assets] ${e} could not be loaded as we don't know how to parse it, ensure the correct parser has being added`),null;for(let a=0;a<this.parsers.length;a++){const l=this.parsers[a];l.parse&&l.parse&&await((o=l.testParse)==null?void 0:o.call(l,r,n,this))&&(r=await l.parse(r,n,this)||r,i.parser=l)}return r})(),i}async load(e,n){let i=0;const r={},s=xu(e),o=Zn(e,u=>({src:u})),a=o.length,l=o.map(async u=>{const c=ot.toAbsolute(u.src);if(!r[u.src])try{this.promiseCache[c]||(this.promiseCache[c]=this._getLoadPromiseAndParser(c,u)),r[u.src]=await this.promiseCache[c].promise,n&&n(++i/a)}catch(h){throw delete this.promiseCache[c],delete r[u.src],new Error(`[Loader.load] Failed to load ${c}.
${h}`)}});return await Promise.all(l),s?r[o[0].src]:r}async unload(e){const i=Zn(e,r=>({src:r})).map(async r=>{var a,l;const s=ot.toAbsolute(r.src),o=this.promiseCache[s];if(o){const u=await o.promise;(l=(a=o.parser)==null?void 0:a.unload)==null||l.call(a,u,r,this),delete this.promiseCache[s]}});await Promise.all(i)}get parsers(){return this._parsers}}var $n=(t=>(t[t.Low=0]="Low",t[t.Normal=1]="Normal",t[t.High=2]="High",t))($n||{});const mO={extension:{type:W.LoadParser,priority:$n.Low},test(t){return ot.extname(t).toLowerCase()===".json"},async load(t){return await(await X.ADAPTER.fetch(t)).json()}};Q.add(mO);const gO={extension:{type:W.LoadParser,priority:$n.Low},test(t){return ot.extname(t).toLowerCase()===".txt"},async load(t){return await(await X.ADAPTER.fetch(t)).text()}};Q.add(gO);const vO=["normal","bold","100","200","300","400","500","600","700","800","900"],yO=[".ttf",".otf",".woff",".woff2"],xO=["font/ttf","font/otf","font/woff","font/woff2"];function _O(t){const e=ot.extname(t);return ot.basename(t,e).replace(/(-|_)/g," ").toLowerCase().split(" ").map(s=>s.charAt(0).toUpperCase()+s.slice(1)).join(" ")}const vw={extension:{type:W.LoadParser,priority:$n.Low},test(t){return mw(t,xO)||lc(t,yO)},async load(t,e){var i,r,s;const n=X.ADAPTER.getFontFaceSet();if(n){const o=[],a=((i=e.data)==null?void 0:i.family)??_O(t),l=((s=(r=e.data)==null?void 0:r.weights)==null?void 0:s.filter(c=>vO.includes(c)))??["normal"],u=e.data??{};for(let c=0;c<l.length;c++){const h=l[c],d=new FontFace(a,`url(${encodeURI(t)})`,{...u,weight:h});await d.load(),n.add(d),o.push(d)}return o.length===1?o[0]:o}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(t){(Array.isArray(t)?t:[t]).forEach(e=>X.ADAPTER.getFontFaceSet().delete(e))}};Q.add(vw);let m0=0,Sh;const wO="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",bO={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${wO}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},EO={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let Th;class SO{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(e=>{const n=URL.createObjectURL(new Blob([bO.code],{type:"application/javascript"})),i=new Worker(n);i.addEventListener("message",r=>{i.terminate(),URL.revokeObjectURL(n),e(r.data)})}),this._isImageBitmapSupported)}loadImageBitmap(e){return this._run("loadImageBitmap",[e])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){Sh===void 0&&(Sh=navigator.hardwareConcurrency||4);let e=this.workerPool.pop();return!e&&this._createdWorkers<Sh&&(Th||(Th=URL.createObjectURL(new Blob([EO.code],{type:"application/javascript"}))),this._createdWorkers++,e=new Worker(Th),e.addEventListener("message",n=>{this.complete(n.data),this.returnWorker(n.target),this.next()})),e}returnWorker(e){this.workerPool.push(e)}complete(e){e.error!==void 0?this.resolveHash[e.uuid].reject(e.error):this.resolveHash[e.uuid].resolve(e.data),this.resolveHash[e.uuid]=null}async _run(e,n){await this._initWorkers();const i=new Promise((r,s)=>{this.queue.push({id:e,arguments:n,resolve:r,reject:s})});return this.next(),i}next(){if(!this.queue.length)return;const e=this.getWorker();if(!e)return;const n=this.queue.pop(),i=n.id;this.resolveHash[m0]={resolve:n.resolve,reject:n.reject},e.postMessage({data:n.arguments,uuid:m0++,id:i})}}const g0=new SO;function uc(t,e,n){const i=new Z(t);return i.baseTexture.on("dispose",()=>{delete e.promiseCache[n]}),i}const TO=[".jpeg",".jpg",".png",".webp",".avif"],CO=["image/jpeg","image/png","image/webp","image/avif"];async function AO(t){const e=await X.ADAPTER.fetch(t);if(!e.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${t}: ${e.status} ${e.statusText}`);const n=await e.blob();return await createImageBitmap(n)}const Yo={extension:{type:W.LoadParser,priority:$n.High},config:{preferWorkers:!0},test(t){return mw(t,CO)||lc(t,TO)},async load(t,e,n){let i=null;globalThis.createImageBitmap?this.config.preferWorkers&&await g0.isImageBitmapSupported()?i=await g0.loadImageBitmap(t):i=await AO(t):i=await new Promise(s=>{i=new Image,i.crossOrigin="anonymous",i.src=t,i.complete?s(i):i.onload=()=>{s(i)}});const r=new ae(i,{resolution:ki(t),...e.data});return r.resource.src=t,uc(r,n,t)},unload(t){t.destroy(!0)}};Q.add(Yo);const PO={extension:{type:W.LoadParser,priority:$n.High},test(t){return ot.extname(t).toLowerCase()===".svg"},async testParse(t){return Xo.test(t)},async parse(t,e,n){var o,a,l;const i=new Xo(t,(o=e==null?void 0:e.data)==null?void 0:o.resourceOptions),r=new ae(i,{resolution:ki(t),...e==null?void 0:e.data});r.resource.src=t;const s=uc(r,n,t);return(l=(a=e==null?void 0:e.data)==null?void 0:a.resourceOptions)!=null&&l.autoLoad||await i.load(),s},async load(t,e){return(await X.ADAPTER.fetch(t)).text()},unload:Yo.unload};Q.add(PO);class IO{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(e,n)=>`${e}${this._bundleIdConnector}${n}`,extractAssetIdFromBundle:(e,n)=>n.replace(`${e}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(e){if(this._bundleIdConnector=e.connector??this._bundleIdConnector,this._createBundleAssetId=e.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=e.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...e){e.forEach(n=>{this._preferredOrder.push(n),n.priority||(n.priority=Object.keys(n.params))}),this._resolverHash={}}set basePath(e){this._basePath=e}get basePath(){return this._basePath}set rootPath(e){this._rootPath=e}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(e){if(typeof e=="string")this._defaultSearchParams=e;else{const n=e;this._defaultSearchParams=Object.keys(n).map(i=>`${encodeURIComponent(i)}=${encodeURIComponent(n[i])}`).join("&")}}addManifest(e){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=e,e.bundles.forEach(n=>{this.addBundle(n.name,n.assets)})}addBundle(e,n){const i=[];Array.isArray(n)?n.forEach(r=>{if(typeof r.name=="string"){const s=this._createBundleAssetId(e,r.name);i.push(s),this.add([r.name,s],r.srcs,r.data)}else{const s=r.name.map(o=>this._createBundleAssetId(e,o));s.forEach(o=>{i.push(o)}),this.add([...r.name,...s],r.srcs)}}):Object.keys(n).forEach(r=>{i.push(this._createBundleAssetId(e,r)),this.add([r,this._createBundleAssetId(e,r)],n[r])}),this._bundles[e]=i}add(e,n,i){const r=Zn(e);r.forEach(o=>{this.hasKey(o)&&console.warn(`[Resolver] already has key: ${o} overwriting`)}),Array.isArray(n)||(typeof n=="string"?n=dO(n):n=[n]);const s=n.map(o=>{let a=o;if(typeof o=="string"){let l=!1;for(let u=0;u<this._parsers.length;u++){const c=this._parsers[u];if(c.test(o)){a=c.parse(o),l=!0;break}}l||(a={src:o})}return a.format||(a.format=a.src.split(".").pop()),a.alias||(a.alias=r),(this._basePath||this._rootPath)&&(a.src=ot.toAbsolute(a.src,this._basePath,this._rootPath)),a.src=this._appendDefaultSearchParams(a.src),a.data=a.data??i,a});r.forEach(o=>{this._assetMap[o]=s})}resolveBundle(e){const n=xu(e);e=Zn(e);const i={};return e.forEach(r=>{const s=this._bundles[r];if(s){const o=this.resolve(s),a={};for(const l in o){const u=o[l];a[this._extractAssetIdFromBundle(r,l)]=u}i[r]=a}}),n?i[e[0]]:i}resolveUrl(e){const n=this.resolve(e);if(typeof e!="string"){const i={};for(const r in n)i[r]=n[r].src;return i}return n.src}resolve(e){const n=xu(e);e=Zn(e);const i={};return e.forEach(r=>{if(!this._resolverHash[r])if(this._assetMap[r]){let s=this._assetMap[r];const o=this._getPreferredOrder(s),a=s[0];o==null||o.priority.forEach(l=>{o.params[l].forEach(u=>{const c=s.filter(h=>h[l]?h[l]===u:!1);c.length&&(s=c)})}),this._resolverHash[r]=s[0]??a}else{let s=r;(this._basePath||this._rootPath)&&(s=ot.toAbsolute(s,this._basePath,this._rootPath)),s=this._appendDefaultSearchParams(s),this._resolverHash[r]={src:s}}i[r]=this._resolverHash[r]}),n?i[e[0]]:i}hasKey(e){return!!this._assetMap[e]}hasBundle(e){return!!this._bundles[e]}_getPreferredOrder(e){for(let n=0;n<e.length;n++){const i=e[0],r=this._preferredOrder.find(s=>s.params.format.includes(i.format));if(r)return r}return this._preferredOrder[0]}_appendDefaultSearchParams(e){if(!this._defaultSearchParams)return e;const n=/\?/.test(e)?"&":"?";return`${e}${n}${this._defaultSearchParams}`}}class MO{constructor(){this._detections=[],this._initialized=!1,this.resolver=new IO,this.loader=new pO,this.cache=Ys,this._backgroundLoader=new hO(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(e={}){var s,o,a;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Asset.init()?");return}if(this._initialized=!0,e.defaultSearchParams&&this.resolver.setDefaultSearchParams(e.defaultSearchParams),e.basePath&&(this.resolver.basePath=e.basePath),e.bundleIdentifier&&this.resolver.setBundleIdentifier(e.bundleIdentifier),e.manifest){let l=e.manifest;typeof l=="string"&&(l=await this.load(l)),this.resolver.addManifest(l)}const n=((s=e.texturePreference)==null?void 0:s.resolution)??1,i=typeof n=="number"?[n]:n;let r=[];if((o=e.texturePreference)!=null&&o.format){const l=(a=e.texturePreference)==null?void 0:a.format;r=typeof l=="string"?[l]:l;for(const u of this._detections)await u.test()||(r=await u.remove(r))}else for(const l of this._detections)await l.test()&&(r=await l.add(r));this.resolver.prefer({params:{format:r,resolution:i}})}add(e,n,i){this.resolver.add(e,n,i)}async load(e,n){this._initialized||await this.init();const i=xu(e),r=Zn(e).map(a=>typeof a!="string"?(this.resolver.add(a.src,a),a.src):(this.resolver.hasKey(a)||this.resolver.add(a,a),a)),s=this.resolver.resolve(r),o=await this._mapLoadToResolve(s,n);return i?o[r[0]]:o}addBundle(e,n){this.resolver.addBundle(e,n)}async loadBundle(e,n){this._initialized||await this.init();let i=!1;typeof e=="string"&&(i=!0,e=[e]);const r=this.resolver.resolveBundle(e),s={},o=Object.keys(r);let a=0,l=0;const u=()=>{n==null||n(++a/l)},c=o.map(h=>{const d=r[h];return l+=Object.keys(d).length,this._mapLoadToResolve(d,u).then(f=>{s[h]=f})});return await Promise.all(c),i?s[e[0]]:s}async backgroundLoad(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolve(e);this._backgroundLoader.add(Object.values(n))}async backgroundLoadBundle(e){this._initialized||await this.init(),typeof e=="string"&&(e=[e]);const n=this.resolver.resolveBundle(e);Object.values(n).forEach(i=>{this._backgroundLoader.add(Object.values(i))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(e){if(typeof e=="string")return Ys.get(e);const n={};for(let i=0;i<e.length;i++)n[i]=Ys.get(e[i]);return n}async _mapLoadToResolve(e,n){const i=Object.values(e),r=Object.keys(e);this._backgroundLoader.active=!1;const s=await this.loader.load(i,n);this._backgroundLoader.active=!0;const o={};return i.forEach((a,l)=>{const u=s[a.src],c=[a.src];a.alias&&c.push(...a.alias),o[r[l]]=u,Ys.set(c,u)}),o}async unload(e){this._initialized||await this.init();const n=Zn(e).map(r=>typeof r!="string"?r.src:r),i=this.resolver.resolve(n);await this._unloadFromResolved(i)}async unloadBundle(e){this._initialized||await this.init(),e=Zn(e);const n=this.resolver.resolveBundle(e),i=Object.keys(n).map(r=>this._unloadFromResolved(n[r]));await Promise.all(i)}async _unloadFromResolved(e){const n=Object.values(e);n.forEach(i=>{Ys.remove(i.src)}),await this.loader.unload(n)}get detections(){return this._detections}get preferWorkers(){return Yo.config.preferWorkers}set preferWorkers(e){Yo.config.preferWorkers=e}}const Wa=new MO;Q.handleByList(W.LoadParser,Wa.loader.parsers).handleByList(W.ResolveParser,Wa.resolver.parsers).handleByList(W.CacheParser,Wa.cache.parsers).handleByList(W.DetectionParser,Wa.detections);const OO={extension:W.CacheParser,test:t=>Array.isArray(t)&&t.every(e=>e instanceof Z),getCacheableAssets:(t,e)=>{const n={};return t.forEach(i=>{e.forEach((r,s)=>{n[i+(s===0?"":s+1)]=r})}),n}};Q.add(OO);const RO={extension:{type:W.DetectionParser,priority:1},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=",e=await X.ADAPTER.fetch(t).then(n=>n.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"avif"],remove:async t=>t.filter(e=>e!=="avif")};Q.add(RO);const kO={extension:{type:W.DetectionParser,priority:0},test:async()=>{if(!globalThis.createImageBitmap)return!1;const t="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=",e=await X.ADAPTER.fetch(t).then(n=>n.blob());return createImageBitmap(e).then(()=>!0,()=>!1)},add:async t=>[...t,"webp"],remove:async t=>t.filter(e=>e!=="webp")};Q.add(kO);const v0=["png","jpg","jpeg"],DO={extension:{type:W.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async t=>[...t,...v0],remove:async t=>t.filter(e=>!v0.includes(e))};Q.add(DO);const FO={extension:W.ResolveParser,test:Yo.test,parse:t=>{var e;return{resolution:parseFloat(((e=X.RETINA_PREFIX.exec(t))==null?void 0:e[1])??"1"),format:t.split(".").pop(),src:t}}};Q.add(FO);var Mt=(t=>(t[t.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",t[t.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",t[t.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",t[t.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",t[t.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",t[t.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",t[t.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",t[t.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",t[t.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",t[t.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",t[t.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",t[t.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",t[t.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",t[t.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",t[t.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",t[t.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",t[t.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",t[t.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35986]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",t[t.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",t))(Mt||{});const _u={[33776]:.5,[33777]:.5,[33778]:1,[33779]:1,[35916]:.5,[35917]:.5,[35918]:1,[35919]:1,[37488]:.5,[37489]:.5,[37490]:1,[37491]:1,[37492]:.5,[37496]:1,[37493]:.5,[37497]:1,[37494]:.5,[37495]:.5,[35840]:.5,[35842]:.5,[35841]:.25,[35843]:.25,[36196]:.5,[35986]:.5,[35986]:1,[34798]:1,[37808]:1};let jn,Fr;function y0(){Fr={s3tc:jn.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:jn.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:jn.getExtension("WEBGL_compressed_texture_etc"),etc1:jn.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:jn.getExtension("WEBGL_compressed_texture_pvrtc")||jn.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:jn.getExtension("WEBGL_compressed_texture_atc"),astc:jn.getExtension("WEBGL_compressed_texture_astc")}}const LO={extension:{type:W.DetectionParser,priority:2},test:async()=>{const e=X.ADAPTER.createCanvas().getContext("webgl");return e?(jn=e,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async t=>{Fr||y0();const e=[];for(const n in Fr)Fr[n]&&e.push(n);return[...e,...t]},remove:async t=>(Fr||y0(),t.filter(e=>!(e in Fr)))};Q.add(LO);class BO extends oa{constructor(e,n={width:1,height:1,autoLoad:!0}){let i,r;typeof e=="string"?(i=e,r=new Uint8Array):(i=null,r=e),super(r,n),this.origin=i,this.buffer=r?new sf(r):null,this.origin&&n.autoLoad!==!1&&this.load(),r!=null&&r.length&&(this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(e){}async load(){const i=await(await(await fetch(this.origin)).blob()).arrayBuffer();return this.data=new Uint32Array(i),this.buffer=new sf(i),this.loaded=!0,this.onBlobLoaded(i),this.update(),this}}class ar extends BO{constructor(e,n){super(e,n),this.format=n.format,this.levels=n.levels||1,this._width=n.width,this._height=n.height,this._extension=ar._formatToExtension(this.format),(n.levelBuffers||this.buffer)&&(this._levelBuffers=n.levelBuffers||ar._createLevelBuffers(e instanceof Uint8Array?e:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(e,n,i){const r=e.gl;if(!e.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;for(let o=0,a=this.levels;o<a;o++){const{levelID:l,levelWidth:u,levelHeight:c,levelBuffer:h}=this._levelBuffers[o];r.compressedTexImage2D(r.TEXTURE_2D,l,this.format,u,c,0,h)}return!0}onBlobLoaded(){this._levelBuffers=ar._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(e){if(e>=33776&&e<=33779)return"s3tc";if(e>=37488&&e<=37497)return"etc";if(e>=35840&&e<=35843)return"pvrtc";if(e>=36196)return"etc1";if(e>=35986&&e<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(e,n,i,r,s,o,a){const l=new Array(i);let u=e.byteOffset,c=o,h=a,d=c+r-1&~(r-1),f=h+s-1&~(s-1),p=d*f*_u[n];for(let g=0;g<i;g++)l[g]={levelID:g,levelWidth:i>1?c:d,levelHeight:i>1?h:f,levelBuffer:new Uint8Array(e.buffer,u,p)},u+=p,c=c>>1||1,h=h>>1||1,d=c+r-1&~(r-1),f=h+s-1&~(s-1),p=d*f*_u[n];return l}}const Ch=4,Xa=124,NO=32,x0=20,UO=542327876,Ya={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},$O={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},qa={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},zO=1,HO=2,jO=4,GO=64,VO=512,WO=131072,XO=827611204,YO=861165636,qO=894720068,KO=808540228,ZO=4,QO={[XO]:Mt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[YO]:Mt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[qO]:Mt.COMPRESSED_RGBA_S3TC_DXT5_EXT},JO={[70]:Mt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[71]:Mt.COMPRESSED_RGBA_S3TC_DXT1_EXT,[73]:Mt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[74]:Mt.COMPRESSED_RGBA_S3TC_DXT3_EXT,[76]:Mt.COMPRESSED_RGBA_S3TC_DXT5_EXT,[77]:Mt.COMPRESSED_RGBA_S3TC_DXT5_EXT,[72]:Mt.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,[75]:Mt.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,[78]:Mt.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function eR(t){const e=new Uint32Array(t);if(e[0]!==UO)throw new Error("Invalid DDS file magic word");const i=new Uint32Array(t,0,Xa/Uint32Array.BYTES_PER_ELEMENT),r=i[Ya.HEIGHT],s=i[Ya.WIDTH],o=i[Ya.MIPMAP_COUNT],a=new Uint32Array(t,Ya.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,NO/Uint32Array.BYTES_PER_ELEMENT),l=a[zO];if(l&jO){const u=a[$O.FOURCC];if(u!==KO){const x=QO[u],_=Ch+Xa,b=new Uint8Array(t,_);return[new ar(b,{format:x,width:s,height:r,levels:o})]}const c=Ch+Xa,h=new Uint32Array(e.buffer,c,x0/Uint32Array.BYTES_PER_ELEMENT),d=h[qa.DXGI_FORMAT],f=h[qa.RESOURCE_DIMENSION],p=h[qa.MISC_FLAG],g=h[qa.ARRAY_SIZE],v=JO[d];if(v===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${d}`);if(p===ZO)throw new Error("DDSParser does not support cubemap textures");if(f===6)throw new Error("DDSParser does not supported 3D texture data");const m=new Array,y=Ch+Xa+x0;if(g===1)m.push(new Uint8Array(t,y));else{const x=_u[v];let _=0,b=s,T=r;for(let S=0;S<o;S++){const k=Math.max(1,b+3&-4),O=Math.max(1,T+3&-4),F=k*O*x;_+=F,b=b>>>1,T=T>>>1}let E=y;for(let S=0;S<g;S++)m.push(new Uint8Array(t,E,_)),E+=_}return m.map(x=>new ar(x,{format:v,width:s,height:r,levels:o}))}throw l&GO?new Error("DDSParser does not support uncompressed texture data."):l&VO?new Error("DDSParser does not supported YUV uncompressed texture data."):l&WO?new Error("DDSParser does not support single-channel (lumninance) texture data!"):l&HO?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const _0=[171,75,84,88,32,49,49,187,13,10,26,10],tR=67305985,nn={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},xf=64,w0={[J.UNSIGNED_BYTE]:1,[J.UNSIGNED_SHORT]:2,[J.INT]:4,[J.UNSIGNED_INT]:4,[J.FLOAT]:4,[J.HALF_FLOAT]:8},nR={[H.RGBA]:4,[H.RGB]:3,[H.RG]:2,[H.RED]:1,[H.LUMINANCE]:1,[H.LUMINANCE_ALPHA]:2,[H.ALPHA]:1},iR={[J.UNSIGNED_SHORT_4_4_4_4]:2,[J.UNSIGNED_SHORT_5_5_5_1]:2,[J.UNSIGNED_SHORT_5_6_5]:2};function rR(t,e,n=!1){const i=new DataView(e);if(!sR(t,i))return null;const r=i.getUint32(nn.ENDIANNESS,!0)===tR,s=i.getUint32(nn.GL_TYPE,r),o=i.getUint32(nn.GL_FORMAT,r),a=i.getUint32(nn.GL_INTERNAL_FORMAT,r),l=i.getUint32(nn.PIXEL_WIDTH,r),u=i.getUint32(nn.PIXEL_HEIGHT,r)||1,c=i.getUint32(nn.PIXEL_DEPTH,r)||1,h=i.getUint32(nn.NUMBER_OF_ARRAY_ELEMENTS,r)||1,d=i.getUint32(nn.NUMBER_OF_FACES,r),f=i.getUint32(nn.NUMBER_OF_MIPMAP_LEVELS,r),p=i.getUint32(nn.BYTES_OF_KEY_VALUE_DATA,r);if(u===0||c!==1)throw new Error("Only 2D textures are supported");if(d!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(h!==1)throw new Error("WebGL does not support array textures");const g=4,v=4,m=l+3&-4,y=u+3&-4,x=new Array(h);let _=l*u;s===0&&(_=m*y);let b;if(s!==0?w0[s]?b=w0[s]*nR[o]:b=iR[s]:b=_u[a],b===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const T=n?aR(i,p,r):null;let S=_*b,k=l,O=u,F=m,N=y,C=xf+p;for(let w=0;w<f;w++){const R=i.getUint32(C,r);let z=C+4;for(let D=0;D<h;D++){let M=x[D];M||(M=x[D]=new Array(f)),M[w]={levelID:w,levelWidth:f>1||s!==0?k:F,levelHeight:f>1||s!==0?O:N,levelBuffer:new Uint8Array(e,z,S)},z+=S}C+=R+4,C=C%4!==0?C+4-C%4:C,k=k>>1||1,O=O>>1||1,F=k+g-1&~(g-1),N=O+v-1&~(v-1),S=F*N*b}return s!==0?{uncompressed:x.map(w=>{let R=w[0].levelBuffer,z=!1;return s===J.FLOAT?R=new Float32Array(w[0].levelBuffer.buffer,w[0].levelBuffer.byteOffset,w[0].levelBuffer.byteLength/4):s===J.UNSIGNED_INT?(z=!0,R=new Uint32Array(w[0].levelBuffer.buffer,w[0].levelBuffer.byteOffset,w[0].levelBuffer.byteLength/4)):s===J.INT&&(z=!0,R=new Int32Array(w[0].levelBuffer.buffer,w[0].levelBuffer.byteOffset,w[0].levelBuffer.byteLength/4)),{resource:new oa(R,{width:w[0].levelWidth,height:w[0].levelHeight}),type:s,format:z?oR(o):o}}),kvData:T}:{compressed:x.map(w=>new ar(null,{format:a,width:l,height:u,levels:f,levelBuffers:w})),kvData:T}}function sR(t,e){for(let n=0;n<_0.length;n++)if(e.getUint8(n)!==_0[n])return console.error(`${t} is not a valid *.ktx file!`),!1;return!0}function oR(t){switch(t){case H.RGBA:return H.RGBA_INTEGER;case H.RGB:return H.RGB_INTEGER;case H.RG:return H.RG_INTEGER;case H.RED:return H.RED_INTEGER;default:return t}}function aR(t,e,n){const i=new Map;let r=0;for(;r<e;){const s=t.getUint32(xf+r,n),o=xf+r+4,a=3-(s+3)%4;if(s===0||s>e-r){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let l=0;for(;l<s&&t.getUint8(o+l)!==0;l++);if(l===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const u=new TextDecoder().decode(new Uint8Array(t.buffer,o,l)),c=new DataView(t.buffer,o+l+1,s-l-1);i.set(u,c),r+=4+s+a}return i}const lR={extension:{type:W.LoadParser,priority:$n.High},test(t){return lc(t,".dds")},async load(t,e,n){const r=await(await X.ADAPTER.fetch(t)).arrayBuffer(),o=eR(r).map(a=>{const l=new ae(a,{mipmap:Nn.OFF,alphaMode:wn.NO_PREMULTIPLIED_ALPHA,resolution:ki(t),...e.data});return uc(l,n,t)});return o.length===1?o[0]:o},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};Q.add(lR);const uR={extension:{type:W.LoadParser,priority:$n.High},test(t){return lc(t,".ktx")},async load(t,e,n){const r=await(await X.ADAPTER.fetch(t)).arrayBuffer(),{compressed:s,uncompressed:o,kvData:a}=rR(t,r),l=s??o,u={mipmap:Nn.OFF,alphaMode:wn.NO_PREMULTIPLIED_ALPHA,resolution:ki(t),...e.data},c=l.map(h=>{l===o&&Object.assign(u,{type:h.type,format:h.format});const d=new ae(h,u);return d.ktxKeyValueData=a,uc(d,n,t)});return c.length===1?c[0]:c},unload(t){Array.isArray(t)?t.forEach(e=>e.destroy(!0)):t.destroy(!0)}};Q.add(uR);const cR={extension:W.ResolveParser,test:t=>{const n=t.split("?")[0].split(".").pop();return["basis","ktx","dds"].includes(n)},parse:t=>{var i,r;if(t.split("?")[0].split(".").pop()==="ktx"){const s=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(s.some(o=>t.endsWith(o)))return{resolution:parseFloat(((i=X.RETINA_PREFIX.exec(t))==null?void 0:i[1])??"1"),format:s.find(o=>t.endsWith(o)),src:t}}return{resolution:parseFloat(((r=X.RETINA_PREFIX.exec(t))==null?void 0:r[1])??"1"),format:t.split(".").pop(),src:t}}};Q.add(cR);const hR=new le,dR=4,_f=class{constructor(t){this.renderer=t}async image(t,e,n){const i=new Image;return i.src=await this.base64(t,e,n),i}async base64(t,e,n){const i=this.canvas(t);if(i.toDataURL!==void 0)return i.toDataURL(e,n);if(i.convertToBlob!==void 0){const r=await i.convertToBlob({type:e,quality:n});return await new Promise(s=>{const o=new FileReader;o.onload=()=>s(o.result),o.readAsDataURL(r)})}throw new Error("Extract.base64() requires ICanvas.toDataURL or ICanvas.convertToBlob to be implemented")}canvas(t,e){const{pixels:n,width:i,height:r,flipY:s}=this._rawPixels(t,e);let o=new Zv(i,r,1);const a=o.context.getImageData(0,0,i,r);if(_f.arrayPostDivide(n,a.data),o.context.putImageData(a,0,0),s){const l=new Zv(o.width,o.height,1);l.context.scale(1,-1),l.context.drawImage(o.canvas,0,-r),o.destroy(),o=l}return o.canvas}pixels(t,e){const{pixels:n}=this._rawPixels(t,e);return _f.arrayPostDivide(n,n),n}_rawPixels(t,e){const n=this.renderer;let i,r=!1,s,o=!1;if(t)if(t instanceof Li)s=t;else{const h=n.context.webGLVersion>=2?n.multisample:Be.NONE;if(s=this.renderer.generateTexture(t,{multisample:h}),h!==Be.NONE){const d=Li.create({width:s.width,height:s.height});n.framebuffer.bind(s.framebuffer),n.framebuffer.blit(d.framebuffer),n.framebuffer.bind(null),s.destroy(!0),s=d}o=!0}s?(i=s.baseTexture.resolution,e=e??s.frame,r=!1,n.renderTexture.bind(s)):(i=n.resolution,e||(e=hR,e.width=n.width,e.height=n.height),r=!0,n.renderTexture.bind(null));const a=Math.round(e.width*i),l=Math.round(e.height*i),u=new Uint8Array(dR*a*l),c=n.gl;return c.readPixels(Math.round(e.x*i),Math.round(e.y*i),a,l,c.RGBA,c.UNSIGNED_BYTE,u),o&&s.destroy(!0),{pixels:u,width:a,height:l,flipY:r}}destroy(){this.renderer=null}static arrayPostDivide(t,e){for(let n=0;n<t.length;n+=4){const i=e[n+3]=t[n+3];i!==0?(e[n]=Math.round(Math.min(t[n]*255/i,255)),e[n+1]=Math.round(Math.min(t[n+1]*255/i,255)),e[n+2]=Math.round(Math.min(t[n+2]*255/i,255))):(e[n]=t[n],e[n+1]=t[n+1],e[n+2]=t[n+2])}}};let yw=_f;yw.extension={name:"extract",type:W.RendererSystem};Q.add(yw);const wu={build(t){const e=t.points;let n,i,r,s,o,a;if(t.type===it.CIRC){const p=t.shape;n=p.x,i=p.y,o=a=p.radius,r=s=0}else if(t.type===it.ELIP){const p=t.shape;n=p.x,i=p.y,o=p.width,a=p.height,r=s=0}else{const p=t.shape,g=p.width/2,v=p.height/2;n=p.x+g,i=p.y+v,o=a=Math.max(0,Math.min(p.radius,Math.min(g,v))),r=g-o,s=v-a}if(!(o>=0&&a>=0&&r>=0&&s>=0)){e.length=0;return}const l=Math.ceil(2.3*Math.sqrt(o+a)),u=l*8+(r?4:0)+(s?4:0);if(e.length=u,u===0)return;if(l===0){e.length=8,e[0]=e[6]=n+r,e[1]=e[3]=i+s,e[2]=e[4]=n-r,e[5]=e[7]=i-s;return}let c=0,h=l*4+(r?2:0)+2,d=h,f=u;{const p=r+o,g=s,v=n+p,m=n-p,y=i+g;if(e[c++]=v,e[c++]=y,e[--h]=y,e[--h]=m,s){const x=i-g;e[d++]=m,e[d++]=x,e[--f]=x,e[--f]=v}}for(let p=1;p<l;p++){const g=Math.PI/2*(p/l),v=r+Math.cos(g)*o,m=s+Math.sin(g)*a,y=n+v,x=n-v,_=i+m,b=i-m;e[c++]=y,e[c++]=_,e[--h]=_,e[--h]=x,e[d++]=x,e[d++]=b,e[--f]=b,e[--f]=y}{const p=r,g=s+a,v=n+p,m=n-p,y=i+g,x=i-g;e[c++]=v,e[c++]=y,e[--f]=x,e[--f]=v,r&&(e[c++]=m,e[c++]=y,e[--f]=x,e[--f]=m)}},triangulate(t,e){const n=t.points,i=e.points,r=e.indices;if(n.length===0)return;let s=i.length/2;const o=s;let a,l;if(t.type!==it.RREC){const c=t.shape;a=c.x,l=c.y}else{const c=t.shape;a=c.x+c.width/2,l=c.y+c.height/2}const u=t.matrix;i.push(t.matrix?u.a*a+u.c*l+u.tx:a,t.matrix?u.b*a+u.d*l+u.ty:l),s++,i.push(n[0],n[1]);for(let c=2;c<n.length;c+=2)i.push(n[c],n[c+1]),r.push(s++,o,s);r.push(o+1,o,s)}};function b0(t,e=!1){const n=t.length;if(n<6)return;let i=0;for(let r=0,s=t[n-2],o=t[n-1];r<n;r+=2){const a=t[r],l=t[r+1];i+=(a-s)*(l+o),s=a,o=l}if(!e&&i>0||e&&i<=0){const r=n/2;for(let s=r+r%2;s<n;s+=2){const o=n-s-2,a=n-s-1,l=s,u=s+1;[t[o],t[l]]=[t[l],t[o]],[t[a],t[u]]=[t[u],t[a]]}}}const xw={build(t){t.points=t.shape.points.slice()},triangulate(t,e){let n=t.points;const i=t.holes,r=e.points,s=e.indices;if(n.length>=6){b0(n,!1);const o=[];for(let u=0;u<i.length;u++){const c=i[u];b0(c.points,!0),o.push(n.length/2),n=n.concat(c.points)}const a=du(n,o,2);if(!a)return;const l=r.length/2;for(let u=0;u<a.length;u+=3)s.push(a[u]+l),s.push(a[u+1]+l),s.push(a[u+2]+l);for(let u=0;u<n.length;u++)r.push(n[u])}}},fR={build(t){const e=t.shape,n=e.x,i=e.y,r=e.width,s=e.height,o=t.points;o.length=0,r>=0&&s>=0&&o.push(n,i,n+r,i,n+r,i+s,n,i+s)},triangulate(t,e){const n=t.points,i=e.points;if(n.length===0)return;const r=i.length/2;i.push(n[0],n[1],n[2],n[3],n[6],n[7],n[4],n[5]),e.indices.push(r,r+1,r+2,r+1,r+2,r+3)}},pR={build(t){wu.build(t)},triangulate(t,e){wu.triangulate(t,e)}};var ln=(t=>(t.MITER="miter",t.BEVEL="bevel",t.ROUND="round",t))(ln||{}),ir=(t=>(t.BUTT="butt",t.ROUND="round",t.SQUARE="square",t))(ir||{});const bs={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(t,e=20){if(!this.adaptive||!t||isNaN(t))return e;let n=Math.ceil(t/this.maxLength);return n<this.minSegments?n=this.minSegments:n>this.maxSegments&&(n=this.maxSegments),n}};class E0{static curveTo(e,n,i,r,s,o){const a=o[o.length-2],u=o[o.length-1]-n,c=a-e,h=r-n,d=i-e,f=Math.abs(u*d-c*h);if(f<1e-8||s===0)return(o[o.length-2]!==e||o[o.length-1]!==n)&&o.push(e,n),null;const p=u*u+c*c,g=h*h+d*d,v=u*h+c*d,m=s*Math.sqrt(p)/f,y=s*Math.sqrt(g)/f,x=m*v/p,_=y*v/g,b=m*d+y*c,T=m*h+y*u,E=c*(y+x),S=u*(y+x),k=d*(m+_),O=h*(m+_),F=Math.atan2(S-T,E-b),N=Math.atan2(O-T,k-b);return{cx:b+e,cy:T+n,radius:s,startAngle:F,endAngle:N,anticlockwise:c*h>d*u}}static arc(e,n,i,r,s,o,a,l,u){const c=a-o,h=bs._segmentsCount(Math.abs(c)*s,Math.ceil(Math.abs(c)/gu)*40),d=c/(h*2),f=d*2,p=Math.cos(d),g=Math.sin(d),v=h-1,m=v%1/v;for(let y=0;y<=v;++y){const x=y+m*y,_=d+o+f*x,b=Math.cos(_),T=-Math.sin(_);u.push((p*b+g*T)*s+i,(p*-T+g*b)*s+r)}}}class mR{constructor(){this.reset()}begin(e,n,i){this.reset(),this.style=e,this.start=n,this.attribStart=i}end(e,n){this.attribSize=n-this.attribStart,this.size=e-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class mm{static curveLength(e,n,i,r,s,o,a,l){let c=0,h=0,d=0,f=0,p=0,g=0,v=0,m=0,y=0,x=0,_=0,b=e,T=n;for(let E=1;E<=10;++E)h=E/10,d=h*h,f=d*h,p=1-h,g=p*p,v=g*p,m=v*e+3*g*h*i+3*p*d*s+f*a,y=v*n+3*g*h*r+3*p*d*o+f*l,x=b-m,_=T-y,b=m,T=y,c+=Math.sqrt(x*x+_*_);return c}static curveTo(e,n,i,r,s,o,a){const l=a[a.length-2],u=a[a.length-1];a.length-=2;const c=bs._segmentsCount(mm.curveLength(l,u,e,n,i,r,s,o));let h=0,d=0,f=0,p=0,g=0;a.push(l,u);for(let v=1,m=0;v<=c;++v)m=v/c,h=1-m,d=h*h,f=d*h,p=m*m,g=p*m,a.push(f*l+3*d*m*e+3*h*p*i+g*s,f*u+3*d*m*n+3*h*p*r+g*o)}}function S0(t,e,n,i,r,s,o,a){const l=t-n*r,u=e-i*r,c=t+n*s,h=e+i*s;let d,f;o?(d=i,f=-n):(d=-i,f=n);const p=l+d,g=u+f,v=c+d,m=h+f;return a.push(p,g,v,m),2}function Gi(t,e,n,i,r,s,o,a){const l=n-t,u=i-e;let c=Math.atan2(l,u),h=Math.atan2(r-t,s-e);a&&c<h?c+=Math.PI*2:!a&&c>h&&(h+=Math.PI*2);let d=c;const f=h-c,p=Math.abs(f),g=Math.sqrt(l*l+u*u),v=(15*p*Math.sqrt(g)/Math.PI>>0)+1,m=f/v;if(d+=m,a){o.push(t,e,n,i);for(let y=1,x=d;y<v;y++,x+=m)o.push(t,e,t+Math.sin(x)*g,e+Math.cos(x)*g);o.push(t,e,r,s)}else{o.push(n,i,t,e);for(let y=1,x=d;y<v;y++,x+=m)o.push(t+Math.sin(x)*g,e+Math.cos(x)*g,t,e);o.push(r,s,t,e)}return v*2}function gR(t,e){const n=t.shape;let i=t.points||n.points.slice();const r=e.closePointEps;if(i.length===0)return;const s=t.lineStyle,o=new te(i[0],i[1]),a=new te(i[i.length-2],i[i.length-1]),l=n.type!==it.POLY||n.closeStroke,u=Math.abs(o.x-a.x)<r&&Math.abs(o.y-a.y)<r;if(l){i=i.slice(),u&&(i.pop(),i.pop(),a.set(i[i.length-2],i[i.length-1]));const D=(o.x+a.x)*.5,M=(a.y+o.y)*.5;i.unshift(D,M),i.push(D,M)}const c=e.points,h=i.length/2;let d=i.length;const f=c.length/2,p=s.width/2,g=p*p,v=s.miterLimit*s.miterLimit;let m=i[0],y=i[1],x=i[2],_=i[3],b=0,T=0,E=-(y-_),S=m-x,k=0,O=0,F=Math.sqrt(E*E+S*S);E/=F,S/=F,E*=p,S*=p;const N=s.alignment,C=(1-N)*2,w=N*2;l||(s.cap===ir.ROUND?d+=Gi(m-E*(C-w)*.5,y-S*(C-w)*.5,m-E*C,y-S*C,m+E*w,y+S*w,c,!0)+2:s.cap===ir.SQUARE&&(d+=S0(m,y,E,S,C,w,!0,c))),c.push(m-E*C,y-S*C,m+E*w,y+S*w);for(let D=1;D<h-1;++D){m=i[(D-1)*2],y=i[(D-1)*2+1],x=i[D*2],_=i[D*2+1],b=i[(D+1)*2],T=i[(D+1)*2+1],E=-(y-_),S=m-x,F=Math.sqrt(E*E+S*S),E/=F,S/=F,E*=p,S*=p,k=-(_-T),O=x-b,F=Math.sqrt(k*k+O*O),k/=F,O/=F,k*=p,O*=p;const M=x-m,B=y-_,P=x-b,G=T-_,V=M*P+B*G,re=B*P-G*M,oe=re<0;if(Math.abs(re)<.001*Math.abs(V)){c.push(x-E*C,_-S*C,x+E*w,_+S*w),V>=0&&(s.join===ln.ROUND?d+=Gi(x,_,x-E*C,_-S*C,x-k*C,_-O*C,c,!1)+4:d+=2,c.push(x-k*w,_-O*w,x+k*C,_+O*C));continue}const pe=(-E+m)*(-S+_)-(-E+x)*(-S+y),ue=(-k+b)*(-O+_)-(-k+x)*(-O+T),he=(M*ue-P*pe)/re,De=(G*pe-B*ue)/re,qe=(he-x)*(he-x)+(De-_)*(De-_),Ge=x+(he-x)*C,xe=_+(De-_)*C,Ae=x-(he-x)*w,Ue=_-(De-_)*w,Pt=Math.min(M*M+B*B,P*P+G*G),jt=oe?C:w,ks=Pt+jt*jt*g,EE=qe<=ks;let ma=s.join;if(ma===ln.MITER&&qe/g>v&&(ma=ln.BEVEL),EE)switch(ma){case ln.MITER:{c.push(Ge,xe,Ae,Ue);break}case ln.BEVEL:{oe?c.push(Ge,xe,x+E*w,_+S*w,Ge,xe,x+k*w,_+O*w):c.push(x-E*C,_-S*C,Ae,Ue,x-k*C,_-O*C,Ae,Ue),d+=2;break}case ln.ROUND:{oe?(c.push(Ge,xe,x+E*w,_+S*w),d+=Gi(x,_,x+E*w,_+S*w,x+k*w,_+O*w,c,!0)+4,c.push(Ge,xe,x+k*w,_+O*w)):(c.push(x-E*C,_-S*C,Ae,Ue),d+=Gi(x,_,x-E*C,_-S*C,x-k*C,_-O*C,c,!1)+4,c.push(x-k*C,_-O*C,Ae,Ue));break}}else{switch(c.push(x-E*C,_-S*C,x+E*w,_+S*w),ma){case ln.MITER:{oe?c.push(Ae,Ue,Ae,Ue):c.push(Ge,xe,Ge,xe),d+=2;break}case ln.ROUND:{oe?d+=Gi(x,_,x+E*w,_+S*w,x+k*w,_+O*w,c,!0)+2:d+=Gi(x,_,x-E*C,_-S*C,x-k*C,_-O*C,c,!1)+2;break}}c.push(x-k*C,_-O*C,x+k*w,_+O*w),d+=2}}m=i[(h-2)*2],y=i[(h-2)*2+1],x=i[(h-1)*2],_=i[(h-1)*2+1],E=-(y-_),S=m-x,F=Math.sqrt(E*E+S*S),E/=F,S/=F,E*=p,S*=p,c.push(x-E*C,_-S*C,x+E*w,_+S*w),l||(s.cap===ir.ROUND?d+=Gi(x-E*(C-w)*.5,_-S*(C-w)*.5,x-E*C,_-S*C,x+E*w,_+S*w,c,!1)+2:s.cap===ir.SQUARE&&(d+=S0(x,_,E,S,C,w,!1,c)));const R=e.indices,z=bs.epsilon*bs.epsilon;for(let D=f;D<d+f-2;++D)m=c[D*2],y=c[D*2+1],x=c[(D+1)*2],_=c[(D+1)*2+1],b=c[(D+2)*2],T=c[(D+2)*2+1],!(Math.abs(m*(_-T)+x*(T-y)+b*(y-_))<z)&&R.push(D,D+1,D+2)}function vR(t,e){let n=0;const i=t.shape,r=t.points||i.points,s=i.type!==it.POLY||i.closeStroke;if(r.length===0)return;const o=e.points,a=e.indices,l=r.length/2,u=o.length/2;let c=u;for(o.push(r[0],r[1]),n=1;n<l;n++)o.push(r[n*2],r[n*2+1]),a.push(c,c+1),c++;s&&a.push(c,u)}function T0(t,e){t.lineStyle.native?vR(t,e):gR(t,e)}class gm{static curveLength(e,n,i,r,s,o){const a=e-2*i+s,l=n-2*r+o,u=2*i-2*e,c=2*r-2*n,h=4*(a*a+l*l),d=4*(a*u+l*c),f=u*u+c*c,p=2*Math.sqrt(h+d+f),g=Math.sqrt(h),v=2*h*g,m=2*Math.sqrt(f),y=d/g;return(v*p+g*d*(p-m)+(4*f*h-d*d)*Math.log((2*g+y+p)/(y+m)))/(4*v)}static curveTo(e,n,i,r,s){const o=s[s.length-2],a=s[s.length-1],l=bs._segmentsCount(gm.curveLength(o,a,e,n,i,r));let u=0,c=0;for(let h=1;h<=l;++h){const d=h/l;u=o+(e-o)*d,c=a+(n-a)*d,s.push(u+(e+(i-e)*d-u)*d,c+(n+(r-n)*d-c)*d)}}}const Ah={[it.POLY]:xw,[it.CIRC]:wu,[it.ELIP]:wu,[it.RECT]:fR,[it.RREC]:pR},C0=[],Ka=[];class bu{constructor(e,n=null,i=null,r=null){this.points=[],this.holes=[],this.shape=e,this.lineStyle=i,this.fillStyle=n,this.matrix=r,this.type=e.type}clone(){return new bu(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const Or=new te,_w=class extends E_{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new vu,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let t=0;t<this.drawCalls.length;t++)this.drawCalls[t].texArray.clear(),Ka.push(this.drawCalls[t]);this.drawCalls.length=0;for(let t=0;t<this.batches.length;t++){const e=this.batches[t];e.reset(),C0.push(e)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(t,e=null,n=null,i=null){const r=new bu(t,e,n,i);return this.graphicsData.push(r),this.dirty++,this}drawHole(t,e=null){if(!this.graphicsData.length)return null;const n=new bu(t,null,null,e),i=this.graphicsData[this.graphicsData.length-1];return n.lineStyle=i.lineStyle,i.holes.push(n),this.dirty++,this}destroy(){super.destroy();for(let t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(t){const e=this.graphicsData;for(let n=0;n<e.length;++n){const i=e[n];if(i.fillStyle.visible&&i.shape&&(i.matrix?i.matrix.applyInverse(t,Or):Or.copyFrom(t),i.shape.contains(Or.x,Or.y))){let r=!1;if(i.holes){for(let s=0;s<i.holes.length;s++)if(i.holes[s].shape.contains(Or.x,Or.y)){r=!0;break}}if(!r)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const t=this.uvs,e=this.graphicsData;let n=null,i=null;this.batches.length>0&&(n=this.batches[this.batches.length-1],i=n.style);for(let a=this.shapeIndex;a<e.length;a++){this.shapeIndex++;const l=e[a],u=l.fillStyle,c=l.lineStyle;Ah[l.type].build(l),l.matrix&&this.transformPoints(l.points,l.matrix),(u.visible||c.visible)&&this.processHoles(l.holes);for(let d=0;d<2;d++){const f=d===0?u:c;if(!f.visible)continue;const p=f.texture.baseTexture,g=this.indices.length,v=this.points.length/2;p.wrapMode=Ii.REPEAT,d===0?this.processFill(l):this.processLine(l);const m=this.points.length/2-v;m!==0&&(n&&!this._compareStyles(i,f)&&(n.end(g,v),n=null),n||(n=C0.pop()||new mR,n.begin(f,g,v),this.batches.push(n),i=f),this.addUvs(this.points,t,f.texture,v,m,f.matrix))}}const r=this.indices.length,s=this.points.length/2;if(n&&n.end(r,s),this.batches.length===0){this.batchable=!0;return}const o=s>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&o===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=o?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(t,e){return!(!t||!e||t.texture.baseTexture!==e.texture.baseTexture||t.color+t.alpha!==e.color+e.alpha||!!t.native!=!!e.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let t=0,e=this.graphicsData.length;t<e;t++){const n=this.graphicsData[t],i=n.fillStyle,r=n.lineStyle;if(i&&!i.texture.baseTexture.valid||r&&!r.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const t=this.batches;for(let e=0,n=t.length;e<n;e++){const i=t[e];for(let r=0;r<i.size;r++){const s=i.start+r;this.indicesUint16[s]=this.indicesUint16[s]-i.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const t=this.batches;for(let e=0;e<t.length;e++)if(t[e].style.native)return!1;return this.points.length<_w.BATCHABLE_SIZE*2}buildDrawCalls(){let t=++ae._globalBatch;for(let c=0;c<this.drawCalls.length;c++)this.drawCalls[c].texArray.clear(),Ka.push(this.drawCalls[c]);this.drawCalls.length=0;const e=this.colors,n=this.textureIds;let i=Ka.pop();i||(i=new af,i.texArray=new uf),i.texArray.count=0,i.start=0,i.size=0,i.type=Mn.TRIANGLES;let r=0,s=null,o=0,a=!1,l=Mn.TRIANGLES,u=0;this.drawCalls.push(i);for(let c=0;c<this.batches.length;c++){const h=this.batches[c],d=8,f=h.style,p=f.texture.baseTexture;a!==!!f.native&&(a=!!f.native,l=a?Mn.LINES:Mn.TRIANGLES,s=null,r=d,t++),s!==p&&(s=p,p._batchEnabled!==t&&(r===d&&(t++,r=0,i.size>0&&(i=Ka.pop(),i||(i=new af,i.texArray=new uf),this.drawCalls.push(i)),i.start=u,i.size=0,i.texArray.count=0,i.type=l),p.touched=1,p._batchEnabled=t,p._batchLocation=r,p.wrapMode=Ii.REPEAT,i.texArray.elements[i.texArray.count++]=p,r++)),i.size+=h.size,u+=h.size,o=p._batchLocation,this.addColors(e,f.color,f.alpha,h.attribSize,h.attribStart),this.addTextureIds(n,o,h.attribSize,h.attribStart)}ae._globalBatch=t,this.packAttributes()}packAttributes(){const t=this.points,e=this.uvs,n=this.colors,i=this.textureIds,r=new ArrayBuffer(t.length*3*4),s=new Float32Array(r),o=new Uint32Array(r);let a=0;for(let l=0;l<t.length/2;l++)s[a++]=t[l*2],s[a++]=t[l*2+1],s[a++]=e[l*2],s[a++]=e[l*2+1],o[a++]=n[l],s[a++]=i[l];this._buffer.update(r),this._indexBuffer.update(this.indicesUint16)}processFill(t){t.holes.length?xw.triangulate(t,this):Ah[t.type].triangulate(t,this)}processLine(t){T0(t,this);for(let e=0;e<t.holes.length;e++)T0(t.holes[e],this)}processHoles(t){for(let e=0;e<t.length;e++){const n=t[e];Ah[n.type].build(n),n.matrix&&this.transformPoints(n.points,n.matrix)}}calculateBounds(){const t=this._bounds;t.clear(),t.addVertexData(this.points,0,this.points.length),t.pad(this.boundsPadding,this.boundsPadding)}transformPoints(t,e){for(let n=0;n<t.length/2;n++){const i=t[n*2],r=t[n*2+1];t[n*2]=e.a*i+e.c*r+e.tx,t[n*2+1]=e.b*i+e.d*r+e.ty}}addColors(t,e,n,i,r=0){const s=(e>>16)+(e&65280)+((e&255)<<16),o=cm(s,n);t.length=Math.max(t.length,r+i);for(let a=0;a<i;a++)t[r+a]=o}addTextureIds(t,e,n,i=0){t.length=Math.max(t.length,i+n);for(let r=0;r<n;r++)t[i+r]=e}addUvs(t,e,n,i,r,s=null){let o=0;const a=e.length,l=n.frame;for(;o<r;){let c=t[(i+o)*2],h=t[(i+o)*2+1];if(s){const d=s.a*c+s.c*h+s.tx;h=s.b*c+s.d*h+s.ty,c=d}o++,e.push(c/l.width,h/l.height)}const u=n.baseTexture;(l.width<u.width||l.height<u.height)&&this.adjustUvs(e,n,a,r)}adjustUvs(t,e,n,i){const r=e.baseTexture,s=1e-6,o=n+i*2,a=e.frame,l=a.width/r.width,u=a.height/r.height;let c=a.x/a.width,h=a.y/a.height,d=Math.floor(t[n]+s),f=Math.floor(t[n+1]+s);for(let p=n+2;p<o;p+=2)d=Math.min(d,Math.floor(t[p]+s)),f=Math.min(f,Math.floor(t[p+1]+s));c-=d,h-=f;for(let p=n;p<o;p+=2)t[p]=(t[p]+c)*l,t[p+1]=(t[p+1]+h)*u}};let ww=_w;ww.BATCHABLE_SIZE=100;class cc{constructor(){this.color=16777215,this.alpha=1,this.texture=Z.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const e=new cc;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e}reset(){this.color=16777215,this.alpha=1,this.texture=Z.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class vm extends cc{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=ir.BUTT,this.join=ln.MITER,this.miterLimit=10}clone(){const e=new vm;return e.color=this.color,e.alpha=this.alpha,e.texture=this.texture,e.matrix=this.matrix,e.visible=this.visible,e.width=this.width,e.alignment=this.alignment,e.native=this.native,e.cap=this.cap,e.join=this.join,e.miterLimit=this.miterLimit,e}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1}}const yR=new Float32Array(3),Ph={},Pl=class extends Ut{constructor(t=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new cc,this._lineStyle=new vm,this._matrix=null,this._holeMode=!1,this.state=ai.for2d(),this._geometry=t||new ww,this._geometry.refCount++,this._transformID=-1,this.tint=16777215,this.blendMode=ne.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new Pl(this._geometry)}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}get tint(){return this._tint}set tint(t){this._tint=t}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(t=null,e=0,n=1,i=.5,r=!1){return typeof t=="number"&&(t={width:t,color:e,alpha:n,alignment:i,native:r}),this.lineTextureStyle(t)}lineTextureStyle(t){t=Object.assign({width:0,texture:Z.WHITE,color:t!=null&&t.texture?16777215:0,alpha:1,matrix:null,alignment:.5,native:!1,cap:ir.BUTT,join:ln.MITER,miterLimit:10},t),this.currentPath&&this.startPoly();const e=t.width>0&&t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._lineStyle,{visible:e},t)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const t=this.currentPath.points,e=this.currentPath.points.length;e>2&&(this.drawShape(this.currentPath),this.currentPath=new os,this.currentPath.closeStroke=!1,this.currentPath.points.push(t[e-2],t[e-1]))}else this.currentPath=new os,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(t,e){return this.startPoly(),this.currentPath.points[0]=t,this.currentPath.points[1]=e,this}lineTo(t,e){this.currentPath||this.moveTo(0,0);const n=this.currentPath.points,i=n[n.length-2],r=n[n.length-1];return(i!==t||r!==e)&&n.push(t,e),this}_initCurve(t=0,e=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[t,e]):this.moveTo(t,e)}quadraticCurveTo(t,e,n,i){this._initCurve();const r=this.currentPath.points;return r.length===0&&this.moveTo(0,0),gm.curveTo(t,e,n,i,r),this}bezierCurveTo(t,e,n,i,r,s){return this._initCurve(),mm.curveTo(t,e,n,i,r,s,this.currentPath.points),this}arcTo(t,e,n,i,r){this._initCurve(t,e);const s=this.currentPath.points,o=E0.curveTo(t,e,n,i,r,s);if(o){const{cx:a,cy:l,radius:u,startAngle:c,endAngle:h,anticlockwise:d}=o;this.arc(a,l,u,c,h,d)}return this}arc(t,e,n,i,r,s=!1){if(i===r)return this;if(!s&&r<=i?r+=gu:s&&i<=r&&(i+=gu),r-i===0)return this;const a=t+Math.cos(i)*n,l=e+Math.sin(i)*n,u=this._geometry.closePointEps;let c=this.currentPath?this.currentPath.points:null;if(c){const h=Math.abs(c[c.length-2]-a),d=Math.abs(c[c.length-1]-l);h<u&&d<u||c.push(a,l)}else this.moveTo(a,l),c=this.currentPath.points;return E0.arc(a,l,t,e,n,i,r,s,c),this}beginFill(t=0,e=1){return this.beginTextureFill({texture:Z.WHITE,color:t,alpha:e})}beginTextureFill(t){t=Object.assign({texture:Z.WHITE,color:16777215,alpha:1,matrix:null},t),this.currentPath&&this.startPoly();const e=t.alpha>0;return e?(t.matrix&&(t.matrix=t.matrix.clone(),t.matrix.invert()),Object.assign(this._fillStyle,{visible:e},t)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(t,e,n,i){return this.drawShape(new le(t,e,n,i))}drawRoundedRect(t,e,n,i,r){return this.drawShape(new Wo(t,e,n,i,r))}drawCircle(t,e,n){return this.drawShape(new oc(t,e,n))}drawEllipse(t,e,n,i){return this.drawShape(new hm(t,e,n,i))}drawPolygon(...t){let e,n=!0;const i=t[0];i.points?(n=i.closeStroke,e=i.points):Array.isArray(t[0])?e=t[0]:e=t;const r=new os(e);return r.closeStroke=n,this.drawShape(r),this}drawShape(t){return this._holeMode?this._geometry.drawHole(t,this._matrix):this._geometry.drawShape(t,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const t=this._geometry.graphicsData;return t.length===1&&t[0].shape.type===it.RECT&&!t[0].matrix&&!t[0].holes.length&&!(t[0].lineStyle.visible&&t[0].lineStyle.width)}_render(t){this.finishPoly();const e=this._geometry;e.updateBatches(),e.batchable?(this.batchDirty!==e.batchDirty&&this._populateBatches(),this._renderBatched(t)):(t.batch.flush(),this._renderDirect(t))}_populateBatches(){const t=this._geometry,e=this.blendMode,n=t.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=t.batchDirty,this.batches.length=n,this.vertexData=new Float32Array(t.points);for(let i=0;i<n;i++){const r=t.batches[i],s=r.style.color,o=new Float32Array(this.vertexData.buffer,r.attribStart*4*2,r.attribSize*2),a=new Float32Array(t.uvsFloat32.buffer,r.attribStart*4*2,r.attribSize*2),l=new Uint16Array(t.indicesUint16.buffer,r.start*2,r.size),u={vertexData:o,blendMode:e,indices:l,uvs:a,_batchRGB:Go(s),_tintRGB:s,_texture:r.style.texture,alpha:r.style.alpha,worldAlpha:1};this.batches[i]=u}}_renderBatched(t){if(this.batches.length){t.batch.setObjectRenderer(t.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let e=0,n=this.batches.length;e<n;e++){const i=this.batches[e];i.worldAlpha=this.worldAlpha*i.alpha,t.plugins[this.pluginName].render(i)}}}_renderDirect(t){const e=this._resolveDirectShader(t),n=this._geometry,i=this.tint,r=this.worldAlpha,s=e.uniforms,o=n.drawCalls;s.translationMatrix=this.transform.worldTransform,s.tint[0]=(i>>16&255)/255*r,s.tint[1]=(i>>8&255)/255*r,s.tint[2]=(i&255)/255*r,s.tint[3]=r,t.shader.bind(e),t.geometry.bind(n,e),t.state.set(this.state);for(let a=0,l=o.length;a<l;a++)this._renderDrawCallDirect(t,n.drawCalls[a])}_renderDrawCallDirect(t,e){const{texArray:n,type:i,size:r,start:s}=e,o=n.count;for(let a=0;a<o;a++)t.texture.bind(n.elements[a],a);t.geometry.draw(i,r,s)}_resolveDirectShader(t){let e=this.shader;const n=this.pluginName;if(!e){if(!Ph[n]){const{maxTextures:i}=t.plugins[n],r=new Int32Array(i);for(let a=0;a<i;a++)r[a]=a;const s={tint:new Float32Array([1,1,1,1]),translationMatrix:new Ce,default:yn.from({uSamplers:r},!0)},o=t.plugins[n]._shader.program;Ph[n]=new Fn(o,s)}e=Ph[n]}return e}_calculateBounds(){this.finishPoly();const t=this._geometry;if(!t.graphicsData.length)return;const{minX:e,minY:n,maxX:i,maxY:r}=t.bounds;this._bounds.addFrame(this.transform,e,n,i,r)}containsPoint(t){return this.worldTransform.applyInverse(t,Pl._TEMP_POINT),this._geometry.containsPoint(Pl._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this.tint;const t=Go(this.tint,yR);for(let e=0;e<this.batches.length;e++){const n=this.batches[e],i=n._batchRGB,r=t[0]*i[0]*255,s=t[1]*i[1]*255,o=t[2]*i[2]*255,a=(r<<16)+(s<<8)+(o|0);n._tintRGB=(a>>16)+(a&65280)+((a&255)<<16)}}}calculateVertices(){const t=this.transform._worldID;if(this._transformID===t)return;this._transformID=t;const e=this.transform.worldTransform,n=e.a,i=e.b,r=e.c,s=e.d,o=e.tx,a=e.ty,l=this._geometry.points,u=this.vertexData;let c=0;for(let h=0;h<l.length;h+=2){const d=l[h],f=l[h+1];u[c++]=n*d+r*f+o,u[c++]=s*f+i*d+a}}closePath(){const t=this.currentPath;return t&&(t.closeStroke=!0,this.finishPoly()),this}setMatrix(t){return this._matrix=t,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(t){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(t)}};let lr=Pl;lr.curves=bs;lr._TEMP_POINT=new te;class xR{constructor(e,n){this.uvBuffer=e,this.uvMatrix=n,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(e){if(!e&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const n=this.uvBuffer.data;(!this.data||this.data.length!==n.length)&&(this.data=new Float32Array(n.length)),this.uvMatrix.multiplyUvs(n,this.data),this._updateID++}}const Ih=new te,A0=new os,bw=class extends Ut{constructor(t,e,n,i=Mn.TRIANGLES){super(),this.geometry=t,this.shader=e,this.state=n||ai.for2d(),this.drawMode=i,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=X.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(t){this._geometry!==t&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=t,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(t){this.shader=t}get material(){return this.shader}set blendMode(t){this.state.blendMode=t}get blendMode(){return this.state.blendMode}set roundPixels(t){this._roundPixels!==t&&(this._transformID=-1),this._roundPixels=t}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(t){this.shader.tint=t}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(t){this.shader.texture=t}_render(t){const e=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===Mn.TRIANGLES&&e.length<bw.BATCHABLE_SIZE*2?this._renderToBatch(t):this._renderDefault(t)}_renderDefault(t){const e=this.shader;e.alpha=this.worldAlpha,e.update&&e.update(),t.batch.flush(),e.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),t.shader.bind(e),t.state.set(this.state),t.geometry.bind(this.geometry,e),t.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(t){const e=this.geometry,n=this.shader;n.uvMatrix&&(n.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=e.indexBuffer.data,this._tintRGB=n._tintRGB,this._texture=n.texture;const i=this.material.pluginName;t.batch.setObjectRenderer(t.plugins[i]),t.plugins[i].render(this)}calculateVertices(){const e=this.geometry.buffers[0],n=e.data,i=e._updateID;if(i===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==n.length&&(this.vertexData=new Float32Array(n.length));const r=this.transform.worldTransform,s=r.a,o=r.b,a=r.c,l=r.d,u=r.tx,c=r.ty,h=this.vertexData;for(let d=0;d<h.length/2;d++){const f=n[d*2],p=n[d*2+1];h[d*2]=s*f+a*p+u,h[d*2+1]=o*f+l*p+c}if(this._roundPixels){const d=X.RESOLUTION;for(let f=0;f<h.length;++f)h[f]=Math.round(h[f]*d)/d}this.vertexDirty=i}calculateUvs(){const t=this.geometry.buffers[1],e=this.shader;e.uvMatrix.isSimple?this.uvs=t.data:(this.batchUvs||(this.batchUvs=new xR(t,e.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,Ih);const e=this.geometry.getBuffer("aVertexPosition").data,n=A0.points,i=this.geometry.getIndex().data,r=i.length,s=this.drawMode===4?3:1;for(let o=0;o+2<r;o+=s){const a=i[o]*2,l=i[o+1]*2,u=i[o+2]*2;if(n[0]=e[a],n[1]=e[a+1],n[2]=e[l],n[3]=e[l+1],n[4]=e[u],n[5]=e[u+1],A0.contains(Ih.x,Ih.y))return!0}return!1}destroy(t){super.destroy(t),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};let wf=bw;wf.BATCHABLE_SIZE=100;class _R extends Di{constructor(e,n,i){super();const r=new Xe(e),s=new Xe(n,!0),o=new Xe(i,!0,!0);this.addAttribute("aVertexPosition",r,2,!1,J.FLOAT).addAttribute("aTextureCoord",s,2,!1,J.FLOAT).addIndex(o),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var wR=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,bR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class P0 extends Fn{constructor(e,n){const i={uSampler:e,alpha:1,uTextureMatrix:Ce.IDENTITY,uColor:new Float32Array([1,1,1,1])};n=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},n),n.uniforms&&Object.assign(i,n.uniforms),super(n.program||fn.from(bR,wR),i),this._colorDirty=!1,this.uvMatrix=new z_(e),this.batchable=n.program===void 0,this.pluginName=n.pluginName,this.tint=n.tint,this.alpha=n.alpha}get texture(){return this.uniforms.uSampler}set texture(e){this.uniforms.uSampler!==e&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!e.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=e,this.uvMatrix.texture=e)}set alpha(e){e!==this._alpha&&(this._alpha=e,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(e){e!==this._tint&&(this._tint=e,this._tintRGB=(e>>16)+(e&65280)+((e&255)<<16),this._colorDirty=!0)}get tint(){return this._tint}update(){if(this._colorDirty){this._colorDirty=!1;const e=this.texture.baseTexture;y_(this._tint,this._alpha,this.uniforms.uColor,e.alphaMode)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class I0{constructor(e,n,i){this.geometry=new Di,this.indexBuffer=null,this.size=i,this.dynamicProperties=[],this.staticProperties=[];for(let r=0;r<e.length;++r){let s=e[r];s={attributeName:s.attributeName,size:s.size,uploadFunction:s.uploadFunction,type:s.type||J.FLOAT,offset:s.offset},n[r]?this.dynamicProperties.push(s):this.staticProperties.push(s)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const e=this.geometry;let n=0;this.indexBuffer=new Xe(dI(this.size),!0,!0),e.addIndex(this.indexBuffer),this.dynamicStride=0;for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];a.offset=n,n+=a.size,this.dynamicStride+=a.size}const i=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(i),this.dynamicDataUint32=new Uint32Array(i),this.dynamicBuffer=new Xe(this.dynamicData,!1,!1);let r=0;this.staticStride=0;for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];a.offset=r,r+=a.size,this.staticStride+=a.size}const s=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(s),this.staticDataUint32=new Uint32Array(s),this.staticBuffer=new Xe(this.staticData,!0,!1);for(let o=0;o<this.dynamicProperties.length;++o){const a=this.dynamicProperties[o];e.addAttribute(a.attributeName,this.dynamicBuffer,0,a.type===J.UNSIGNED_BYTE,a.type,this.dynamicStride*4,a.offset*4)}for(let o=0;o<this.staticProperties.length;++o){const a=this.staticProperties[o];e.addAttribute(a.attributeName,this.staticBuffer,0,a.type===J.UNSIGNED_BYTE,a.type,this.staticStride*4,a.offset*4)}}uploadDynamic(e,n,i){for(let r=0;r<this.dynamicProperties.length;r++){const s=this.dynamicProperties[r];s.uploadFunction(e,n,i,s.type===J.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,s.offset)}this.dynamicBuffer._updateID++}uploadStatic(e,n,i){for(let r=0;r<this.staticProperties.length;r++){const s=this.staticProperties[r];s.uploadFunction(e,n,i,s.type===J.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,s.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var ER=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,SR=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class Ew extends ac{constructor(e){super(e),this.shader=null,this.properties=null,this.tempMatrix=new Ce,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:J.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Fn.from(SR,ER,{}),this.state=ai.for2d()}render(e){const n=e.children,i=e._maxSize,r=e._batchSize,s=this.renderer;let o=n.length;if(o===0)return;o>i&&!e.autoResize&&(o=i);let a=e._buffers;a||(a=e._buffers=this.generateBuffers(e));const l=n[0]._texture.baseTexture,u=l.alphaMode>0;this.state.blendMode=v_(e.blendMode,u),s.state.set(this.state);const c=s.gl,h=e.worldTransform.copyTo(this.tempMatrix);h.prepend(s.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=h.toArray(!0),this.shader.uniforms.uColor=hI(e.tintRgb,e.worldAlpha,this.shader.uniforms.uColor,u),this.shader.uniforms.uSampler=l,this.renderer.shader.bind(this.shader);let d=!1;for(let f=0,p=0;f<o;f+=r,p+=1){let g=o-f;g>r&&(g=r),p>=a.length&&a.push(this._generateOneMoreBuffer(e));const v=a[p];v.uploadDynamic(n,f,g);const m=e._bufferUpdateIDs[p]||0;d=d||v._updateID<m,d&&(v._updateID=e._updateID,v.uploadStatic(n,f,g)),s.geometry.bind(v.geometry),c.drawElements(c.TRIANGLES,g*6,c.UNSIGNED_SHORT,0)}}generateBuffers(e){const n=[],i=e._maxSize,r=e._batchSize,s=e._properties;for(let o=0;o<i;o+=r)n.push(new I0(this.properties,s,r));return n}_generateOneMoreBuffer(e){const n=e._batchSize,i=e._properties;return new I0(this.properties,i,n)}uploadVertices(e,n,i,r,s,o){let a=0,l=0,u=0,c=0;for(let h=0;h<i;++h){const d=e[n+h],f=d._texture,p=d.scale.x,g=d.scale.y,v=f.trim,m=f.orig;v?(l=v.x-d.anchor.x*m.width,a=l+v.width,c=v.y-d.anchor.y*m.height,u=c+v.height):(a=m.width*(1-d.anchor.x),l=m.width*-d.anchor.x,u=m.height*(1-d.anchor.y),c=m.height*-d.anchor.y),r[o]=l*p,r[o+1]=c*g,r[o+s]=a*p,r[o+s+1]=c*g,r[o+s*2]=a*p,r[o+s*2+1]=u*g,r[o+s*3]=l*p,r[o+s*3+1]=u*g,o+=s*4}}uploadPosition(e,n,i,r,s,o){for(let a=0;a<i;a++){const l=e[n+a].position;r[o]=l.x,r[o+1]=l.y,r[o+s]=l.x,r[o+s+1]=l.y,r[o+s*2]=l.x,r[o+s*2+1]=l.y,r[o+s*3]=l.x,r[o+s*3+1]=l.y,o+=s*4}}uploadRotation(e,n,i,r,s,o){for(let a=0;a<i;a++){const l=e[n+a].rotation;r[o]=l,r[o+s]=l,r[o+s*2]=l,r[o+s*3]=l,o+=s*4}}uploadUvs(e,n,i,r,s,o){for(let a=0;a<i;++a){const l=e[n+a]._texture._uvs;l?(r[o]=l.x0,r[o+1]=l.y0,r[o+s]=l.x1,r[o+s+1]=l.y1,r[o+s*2]=l.x2,r[o+s*2+1]=l.y2,r[o+s*3]=l.x3,r[o+s*3+1]=l.y3,o+=s*4):(r[o]=0,r[o+1]=0,r[o+s]=0,r[o+s+1]=0,r[o+s*2]=0,r[o+s*2+1]=0,r[o+s*3]=0,r[o+s*3+1]=0,o+=s*4)}}uploadTint(e,n,i,r,s,o){for(let a=0;a<i;++a){const l=e[n+a],u=l._texture.baseTexture.alphaMode>0,c=l.alpha,h=c<1&&u?cm(l._tintRGB,c):l._tintRGB+(c*255<<24);r[o]=h,r[o+s]=h,r[o+s*2]=h,r[o+s*3]=h,o+=s*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}Ew.extension={name:"particle",type:W.RendererPlugin};Q.add(Ew);var hc=(t=>(t[t.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",t[t.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",t))(hc||{});const Za={willReadFrequently:!0},K=class{static get experimentalLetterSpacingSupported(){let t=K._experimentalLetterSpacingSupported;if(t!==void 0){const e=X.ADAPTER.getCanvasRenderingContext2D().prototype;t=K._experimentalLetterSpacingSupported="letterSpacing"in e||"textLetterSpacing"in e}return t}constructor(t,e,n,i,r,s,o,a,l){this.text=t,this.style=e,this.width=n,this.height=i,this.lines=r,this.lineWidths=s,this.lineHeight=o,this.maxLineWidth=a,this.fontProperties=l}static measureText(t,e,n,i=K._canvas){n=n??e.wordWrap;const r=e.toFontString(),s=K.measureFont(r);s.fontSize===0&&(s.fontSize=e.fontSize,s.ascent=e.fontSize);const o=i.getContext("2d",Za);o.font=r;const l=(n?K.wordWrap(t,e,i):t).split(/(?:\r\n|\r|\n)/),u=new Array(l.length);let c=0;for(let p=0;p<l.length;p++){const g=K._measureText(l[p],e.letterSpacing,o);u[p]=g,c=Math.max(c,g)}let h=c+e.strokeThickness;e.dropShadow&&(h+=e.dropShadowDistance);const d=e.lineHeight||s.fontSize+e.strokeThickness;let f=Math.max(d,s.fontSize+e.strokeThickness*2)+(l.length-1)*(d+e.leading);return e.dropShadow&&(f+=e.dropShadowDistance),new K(t,e,h,f,l,u,d+e.leading,c,s)}static _measureText(t,e,n){let i=!1;K.experimentalLetterSpacingSupported&&(K.experimentalLetterSpacing?(n.letterSpacing=`${e}px`,n.textLetterSpacing=`${e}px`,i=!0):(n.letterSpacing="0px",n.textLetterSpacing="0px"));let r=n.measureText(t).width;return r>0&&(i?r-=e:r+=(K.graphemeSegmenter(t).length-1)*e),r}static wordWrap(t,e,n=K._canvas){const i=n.getContext("2d",Za);let r=0,s="",o="";const a=Object.create(null),{letterSpacing:l,whiteSpace:u}=e,c=K.collapseSpaces(u),h=K.collapseNewlines(u);let d=!c;const f=e.wordWrapWidth+l,p=K.tokenize(t);for(let g=0;g<p.length;g++){let v=p[g];if(K.isNewline(v)){if(!h){o+=K.addLine(s),d=!c,s="",r=0;continue}v=" "}if(c){const y=K.isBreakingSpace(v),x=K.isBreakingSpace(s[s.length-1]);if(y&&x)continue}const m=K.getFromCache(v,l,a,i);if(m>f)if(s!==""&&(o+=K.addLine(s),s="",r=0),K.canBreakWords(v,e.breakWords)){const y=K.wordWrapSplit(v);for(let x=0;x<y.length;x++){let _=y[x],b=_,T=1;for(;y[x+T];){const S=y[x+T];if(!K.canBreakChars(b,S,v,x,e.breakWords))_+=S;else break;b=S,T++}x+=T-1;const E=K.getFromCache(_,l,a,i);E+r>f&&(o+=K.addLine(s),d=!1,s="",r=0),s+=_,r+=E}}else{s.length>0&&(o+=K.addLine(s),s="",r=0);const y=g===p.length-1;o+=K.addLine(v,!y),d=!1,s="",r=0}else m+r>f&&(d=!1,o+=K.addLine(s),s="",r=0),(s.length>0||!K.isBreakingSpace(v)||d)&&(s+=v,r+=m)}return o+=K.addLine(s,!1),o}static addLine(t,e=!0){return t=K.trimRight(t),t=e?`${t}
`:t,t}static getFromCache(t,e,n,i){let r=n[t];return typeof r!="number"&&(r=K._measureText(t,e,i)+e,n[t]=r),r}static collapseSpaces(t){return t==="normal"||t==="pre-line"}static collapseNewlines(t){return t==="normal"}static trimRight(t){if(typeof t!="string")return"";for(let e=t.length-1;e>=0;e--){const n=t[e];if(!K.isBreakingSpace(n))break;t=t.slice(0,-1)}return t}static isNewline(t){return typeof t!="string"?!1:K._newlines.includes(t.charCodeAt(0))}static isBreakingSpace(t,e){return typeof t!="string"?!1:K._breakingSpaces.includes(t.charCodeAt(0))}static tokenize(t){const e=[];let n="";if(typeof t!="string")return e;for(let i=0;i<t.length;i++){const r=t[i],s=t[i+1];if(K.isBreakingSpace(r,s)||K.isNewline(r)){n!==""&&(e.push(n),n=""),e.push(r);continue}n+=r}return n!==""&&e.push(n),e}static canBreakWords(t,e){return e}static canBreakChars(t,e,n,i,r){return!0}static wordWrapSplit(t){return K.graphemeSegmenter(t)}static measureFont(t){if(K._fonts[t])return K._fonts[t];const e={ascent:0,descent:0,fontSize:0},n=K._canvas,i=K._context;i.font=t;const r=K.METRICS_STRING+K.BASELINE_SYMBOL,s=Math.ceil(i.measureText(r).width);let o=Math.ceil(i.measureText(K.BASELINE_SYMBOL).width);const a=Math.ceil(K.HEIGHT_MULTIPLIER*o);if(o=o*K.BASELINE_MULTIPLIER|0,s===0||a===0)return K._fonts[t]=e,e;n.width=s,n.height=a,i.fillStyle="#f00",i.fillRect(0,0,s,a),i.font=t,i.textBaseline="alphabetic",i.fillStyle="#000",i.fillText(r,0,o);const l=i.getImageData(0,0,s,a).data,u=l.length,c=s*4;let h=0,d=0,f=!1;for(h=0;h<o;++h){for(let p=0;p<c;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d+=c;else break}for(e.ascent=o-h,d=u-c,f=!1,h=a;h>o;--h){for(let p=0;p<c;p+=4)if(l[d+p]!==255){f=!0;break}if(!f)d-=c;else break}return e.descent=h-o,e.fontSize=e.ascent+e.descent,K._fonts[t]=e,e}static clearMetrics(t=""){t?delete K._fonts[t]:K._fonts={}}static get _canvas(){if(!K.__canvas){let t;try{const e=new OffscreenCanvas(0,0),n=e.getContext("2d",Za);if(n!=null&&n.measureText)return K.__canvas=e,e;t=X.ADAPTER.createCanvas()}catch{t=X.ADAPTER.createCanvas()}t.width=t.height=10,K.__canvas=t}return K.__canvas}static get _context(){return K.__context||(K.__context=K._canvas.getContext("2d",Za)),K.__context}};let nt=K;nt.METRICS_STRING="|ÉqÅ";nt.BASELINE_SYMBOL="M";nt.BASELINE_MULTIPLIER=1.4;nt.HEIGHT_MULTIPLIER=2;nt.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const t=new Intl.Segmenter;return e=>[...t.segment(e)].map(n=>n.segment)}return t=>[...t]})();nt.experimentalLetterSpacing=!1;nt._fonts={};nt._newlines=[10,13];nt._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];const TR=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],lo=class{constructor(t){this.styleID=0,this.reset(),Oh(this,t,t)}clone(){const t={};return Oh(t,this,lo.defaultStyle),new lo(t)}reset(){Oh(this,lo.defaultStyle,lo.defaultStyle)}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(t){const e=Mh(t);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}get fill(){return this._fill}set fill(t){const e=Mh(t);this._fill!==e&&(this._fill=e,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(t){CR(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}get leading(){return this._leading}set leading(t){this._leading!==t&&(this._leading=t,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}get padding(){return this._padding}set padding(t){this._padding!==t&&(this._padding=t,this.styleID++)}get stroke(){return this._stroke}set stroke(t){const e=Mh(t);this._stroke!==e&&(this._stroke=e,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}get trim(){return this._trim}set trim(t){this._trim!==t&&(this._trim=t,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(t){this._whiteSpace!==t&&(this._whiteSpace=t,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}toFontString(){const t=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(let n=e.length-1;n>=0;n--){let i=e[n].trim();!/([\"\'])[^\'\"]+\1/.test(i)&&!TR.includes(i)&&(i=`"${i}"`),e[n]=i}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${t} ${e.join(",")}`}};let yr=lo;yr.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:hc.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};function M0(t){return typeof t=="number"?m_(t):(typeof t=="string"&&t.startsWith("0x")&&(t=t.replace("0x","#")),t)}function Mh(t){if(Array.isArray(t)){for(let e=0;e<t.length;++e)t[e]=M0(t[e]);return t}else return M0(t)}function CR(t,e){if(!Array.isArray(t)||!Array.isArray(e)||t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(t[n]!==e[n])return!1;return!0}function Oh(t,e,n){for(const i in n)Array.isArray(e[i])?t[i]=e[i].slice():t[i]=e[i]}const AR={texture:!0,children:!1,baseTexture:!0},bf=class extends aa{constructor(t,e,n){let i=!1;n||(n=X.ADAPTER.createCanvas(),i=!0),n.width=3,n.height=3;const r=Z.from(n);r.orig=new le,r.trim=new le,super(r),this._ownCanvas=i,this.canvas=n,this.context=n.getContext("2d",{willReadFrequently:!0}),this._resolution=bf.defaultResolution??X.RESOLUTION,this._autoResolution=bf.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=t,this.style=e,this.localStyleID=-1}static get experimentalLetterSpacing(){return nt.experimentalLetterSpacing}static set experimentalLetterSpacing(t){fe("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),nt.experimentalLetterSpacing=t}updateText(t){const e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),!this.dirty&&t)return;this._font=this._style.toFontString();const n=this.context,i=nt.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),r=i.width,s=i.height,o=i.lines,a=i.lineHeight,l=i.lineWidths,u=i.maxLineWidth,c=i.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,r)+e.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,s)+e.padding*2)*this._resolution),n.scale(this._resolution,this._resolution),n.clearRect(0,0,this.canvas.width,this.canvas.height),n.font=this._font,n.lineWidth=e.strokeThickness,n.textBaseline=e.textBaseline,n.lineJoin=e.lineJoin,n.miterLimit=e.miterLimit;let h,d;const f=e.dropShadow?2:1;for(let p=0;p<f;++p){const g=e.dropShadow&&p===0,v=g?Math.ceil(Math.max(1,s)+e.padding*2):0,m=v*this._resolution;if(g){n.fillStyle="black",n.strokeStyle="black";const x=e.dropShadowColor,_=Go(typeof x=="number"?x:um(x)),b=e.dropShadowBlur*this._resolution,T=e.dropShadowDistance*this._resolution;n.shadowColor=`rgba(${_[0]*255},${_[1]*255},${_[2]*255},${e.dropShadowAlpha})`,n.shadowBlur=b,n.shadowOffsetX=Math.cos(e.dropShadowAngle)*T,n.shadowOffsetY=Math.sin(e.dropShadowAngle)*T+m}else n.fillStyle=this._generateFillStyle(e,o,i),n.strokeStyle=e.stroke,n.shadowColor="black",n.shadowBlur=0,n.shadowOffsetX=0,n.shadowOffsetY=0;let y=(a-c.fontSize)/2;a-c.fontSize<0&&(y=0);for(let x=0;x<o.length;x++)h=e.strokeThickness/2,d=e.strokeThickness/2+x*a+c.ascent+y,e.align==="right"?h+=u-l[x]:e.align==="center"&&(h+=(u-l[x])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[x],h+e.padding,d+e.padding-v,!0),e.fill&&this.drawLetterSpacing(o[x],h+e.padding,d+e.padding-v)}this.updateTexture()}drawLetterSpacing(t,e,n,i=!1){const s=this._style.letterSpacing;let o=!1;if(nt.experimentalLetterSpacingSupported&&(nt.experimentalLetterSpacing?(this.context.letterSpacing=`${s}px`,this.context.textLetterSpacing=`${s}px`,o=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),s===0||o){i?this.context.strokeText(t,e,n):this.context.fillText(t,e,n);return}let a=e;const l=nt.graphemeSegmenter(t);let u=this.context.measureText(t).width,c=0;for(let h=0;h<l.length;++h){const d=l[h];i?this.context.strokeText(d,a,n):this.context.fillText(d,a,n);let f="";for(let p=h+1;p<l.length;++p)f+=l[p];c=this.context.measureText(f).width,a+=u-c+s,u=c}}updateTexture(){const t=this.canvas;if(this._style.trim){const s=mI(t);s.data&&(t.width=s.width,t.height=s.height,this.context.putImageData(s.data,0,0))}const e=this._texture,n=this._style,i=n.trim?0:n.padding,r=e.baseTexture;e.trim.width=e._frame.width=t.width/this._resolution,e.trim.height=e._frame.height=t.height/this._resolution,e.trim.x=-i,e.trim.y=-i,e.orig.width=e._frame.width-i*2,e.orig.height=e._frame.height-i*2,this._onTextureUpdate(),r.setRealSize(t.width,t.height,this._resolution),e.updateUvs(),this.dirty=!1}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0),this.updateText(!0),super._render(t)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(t,e){return this.updateText(!0),this._textureID===-1&&(t=!1),super.getBounds(t,e)}getLocalBounds(t){return this.updateText(!0),super.getLocalBounds.call(this,t)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(t,e,n){const i=t.fill;if(Array.isArray(i)){if(i.length===1)return i[0]}else return i;let r;const s=t.dropShadow?t.dropShadowDistance:0,o=t.padding||0,a=this.canvas.width/this._resolution-s-o*2,l=this.canvas.height/this._resolution-s-o*2,u=i.slice(),c=t.fillGradientStops.slice();if(!c.length){const h=u.length+1;for(let d=1;d<h;++d)c.push(d/h)}if(u.unshift(i[0]),c.unshift(0),u.push(i[i.length-1]),c.push(1),t.fillGradientType===hc.LINEAR_VERTICAL){r=this.context.createLinearGradient(a/2,o,a/2,l+o);const h=n.fontProperties.fontSize+t.strokeThickness;for(let d=0;d<e.length;d++){const f=n.lineHeight*(d-1)+h,p=n.lineHeight*d;let g=p;d>0&&f>p&&(g=(p+f)/2);const v=p+h,m=n.lineHeight*(d+1);let y=v;d+1<e.length&&m<v&&(y=(v+m)/2);const x=(y-g)/l;for(let _=0;_<u.length;_++){let b=0;typeof c[_]=="number"?b=c[_]:b=_/u.length;let T=Math.min(1,Math.max(0,g/l+b*x));T=Number(T.toFixed(5)),r.addColorStop(T,u[_])}}}else{r=this.context.createLinearGradient(o,l/2,a+o,l/2);const h=u.length+1;let d=1;for(let f=0;f<u.length;f++){let p;typeof c[f]=="number"?p=c[f]:p=d/h,r.addColorStop(p,u[f]),d++}}return r}destroy(t){typeof t=="boolean"&&(t={children:t}),t=Object.assign({},AR,t),super.destroy(t),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(t){this.updateText(!0);const e=qr(this.scale.x)||1;this.scale.x=e*t/this._texture.orig.width,this._width=t}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(t){this.updateText(!0);const e=qr(this.scale.y)||1;this.scale.y=e*t/this._texture.orig.height,this._height=t}get style(){return this._style}set style(t){t=t||{},t instanceof yr?this._style=t:this._style=new yr(t),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}};let ls=bf;ls.defaultAutoResolution=!0;class PR{constructor(e){this.maxItemsPerFrame=e,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function IR(t,e){var i;let n=!1;if((i=t==null?void 0:t._textures)!=null&&i.length){for(let r=0;r<t._textures.length;r++)if(t._textures[r]instanceof Z){const s=t._textures[r].baseTexture;e.includes(s)||(e.push(s),n=!0)}}return n}function MR(t,e){if(t.baseTexture instanceof ae){const n=t.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function OR(t,e){if(t._texture&&t._texture instanceof Z){const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function RR(t,e){return e instanceof ls?(e.updateText(!0),!0):!1}function kR(t,e){if(e instanceof yr){const n=e.toFontString();return nt.measureFont(n),!0}return!1}function DR(t,e){if(t instanceof ls){e.includes(t.style)||e.push(t.style),e.includes(t)||e.push(t);const n=t._texture.baseTexture;return e.includes(n)||e.push(n),!0}return!1}function FR(t,e){return t instanceof yr?(e.includes(t)||e.push(t),!0):!1}const Sw=class{constructor(t){this.limiter=new PR(Sw.uploadsPerFrame),this.renderer=t,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(DR),this.registerFindHook(FR),this.registerFindHook(IR),this.registerFindHook(MR),this.registerFindHook(OR),this.registerUploadHook(RR),this.registerUploadHook(kR)}upload(t){return new Promise(e=>{t&&this.add(t),this.queue.length?(this.completes.push(e),this.ticking||(this.ticking=!0,pt.system.addOnce(this.tick,this,_s.UTILITY))):e()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const t=this.queue[0];let e=!1;if(t&&!t._destroyed){for(let n=0,i=this.uploadHooks.length;n<i;n++)if(this.uploadHooks[n](this.uploadHookHelper,t)){this.queue.shift(),e=!0;break}}e||this.queue.shift()}if(this.queue.length)pt.system.addOnce(this.tick,this,_s.UTILITY);else{this.ticking=!1;const t=this.completes.slice(0);this.completes.length=0;for(let e=0,n=t.length;e<n;e++)t[e]()}}registerFindHook(t){return t&&this.addHooks.push(t),this}registerUploadHook(t){return t&&this.uploadHooks.push(t),this}add(t){for(let e=0,n=this.addHooks.length;e<n&&!this.addHooks[e](t,this.queue);e++);if(t instanceof Ut)for(let e=t.children.length-1;e>=0;e--)this.add(t.children[e]);return this}destroy(){this.ticking&&pt.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};let Eu=Sw;Eu.uploadsPerFrame=4;Object.defineProperties(X,{UPLOADS_PER_FRAME:{get(){return Eu.uploadsPerFrame},set(t){fe("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),Eu.uploadsPerFrame=t}}});function Tw(t,e){return e instanceof ae?(e._glTextures[t.CONTEXT_UID]||t.texture.bind(e),!0):!1}function LR(t,e){if(!(e instanceof lr))return!1;const{geometry:n}=e;e.finishPoly(),n.updateBatches();const{batches:i}=n;for(let r=0;r<i.length;r++){const{texture:s}=i[r].style;s&&Tw(t,s.baseTexture)}return n.batchable||t.geometry.bind(n,e._resolveDirectShader(t)),!0}function BR(t,e){return t instanceof lr?(e.push(t),!0):!1}class Cw extends Eu{constructor(e){super(e),this.uploadHookHelper=this.renderer,this.registerFindHook(BR),this.registerUploadHook(Tw),this.registerUploadHook(LR)}}Cw.extension={name:"prepare",type:W.RendererSystem};Q.add(Cw);var NR=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,UR=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,$R=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,O0=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,zR=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const Qa=new Ce;class Aw extends ac{constructor(e){super(e),e.runners.contextChange.add(this),this.quad=new B_,this.state=ai.for2d()}contextChange(){const e=this.renderer,n={globals:e.globalUniforms};this.simpleShader=Fn.from(O0,zR,n),this.shader=e.context.webGLVersion>1?Fn.from(UR,NR,n):Fn.from(O0,$R,n)}render(e){const n=this.renderer,i=this.quad;let r=i.vertices;r[0]=r[6]=e._width*-e.anchor.x,r[1]=r[3]=e._height*-e.anchor.y,r[2]=r[4]=e._width*(1-e.anchor.x),r[5]=r[7]=e._height*(1-e.anchor.y);const s=e.uvRespectAnchor?e.anchor.x:0,o=e.uvRespectAnchor?e.anchor.y:0;r=i.uvs,r[0]=r[6]=-s,r[1]=r[3]=-o,r[2]=r[4]=1-s,r[5]=r[7]=1-o,i.invalidate();const a=e._texture,l=a.baseTexture,u=l.alphaMode>0,c=e.tileTransform.localTransform,h=e.uvMatrix;let d=l.isPowerOfTwo&&a.frame.width===l.width&&a.frame.height===l.height;d&&(l._glTextures[n.CONTEXT_UID]?d=l.wrapMode!==Ii.CLAMP:l.wrapMode===Ii.CLAMP&&(l.wrapMode=Ii.REPEAT));const f=d?this.simpleShader:this.shader,p=a.width,g=a.height,v=e._width,m=e._height;Qa.set(c.a*p/v,c.b*p/m,c.c*g/v,c.d*g/m,c.tx/v,c.ty/m),Qa.invert(),d?Qa.prepend(h.mapCoord):(f.uniforms.uMapCoord=h.mapCoord.toArray(!0),f.uniforms.uClampFrame=h.uClampFrame,f.uniforms.uClampOffset=h.uClampOffset),f.uniforms.uTransform=Qa.toArray(!0),f.uniforms.uColor=y_(e.tint,e.worldAlpha,f.uniforms.uColor,u),f.uniforms.translationMatrix=e.transform.worldTransform.toArray(!0),f.uniforms.uSampler=a,n.shader.bind(f),n.geometry.bind(i),this.state.blendMode=v_(e.blendMode,u),n.state.set(this.state),n.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}Aw.extension={name:"tilingSprite",type:W.RendererPlugin};Q.add(Aw);const uo=class{constructor(t,e,n=null){this.linkedSheets=[],this._texture=t instanceof Z?t:null,this.baseTexture=t instanceof ae?t:this._texture.baseTexture,this.textures={},this.animations={},this.data=e;const i=this.baseTexture.resource;this.resolution=this._updateResolution(n||(i?i.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(t=null){const{scale:e}=this.data.meta;let n=ki(t,null);return n===null&&(n=parseFloat(e??"1")),n!==1&&this.baseTexture.setResolution(n),n}parse(){return new Promise(t=>{this._callback=t,this._batchIndex=0,this._frameKeys.length<=uo.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(t){let e=t;const n=uo.BATCH_SIZE;for(;e-t<n&&e<this._frameKeys.length;){const i=this._frameKeys[e],r=this._frames[i],s=r.frame;if(s){let o=null,a=null;const l=r.trimmed!==!1&&r.sourceSize?r.sourceSize:r.frame,u=new le(0,0,Math.floor(l.w)/this.resolution,Math.floor(l.h)/this.resolution);r.rotated?o=new le(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.h)/this.resolution,Math.floor(s.w)/this.resolution):o=new le(Math.floor(s.x)/this.resolution,Math.floor(s.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution),r.trimmed!==!1&&r.spriteSourceSize&&(a=new le(Math.floor(r.spriteSourceSize.x)/this.resolution,Math.floor(r.spriteSourceSize.y)/this.resolution,Math.floor(s.w)/this.resolution,Math.floor(s.h)/this.resolution)),this.textures[i]=new Z(this.baseTexture,o,u,a,r.rotated?2:0,r.anchor),Z.addToCache(this.textures[i],i)}e++}}_processAnimations(){const t=this.data.animations||{};for(const e in t){this.animations[e]=[];for(let n=0;n<t[e].length;n++){const i=t[e][n];this.animations[e].push(this.textures[i])}}}_parseComplete(){const t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*uo.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*uo.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(t=!1){var e;for(const n in this.textures)this.textures[n].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,t&&((e=this._texture)==null||e.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};let Ef=uo;Ef.BATCH_SIZE=1e3;const HR=["jpg","png","jpeg","avif","webp"];function Pw(t,e,n){const i={};if(t.forEach(r=>{i[r]=e}),Object.keys(e.textures).forEach(r=>{i[r]=e.textures[r]}),!n){const r=ot.dirname(t[0]);e.linkedSheets.forEach((s,o)=>{const a=Pw([`${r}/${e.data.meta.related_multi_packs[o]}`],s,!0);Object.assign(i,a)})}return i}const jR={extension:W.Asset,cache:{test:t=>t instanceof Ef,getCacheableAssets:(t,e)=>Pw(t,e,!1)},resolver:{test:t=>{const n=t.split("?")[0].split("."),i=n.pop(),r=n.pop();return i==="json"&&HR.includes(r)},parse:t=>{var n;const e=t.split(".");return{resolution:parseFloat(((n=X.RETINA_PREFIX.exec(t))==null?void 0:n[1])??"1"),format:e[e.length-2],src:t}}},loader:{extension:{type:W.LoadParser,priority:$n.Normal},async testParse(t,e){return ot.extname(e.src).toLowerCase()===".json"&&!!t.frames},async parse(t,e,n){var u,c;let i=ot.dirname(e.src);i&&i.lastIndexOf("/")!==i.length-1&&(i+="/");let r=i+t.meta.image;r=yf(r,e.src);const o=(await n.load([r]))[r],a=new Ef(o.baseTexture,t,e.src);await a.parse();const l=(u=t==null?void 0:t.meta)==null?void 0:u.related_multi_packs;if(Array.isArray(l)){const h=[];for(const f of l){if(typeof f!="string")continue;let p=i+f;(c=e.data)!=null&&c.ignoreMultiPack||(p=yf(p,e.src),h.push(n.load({src:p,data:{ignoreMultiPack:!0}})))}const d=await Promise.all(h);a.linkedSheets=d,d.forEach(f=>{f.linkedSheets=[a].concat(a.linkedSheets.filter(p=>p!==f))})}return a},unload(t){t.destroy(!0)}}};Q.add(jR);class Su{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class Il{static test(e){return typeof e=="string"&&e.startsWith("info face=")}static parse(e){const n=e.match(/^[a-z]+\s+.+$/gm),i={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const s in n){const o=n[s].match(/^[a-z]+/gm)[0],a=n[s].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),l={};for(const u in a){const c=a[u].split("="),h=c[0],d=c[1].replace(/"/gm,""),f=parseFloat(d),p=isNaN(f)?d:f;l[h]=p}i[o].push(l)}const r=new Su;return i.info.forEach(s=>r.info.push({face:s.face,size:parseInt(s.size,10)})),i.common.forEach(s=>r.common.push({lineHeight:parseInt(s.lineHeight,10)})),i.page.forEach(s=>r.page.push({id:parseInt(s.id,10),file:s.file})),i.char.forEach(s=>r.char.push({id:parseInt(s.id,10),page:parseInt(s.page,10),x:parseInt(s.x,10),y:parseInt(s.y,10),width:parseInt(s.width,10),height:parseInt(s.height,10),xoffset:parseInt(s.xoffset,10),yoffset:parseInt(s.yoffset,10),xadvance:parseInt(s.xadvance,10)})),i.kerning.forEach(s=>r.kerning.push({first:parseInt(s.first,10),second:parseInt(s.second,10),amount:parseInt(s.amount,10)})),i.distanceField.forEach(s=>r.distanceField.push({distanceRange:parseInt(s.distanceRange,10),fieldType:s.fieldType})),r}}class Sf{static test(e){const n=e;return"getElementsByTagName"in n&&n.getElementsByTagName("page").length&&n.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(e){const n=new Su,i=e.getElementsByTagName("info"),r=e.getElementsByTagName("common"),s=e.getElementsByTagName("page"),o=e.getElementsByTagName("char"),a=e.getElementsByTagName("kerning"),l=e.getElementsByTagName("distanceField");for(let u=0;u<i.length;u++)n.info.push({face:i[u].getAttribute("face"),size:parseInt(i[u].getAttribute("size"),10)});for(let u=0;u<r.length;u++)n.common.push({lineHeight:parseInt(r[u].getAttribute("lineHeight"),10)});for(let u=0;u<s.length;u++)n.page.push({id:parseInt(s[u].getAttribute("id"),10)||0,file:s[u].getAttribute("file")});for(let u=0;u<o.length;u++){const c=o[u];n.char.push({id:parseInt(c.getAttribute("id"),10),page:parseInt(c.getAttribute("page"),10)||0,x:parseInt(c.getAttribute("x"),10),y:parseInt(c.getAttribute("y"),10),width:parseInt(c.getAttribute("width"),10),height:parseInt(c.getAttribute("height"),10),xoffset:parseInt(c.getAttribute("xoffset"),10),yoffset:parseInt(c.getAttribute("yoffset"),10),xadvance:parseInt(c.getAttribute("xadvance"),10)})}for(let u=0;u<a.length;u++)n.kerning.push({first:parseInt(a[u].getAttribute("first"),10),second:parseInt(a[u].getAttribute("second"),10),amount:parseInt(a[u].getAttribute("amount"),10)});for(let u=0;u<l.length;u++)n.distanceField.push({fieldType:l[u].getAttribute("fieldType"),distanceRange:parseInt(l[u].getAttribute("distanceRange"),10)});return n}}class Tf{static test(e){return typeof e=="string"&&e.includes("<font>")?Sf.test(X.ADAPTER.parseXML(e)):!1}static parse(e){return Sf.parse(X.ADAPTER.parseXML(e))}}const Rh=[Il,Sf,Tf];function GR(t){for(let e=0;e<Rh.length;e++)if(Rh[e].test(t))return Rh[e];return null}function VR(t,e,n,i,r,s){const o=n.fill;if(Array.isArray(o)){if(o.length===1)return o[0]}else return o;let a;const l=n.dropShadow?n.dropShadowDistance:0,u=n.padding||0,c=t.width/i-l-u*2,h=t.height/i-l-u*2,d=o.slice(),f=n.fillGradientStops.slice();if(!f.length){const p=d.length+1;for(let g=1;g<p;++g)f.push(g/p)}if(d.unshift(o[0]),f.unshift(0),d.push(o[o.length-1]),f.push(1),n.fillGradientType===hc.LINEAR_VERTICAL){a=e.createLinearGradient(c/2,u,c/2,h+u);let p=0;const v=(s.fontProperties.fontSize+n.strokeThickness)/h;for(let m=0;m<r.length;m++){const y=s.lineHeight*m;for(let x=0;x<d.length;x++){let _=0;typeof f[x]=="number"?_=f[x]:_=x/d.length;const b=y/h+_*v;let T=Math.max(p,b);T=Math.min(T,1),a.addColorStop(T,d[x]),p=T}}}else{a=e.createLinearGradient(u,h/2,c+u,h/2);const p=d.length+1;let g=1;for(let v=0;v<d.length;v++){let m;typeof f[v]=="number"?m=f[v]:m=g/p,a.addColorStop(m,d[v]),g++}}return a}function WR(t,e,n,i,r,s,o){const a=n.text,l=n.fontProperties;e.translate(i,r),e.scale(s,s);const u=o.strokeThickness/2,c=-(o.strokeThickness/2);if(e.font=o.toFontString(),e.lineWidth=o.strokeThickness,e.textBaseline=o.textBaseline,e.lineJoin=o.lineJoin,e.miterLimit=o.miterLimit,e.fillStyle=VR(t,e,o,s,[a],n),e.strokeStyle=o.stroke,o.dropShadow){const h=o.dropShadowColor,d=Go(typeof h=="number"?h:um(h)),f=o.dropShadowBlur*s,p=o.dropShadowDistance*s;e.shadowColor=`rgba(${d[0]*255},${d[1]*255},${d[2]*255},${o.dropShadowAlpha})`,e.shadowBlur=f,e.shadowOffsetX=Math.cos(o.dropShadowAngle)*p,e.shadowOffsetY=Math.sin(o.dropShadowAngle)*p}else e.shadowColor="black",e.shadowBlur=0,e.shadowOffsetX=0,e.shadowOffsetY=0;o.stroke&&o.strokeThickness&&e.strokeText(a,u,c+n.lineHeight-l.descent),o.fill&&e.fillText(a,u,c+n.lineHeight-l.descent),e.setTransform(1,0,0,1,0,0),e.fillStyle="rgba(0, 0, 0, 0)"}function Ml(t){return t.codePointAt?t.codePointAt(0):t.charCodeAt(0)}function Iw(t){return Array.from?Array.from(t):t.split("")}function XR(t){typeof t=="string"&&(t=[t]);const e=[];for(let n=0,i=t.length;n<i;n++){const r=t[n];if(Array.isArray(r)){if(r.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${r.length}.`);const s=r[0].charCodeAt(0),o=r[1].charCodeAt(0);if(o<s)throw new Error("[BitmapFont]: Invalid character range.");for(let a=s,l=o;a<=l;a++)e.push(String.fromCharCode(a))}else e.push(...Iw(r))}if(e.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return e}const on=class{constructor(t,e,n){var u;const[i]=t.info,[r]=t.common,[s]=t.page,[o]=t.distanceField,a=ki(s.file),l={};this._ownsTextures=n,this.font=i.face,this.size=i.size,this.lineHeight=r.lineHeight/a,this.chars={},this.pageTextures=l;for(let c=0;c<t.page.length;c++){const{id:h,file:d}=t.page[c];l[h]=e instanceof Array?e[c]:e[d],o!=null&&o.fieldType&&o.fieldType!=="none"&&(l[h].baseTexture.alphaMode=wn.NO_PREMULTIPLIED_ALPHA,l[h].baseTexture.mipmap=Nn.OFF)}for(let c=0;c<t.char.length;c++){const{id:h,page:d}=t.char[c];let{x:f,y:p,width:g,height:v,xoffset:m,yoffset:y,xadvance:x}=t.char[c];f/=a,p/=a,g/=a,v/=a,m/=a,y/=a,x/=a;const _=new le(f+l[d].frame.x/a,p+l[d].frame.y/a,g,v);this.chars[h]={xOffset:m,yOffset:y,xAdvance:x,kerning:{},texture:new Z(l[d].baseTexture,_),page:d}}for(let c=0;c<t.kerning.length;c++){let{first:h,second:d,amount:f}=t.kerning[c];h/=a,d/=a,f/=a,this.chars[d]&&(this.chars[d].kerning[h]=f)}this.distanceFieldRange=o==null?void 0:o.distanceRange,this.distanceFieldType=((u=o==null?void 0:o.fieldType)==null?void 0:u.toLowerCase())??"none"}destroy(){for(const t in this.chars)this.chars[t].texture.destroy(),this.chars[t].texture=null;for(const t in this.pageTextures)this._ownsTextures&&this.pageTextures[t].destroy(!0),this.pageTextures[t]=null;this.chars=null,this.pageTextures=null}static install(t,e,n){let i;if(t instanceof Su)i=t;else{const s=GR(t);if(!s)throw new Error("Unrecognized data format for font.");i=s.parse(t)}e instanceof Z&&(e=[e]);const r=new on(i,e,n);return on.available[r.font]=r,r}static uninstall(t){const e=on.available[t];if(!e)throw new Error(`No font found named '${t}'`);e.destroy(),delete on.available[t]}static from(t,e,n){if(!t)throw new Error("[BitmapFont] Property `name` is required.");const{chars:i,padding:r,resolution:s,textureWidth:o,textureHeight:a,...l}=Object.assign({},on.defaultOptions,n),u=XR(i),c=e instanceof yr?e:new yr(e),h=o,d=new Su;d.info[0]={face:c.fontFamily,size:c.fontSize},d.common[0]={lineHeight:c.fontSize};let f=0,p=0,g,v,m,y=0;const x=[];for(let b=0;b<u.length;b++){g||(g=X.ADAPTER.createCanvas(),g.width=o,g.height=a,v=g.getContext("2d"),m=new ae(g,{resolution:s,...l}),x.push(new Z(m)),d.page.push({id:x.length-1,file:""}));const T=u[b],E=nt.measureText(T,c,!1,g),S=E.width,k=Math.ceil(E.height),O=Math.ceil((c.fontStyle==="italic"?2:1)*S);if(p>=a-k*s){if(p===0)throw new Error(`[BitmapFont] textureHeight ${a}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${T}')`);--b,g=null,v=null,m=null,p=0,f=0,y=0;continue}if(y=Math.max(k+E.fontProperties.descent,y),O*s+f>=h){if(f===0)throw new Error(`[BitmapFont] textureWidth ${o}px is too small (fontFamily: '${c.fontFamily}', fontSize: ${c.fontSize}px, char: '${T}')`);--b,p+=y*s,p=Math.ceil(p),f=0,y=0;continue}WR(g,v,E,f,p,s,c);const F=Ml(E.text);d.char.push({id:F,page:x.length-1,x:f/s,y:p/s,width:O,height:k,xoffset:0,yoffset:0,xadvance:S-(c.dropShadow?c.dropShadowDistance:0)-(c.stroke?c.strokeThickness:0)}),f+=(O+2*r)*s,f=Math.ceil(f)}for(let b=0,T=u.length;b<T;b++){const E=u[b];for(let S=0;S<T;S++){const k=u[S],O=v.measureText(E).width,F=v.measureText(k).width,C=v.measureText(E+k).width-(O+F);C&&d.kerning.push({first:Ml(E),second:Ml(k),amount:C})}}const _=new on(d,x,!0);return on.available[t]!==void 0&&on.uninstall(t),on.available[t]=_,_}};let wt=on;wt.ALPHA=[["a","z"],["A","Z"]," "];wt.NUMERIC=[["0","9"]];wt.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "];wt.ASCII=[[" ","~"]];wt.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:on.ALPHANUMERIC};wt.available={};var YR=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, uColor.a * alpha);\r
\r
}\r
`,qR=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const R0=[],k0=[],D0=[],Mw=class extends Ut{constructor(t,e={}){super(),this._tint=16777215;const{align:n,tint:i,maxWidth:r,letterSpacing:s,fontName:o,fontSize:a}=Object.assign({},Mw.styleDefaults,e);if(!wt.available[o])throw new Error(`Missing BitmapFont "${o}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=n,this._tint=i,this._font=void 0,this._fontName=o,this._fontSize=a,this.text=t,this._maxWidth=r,this._maxLineHeight=0,this._letterSpacing=s,this._anchor=new _i(()=>{this.dirty=!0},this,0,0),this._roundPixels=X.ROUND_PIXELS,this.dirty=!0,this._resolution=X.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var O;const t=wt.available[this._fontName],e=this.fontSize,n=e/t.size,i=new te,r=[],s=[],o=[],a=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",l=Iw(a),u=this._maxWidth*t.size/e,c=t.distanceFieldType==="none"?R0:k0;let h=null,d=0,f=0,p=0,g=-1,v=0,m=0,y=0,x=0;for(let F=0;F<l.length;F++){const N=l[F],C=Ml(N);if(/(?:\s)/.test(N)&&(g=F,v=d,x++),N==="\r"||N===`
`){s.push(d),o.push(-1),f=Math.max(f,d),++p,++m,i.x=0,i.y+=t.lineHeight,h=null,x=0;continue}const w=t.chars[C];if(!w)continue;h&&w.kerning[h]&&(i.x+=w.kerning[h]);const R=D0.pop()||{texture:Z.EMPTY,line:0,charCode:0,prevSpaces:0,position:new te};R.texture=w.texture,R.line=p,R.charCode=C,R.position.x=Math.round(i.x+w.xOffset+this._letterSpacing/2),R.position.y=Math.round(i.y+w.yOffset),R.prevSpaces=x,r.push(R),d=R.position.x+Math.max(w.xAdvance-w.xOffset,w.texture.orig.width),i.x+=w.xAdvance+this._letterSpacing,y=Math.max(y,w.yOffset+w.texture.height),h=C,g!==-1&&u>0&&i.x>u&&(++m,ss(r,1+g-m,1+F-g),F=g,g=-1,s.push(v),o.push(r.length>0?r[r.length-1].prevSpaces:0),f=Math.max(f,v),p++,i.x=0,i.y+=t.lineHeight,h=null,x=0)}const _=l[l.length-1];_!=="\r"&&_!==`
`&&(/(?:\s)/.test(_)&&(d=v),s.push(d),f=Math.max(f,d),o.push(-1));const b=[];for(let F=0;F<=p;F++){let N=0;this._align==="right"?N=f-s[F]:this._align==="center"?N=(f-s[F])/2:this._align==="justify"&&(N=o[F]<0?0:(f-s[F])/o[F]),b.push(N)}const T=r.length,E={},S=[],k=this._activePagesMeshData;c.push(...k);for(let F=0;F<T;F++){const N=r[F].texture,C=N.baseTexture.uid;if(!E[C]){let w=c.pop();if(!w){const z=new _R;let D,M;t.distanceFieldType==="none"?(D=new P0(Z.EMPTY),M=ne.NORMAL):(D=new P0(Z.EMPTY,{program:fn.from(qR,YR),uniforms:{uFWidth:0}}),M=ne.NORMAL_NPM);const B=new wf(z,D);B.blendMode=M,w={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:B,vertices:null,uvs:null,indices:null}}w.index=0,w.indexCount=0,w.vertexCount=0,w.uvsCount=0,w.total=0;const{_textureCache:R}=this;R[C]=R[C]||new Z(N.baseTexture),w.mesh.texture=R[C],w.mesh.tint=this._tint,S.push(w),E[C]=w}E[C].total++}for(let F=0;F<k.length;F++)S.includes(k[F])||this.removeChild(k[F].mesh);for(let F=0;F<S.length;F++)S[F].mesh.parent!==this&&this.addChild(S[F].mesh);this._activePagesMeshData=S;for(const F in E){const N=E[F],C=N.total;if(!(((O=N.indices)==null?void 0:O.length)>6*C)||N.vertices.length<wf.BATCHABLE_SIZE*2)N.vertices=new Float32Array(4*2*C),N.uvs=new Float32Array(4*2*C),N.indices=new Uint16Array(6*C);else{const w=N.total,R=N.vertices;for(let z=w*4*2;z<R.length;z++)R[z]=0}N.mesh.size=6*C}for(let F=0;F<T;F++){const N=r[F];let C=N.position.x+b[N.line]*(this._align==="justify"?N.prevSpaces:1);this._roundPixels&&(C=Math.round(C));const w=C*n,R=N.position.y*n,z=N.texture,D=E[z.baseTexture.uid],M=z.frame,B=z._uvs,P=D.index++;D.indices[P*6+0]=0+P*4,D.indices[P*6+1]=1+P*4,D.indices[P*6+2]=2+P*4,D.indices[P*6+3]=0+P*4,D.indices[P*6+4]=2+P*4,D.indices[P*6+5]=3+P*4,D.vertices[P*8+0]=w,D.vertices[P*8+1]=R,D.vertices[P*8+2]=w+M.width*n,D.vertices[P*8+3]=R,D.vertices[P*8+4]=w+M.width*n,D.vertices[P*8+5]=R+M.height*n,D.vertices[P*8+6]=w,D.vertices[P*8+7]=R+M.height*n,D.uvs[P*8+0]=B.x0,D.uvs[P*8+1]=B.y0,D.uvs[P*8+2]=B.x1,D.uvs[P*8+3]=B.y1,D.uvs[P*8+4]=B.x2,D.uvs[P*8+5]=B.y2,D.uvs[P*8+6]=B.x3,D.uvs[P*8+7]=B.y3}this._textWidth=f*n,this._textHeight=(i.y+t.lineHeight)*n;for(const F in E){const N=E[F];if(this.anchor.x!==0||this.anchor.y!==0){let z=0;const D=this._textWidth*this.anchor.x,M=this._textHeight*this.anchor.y;for(let B=0;B<N.total;B++)N.vertices[z++]-=D,N.vertices[z++]-=M,N.vertices[z++]-=D,N.vertices[z++]-=M,N.vertices[z++]-=D,N.vertices[z++]-=M,N.vertices[z++]-=D,N.vertices[z++]-=M}this._maxLineHeight=y*n;const C=N.mesh.geometry.getBuffer("aVertexPosition"),w=N.mesh.geometry.getBuffer("aTextureCoord"),R=N.mesh.geometry.getIndex();C.data=N.vertices,w.data=N.uvs,R.data=N.indices,C.update(),w.update(),R.update()}for(let F=0;F<r.length;F++)D0.push(r[F]);this._font=t,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(t){this._autoResolution&&this._resolution!==t.resolution&&(this._resolution=t.resolution,this.dirty=!0);const{distanceFieldRange:e,distanceFieldType:n,size:i}=wt.available[this._fontName];if(n!=="none"){const{a:r,b:s,c:o,d:a}=this.worldTransform,l=Math.sqrt(r*r+s*s),u=Math.sqrt(o*o+a*a),c=(Math.abs(l)+Math.abs(u))/2,h=this.fontSize/i,d=t._view.resolution;for(const f of this._activePagesMeshData)f.mesh.shader.uniforms.uFWidth=c*e*h*d}super._render(t)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const t=wt.available[this._fontName];if(!t)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==t&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tint}set tint(t){if(this._tint!==t){this._tint=t;for(let e=0;e<this._activePagesMeshData.length;e++)this._activePagesMeshData[e].mesh.tint=t}}get align(){return this._align}set align(t){this._align!==t&&(this._align=t,this.dirty=!0)}get fontName(){return this._fontName}set fontName(t){if(!wt.available[t])throw new Error(`Missing BitmapFont "${t}"`);this._fontName!==t&&(this._fontName=t,this.dirty=!0)}get fontSize(){return this._fontSize??wt.available[this._fontName].size}set fontSize(t){this._fontSize!==t&&(this._fontSize=t,this.dirty=!0)}get anchor(){return this._anchor}set anchor(t){typeof t=="number"?this._anchor.set(t):this._anchor.copyFrom(t)}get text(){return this._text}set text(t){t=String(t??""),this._text!==t&&(this._text=t,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(t){t!==this._roundPixels&&(this._roundPixels=t,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(t){this._autoResolution=!1,this._resolution!==t&&(this._resolution=t,this.dirty=!0)}destroy(t){const{_textureCache:e}=this,i=wt.available[this._fontName].distanceFieldType==="none"?R0:k0;i.push(...this._activePagesMeshData);for(const r of this._activePagesMeshData)this.removeChild(r.mesh);this._activePagesMeshData=[],i.filter(r=>e[r.mesh.texture.baseTexture.uid]).forEach(r=>{r.mesh.texture=Z.EMPTY});for(const r in e)e[r].destroy(),delete e[r];this._font=null,this._textureCache=null,super.destroy(t)}};let KR=Mw;KR.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const ZR=[".xml",".fnt"],QR={extension:{type:W.LoadParser,priority:$n.Normal},test(t){return ZR.includes(ot.extname(t).toLowerCase())},async testParse(t){return Il.test(t)||Tf.test(t)},async parse(t,e,n){const i=Il.test(t)?Il.parse(t):Tf.parse(t),{src:r}=e,{page:s}=i,o=[];for(let u=0;u<s.length;++u){const c=s[u].file;let h=ot.join(ot.dirname(r),c);h=yf(h,r),o.push(h)}const a=await n.load(o),l=o.map(u=>a[u]);return wt.install(i,l,!0)},async load(t,e){return(await X.ADAPTER.fetch(t)).text()},unload(t){t.destroy()}};Q.add(QR);var JR=Object.defineProperty,ek=(t,e,n)=>e in t?JR(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,L=(t,e,n)=>(ek(t,typeof e!="symbol"?e+"":e,n),n);let Jt=class{constructor(e){L(this,"parent"),L(this,"paused"),this.parent=e,this.paused=!1}destroy(){}down(e){return!1}move(e){return!1}up(e){return!1}wheel(e){return!1}update(e){}resize(){}reset(){}pause(){this.paused=!0}resume(){this.paused=!1}};var tk=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{},Ow={exports:{}};(function(t,e){(function(){var n,i;i=function(r){return t.exports=r},n={linear:function(r,s,o,a){return o*r/a+s},easeInQuad:function(r,s,o,a){return o*(r/=a)*r+s},easeOutQuad:function(r,s,o,a){return-o*(r/=a)*(r-2)+s},easeInOutQuad:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r+s:-o/2*(--r*(r-2)-1)+s},easeInCubic:function(r,s,o,a){return o*(r/=a)*r*r+s},easeOutCubic:function(r,s,o,a){return o*((r=r/a-1)*r*r+1)+s},easeInOutCubic:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r*r+s:o/2*((r-=2)*r*r+2)+s},easeInQuart:function(r,s,o,a){return o*(r/=a)*r*r*r+s},easeOutQuart:function(r,s,o,a){return-o*((r=r/a-1)*r*r*r-1)+s},easeInOutQuart:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r*r*r+s:-o/2*((r-=2)*r*r*r-2)+s},easeInQuint:function(r,s,o,a){return o*(r/=a)*r*r*r*r+s},easeOutQuint:function(r,s,o,a){return o*((r=r/a-1)*r*r*r*r+1)+s},easeInOutQuint:function(r,s,o,a){return(r/=a/2)<1?o/2*r*r*r*r*r+s:o/2*((r-=2)*r*r*r*r+2)+s},easeInSine:function(r,s,o,a){return-o*Math.cos(r/a*(Math.PI/2))+o+s},easeOutSine:function(r,s,o,a){return o*Math.sin(r/a*(Math.PI/2))+s},easeInOutSine:function(r,s,o,a){return-o/2*(Math.cos(Math.PI*r/a)-1)+s},easeInExpo:function(r,s,o,a){return r===0?s:o*Math.pow(2,10*(r/a-1))+s},easeOutExpo:function(r,s,o,a){return r===a?s+o:o*(-Math.pow(2,-10*r/a)+1)+s},easeInOutExpo:function(r,s,o,a){return(r/=a/2)<1?o/2*Math.pow(2,10*(r-1))+s:o/2*(-Math.pow(2,-10*--r)+2)+s},easeInCirc:function(r,s,o,a){return-o*(Math.sqrt(1-(r/=a)*r)-1)+s},easeOutCirc:function(r,s,o,a){return o*Math.sqrt(1-(r=r/a-1)*r)+s},easeInOutCirc:function(r,s,o,a){return(r/=a/2)<1?-o/2*(Math.sqrt(1-r*r)-1)+s:o/2*(Math.sqrt(1-(r-=2)*r)+1)+s},easeInElastic:function(r,s,o,a){var l,u,c;return c=1.70158,u=0,l=o,r===0||(r/=a),u||(u=a*.3),l<Math.abs(o)?(l=o,c=u/4):c=u/(2*Math.PI)*Math.asin(o/l),-(l*Math.pow(2,10*(r-=1))*Math.sin((r*a-c)*(2*Math.PI)/u))+s},easeOutElastic:function(r,s,o,a){var l,u,c;return c=1.70158,u=0,l=o,r===0||(r/=a),u||(u=a*.3),l<Math.abs(o)?(l=o,c=u/4):c=u/(2*Math.PI)*Math.asin(o/l),l*Math.pow(2,-10*r)*Math.sin((r*a-c)*(2*Math.PI)/u)+o+s},easeInOutElastic:function(r,s,o,a){var l,u,c;return c=1.70158,u=0,l=o,r===0||(r/=a/2),u||(u=a*(.3*1.5)),l<Math.abs(o)?(l=o,c=u/4):c=u/(2*Math.PI)*Math.asin(o/l),r<1?-.5*(l*Math.pow(2,10*(r-=1))*Math.sin((r*a-c)*(2*Math.PI)/u))+s:l*Math.pow(2,-10*(r-=1))*Math.sin((r*a-c)*(2*Math.PI)/u)*.5+o+s},easeInBack:function(r,s,o,a,l){return l===void 0&&(l=1.70158),o*(r/=a)*r*((l+1)*r-l)+s},easeOutBack:function(r,s,o,a,l){return l===void 0&&(l=1.70158),o*((r=r/a-1)*r*((l+1)*r+l)+1)+s},easeInOutBack:function(r,s,o,a,l){return l===void 0&&(l=1.70158),(r/=a/2)<1?o/2*(r*r*(((l*=1.525)+1)*r-l))+s:o/2*((r-=2)*r*(((l*=1.525)+1)*r+l)+2)+s},easeInBounce:function(r,s,o,a){var l;return l=n.easeOutBounce(a-r,0,o,a),o-l+s},easeOutBounce:function(r,s,o,a){return(r/=a)<1/2.75?o*(7.5625*r*r)+s:r<2/2.75?o*(7.5625*(r-=1.5/2.75)*r+.75)+s:r<2.5/2.75?o*(7.5625*(r-=2.25/2.75)*r+.9375)+s:o*(7.5625*(r-=2.625/2.75)*r+.984375)+s},easeInOutBounce:function(r,s,o,a){var l;return r<a/2?(l=n.easeInBounce(r*2,0,o,a),l*.5+s):(l=n.easeOutBounce(r*2-a,0,o,a),l*.5+o*.5+s)}},i(n)}).call(tk)})(Ow);const F0=Ow.exports;function dc(t,e){if(t){if(typeof t=="function")return t;if(typeof t=="string")return F0[t]}else return F0[e]}const nk={removeOnInterrupt:!1,ease:"linear",time:1e3};let ik=class extends Jt{constructor(e,n={}){super(e),L(this,"options"),L(this,"startX"),L(this,"startY"),L(this,"deltaX"),L(this,"deltaY"),L(this,"keepCenter"),L(this,"startWidth",null),L(this,"startHeight",null),L(this,"deltaWidth",null),L(this,"deltaHeight",null),L(this,"width",null),L(this,"height",null),L(this,"time",0),this.options=Object.assign({},nk,n),this.options.ease=dc(this.options.ease),this.setupPosition(),this.setupZoom(),this.time=0}setupPosition(){typeof this.options.position<"u"?(this.startX=this.parent.center.x,this.startY=this.parent.center.y,this.deltaX=this.options.position.x-this.parent.center.x,this.deltaY=this.options.position.y-this.parent.center.y,this.keepCenter=!1):this.keepCenter=!0}setupZoom(){this.width=null,this.height=null,typeof this.options.scale<"u"?this.width=this.parent.screenWidth/this.options.scale:typeof this.options.scaleX<"u"||typeof this.options.scaleY<"u"?(typeof this.options.scaleX<"u"&&(this.width=this.parent.screenWidth/this.options.scaleX),typeof this.options.scaleY<"u"&&(this.height=this.parent.screenHeight/this.options.scaleY)):(typeof this.options.width<"u"&&(this.width=this.options.width),typeof this.options.height<"u"&&(this.height=this.options.height)),this.width!==null&&(this.startWidth=this.parent.screenWidthInWorldPixels,this.deltaWidth=this.width-this.startWidth),this.height!==null&&(this.startHeight=this.parent.screenHeightInWorldPixels,this.deltaHeight=this.height-this.startHeight)}down(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("animate"),!1}complete(){this.parent.plugins.remove("animate"),this.width!==null&&this.parent.fitWidth(this.width,this.keepCenter,this.height===null),this.height!==null&&this.parent.fitHeight(this.height,this.keepCenter,this.width===null),!this.keepCenter&&this.options.position&&this.parent.moveCenter(this.options.position),this.parent.emit("animate-end",this.parent),this.options.callbackOnComplete&&this.options.callbackOnComplete(this.parent)}update(e){if(this.paused)return;this.time+=e;const n=new te(this.parent.scale.x,this.parent.scale.y);if(this.time>=this.options.time){const i=this.parent.width,r=this.parent.height;this.complete(),(i!==this.parent.width||r!==this.parent.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}else{const i=this.options.ease(this.time,0,1,this.options.time);if(this.width!==null){const r=this.startWidth,s=this.deltaWidth;this.parent.fitWidth(r+s*i,this.keepCenter,this.height===null)}if(this.height!==null){const r=this.startHeight,s=this.deltaHeight;this.parent.fitHeight(r+s*i,this.keepCenter,this.width===null)}if(this.width===null?this.parent.scale.x=this.parent.scale.y:this.height===null&&(this.parent.scale.y=this.parent.scale.x),!this.keepCenter){const r=this.startX,s=this.startY,o=this.deltaX,a=this.deltaY,l=new te(this.parent.x,this.parent.y);this.parent.moveCenter(r+o*i,s+a*i),this.parent.emit("moved",{viewport:this.parent,original:l,type:"animate"})}(this.width||this.height)&&this.parent.emit("zoomed",{viewport:this.parent,original:n,type:"animate"})}}};const rk={sides:"all",friction:.5,time:150,ease:"easeInOutSine",underflow:"center",bounceBox:null};let sk=class extends Jt{constructor(e,n={}){super(e),L(this,"options"),L(this,"left"),L(this,"top"),L(this,"right"),L(this,"bottom"),L(this,"underflowX"),L(this,"underflowY"),L(this,"ease"),L(this,"toX"),L(this,"toY"),this.options=Object.assign({},rk,n),this.ease=dc(this.options.ease,"easeInOutSine"),this.options.sides?this.options.sides==="all"?this.top=this.bottom=this.left=this.right=!0:this.options.sides==="horizontal"?(this.right=this.left=!0,this.top=this.bottom=!1):this.options.sides==="vertical"?(this.left=this.right=!1,this.top=this.bottom=!0):(this.top=this.options.sides.indexOf("top")!==-1,this.bottom=this.options.sides.indexOf("bottom")!==-1,this.left=this.options.sides.indexOf("left")!==-1,this.right=this.options.sides.indexOf("right")!==-1):this.left=this.top=this.right=this.bottom=!1;const i=this.options.underflow.toLowerCase();i==="center"?(this.underflowX=0,this.underflowY=0):(this.underflowX=i.indexOf("left")!==-1?-1:i.indexOf("right")!==-1?1:0,this.underflowY=i.indexOf("top")!==-1?-1:i.indexOf("bottom")!==-1?1:0),this.reset()}isActive(){return this.toX!==null||this.toY!==null}down(){return this.toX=this.toY=null,!1}up(){return this.bounce(),!1}update(e){if(!this.paused){if(this.bounce(),this.toX){const n=this.toX;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-x"}),n.time>=this.options.time?(this.parent.x=n.end,this.toX=null,this.parent.emit("bounce-x-end",this.parent)):this.parent.x=this.ease(n.time,n.start,n.delta,this.options.time)}if(this.toY){const n=this.toY;n.time+=e,this.parent.emit("moved",{viewport:this.parent,type:"bounce-y"}),n.time>=this.options.time?(this.parent.y=n.end,this.toY=null,this.parent.emit("bounce-y-end",this.parent)):this.parent.y=this.ease(n.time,n.start,n.delta,this.options.time)}}}calcUnderflowX(){let e;switch(this.underflowX){case-1:e=0;break;case 1:e=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:e=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}return e}calcUnderflowY(){let e;switch(this.underflowY){case-1:e=0;break;case 1:e=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:e=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}return e}oob(){const e=this.options.bounceBox;if(e){const n=typeof e.x>"u"?0:e.x,i=typeof e.y>"u"?0:e.y,r=typeof e.width>"u"?this.parent.worldWidth:e.width,s=typeof e.height>"u"?this.parent.worldHeight:e.height;return{left:this.parent.left<n,right:this.parent.right>r,top:this.parent.top<i,bottom:this.parent.bottom>s,topLeft:new te(n*this.parent.scale.x,i*this.parent.scale.y),bottomRight:new te(r*this.parent.scale.x-this.parent.screenWidth,s*this.parent.scale.y-this.parent.screenHeight)}}return{left:this.parent.left<0,right:this.parent.right>this.parent.worldWidth,top:this.parent.top<0,bottom:this.parent.bottom>this.parent.worldHeight,topLeft:new te(0,0),bottomRight:new te(this.parent.worldWidth*this.parent.scale.x-this.parent.screenWidth,this.parent.worldHeight*this.parent.scale.y-this.parent.screenHeight)}}bounce(){var e,n;if(this.paused)return;let i,r=this.parent.plugins.get("decelerate",!0);r&&(r.x||r.y)&&(r.x&&r.percentChangeX===((e=r.options)==null?void 0:e.friction)||r.y&&r.percentChangeY===((n=r.options)==null?void 0:n.friction))&&(i=this.oob(),(i.left&&this.left||i.right&&this.right)&&(r.percentChangeX=this.options.friction),(i.top&&this.top||i.bottom&&this.bottom)&&(r.percentChangeY=this.options.friction));const s=this.parent.plugins.get("drag",!0)||{},o=this.parent.plugins.get("pinch",!0)||{};if(r=r||{},!(s!=null&&s.active)&&!(o!=null&&o.active)&&(!this.toX||!this.toY)&&(!r.x||!r.y)){i=i||this.oob();const a=i.topLeft,l=i.bottomRight;if(!this.toX&&!r.x){let u=null;i.left&&this.left?u=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-a.x:i.right&&this.right&&(u=this.parent.screenWorldWidth<this.parent.screenWidth?this.calcUnderflowX():-l.x),u!==null&&this.parent.x!==u&&(this.toX={time:0,start:this.parent.x,delta:u-this.parent.x,end:u},this.parent.emit("bounce-x-start",this.parent))}if(!this.toY&&!r.y){let u=null;i.top&&this.top?u=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-a.y:i.bottom&&this.bottom&&(u=this.parent.screenWorldHeight<this.parent.screenHeight?this.calcUnderflowY():-l.y),u!==null&&this.parent.y!==u&&(this.toY={time:0,start:this.parent.y,delta:u-this.parent.y,end:u},this.parent.emit("bounce-y-start",this.parent))}}}reset(){this.toX=this.toY=null,this.bounce()}};const ok={left:!1,right:!1,top:!1,bottom:!1,direction:null,underflow:"center"};let ak=class extends Jt{constructor(e,n={}){super(e),L(this,"options"),L(this,"last"),L(this,"noUnderflow"),L(this,"underflowX"),L(this,"underflowY"),this.options=Object.assign({},ok,n),this.options.direction&&(this.options.left=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.right=this.options.direction==="x"||this.options.direction==="all"?!0:null,this.options.top=this.options.direction==="y"||this.options.direction==="all"?!0:null,this.options.bottom=this.options.direction==="y"||this.options.direction==="all"?!0:null),this.parseUnderflow(),this.last={x:null,y:null,scaleX:null,scaleY:null},this.update()}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="none"?this.noUnderflow=!0:e==="center"?(this.underflowX=this.underflowY=0,this.noUnderflow=!1):(this.underflowX=e.indexOf("left")!==-1?-1:e.indexOf("right")!==-1?1:0,this.underflowY=e.indexOf("top")!==-1?-1:e.indexOf("bottom")!==-1?1:0,this.noUnderflow=!1)}move(){return this.update(),!1}update(){if(this.paused||this.parent.x===this.last.x&&this.parent.y===this.last.y&&this.parent.scale.x===this.last.scaleX&&this.parent.scale.y===this.last.scaleY)return;const e=new te(this.parent.x,this.parent.y),n=this.parent.plugins.decelerate||{};if(this.options.left!==null||this.options.right!==null){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x!==0&&(this.parent.x=0,i=!0);break;case 1:this.parent.x!==this.parent.screenWidth-this.parent.screenWorldWidth&&(this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth,i=!0);break;default:this.parent.x!==(this.parent.screenWidth-this.parent.screenWorldWidth)/2&&(this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2,i=!0)}else this.options.left!==null&&this.parent.left<(this.options.left===!0?0:this.options.left)&&(this.parent.x=-(this.options.left===!0?0:this.options.left)*this.parent.scale.x,n.x=0,i=!0),this.options.right!==null&&this.parent.right>(this.options.right===!0?this.parent.worldWidth:this.options.right)&&(this.parent.x=-(this.options.right===!0?this.parent.worldWidth:this.options.right)*this.parent.scale.x+this.parent.screenWidth,n.x=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-x"})}if(this.options.top!==null||this.options.bottom!==null){let i=!1;if(!this.noUnderflow&&this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y!==0&&(this.parent.y=0,i=!0);break;case 1:this.parent.y!==this.parent.screenHeight-this.parent.screenWorldHeight&&(this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight,i=!0);break;default:this.parent.y!==(this.parent.screenHeight-this.parent.screenWorldHeight)/2&&(this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2,i=!0)}else this.options.top!==null&&this.parent.top<(this.options.top===!0?0:this.options.top)&&(this.parent.y=-(this.options.top===!0?0:this.options.top)*this.parent.scale.y,n.y=0,i=!0),this.options.bottom!==null&&this.parent.bottom>(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)&&(this.parent.y=-(this.options.bottom===!0?this.parent.worldHeight:this.options.bottom)*this.parent.scale.y+this.parent.screenHeight,n.y=0,i=!0);i&&this.parent.emit("moved",{viewport:this.parent,original:e,type:"clamp-y"})}this.last.x=this.parent.x,this.last.y=this.parent.y,this.last.scaleX=this.parent.scale.x,this.last.scaleY=this.parent.scale.y}reset(){this.update()}};const lk={minWidth:null,minHeight:null,maxWidth:null,maxHeight:null,minScale:null,maxScale:null};let uk=class extends Jt{constructor(e,n={}){super(e),L(this,"options"),this.options=Object.assign({},lk,n),this.clamp()}resize(){this.clamp()}clamp(){if(!this.paused){if(this.options.minWidth||this.options.minHeight||this.options.maxWidth||this.options.maxHeight){let e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight;if(this.options.minWidth!==null&&e<this.options.minWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.minWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxWidth!==null&&e>this.options.maxWidth){const i=this.parent.scale.x;this.parent.fitWidth(this.options.maxWidth,!1,!1,!0),this.parent.scale.y*=this.parent.scale.x/i,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.minHeight!==null&&n<this.options.minHeight){const i=this.parent.scale.y;this.parent.fitHeight(this.options.minHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/i,e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}if(this.options.maxHeight!==null&&n>this.options.maxHeight){const i=this.parent.scale.y;this.parent.fitHeight(this.options.maxHeight,!1,!1,!0),this.parent.scale.x*=this.parent.scale.y/i,this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"})}}else if(this.options.minScale||this.options.maxScale){const e={x:null,y:null},n={x:null,y:null};if(typeof this.options.minScale=="number")e.x=this.options.minScale,e.y=this.options.minScale;else if(this.options.minScale!==null){const s=this.options.minScale;e.x=typeof s.x>"u"?null:s.x,e.y=typeof s.y>"u"?null:s.y}if(typeof this.options.maxScale=="number")n.x=this.options.maxScale,n.y=this.options.maxScale;else if(this.options.maxScale!==null){const s=this.options.maxScale;n.x=typeof s.x>"u"?null:s.x,n.y=typeof s.y>"u"?null:s.y}let i=this.parent.scale.x,r=this.parent.scale.y;e.x!==null&&i<e.x&&(i=e.x),n.x!==null&&i>n.x&&(i=n.x),e.y!==null&&r<e.y&&(r=e.y),n.y!==null&&r>n.y&&(r=n.y),(i!==this.parent.scale.x||r!==this.parent.scale.y)&&(this.parent.scale.set(i,r),this.parent.emit("zoomed",{viewport:this.parent,type:"clamp-zoom"}))}}}reset(){this.clamp()}};const ck={friction:.98,bounce:.8,minSpeed:.01},di=16;let hk=class extends Jt{constructor(e,n={}){super(e),L(this,"options"),L(this,"x"),L(this,"y"),L(this,"percentChangeX"),L(this,"percentChangeY"),L(this,"saved"),L(this,"timeSinceRelease"),this.options=Object.assign({},ck,n),this.saved=[],this.timeSinceRelease=0,this.reset(),this.parent.on("moved",i=>this.handleMoved(i))}down(){return this.saved=[],this.x=this.y=null,!1}isActive(){return!!(this.x||this.y)}move(){if(this.paused)return!1;const e=this.parent.input.count();return(e===1||e>1&&!this.parent.plugins.get("pinch",!0))&&(this.saved.push({x:this.parent.x,y:this.parent.y,time:performance.now()}),this.saved.length>60&&this.saved.splice(0,30)),!1}handleMoved(e){if(this.saved.length){const n=this.saved[this.saved.length-1];e.type==="clamp-x"&&e.original?n.x===e.original.x&&(n.x=this.parent.x):e.type==="clamp-y"&&e.original&&n.y===e.original.y&&(n.y=this.parent.y)}}up(){if(this.parent.input.count()===0&&this.saved.length){const e=performance.now();for(const n of this.saved)if(n.time>=e-100){const i=e-n.time;this.x=(this.parent.x-n.x)/i,this.y=(this.parent.y-n.y)/i,this.percentChangeX=this.percentChangeY=this.options.friction,this.timeSinceRelease=0;break}}return!1}activate(e){e=e||{},typeof e.x<"u"&&(this.x=e.x,this.percentChangeX=this.options.friction),typeof e.y<"u"&&(this.y=e.y,this.percentChangeY=this.options.friction)}update(e){if(this.paused)return;const n=this.x||this.y,i=this.timeSinceRelease,r=this.timeSinceRelease+e;if(this.x){const s=this.percentChangeX,o=Math.log(s);this.parent.x+=this.x*di/o*(Math.pow(s,r/di)-Math.pow(s,i/di)),this.x*=Math.pow(this.percentChangeX,e/di)}if(this.y){const s=this.percentChangeY,o=Math.log(s);this.parent.y+=this.y*di/o*(Math.pow(s,r/di)-Math.pow(s,i/di)),this.y*=Math.pow(this.percentChangeY,e/di)}this.timeSinceRelease+=e,this.x&&this.y?Math.abs(this.x)<this.options.minSpeed&&Math.abs(this.y)<this.options.minSpeed&&(this.x=0,this.y=0):(Math.abs(this.x||0)<this.options.minSpeed&&(this.x=0),Math.abs(this.y||0)<this.options.minSpeed&&(this.y=0)),n&&this.parent.emit("moved",{viewport:this.parent,type:"decelerate"})}reset(){this.x=this.y=null}};const dk={direction:"all",pressDrag:!0,wheel:!0,wheelScroll:1,reverse:!1,clampWheel:!1,underflow:"center",factor:1,mouseButtons:"all",keyToPress:null,ignoreKeyToPressOnTouch:!1,lineHeight:20,wheelSwapAxes:!1};class fk extends Jt{constructor(e,n={}){super(e),L(this,"options"),L(this,"moved"),L(this,"reverse"),L(this,"xDirection"),L(this,"yDirection"),L(this,"keyIsPressed"),L(this,"mouse"),L(this,"underflowX"),L(this,"underflowY"),L(this,"last"),L(this,"current"),L(this,"windowEventHandlers",[]),this.options=Object.assign({},dk,n),this.moved=!1,this.reverse=this.options.reverse?1:-1,this.xDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="x",this.yDirection=!this.options.direction||this.options.direction==="all"||this.options.direction==="y",this.keyIsPressed=!1,this.parseUnderflow(),this.mouseButtons(this.options.mouseButtons),this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){const n=r=>{e.includes(r.code)&&(this.keyIsPressed=!0)},i=r=>{e.includes(r.code)&&(this.keyIsPressed=!1)};this.addWindowEventHandler("keyup",i),this.addWindowEventHandler("keydown",n)}addWindowEventHandler(e,n){window.addEventListener(e,n),this.windowEventHandlers.push({event:e,handler:n})}destroy(){this.windowEventHandlers.forEach(({event:e,handler:n})=>{window.removeEventListener(e,n)})}mouseButtons(e){!e||e==="all"?this.mouse=[!0,!0,!0]:this.mouse=[e.indexOf("left")!==-1,e.indexOf("middle")!==-1,e.indexOf("right")!==-1]}parseUnderflow(){const e=this.options.underflow.toLowerCase();e==="center"?(this.underflowX=0,this.underflowY=0):(e.includes("left")?this.underflowX=-1:e.includes("right")?this.underflowX=1:this.underflowX=0,e.includes("top")?this.underflowY=-1:e.includes("bottom")?this.underflowY=1:this.underflowY=0)}checkButtons(e){const n=e.pointerType==="mouse",i=this.parent.input.count();return!!((i===1||i>1&&!this.parent.plugins.get("pinch",!0))&&(!n||this.mouse[e.button]))}checkKeyPress(e){return!this.options.keyToPress||this.keyIsPressed||this.options.ignoreKeyToPressOnTouch&&e.data.pointerType==="touch"}down(e){return this.paused||!this.options.pressDrag?!1:this.checkButtons(e)&&this.checkKeyPress(e)?(this.last={x:e.global.x,y:e.global.y},this.current=e.pointerId,!0):(this.last=null,!1)}get active(){return this.moved}move(e){if(this.paused||!this.options.pressDrag)return!1;if(this.last&&this.current===e.data.pointerId){const n=e.global.x,i=e.global.y,r=this.parent.input.count();if(r===1||r>1&&!this.parent.plugins.get("pinch",!0)){const s=n-this.last.x,o=i-this.last.y;if(this.moved||this.xDirection&&this.parent.input.checkThreshold(s)||this.yDirection&&this.parent.input.checkThreshold(o)){const a={x:n,y:i};return this.xDirection&&(this.parent.x+=(a.x-this.last.x)*this.options.factor),this.yDirection&&(this.parent.y+=(a.y-this.last.y)*this.options.factor),this.last=a,this.moved||this.parent.emit("drag-start",{event:e,screen:new te(this.last.x,this.last.y),world:this.parent.toWorld(new te(this.last.x,this.last.y)),viewport:this.parent}),this.moved=!0,this.parent.emit("moved",{viewport:this.parent,type:"drag"}),!0}}else this.moved=!1}return!1}up(e){if(this.paused)return!1;const n=this.parent.input.touches;if(n.length===1){const i=n[0];return i.last&&(this.last={x:i.last.x,y:i.last.y},this.current=i.id),this.moved=!1,!0}else if(this.last&&this.moved){const i=new te(this.last.x,this.last.y);return this.parent.emit("drag-end",{event:e,screen:i,world:this.parent.toWorld(i),viewport:this.parent}),this.last=null,this.moved=!1,!0}return!1}wheel(e){if(this.paused)return!1;if(this.options.wheel){const n=this.parent.plugins.get("wheel",!0);if(!n||!n.options.wheelZoom&&!e.ctrlKey){const i=e.deltaMode?this.options.lineHeight:1,r=[e.deltaX,e.deltaY],[s,o]=this.options.wheelSwapAxes?r.reverse():r;return this.xDirection&&(this.parent.x+=s*i*this.options.wheelScroll*this.reverse),this.yDirection&&(this.parent.y+=o*i*this.options.wheelScroll*this.reverse),this.options.clampWheel&&this.clamp(),this.parent.emit("wheel-scroll",this.parent),this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.options.passiveWheel||e.preventDefault(),this.parent.options.stopPropagation&&e.stopPropagation(),!0}}return!1}resume(){this.last=null,this.paused=!1}clamp(){const e=this.parent.plugins.get("decelerate",!0)||{};if(this.options.clampWheel!=="y")if(this.parent.screenWorldWidth<this.parent.screenWidth)switch(this.underflowX){case-1:this.parent.x=0;break;case 1:this.parent.x=this.parent.screenWidth-this.parent.screenWorldWidth;break;default:this.parent.x=(this.parent.screenWidth-this.parent.screenWorldWidth)/2}else this.parent.left<0?(this.parent.x=0,e.x=0):this.parent.right>this.parent.worldWidth&&(this.parent.x=-this.parent.worldWidth*this.parent.scale.x+this.parent.screenWidth,e.x=0);if(this.options.clampWheel!=="x")if(this.parent.screenWorldHeight<this.parent.screenHeight)switch(this.underflowY){case-1:this.parent.y=0;break;case 1:this.parent.y=this.parent.screenHeight-this.parent.screenWorldHeight;break;default:this.parent.y=(this.parent.screenHeight-this.parent.screenWorldHeight)/2}else this.parent.top<0&&(this.parent.y=0,e.y=0),this.parent.bottom>this.parent.worldHeight&&(this.parent.y=-this.parent.worldHeight*this.parent.scale.y+this.parent.screenHeight,e.y=0)}}const pk={speed:0,acceleration:null,radius:null};let mk=class extends Jt{constructor(e,n,i={}){super(e),L(this,"options"),L(this,"target"),L(this,"velocity"),this.target=n,this.options=Object.assign({},pk,i),this.velocity={x:0,y:0}}update(e){if(this.paused)return;const n=this.parent.center;let i=this.target.x,r=this.target.y;if(this.options.radius)if(Math.sqrt(Math.pow(this.target.y-n.y,2)+Math.pow(this.target.x-n.x,2))>this.options.radius){const a=Math.atan2(this.target.y-n.y,this.target.x-n.x);i=this.target.x-Math.cos(a)*this.options.radius,r=this.target.y-Math.sin(a)*this.options.radius}else return;const s=i-n.x,o=r-n.y;if(s||o)if(this.options.speed)if(this.options.acceleration){const a=Math.atan2(r-n.y,i-n.x),l=Math.sqrt(Math.pow(s,2)+Math.pow(o,2));if(l){const u=(Math.pow(this.velocity.x,2)+Math.pow(this.velocity.y,2))/(2*this.options.acceleration);l>u?this.velocity={x:Math.min(this.velocity.x+(this.options.acceleration*e,this.options.speed)),y:Math.min(this.velocity.y+(this.options.acceleration*e,this.options.speed))}:this.velocity={x:Math.max(this.velocity.x-this.options.acceleration*this.options.speed,0),y:Math.max(this.velocity.y-this.options.acceleration*this.options.speed,0)};const c=Math.cos(a)*this.velocity.x,h=Math.sin(a)*this.velocity.y,d=Math.abs(c)>Math.abs(s)?i:n.x+c,f=Math.abs(h)>Math.abs(o)?r:n.y+h;this.parent.moveCenter(d,f),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}}else{const a=Math.atan2(r-n.y,i-n.x),l=Math.cos(a)*this.options.speed,u=Math.sin(a)*this.options.speed,c=Math.abs(l)>Math.abs(s)?i:n.x+l,h=Math.abs(u)>Math.abs(o)?r:n.y+u;this.parent.moveCenter(c,h),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}else this.parent.moveCenter(i,r),this.parent.emit("moved",{viewport:this.parent,type:"follow"})}};const gk={radius:null,distance:null,top:null,bottom:null,left:null,right:null,speed:8,reverse:!1,noDecelerate:!1,linear:!1,allowButtons:!1};class vk extends Jt{constructor(e,n={}){super(e),L(this,"options"),L(this,"reverse"),L(this,"radiusSquared"),L(this,"left"),L(this,"top"),L(this,"right"),L(this,"bottom"),L(this,"horizontal"),L(this,"vertical"),this.options=Object.assign({},gk,n),this.reverse=this.options.reverse?1:-1,this.radiusSquared=typeof this.options.radius=="number"?Math.pow(this.options.radius,2):null,this.resize()}resize(){const e=this.options.distance;e!==null?(this.left=e,this.top=e,this.right=this.parent.screenWidth-e,this.bottom=this.parent.screenHeight-e):this.options.radius||(this.left=this.options.left,this.top=this.options.top,this.right=this.options.right===null?null:this.parent.screenWidth-this.options.right,this.bottom=this.options.bottom===null?null:this.parent.screenHeight-this.options.bottom)}down(){return this.paused||this.options.allowButtons||(this.horizontal=this.vertical=null),!1}move(e){if(this.paused||e.pointerType!=="mouse"&&e.pointerId!==1||!this.options.allowButtons&&e.buttons!==0)return!1;const n=e.global.x,i=e.global.y;if(this.radiusSquared){const r=this.parent.toScreen(this.parent.center);if(Math.pow(r.x-n,2)+Math.pow(r.y-i,2)>=this.radiusSquared){const s=Math.atan2(r.y-i,r.x-n);this.options.linear?(this.horizontal=Math.round(Math.cos(s))*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.round(Math.sin(s))*this.options.speed*this.reverse*(60/1e3)):(this.horizontal=Math.cos(s)*this.options.speed*this.reverse*(60/1e3),this.vertical=Math.sin(s)*this.options.speed*this.reverse*(60/1e3))}else this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=0}else this.left!==null&&n<this.left?this.horizontal=Number(this.reverse)*this.options.speed*(60/1e3):this.right!==null&&n>this.right?this.horizontal=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateHorizontal(),this.horizontal=0),this.top!==null&&i<this.top?this.vertical=Number(this.reverse)*this.options.speed*(60/1e3):this.bottom!==null&&i>this.bottom?this.vertical=-1*this.reverse*this.options.speed*(60/1e3):(this.decelerateVertical(),this.vertical=0);return!1}decelerateHorizontal(){const e=this.parent.plugins.get("decelerate",!0);this.horizontal&&e&&!this.options.noDecelerate&&e.activate({x:this.horizontal*this.options.speed*this.reverse/(1e3/60)})}decelerateVertical(){const e=this.parent.plugins.get("decelerate",!0);this.vertical&&e&&!this.options.noDecelerate&&e.activate({y:this.vertical*this.options.speed*this.reverse/(1e3/60)})}up(){return this.paused||(this.horizontal&&this.decelerateHorizontal(),this.vertical&&this.decelerateVertical(),this.horizontal=this.vertical=null),!1}update(){if(!this.paused&&(this.horizontal||this.vertical)){const e=this.parent.center;this.horizontal&&(e.x+=this.horizontal*this.options.speed),this.vertical&&(e.y+=this.vertical*this.options.speed),this.parent.moveCenter(e),this.parent.emit("moved",{viewport:this.parent,type:"mouse-edges"})}}}const yk={noDrag:!1,percent:1,center:null,factor:1,axis:"all"};class xk extends Jt{constructor(e,n={}){super(e),L(this,"options"),L(this,"active",!1),L(this,"pinching",!1),L(this,"moved",!1),L(this,"lastCenter"),this.options=Object.assign({},yk,n)}down(){return this.parent.input.count()>=2?(this.active=!0,!0):!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}move(e){if(this.paused||!this.active)return!1;const n=e.global.x,i=e.global.y,r=this.parent.input.touches;if(r.length>=2){const s=r[0],o=r[1],a=s.last&&o.last?Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2)):null;if(s.id===e.pointerId?s.last={x:n,y:i,data:e}:o.id===e.pointerId&&(o.last={x:n,y:i,data:e}),a){let l;const u=new te(s.last.x+(o.last.x-s.last.x)/2,s.last.y+(o.last.y-s.last.y)/2);this.options.center||(l=this.parent.toLocal(u));let c=Math.sqrt(Math.pow(o.last.x-s.last.x,2)+Math.pow(o.last.y-s.last.y,2));c=c===0?c=1e-10:c;const h=(1-a/c)*this.options.percent*(this.isAxisX()?this.parent.scale.x:this.parent.scale.y);this.isAxisX()&&(this.parent.scale.x+=h),this.isAxisY()&&(this.parent.scale.y+=h),this.parent.emit("zoomed",{viewport:this.parent,type:"pinch",center:u});const d=this.parent.plugins.get("clamp-zoom",!0);if(d&&d.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const f=this.parent.toGlobal(l);this.parent.x+=(u.x-f.x)*this.options.factor,this.parent.y+=(u.y-f.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})}!this.options.noDrag&&this.lastCenter&&(this.parent.x+=(u.x-this.lastCenter.x)*this.options.factor,this.parent.y+=(u.y-this.lastCenter.y)*this.options.factor,this.parent.emit("moved",{viewport:this.parent,type:"pinch"})),this.lastCenter=u,this.moved=!0}else this.pinching||(this.parent.emit("pinch-start",this.parent),this.pinching=!0);return!0}return!1}up(){return this.pinching&&this.parent.input.touches.length<=1?(this.active=!1,this.lastCenter=null,this.pinching=!1,this.moved=!1,this.parent.emit("pinch-end",this.parent),!0):!1}}const _k={topLeft:!1,friction:.8,time:1e3,ease:"easeInOutSine",interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1};let wk=class extends Jt{constructor(e,n,i,r={}){super(e),L(this,"options"),L(this,"ease"),L(this,"x"),L(this,"y"),L(this,"percent"),L(this,"snapping"),L(this,"deltaX"),L(this,"deltaY"),L(this,"startX"),L(this,"startY"),this.options=Object.assign({},_k,r),this.ease=dc(r.ease,"easeInOutSine"),this.x=n,this.y=i,this.options.forceStart&&this.snapStart()}snapStart(){this.percent=0,this.snapping={time:0};const e=this.options.topLeft?this.parent.corner:this.parent.center;this.deltaX=this.x-e.x,this.deltaY=this.y-e.y,this.startX=e.x,this.startY=e.y,this.parent.emit("snap-start",this.parent)}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap"):this.options.interrupt&&(this.snapping=null),!1}up(){if(this.parent.input.count()===0){const e=this.parent.plugins.get("decelerate",!0);e&&(e.x||e.y)&&(e.percentChangeX=e.percentChangeY=this.options.friction)}return!1}update(e){if(!this.paused&&!(this.options.interrupt&&this.parent.input.count()!==0))if(this.snapping){const n=this.snapping;n.time+=e;let i,r,s;const o=this.startX,a=this.startY,l=this.deltaX,u=this.deltaY;if(n.time>this.options.time)i=!0,r=o+l,s=a+u;else{const c=this.ease(n.time,0,1,this.options.time);r=o+l*c,s=a+u*c}this.options.topLeft?this.parent.moveCorner(r,s):this.parent.moveCenter(r,s),this.parent.emit("moved",{viewport:this.parent,type:"snap"}),i&&(this.options.removeOnComplete&&this.parent.plugins.remove("snap"),this.parent.emit("snap-end",this.parent),this.snapping=null)}else{const n=this.options.topLeft?this.parent.corner:this.parent.center;(n.x!==this.x||n.y!==this.y)&&this.snapStart()}}};const bk={width:0,height:0,time:1e3,ease:"easeInOutSine",center:null,interrupt:!0,removeOnComplete:!1,removeOnInterrupt:!1,forceStart:!1,noMove:!1};class Ek extends Jt{constructor(e,n={}){super(e),L(this,"options"),L(this,"ease"),L(this,"xScale"),L(this,"yScale"),L(this,"xIndependent"),L(this,"yIndependent"),L(this,"snapping"),this.options=Object.assign({},bk,n),this.ease=dc(this.options.ease),this.xIndependent=!1,this.yIndependent=!1,this.xScale=0,this.yScale=0,this.options.width>0&&(this.xScale=e.screenWidth/this.options.width,this.xIndependent=!0),this.options.height>0&&(this.yScale=e.screenHeight/this.options.height,this.yIndependent=!0),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale,this.options.time===0?(e.container.scale.x=this.xScale,e.container.scale.y=this.yScale,this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom")):n.forceStart&&this.createSnapping()}createSnapping(){const e=this.parent.worldScreenWidth,n=this.parent.worldScreenHeight,i=this.parent.screenWidth/this.xScale,r=this.parent.screenHeight/this.yScale;this.snapping={time:0,startX:e,startY:n,deltaX:i-e,deltaY:r-n},this.parent.emit("snap-zoom-start",this.parent)}resize(){this.snapping=null,this.options.width>0&&(this.xScale=this.parent.screenWidth/this.options.width),this.options.height>0&&(this.yScale=this.parent.screenHeight/this.options.height),this.xScale=this.xIndependent?this.xScale:this.yScale,this.yScale=this.yIndependent?this.yScale:this.xScale}wheel(){return this.options.removeOnInterrupt&&this.parent.plugins.remove("snap-zoom"),!1}down(){return this.options.removeOnInterrupt?this.parent.plugins.remove("snap-zoom"):this.options.interrupt&&(this.snapping=null),!1}update(e){if(this.paused||this.options.interrupt&&this.parent.input.count()!==0)return;let n;if(!this.options.center&&!this.options.noMove&&(n=this.parent.center),!this.snapping)(this.parent.scale.x!==this.xScale||this.parent.scale.y!==this.yScale)&&this.createSnapping();else if(this.snapping){const i=this.snapping;if(i.time+=e,i.time>=this.options.time)this.parent.scale.set(this.xScale,this.yScale),this.options.removeOnComplete&&this.parent.plugins.remove("snap-zoom"),this.parent.emit("snap-zoom-end",this.parent),this.snapping=null;else{const s=this.snapping,o=this.ease(s.time,s.startX,s.deltaX,this.options.time),a=this.ease(s.time,s.startY,s.deltaY,this.options.time);this.parent.scale.x=this.parent.screenWidth/o,this.parent.scale.y=this.parent.screenHeight/a}const r=this.parent.plugins.get("clamp-zoom",!0);r&&r.clamp(),this.options.noMove||(this.options.center?this.parent.moveCenter(this.options.center):this.parent.moveCenter(n))}}resume(){this.snapping=null,super.resume()}}const Sk={percent:.1,smooth:!1,interrupt:!0,reverse:!1,center:null,lineHeight:20,axis:"all",keyToPress:null,trackpadPinch:!1,wheelZoom:!0};class Tk extends Jt{constructor(e,n={}){super(e),L(this,"options"),L(this,"smoothing"),L(this,"smoothingCenter"),L(this,"smoothingCount"),L(this,"keyIsPressed"),this.options=Object.assign({},Sk,n),this.keyIsPressed=!1,this.options.keyToPress&&this.handleKeyPresses(this.options.keyToPress)}handleKeyPresses(e){window.addEventListener("keydown",n=>{e.includes(n.code)&&(this.keyIsPressed=!0)}),window.addEventListener("keyup",n=>{e.includes(n.code)&&(this.keyIsPressed=!1)})}checkKeyPress(){return!this.options.keyToPress||this.keyIsPressed}down(){return this.options.interrupt&&(this.smoothing=null),!1}isAxisX(){return["all","x"].includes(this.options.axis)}isAxisY(){return["all","y"].includes(this.options.axis)}update(){if(this.smoothing){const e=this.smoothingCenter,n=this.smoothing;let i;this.options.center||(i=this.parent.toLocal(e)),this.isAxisX()&&(this.parent.scale.x+=n.x),this.isAxisY()&&(this.parent.scale.y+=n.y),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const r=this.parent.plugins.get("clamp-zoom",!0);if(r&&r.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const s=this.parent.toGlobal(i);this.parent.x+=e.x-s.x,this.parent.y+=e.y-s.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.smoothingCount++,this.smoothingCount>=this.options.smooth&&(this.smoothing=null)}}pinch(e){if(this.paused)return;const n=this.parent.input.getPointerPosition(e),i=-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/200,r=Math.pow(2,(1+this.options.percent)*i);let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=r),this.isAxisY()&&(this.parent.scale.y*=r),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}wheel(e){if(this.paused||!this.checkKeyPress())return!1;if(e.ctrlKey&&this.options.trackpadPinch)this.pinch(e);else if(this.options.wheelZoom){const n=this.parent.input.getPointerPosition(e),i=(this.options.reverse?-1:1)*-e.deltaY*(e.deltaMode?this.options.lineHeight:1)/500,r=Math.pow(2,(1+this.options.percent)*i);if(this.options.smooth){const s={x:this.smoothing?this.smoothing.x*(this.options.smooth-this.smoothingCount):0,y:this.smoothing?this.smoothing.y*(this.options.smooth-this.smoothingCount):0};this.smoothing={x:((this.parent.scale.x+s.x)*r-this.parent.scale.x)/this.options.smooth,y:((this.parent.scale.y+s.y)*r-this.parent.scale.y)/this.options.smooth},this.smoothingCount=0,this.smoothingCenter=n}else{let s;this.options.center||(s=this.parent.toLocal(n)),this.isAxisX()&&(this.parent.scale.x*=r),this.isAxisY()&&(this.parent.scale.y*=r),this.parent.emit("zoomed",{viewport:this.parent,type:"wheel"});const o=this.parent.plugins.get("clamp-zoom",!0);if(o&&o.clamp(),this.options.center)this.parent.moveCenter(this.options.center);else{const a=this.parent.toGlobal(s);this.parent.x+=n.x-a.x,this.parent.y+=n.y-a.y}}this.parent.emit("moved",{viewport:this.parent,type:"wheel"}),this.parent.emit("wheel-start",{event:e,viewport:this.parent})}return!this.parent.options.passiveWheel}}class Ck{constructor(e){L(this,"viewport"),L(this,"clickedAvailable"),L(this,"isMouseDown"),L(this,"last"),L(this,"wheelFunction"),L(this,"touches"),this.viewport=e,this.touches=[],this.addListeners()}addListeners(){this.viewport.interactive=!0,this.viewport.forceHitArea||(this.viewport.hitArea=new le(0,0,this.viewport.worldWidth,this.viewport.worldHeight)),this.viewport.on("pointerdown",this.down,this),this.viewport.options.allowPreserveDragOutside?this.viewport.on("globalpointermove",this.move,this):this.viewport.on("pointermove",this.move,this),this.viewport.on("pointerup",this.up,this),this.viewport.on("pointerupoutside",this.up,this),this.viewport.on("pointercancel",this.up,this),this.viewport.options.allowPreserveDragOutside||this.viewport.on("pointerleave",this.up,this),this.wheelFunction=e=>this.handleWheel(e),this.viewport.options.events.domElement.addEventListener("wheel",this.wheelFunction,{passive:this.viewport.options.passiveWheel}),this.isMouseDown=!1}destroy(){this.viewport.options.events.domElement.removeEventListener("wheel",this.wheelFunction)}down(e){if(!(this.viewport.pause||!this.viewport.worldVisible)){if(e.pointerType==="mouse"?this.isMouseDown=!0:this.get(e.pointerId)||this.touches.push({id:e.pointerId,last:null}),this.count()===1){this.last=e.global.clone();const n=this.viewport.plugins.get("decelerate",!0),i=this.viewport.plugins.get("bounce",!0);(!n||!n.isActive())&&(!i||!i.isActive())?this.clickedAvailable=!0:this.clickedAvailable=!1}else this.clickedAvailable=!1;this.viewport.plugins.down(e)&&this.viewport.options.stopPropagation&&e.stopPropagation()}}clear(){this.isMouseDown=!1,this.touches=[],this.last=null}checkThreshold(e){return Math.abs(e)>=this.viewport.threshold}move(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.plugins.move(e);if(this.clickedAvailable&&this.last){const i=e.global.x-this.last.x,r=e.global.y-this.last.y;(this.checkThreshold(i)||this.checkThreshold(r))&&(this.clickedAvailable=!1)}n&&this.viewport.options.stopPropagation&&e.stopPropagation()}up(e){if(this.viewport.pause||!this.viewport.worldVisible)return;e.pointerType==="mouse"&&(this.isMouseDown=!1),e.pointerType!=="mouse"&&this.remove(e.pointerId);const n=this.viewport.plugins.up(e);this.clickedAvailable&&this.count()===0&&this.last&&(this.viewport.emit("clicked",{event:e,screen:this.last,world:this.viewport.toWorld(this.last),viewport:this.viewport}),this.clickedAvailable=!1),n&&this.viewport.options.stopPropagation&&e.stopPropagation()}getPointerPosition(e){const n=new te;return this.viewport.options.events.mapPositionToPoint(n,e.clientX,e.clientY),n}handleWheel(e){if(this.viewport.pause||!this.viewport.worldVisible)return;const n=this.viewport.toLocal(this.getPointerPosition(e));this.viewport.left<=n.x&&n.x<=this.viewport.right&&this.viewport.top<=n.y&&n.y<=this.viewport.bottom&&this.viewport.plugins.wheel(e)&&!this.viewport.options.passiveWheel&&e.preventDefault()}pause(){this.touches=[],this.isMouseDown=!1}get(e){for(const n of this.touches)if(n.id===e)return n;return null}remove(e){for(let n=0;n<this.touches.length;n++)if(this.touches[n].id===e){this.touches.splice(n,1);return}}count(){return(this.isMouseDown?1:0)+this.touches.length}}const qs=["drag","pinch","wheel","follow","mouse-edges","decelerate","animate","bounce","snap-zoom","clamp-zoom","snap","clamp"];class Ak{constructor(e){L(this,"plugins"),L(this,"list"),L(this,"viewport"),this.viewport=e,this.list=[],this.plugins={}}add(e,n,i=qs.length){const r=this.plugins[e];r&&r.destroy(),this.plugins[e]=n;const s=qs.indexOf(e);s!==-1&&qs.splice(s,1),qs.splice(i,0,e),this.sort()}get(e,n){var i;return n&&(i=this.plugins[e])!=null&&i.paused?null:this.plugins[e]}update(e){for(const n of this.list)n.update(e)}resize(){for(const e of this.list)e.resize()}reset(){for(const e of this.list)e.reset()}removeAll(){this.list.forEach(e=>{e.destroy()}),this.plugins={},this.sort()}remove(e){var n;this.plugins[e]&&((n=this.plugins[e])==null||n.destroy(),delete this.plugins[e],this.viewport.emit("plugin-remove",e),this.sort())}pause(e){var n;(n=this.plugins[e])==null||n.pause()}resume(e){var n;(n=this.plugins[e])==null||n.resume()}sort(){this.list=[];for(const e of qs)this.plugins[e]&&this.list.push(this.plugins[e])}down(e){let n=!1;for(const i of this.list)i.down(e)&&(n=!0);return n}move(e){let n=!1;for(const i of this.viewport.plugins.list)i.move(e)&&(n=!0);return n}up(e){let n=!1;for(const i of this.list)i.up(e)&&(n=!0);return n}wheel(e){let n=!1;for(const i of this.list)i.wheel(e)&&(n=!0);return n}}const Pk={screenWidth:window.innerWidth,screenHeight:window.innerHeight,worldWidth:null,worldHeight:null,threshold:5,passiveWheel:!0,stopPropagation:!1,forceHitArea:null,noTicker:!1,disableOnContextMenu:!1,ticker:pt.shared,allowPreserveDragOutside:!1};class Ik extends Ut{constructor(e){super(),L(this,"moving"),L(this,"screenWidth"),L(this,"screenHeight"),L(this,"threshold"),L(this,"input"),L(this,"plugins"),L(this,"zooming"),L(this,"lastViewport"),L(this,"options"),L(this,"_dirty"),L(this,"_forceHitArea"),L(this,"_hitAreaDefault"),L(this,"_pause"),L(this,"tickerFunction"),L(this,"_worldWidth"),L(this,"_worldHeight"),L(this,"_disableOnContextMenu",n=>n.preventDefault()),this.options={...Pk,...e},this.screenWidth=this.options.screenWidth,this.screenHeight=this.options.screenHeight,this._worldWidth=this.options.worldWidth,this._worldHeight=this.options.worldHeight,this.forceHitArea=this.options.forceHitArea,this.threshold=this.options.threshold,this.options.disableOnContextMenu&&this.options.events.domElement.addEventListener("contextmenu",this._disableOnContextMenu),this.options.noTicker||(this.tickerFunction=()=>this.update(this.options.ticker.elapsedMS),this.options.ticker.add(this.tickerFunction)),this.input=new Ck(this),this.plugins=new Ak(this)}destroy(e){!this.options.noTicker&&this.tickerFunction&&this.options.ticker.remove(this.tickerFunction),this.options.disableOnContextMenu&&this.options.events.domElement.removeEventListener("contextmenu",this._disableOnContextMenu),this.input.destroy(),super.destroy(e)}update(e){this.pause||(this.plugins.update(e),this.lastViewport&&(this.lastViewport.x!==this.x||this.lastViewport.y!==this.y?this.moving=!0:this.moving&&(this.emit("moved-end",this),this.moving=!1),this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y?this.zooming=!0:this.zooming&&(this.emit("zoomed-end",this),this.zooming=!1)),this.forceHitArea||(this._hitAreaDefault=new le(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight),this.hitArea=this._hitAreaDefault),this._dirty=this._dirty||!this.lastViewport||this.lastViewport.x!==this.x||this.lastViewport.y!==this.y||this.lastViewport.scaleX!==this.scale.x||this.lastViewport.scaleY!==this.scale.y,this.lastViewport={x:this.x,y:this.y,scaleX:this.scale.x,scaleY:this.scale.y},this.emit("frame-end",this))}resize(e=window.innerWidth,n=window.innerHeight,i,r){this.screenWidth=e,this.screenHeight=n,typeof i<"u"&&(this._worldWidth=i),typeof r<"u"&&(this._worldHeight=r),this.plugins.resize(),this.dirty=!0}get worldWidth(){return this._worldWidth?this._worldWidth:this.width/this.scale.x}set worldWidth(e){this._worldWidth=e,this.plugins.resize()}get worldHeight(){return this._worldHeight?this._worldHeight:this.height/this.scale.y}set worldHeight(e){this._worldHeight=e,this.plugins.resize()}getVisibleBounds(){return new le(this.left,this.top,this.worldScreenWidth,this.worldScreenHeight)}toWorld(e,n){return arguments.length===2?this.toLocal(new te(e,n)):this.toLocal(e)}toScreen(e,n){return arguments.length===2?this.toGlobal(new te(e,n)):this.toGlobal(e)}get worldScreenWidth(){return this.screenWidth/this.scale.x}get worldScreenHeight(){return this.screenHeight/this.scale.y}get screenWorldWidth(){return this.worldWidth*this.scale.x}get screenWorldHeight(){return this.worldHeight*this.scale.y}get center(){return new te(this.worldScreenWidth/2-this.x/this.scale.x,this.worldScreenHeight/2-this.y/this.scale.y)}set center(e){this.moveCenter(e)}moveCenter(...e){let n,i;typeof e[0]=="number"?(n=e[0],i=e[1]):(n=e[0].x,i=e[0].y);const r=(this.worldScreenWidth/2-n)*this.scale.x,s=(this.worldScreenHeight/2-i)*this.scale.y;return(this.x!==r||this.y!==s)&&(this.position.set(r,s),this.plugins.reset(),this.dirty=!0),this}get corner(){return new te(-this.x/this.scale.x,-this.y/this.scale.y)}set corner(e){this.moveCorner(e)}moveCorner(...e){let n,i;return e.length===1?(n=-e[0].x*this.scale.x,i=-e[0].y*this.scale.y):(n=-e[0]*this.scale.x,i=-e[1]*this.scale.y),(n!==this.x||i!==this.y)&&(this.position.set(n,i),this.plugins.reset(),this.dirty=!0),this}get screenWidthInWorldPixels(){return this.screenWidth/this.scale.x}get screenHeightInWorldPixels(){return this.screenHeight/this.scale.y}findFitWidth(e){return this.screenWidth/e}findFitHeight(e){return this.screenHeight/e}findFit(e,n){const i=this.screenWidth/e,r=this.screenHeight/n;return Math.min(i,r)}findCover(e,n){const i=this.screenWidth/e,r=this.screenHeight/n;return Math.max(i,r)}fitWidth(e=this.worldWidth,n,i=!0,r){let s;n&&(s=this.center),this.scale.x=this.screenWidth/e,i&&(this.scale.y=this.scale.x);const o=this.plugins.get("clamp-zoom",!0);return!r&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitHeight(e=this.worldHeight,n,i=!0,r){let s;n&&(s=this.center),this.scale.y=this.screenHeight/e,i&&(this.scale.x=this.scale.y);const o=this.plugins.get("clamp-zoom",!0);return!r&&o&&o.clamp(),n&&s&&this.moveCenter(s),this}fitWorld(e){let n;e&&(n=this.center),this.scale.x=this.screenWidth/this.worldWidth,this.scale.y=this.screenHeight/this.worldHeight,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const i=this.plugins.get("clamp-zoom",!0);return i&&i.clamp(),e&&n&&this.moveCenter(n),this}fit(e,n=this.worldWidth,i=this.worldHeight){let r;e&&(r=this.center),this.scale.x=this.screenWidth/n,this.scale.y=this.screenHeight/i,this.scale.x<this.scale.y?this.scale.y=this.scale.x:this.scale.x=this.scale.y;const s=this.plugins.get("clamp-zoom",!0);return s&&s.clamp(),e&&r&&this.moveCenter(r),this}setZoom(e,n){let i;n&&(i=this.center),this.scale.set(e);const r=this.plugins.get("clamp-zoom",!0);return r&&r.clamp(),n&&i&&this.moveCenter(i),this}zoomPercent(e,n){return this.setZoom(this.scale.x+this.scale.x*e,n)}zoom(e,n){return this.fitWidth(e+this.worldScreenWidth,n),this}get scaled(){return this.scale.x}set scaled(e){this.setZoom(e,!0)}snapZoom(e){return this.plugins.add("snap-zoom",new Ek(this,e)),this}OOB(){return{left:this.left<0,right:this.right>this.worldWidth,top:this.top<0,bottom:this.bottom>this.worldHeight,cornerPoint:new te(this.worldWidth*this.scale.x-this.screenWidth,this.worldHeight*this.scale.y-this.screenHeight)}}get right(){return-this.x/this.scale.x+this.worldScreenWidth}set right(e){this.x=-e*this.scale.x+this.screenWidth,this.plugins.reset()}get left(){return-this.x/this.scale.x}set left(e){this.x=-e*this.scale.x,this.plugins.reset()}get top(){return-this.y/this.scale.y}set top(e){this.y=-e*this.scale.y,this.plugins.reset()}get bottom(){return-this.y/this.scale.y+this.worldScreenHeight}set bottom(e){this.y=-e*this.scale.y+this.screenHeight,this.plugins.reset()}get dirty(){return!!this._dirty}set dirty(e){this._dirty=e}get forceHitArea(){return this._forceHitArea}set forceHitArea(e){e?(this._forceHitArea=e,this.hitArea=e):(this._forceHitArea=null,this.hitArea=new le(0,0,this.worldWidth,this.worldHeight))}drag(e){return this.plugins.add("drag",new fk(this,e)),this}clamp(e){return this.plugins.add("clamp",new ak(this,e)),this}decelerate(e){return this.plugins.add("decelerate",new hk(this,e)),this}bounce(e){return this.plugins.add("bounce",new sk(this,e)),this}pinch(e){return this.plugins.add("pinch",new xk(this,e)),this}snap(e,n,i){return this.plugins.add("snap",new wk(this,e,n,i)),this}follow(e,n){return this.plugins.add("follow",new mk(this,e,n)),this}wheel(e){return this.plugins.add("wheel",new Tk(this,e)),this}animate(e){return this.plugins.add("animate",new ik(this,e)),this}clampZoom(e){return this.plugins.add("clamp-zoom",new uk(this,e)),this}mouseEdges(e){return this.plugins.add("mouse-edges",new vk(this,e)),this}get pause(){return!!this._pause}set pause(e){this._pause=e,this.lastViewport=null,this.moving=!1,this.zooming=!1,e&&this.input.pause()}ensureVisible(e,n,i,r,s){s&&(i>this.worldScreenWidth||r>this.worldScreenHeight)&&(this.fit(!0,i,r),this.emit("zoomed",{viewport:this,type:"ensureVisible"}));let o=!1;e<this.left?(this.left=e,o=!0):e+i>this.right&&(this.right=e+i,o=!0),n<this.top?(this.top=n,o=!0):n+r>this.bottom&&(this.bottom=n+r,o=!0),o&&this.emit("moved",{viewport:this,type:"ensureVisible"})}}var Mk=typeof global=="object"&&global&&global.Object===Object&&global;const Rw=Mk;var Ok=typeof self=="object"&&self&&self.Object===Object&&self,Rk=Rw||Ok||Function("return this")();const zn=Rk;var kk=zn.Symbol;const Qt=kk;var kw=Object.prototype,Dk=kw.hasOwnProperty,Fk=kw.toString,Ks=Qt?Qt.toStringTag:void 0;function Lk(t){var e=Dk.call(t,Ks),n=t[Ks];try{t[Ks]=void 0;var i=!0}catch{}var r=Fk.call(t);return i&&(e?t[Ks]=n:delete t[Ks]),r}var Bk=Object.prototype,Nk=Bk.toString;function Uk(t){return Nk.call(t)}var $k="[object Null]",zk="[object Undefined]",L0=Qt?Qt.toStringTag:void 0;function zi(t){return t==null?t===void 0?zk:$k:L0&&L0 in Object(t)?Lk(t):Uk(t)}function _n(t){return t!=null&&typeof t=="object"}var Hk="[object Symbol]";function Es(t){return typeof t=="symbol"||_n(t)&&zi(t)==Hk}function Mi(t,e){for(var n=-1,i=t==null?0:t.length,r=Array(i);++n<i;)r[n]=e(t[n],n,t);return r}var jk=Array.isArray;const ze=jk;var Gk=1/0,B0=Qt?Qt.prototype:void 0,N0=B0?B0.toString:void 0;function Dw(t){if(typeof t=="string")return t;if(ze(t))return Mi(t,Dw)+"";if(Es(t))return N0?N0.call(t):"";var e=t+"";return e=="0"&&1/t==-Gk?"-0":e}var Vk=/\s/;function Wk(t){for(var e=t.length;e--&&Vk.test(t.charAt(e)););return e}var Xk=/^\s+/;function Yk(t){return t&&t.slice(0,Wk(t)+1).replace(Xk,"")}function si(t){var e=typeof t;return t!=null&&(e=="object"||e=="function")}var U0=0/0,qk=/^[-+]0x[0-9a-f]+$/i,Kk=/^0b[01]+$/i,Zk=/^0o[0-7]+$/i,Qk=parseInt;function Jk(t){if(typeof t=="number")return t;if(Es(t))return U0;if(si(t)){var e=typeof t.valueOf=="function"?t.valueOf():t;t=si(e)?e+"":e}if(typeof t!="string")return t===0?t:+t;t=Yk(t);var n=Kk.test(t);return n||Zk.test(t)?Qk(t.slice(2),n?2:8):qk.test(t)?U0:+t}var $0=1/0,eD=17976931348623157e292;function tD(t){if(!t)return t===0?t:0;if(t=Jk(t),t===$0||t===-$0){var e=t<0?-1:1;return e*eD}return t===t?t:0}function ym(t){var e=tD(t),n=e%1;return e===e?n?e-n:e:0}function ua(t){return t}var nD="[object AsyncFunction]",iD="[object Function]",rD="[object GeneratorFunction]",sD="[object Proxy]";function Bi(t){if(!si(t))return!1;var e=zi(t);return e==iD||e==rD||e==nD||e==sD}var oD=zn["__core-js_shared__"];const kh=oD;var z0=function(){var t=/[^.]+$/.exec(kh&&kh.keys&&kh.keys.IE_PROTO||"");return t?"Symbol(src)_1."+t:""}();function aD(t){return!!z0&&z0 in t}var lD=Function.prototype,uD=lD.toString;function Sr(t){if(t!=null){try{return uD.call(t)}catch{}try{return t+""}catch{}}return""}var cD=/[\\^$.*+?()[\]{}|]/g,hD=/^\[object .+?Constructor\]$/,dD=Function.prototype,fD=Object.prototype,pD=dD.toString,mD=fD.hasOwnProperty,gD=RegExp("^"+pD.call(mD).replace(cD,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function vD(t){if(!si(t)||aD(t))return!1;var e=Bi(t)?gD:hD;return e.test(Sr(t))}function yD(t,e){return t==null?void 0:t[e]}function Tr(t,e){var n=yD(t,e);return vD(n)?n:void 0}var xD=Tr(zn,"WeakMap");const Cf=xD;var H0=Object.create,_D=function(){function t(){}return function(e){if(!si(e))return{};if(H0)return H0(e);t.prototype=e;var n=new t;return t.prototype=void 0,n}}();const wD=_D;function bD(t,e,n){switch(n.length){case 0:return t.call(e);case 1:return t.call(e,n[0]);case 2:return t.call(e,n[0],n[1]);case 3:return t.call(e,n[0],n[1],n[2])}return t.apply(e,n)}function ED(){}function Fw(t,e){var n=-1,i=t.length;for(e||(e=Array(i));++n<i;)e[n]=t[n];return e}var SD=800,TD=16,CD=Date.now;function AD(t){var e=0,n=0;return function(){var i=CD(),r=TD-(i-n);if(n=i,r>0){if(++e>=SD)return arguments[0]}else e=0;return t.apply(void 0,arguments)}}function PD(t){return function(){return t}}var ID=function(){try{var t=Tr(Object,"defineProperty");return t({},"",{}),t}catch{}}();const Tu=ID;var MD=Tu?function(t,e){return Tu(t,"toString",{configurable:!0,enumerable:!1,value:PD(e),writable:!0})}:ua;const OD=MD;var RD=AD(OD);const kD=RD;function Lw(t,e){for(var n=-1,i=t==null?0:t.length;++n<i&&e(t[n],n,t)!==!1;);return t}function Bw(t,e,n,i){for(var r=t.length,s=n+(i?1:-1);i?s--:++s<r;)if(e(t[s],s,t))return s;return-1}function DD(t){return t!==t}function FD(t,e,n){for(var i=n-1,r=t.length;++i<r;)if(t[i]===e)return i;return-1}function Nw(t,e,n){return e===e?FD(t,e,n):Bw(t,DD,n)}function Uw(t,e){var n=t==null?0:t.length;return!!n&&Nw(t,e,0)>-1}var LD=9007199254740991,BD=/^(?:0|[1-9]\d*)$/;function xm(t,e){var n=typeof t;return e=e??LD,!!e&&(n=="number"||n!="symbol"&&BD.test(t))&&t>-1&&t%1==0&&t<e}function _m(t,e,n){e=="__proto__"&&Tu?Tu(t,e,{configurable:!0,enumerable:!0,value:n,writable:!0}):t[e]=n}function fc(t,e){return t===e||t!==t&&e!==e}var ND=Object.prototype,UD=ND.hasOwnProperty;function $w(t,e,n){var i=t[e];(!(UD.call(t,e)&&fc(i,n))||n===void 0&&!(e in t))&&_m(t,e,n)}function pc(t,e,n,i){var r=!n;n||(n={});for(var s=-1,o=e.length;++s<o;){var a=e[s],l=i?i(n[a],t[a],a,n,t):void 0;l===void 0&&(l=t[a]),r?_m(n,a,l):$w(n,a,l)}return n}var j0=Math.max;function $D(t,e,n){return e=j0(e===void 0?t.length-1:e,0),function(){for(var i=arguments,r=-1,s=j0(i.length-e,0),o=Array(s);++r<s;)o[r]=i[e+r];r=-1;for(var a=Array(e+1);++r<e;)a[r]=i[r];return a[e]=n(o),bD(t,this,a)}}function zw(t,e){return kD($D(t,e,ua),t+"")}var zD=9007199254740991;function wm(t){return typeof t=="number"&&t>-1&&t%1==0&&t<=zD}function Hi(t){return t!=null&&wm(t.length)&&!Bi(t)}function G0(t,e,n){if(!si(n))return!1;var i=typeof e;return(i=="number"?Hi(n)&&xm(e,n.length):i=="string"&&e in n)?fc(n[e],t):!1}var HD=Object.prototype;function bm(t){var e=t&&t.constructor,n=typeof e=="function"&&e.prototype||HD;return t===n}function Hw(t,e){for(var n=-1,i=Array(t);++n<t;)i[n]=e(n);return i}var jD="[object Arguments]";function V0(t){return _n(t)&&zi(t)==jD}var jw=Object.prototype,GD=jw.hasOwnProperty,VD=jw.propertyIsEnumerable,WD=V0(function(){return arguments}())?V0:function(t){return _n(t)&&GD.call(t,"callee")&&!VD.call(t,"callee")};const Em=WD;function XD(){return!1}var Gw=typeof Dt=="object"&&Dt&&!Dt.nodeType&&Dt,W0=Gw&&typeof Ft=="object"&&Ft&&!Ft.nodeType&&Ft,YD=W0&&W0.exports===Gw,X0=YD?zn.Buffer:void 0,qD=X0?X0.isBuffer:void 0,KD=qD||XD;const Cu=KD;var ZD="[object Arguments]",QD="[object Array]",JD="[object Boolean]",eF="[object Date]",tF="[object Error]",nF="[object Function]",iF="[object Map]",rF="[object Number]",sF="[object Object]",oF="[object RegExp]",aF="[object Set]",lF="[object String]",uF="[object WeakMap]",cF="[object ArrayBuffer]",hF="[object DataView]",dF="[object Float32Array]",fF="[object Float64Array]",pF="[object Int8Array]",mF="[object Int16Array]",gF="[object Int32Array]",vF="[object Uint8Array]",yF="[object Uint8ClampedArray]",xF="[object Uint16Array]",_F="[object Uint32Array]",Ee={};Ee[dF]=Ee[fF]=Ee[pF]=Ee[mF]=Ee[gF]=Ee[vF]=Ee[yF]=Ee[xF]=Ee[_F]=!0;Ee[ZD]=Ee[QD]=Ee[cF]=Ee[JD]=Ee[hF]=Ee[eF]=Ee[tF]=Ee[nF]=Ee[iF]=Ee[rF]=Ee[sF]=Ee[oF]=Ee[aF]=Ee[lF]=Ee[uF]=!1;function wF(t){return _n(t)&&wm(t.length)&&!!Ee[zi(t)]}function ca(t){return function(e){return t(e)}}var Vw=typeof Dt=="object"&&Dt&&!Dt.nodeType&&Dt,wo=Vw&&typeof Ft=="object"&&Ft&&!Ft.nodeType&&Ft,bF=wo&&wo.exports===Vw,Dh=bF&&Rw.process,EF=function(){try{var t=wo&&wo.require&&wo.require("util").types;return t||Dh&&Dh.binding&&Dh.binding("util")}catch{}}();const Ss=EF;var Y0=Ss&&Ss.isTypedArray,SF=Y0?ca(Y0):wF;const Ww=SF;var TF=Object.prototype,CF=TF.hasOwnProperty;function Xw(t,e){var n=ze(t),i=!n&&Em(t),r=!n&&!i&&Cu(t),s=!n&&!i&&!r&&Ww(t),o=n||i||r||s,a=o?Hw(t.length,String):[],l=a.length;for(var u in t)(e||CF.call(t,u))&&!(o&&(u=="length"||r&&(u=="offset"||u=="parent")||s&&(u=="buffer"||u=="byteLength"||u=="byteOffset")||xm(u,l)))&&a.push(u);return a}function Yw(t,e){return function(n){return t(e(n))}}var AF=Yw(Object.keys,Object);const PF=AF;var IF=Object.prototype,MF=IF.hasOwnProperty;function OF(t){if(!bm(t))return PF(t);var e=[];for(var n in Object(t))MF.call(t,n)&&n!="constructor"&&e.push(n);return e}function Cr(t){return Hi(t)?Xw(t):OF(t)}function RF(t){var e=[];if(t!=null)for(var n in Object(t))e.push(n);return e}var kF=Object.prototype,DF=kF.hasOwnProperty;function FF(t){if(!si(t))return RF(t);var e=bm(t),n=[];for(var i in t)i=="constructor"&&(e||!DF.call(t,i))||n.push(i);return n}function Sm(t){return Hi(t)?Xw(t,!0):FF(t)}var LF=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,BF=/^\w*$/;function Tm(t,e){if(ze(t))return!1;var n=typeof t;return n=="number"||n=="symbol"||n=="boolean"||t==null||Es(t)?!0:BF.test(t)||!LF.test(t)||e!=null&&t in Object(e)}var NF=Tr(Object,"create");const qo=NF;function UF(){this.__data__=qo?qo(null):{},this.size=0}function $F(t){var e=this.has(t)&&delete this.__data__[t];return this.size-=e?1:0,e}var zF="__lodash_hash_undefined__",HF=Object.prototype,jF=HF.hasOwnProperty;function GF(t){var e=this.__data__;if(qo){var n=e[t];return n===zF?void 0:n}return jF.call(e,t)?e[t]:void 0}var VF=Object.prototype,WF=VF.hasOwnProperty;function XF(t){var e=this.__data__;return qo?e[t]!==void 0:WF.call(e,t)}var YF="__lodash_hash_undefined__";function qF(t,e){var n=this.__data__;return this.size+=this.has(t)?0:1,n[t]=qo&&e===void 0?YF:e,this}function xr(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}xr.prototype.clear=UF;xr.prototype.delete=$F;xr.prototype.get=GF;xr.prototype.has=XF;xr.prototype.set=qF;function KF(){this.__data__=[],this.size=0}function mc(t,e){for(var n=t.length;n--;)if(fc(t[n][0],e))return n;return-1}var ZF=Array.prototype,QF=ZF.splice;function JF(t){var e=this.__data__,n=mc(e,t);if(n<0)return!1;var i=e.length-1;return n==i?e.pop():QF.call(e,n,1),--this.size,!0}function e3(t){var e=this.__data__,n=mc(e,t);return n<0?void 0:e[n][1]}function t3(t){return mc(this.__data__,t)>-1}function n3(t,e){var n=this.__data__,i=mc(n,t);return i<0?(++this.size,n.push([t,e])):n[i][1]=e,this}function li(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}li.prototype.clear=KF;li.prototype.delete=JF;li.prototype.get=e3;li.prototype.has=t3;li.prototype.set=n3;var i3=Tr(zn,"Map");const Ko=i3;function r3(){this.size=0,this.__data__={hash:new xr,map:new(Ko||li),string:new xr}}function s3(t){var e=typeof t;return e=="string"||e=="number"||e=="symbol"||e=="boolean"?t!=="__proto__":t===null}function gc(t,e){var n=t.__data__;return s3(e)?n[typeof e=="string"?"string":"hash"]:n.map}function o3(t){var e=gc(this,t).delete(t);return this.size-=e?1:0,e}function a3(t){return gc(this,t).get(t)}function l3(t){return gc(this,t).has(t)}function u3(t,e){var n=gc(this,t),i=n.size;return n.set(t,e),this.size+=n.size==i?0:1,this}function ui(t){var e=-1,n=t==null?0:t.length;for(this.clear();++e<n;){var i=t[e];this.set(i[0],i[1])}}ui.prototype.clear=r3;ui.prototype.delete=o3;ui.prototype.get=a3;ui.prototype.has=l3;ui.prototype.set=u3;var c3="Expected a function";function Cm(t,e){if(typeof t!="function"||e!=null&&typeof e!="function")throw new TypeError(c3);var n=function(){var i=arguments,r=e?e.apply(this,i):i[0],s=n.cache;if(s.has(r))return s.get(r);var o=t.apply(this,i);return n.cache=s.set(r,o)||s,o};return n.cache=new(Cm.Cache||ui),n}Cm.Cache=ui;var h3=500;function d3(t){var e=Cm(t,function(i){return n.size===h3&&n.clear(),i}),n=e.cache;return e}var f3=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,p3=/\\(\\)?/g,m3=d3(function(t){var e=[];return t.charCodeAt(0)===46&&e.push(""),t.replace(f3,function(n,i,r,s){e.push(r?s.replace(p3,"$1"):i||n)}),e});const g3=m3;function v3(t){return t==null?"":Dw(t)}function qw(t,e){return ze(t)?t:Tm(t,e)?[t]:g3(v3(t))}var y3=1/0;function vc(t){if(typeof t=="string"||Es(t))return t;var e=t+"";return e=="0"&&1/t==-y3?"-0":e}function Am(t,e){e=qw(e,t);for(var n=0,i=e.length;t!=null&&n<i;)t=t[vc(e[n++])];return n&&n==i?t:void 0}function x3(t,e,n){var i=t==null?void 0:Am(t,e);return i===void 0?n:i}function yc(t,e){for(var n=-1,i=e.length,r=t.length;++n<i;)t[r+n]=e[n];return t}var q0=Qt?Qt.isConcatSpreadable:void 0;function _3(t){return ze(t)||Em(t)||!!(q0&&t&&t[q0])}function Pm(t,e,n,i,r){var s=-1,o=t.length;for(n||(n=_3),r||(r=[]);++s<o;){var a=t[s];e>0&&n(a)?e>1?Pm(a,e-1,n,i,r):yc(r,a):i||(r[r.length]=a)}return r}var w3=Yw(Object.getPrototypeOf,Object);const Kw=w3;function b3(t,e,n,i){var r=-1,s=t==null?0:t.length;for(i&&s&&(n=t[++r]);++r<s;)n=e(n,t[r],r,t);return n}function E3(){this.__data__=new li,this.size=0}function S3(t){var e=this.__data__,n=e.delete(t);return this.size=e.size,n}function T3(t){return this.__data__.get(t)}function C3(t){return this.__data__.has(t)}var A3=200;function P3(t,e){var n=this.__data__;if(n instanceof li){var i=n.__data__;if(!Ko||i.length<A3-1)return i.push([t,e]),this.size=++n.size,this;n=this.__data__=new ui(i)}return n.set(t,e),this.size=n.size,this}function Ln(t){var e=this.__data__=new li(t);this.size=e.size}Ln.prototype.clear=E3;Ln.prototype.delete=S3;Ln.prototype.get=T3;Ln.prototype.has=C3;Ln.prototype.set=P3;function I3(t,e){return t&&pc(e,Cr(e),t)}function M3(t,e){return t&&pc(e,Sm(e),t)}var Zw=typeof Dt=="object"&&Dt&&!Dt.nodeType&&Dt,K0=Zw&&typeof Ft=="object"&&Ft&&!Ft.nodeType&&Ft,O3=K0&&K0.exports===Zw,Z0=O3?zn.Buffer:void 0,Q0=Z0?Z0.allocUnsafe:void 0;function R3(t,e){if(e)return t.slice();var n=t.length,i=Q0?Q0(n):new t.constructor(n);return t.copy(i),i}function Qw(t,e){for(var n=-1,i=t==null?0:t.length,r=0,s=[];++n<i;){var o=t[n];e(o,n,t)&&(s[r++]=o)}return s}function Jw(){return[]}var k3=Object.prototype,D3=k3.propertyIsEnumerable,J0=Object.getOwnPropertySymbols,F3=J0?function(t){return t==null?[]:(t=Object(t),Qw(J0(t),function(e){return D3.call(t,e)}))}:Jw;const Im=F3;function L3(t,e){return pc(t,Im(t),e)}var B3=Object.getOwnPropertySymbols,N3=B3?function(t){for(var e=[];t;)yc(e,Im(t)),t=Kw(t);return e}:Jw;const eb=N3;function U3(t,e){return pc(t,eb(t),e)}function tb(t,e,n){var i=e(t);return ze(t)?i:yc(i,n(t))}function Af(t){return tb(t,Cr,Im)}function $3(t){return tb(t,Sm,eb)}var z3=Tr(zn,"DataView");const Pf=z3;var H3=Tr(zn,"Promise");const If=H3;var j3=Tr(zn,"Set");const us=j3;var ey="[object Map]",G3="[object Object]",ty="[object Promise]",ny="[object Set]",iy="[object WeakMap]",ry="[object DataView]",V3=Sr(Pf),W3=Sr(Ko),X3=Sr(If),Y3=Sr(us),q3=Sr(Cf),Ji=zi;(Pf&&Ji(new Pf(new ArrayBuffer(1)))!=ry||Ko&&Ji(new Ko)!=ey||If&&Ji(If.resolve())!=ty||us&&Ji(new us)!=ny||Cf&&Ji(new Cf)!=iy)&&(Ji=function(t){var e=zi(t),n=e==G3?t.constructor:void 0,i=n?Sr(n):"";if(i)switch(i){case V3:return ry;case W3:return ey;case X3:return ty;case Y3:return ny;case q3:return iy}return e});const Zo=Ji;var K3=Object.prototype,Z3=K3.hasOwnProperty;function Q3(t){var e=t.length,n=new t.constructor(e);return e&&typeof t[0]=="string"&&Z3.call(t,"index")&&(n.index=t.index,n.input=t.input),n}var J3=zn.Uint8Array;const Au=J3;function Mm(t){var e=new t.constructor(t.byteLength);return new Au(e).set(new Au(t)),e}function eL(t,e){var n=e?Mm(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.byteLength)}var tL=/\w*$/;function nL(t){var e=new t.constructor(t.source,tL.exec(t));return e.lastIndex=t.lastIndex,e}var sy=Qt?Qt.prototype:void 0,oy=sy?sy.valueOf:void 0;function iL(t){return oy?Object(oy.call(t)):{}}function rL(t,e){var n=e?Mm(t.buffer):t.buffer;return new t.constructor(n,t.byteOffset,t.length)}var sL="[object Boolean]",oL="[object Date]",aL="[object Map]",lL="[object Number]",uL="[object RegExp]",cL="[object Set]",hL="[object String]",dL="[object Symbol]",fL="[object ArrayBuffer]",pL="[object DataView]",mL="[object Float32Array]",gL="[object Float64Array]",vL="[object Int8Array]",yL="[object Int16Array]",xL="[object Int32Array]",_L="[object Uint8Array]",wL="[object Uint8ClampedArray]",bL="[object Uint16Array]",EL="[object Uint32Array]";function SL(t,e,n){var i=t.constructor;switch(e){case fL:return Mm(t);case sL:case oL:return new i(+t);case pL:return eL(t,n);case mL:case gL:case vL:case yL:case xL:case _L:case wL:case bL:case EL:return rL(t,n);case aL:return new i;case lL:case hL:return new i(t);case uL:return nL(t);case cL:return new i;case dL:return iL(t)}}function TL(t){return typeof t.constructor=="function"&&!bm(t)?wD(Kw(t)):{}}var CL="[object Map]";function AL(t){return _n(t)&&Zo(t)==CL}var ay=Ss&&Ss.isMap,PL=ay?ca(ay):AL;const IL=PL;var ML="[object Set]";function OL(t){return _n(t)&&Zo(t)==ML}var ly=Ss&&Ss.isSet,RL=ly?ca(ly):OL;const kL=RL;var DL=1,FL=2,LL=4,nb="[object Arguments]",BL="[object Array]",NL="[object Boolean]",UL="[object Date]",$L="[object Error]",ib="[object Function]",zL="[object GeneratorFunction]",HL="[object Map]",jL="[object Number]",rb="[object Object]",GL="[object RegExp]",VL="[object Set]",WL="[object String]",XL="[object Symbol]",YL="[object WeakMap]",qL="[object ArrayBuffer]",KL="[object DataView]",ZL="[object Float32Array]",QL="[object Float64Array]",JL="[object Int8Array]",eB="[object Int16Array]",tB="[object Int32Array]",nB="[object Uint8Array]",iB="[object Uint8ClampedArray]",rB="[object Uint16Array]",sB="[object Uint32Array]",_e={};_e[nb]=_e[BL]=_e[qL]=_e[KL]=_e[NL]=_e[UL]=_e[ZL]=_e[QL]=_e[JL]=_e[eB]=_e[tB]=_e[HL]=_e[jL]=_e[rb]=_e[GL]=_e[VL]=_e[WL]=_e[XL]=_e[nB]=_e[iB]=_e[rB]=_e[sB]=!0;_e[$L]=_e[ib]=_e[YL]=!1;function Ol(t,e,n,i,r,s){var o,a=e&DL,l=e&FL,u=e&LL;if(n&&(o=r?n(t,i,r,s):n(t)),o!==void 0)return o;if(!si(t))return t;var c=ze(t);if(c){if(o=Q3(t),!a)return Fw(t,o)}else{var h=Zo(t),d=h==ib||h==zL;if(Cu(t))return R3(t,a);if(h==rb||h==nb||d&&!r){if(o=l||d?{}:TL(t),!a)return l?U3(t,M3(o,t)):L3(t,I3(o,t))}else{if(!_e[h])return r?t:{};o=SL(t,h,a)}}s||(s=new Ln);var f=s.get(t);if(f)return f;s.set(t,o),kL(t)?t.forEach(function(v){o.add(Ol(v,e,n,v,t,s))}):IL(t)&&t.forEach(function(v,m){o.set(m,Ol(v,e,n,m,t,s))});var p=u?l?$3:Af:l?Sm:Cr,g=c?void 0:p(t);return Lw(g||t,function(v,m){g&&(m=v,v=t[m]),$w(o,m,Ol(v,e,n,m,t,s))}),o}var oB=4;function Wt(t){return Ol(t,oB)}function aB(){var t=arguments.length;if(!t)return[];for(var e=Array(t-1),n=arguments[0],i=t;i--;)e[i-1]=arguments[i];return yc(ze(n)?Fw(n):[n],Pm(e,1))}var lB="__lodash_hash_undefined__";function uB(t){return this.__data__.set(t,lB),this}function cB(t){return this.__data__.has(t)}function Ts(t){var e=-1,n=t==null?0:t.length;for(this.__data__=new ui;++e<n;)this.add(t[e])}Ts.prototype.add=Ts.prototype.push=uB;Ts.prototype.has=cB;function hB(t,e){for(var n=-1,i=t==null?0:t.length;++n<i;)if(e(t[n],n,t))return!0;return!1}function Pu(t,e){return t.has(e)}var dB=1,fB=2;function sb(t,e,n,i,r,s){var o=n&dB,a=t.length,l=e.length;if(a!=l&&!(o&&l>a))return!1;var u=s.get(t),c=s.get(e);if(u&&c)return u==e&&c==t;var h=-1,d=!0,f=n&fB?new Ts:void 0;for(s.set(t,e),s.set(e,t);++h<a;){var p=t[h],g=e[h];if(i)var v=o?i(g,p,h,e,t,s):i(p,g,h,t,e,s);if(v!==void 0){if(v)continue;d=!1;break}if(f){if(!hB(e,function(m,y){if(!Pu(f,y)&&(p===m||r(p,m,n,i,s)))return f.push(y)})){d=!1;break}}else if(!(p===g||r(p,g,n,i,s))){d=!1;break}}return s.delete(t),s.delete(e),d}function pB(t){var e=-1,n=Array(t.size);return t.forEach(function(i,r){n[++e]=[r,i]}),n}function Om(t){var e=-1,n=Array(t.size);return t.forEach(function(i){n[++e]=i}),n}var mB=1,gB=2,vB="[object Boolean]",yB="[object Date]",xB="[object Error]",_B="[object Map]",wB="[object Number]",bB="[object RegExp]",EB="[object Set]",SB="[object String]",TB="[object Symbol]",CB="[object ArrayBuffer]",AB="[object DataView]",uy=Qt?Qt.prototype:void 0,Fh=uy?uy.valueOf:void 0;function PB(t,e,n,i,r,s,o){switch(n){case AB:if(t.byteLength!=e.byteLength||t.byteOffset!=e.byteOffset)return!1;t=t.buffer,e=e.buffer;case CB:return!(t.byteLength!=e.byteLength||!s(new Au(t),new Au(e)));case vB:case yB:case wB:return fc(+t,+e);case xB:return t.name==e.name&&t.message==e.message;case bB:case SB:return t==e+"";case _B:var a=pB;case EB:var l=i&mB;if(a||(a=Om),t.size!=e.size&&!l)return!1;var u=o.get(t);if(u)return u==e;i|=gB,o.set(t,e);var c=sb(a(t),a(e),i,r,s,o);return o.delete(t),c;case TB:if(Fh)return Fh.call(t)==Fh.call(e)}return!1}var IB=1,MB=Object.prototype,OB=MB.hasOwnProperty;function RB(t,e,n,i,r,s){var o=n&IB,a=Af(t),l=a.length,u=Af(e),c=u.length;if(l!=c&&!o)return!1;for(var h=l;h--;){var d=a[h];if(!(o?d in e:OB.call(e,d)))return!1}var f=s.get(t),p=s.get(e);if(f&&p)return f==e&&p==t;var g=!0;s.set(t,e),s.set(e,t);for(var v=o;++h<l;){d=a[h];var m=t[d],y=e[d];if(i)var x=o?i(y,m,d,e,t,s):i(m,y,d,t,e,s);if(!(x===void 0?m===y||r(m,y,n,i,s):x)){g=!1;break}v||(v=d=="constructor")}if(g&&!v){var _=t.constructor,b=e.constructor;_!=b&&"constructor"in t&&"constructor"in e&&!(typeof _=="function"&&_ instanceof _&&typeof b=="function"&&b instanceof b)&&(g=!1)}return s.delete(t),s.delete(e),g}var kB=1,cy="[object Arguments]",hy="[object Array]",Ja="[object Object]",DB=Object.prototype,dy=DB.hasOwnProperty;function FB(t,e,n,i,r,s){var o=ze(t),a=ze(e),l=o?hy:Zo(t),u=a?hy:Zo(e);l=l==cy?Ja:l,u=u==cy?Ja:u;var c=l==Ja,h=u==Ja,d=l==u;if(d&&Cu(t)){if(!Cu(e))return!1;o=!0,c=!1}if(d&&!c)return s||(s=new Ln),o||Ww(t)?sb(t,e,n,i,r,s):PB(t,e,l,n,i,r,s);if(!(n&kB)){var f=c&&dy.call(t,"__wrapped__"),p=h&&dy.call(e,"__wrapped__");if(f||p){var g=f?t.value():t,v=p?e.value():e;return s||(s=new Ln),r(g,v,n,i,s)}}return d?(s||(s=new Ln),RB(t,e,n,i,r,s)):!1}function Rm(t,e,n,i,r){return t===e?!0:t==null||e==null||!_n(t)&&!_n(e)?t!==t&&e!==e:FB(t,e,n,i,Rm,r)}var LB=1,BB=2;function NB(t,e,n,i){var r=n.length,s=r,o=!i;if(t==null)return!s;for(t=Object(t);r--;){var a=n[r];if(o&&a[2]?a[1]!==t[a[0]]:!(a[0]in t))return!1}for(;++r<s;){a=n[r];var l=a[0],u=t[l],c=a[1];if(o&&a[2]){if(u===void 0&&!(l in t))return!1}else{var h=new Ln;if(i)var d=i(u,c,l,t,e,h);if(!(d===void 0?Rm(c,u,LB|BB,i,h):d))return!1}}return!0}function ob(t){return t===t&&!si(t)}function UB(t){for(var e=Cr(t),n=e.length;n--;){var i=e[n],r=t[i];e[n]=[i,r,ob(r)]}return e}function ab(t,e){return function(n){return n==null?!1:n[t]===e&&(e!==void 0||t in Object(n))}}function $B(t){var e=UB(t);return e.length==1&&e[0][2]?ab(e[0][0],e[0][1]):function(n){return n===t||NB(n,t,e)}}function zB(t,e){return t!=null&&e in Object(t)}function HB(t,e,n){e=qw(e,t);for(var i=-1,r=e.length,s=!1;++i<r;){var o=vc(e[i]);if(!(s=t!=null&&n(t,o)))break;t=t[o]}return s||++i!=r?s:(r=t==null?0:t.length,!!r&&wm(r)&&xm(o,r)&&(ze(t)||Em(t)))}function jB(t,e){return t!=null&&HB(t,e,zB)}var GB=1,VB=2;function WB(t,e){return Tm(t)&&ob(e)?ab(vc(t),e):function(n){var i=x3(n,t);return i===void 0&&i===e?jB(n,t):Rm(e,i,GB|VB)}}function XB(t){return function(e){return e==null?void 0:e[t]}}function YB(t){return function(e){return Am(e,t)}}function qB(t){return Tm(t)?XB(vc(t)):YB(t)}function Ar(t){return typeof t=="function"?t:t==null?ua:typeof t=="object"?ze(t)?WB(t[0],t[1]):$B(t):qB(t)}function KB(t,e,n,i){for(var r=-1,s=t==null?0:t.length;++r<s;){var o=t[r];e(i,o,n(o),t)}return i}function ZB(t){return function(e,n,i){for(var r=-1,s=Object(e),o=i(e),a=o.length;a--;){var l=o[t?a:++r];if(n(s[l],l,s)===!1)break}return e}}var QB=ZB();const JB=QB;function eN(t,e){return t&&JB(t,e,Cr)}function tN(t,e){return function(n,i){if(n==null)return n;if(!Hi(n))return t(n,i);for(var r=n.length,s=e?r:-1,o=Object(n);(e?s--:++s<r)&&i(o[s],s,o)!==!1;);return n}}var nN=tN(eN);const ha=nN;function iN(t,e,n,i){return ha(t,function(r,s,o){e(i,r,n(r),o)}),i}function rN(t,e){return function(n,i){var r=ze(n)?KB:iN,s=e?e():{};return r(n,t,Ar(i),s)}}function sN(t){return _n(t)&&Hi(t)}function lb(t,e,n){for(var i=-1,r=t==null?0:t.length;++i<r;)if(n(e,t[i]))return!0;return!1}function ub(t){return typeof t=="function"?t:ua}function kt(t,e){var n=ze(t)?Lw:ha;return n(t,ub(e))}function oN(t,e){var n=[];return ha(t,function(i,r,s){e(i,r,s)&&n.push(i)}),n}function Un(t,e){var n=ze(t)?Qw:oN;return n(t,Ar(e))}function aN(t){return function(e,n,i){var r=Object(e);if(!Hi(e)){var s=Ar(n);e=Cr(e),n=function(a){return s(r[a],a,r)}}var o=t(e,n,i);return o>-1?r[s?e[o]:o]:void 0}}var lN=Math.max;function uN(t,e,n){var i=t==null?0:t.length;if(!i)return-1;var r=n==null?0:ym(n);return r<0&&(r=lN(i+r,0)),Bw(t,Ar(e),r)}var cN=aN(uN);const Fe=cN;function cb(t,e){var n=-1,i=Hi(t)?Array(t.length):[];return ha(t,function(r,s,o){i[++n]=e(r,s,o)}),i}function et(t,e){var n=ze(t)?Mi:cb;return n(t,Ar(e))}var hN=Object.prototype,dN=hN.hasOwnProperty,fN=rN(function(t,e,n){dN.call(t,n)?t[n].push(e):_m(t,n,[e])});const pN=fN;var mN="[object String]";function gN(t){return typeof t=="string"||!ze(t)&&_n(t)&&zi(t)==mN}function vN(t,e){return Mi(e,function(n){return t[n]})}function yN(t){return t==null?[]:vN(t,Cr(t))}var xN=Math.max;function km(t,e,n,i){t=Hi(t)?t:yN(t),n=n&&!i?ym(n):0;var r=t.length;return n<0&&(n=xN(r+n,0)),gN(t)?n<=r&&t.indexOf(e,n)>-1:!!r&&Nw(t,e,n)>-1}var _N=Math.min;function wN(t,e,n){for(var i=n?lb:Uw,r=t[0].length,s=t.length,o=s,a=Array(s),l=1/0,u=[];o--;){var c=t[o];o&&e&&(c=Mi(c,ca(e))),l=_N(c.length,l),a[o]=!n&&(e||r>=120&&c.length>=120)?new Ts(o&&c):void 0}c=t[0];var h=-1,d=a[0];e:for(;++h<r&&u.length<l;){var f=c[h],p=e?e(f):f;if(f=n||f!==0?f:0,!(d?Pu(d,p):i(u,p,n))){for(o=s;--o;){var g=a[o];if(!(g?Pu(g,p):i(t[o],p,n)))continue e}d&&d.push(p),u.push(f)}}return u}function bN(t){return sN(t)?t:[]}var EN=zw(function(t){var e=Mi(t,bN);return e.length&&e[0]===t[0]?wN(e):[]});const SN=EN;var TN="[object Number]";function CN(t){return typeof t=="number"||_n(t)&&zi(t)==TN}function Lh(t){return t===void 0}function AN(t,e){var n=t.length;for(t.sort(e);n--;)t[n]=t[n].value;return t}function PN(t,e){if(t!==e){var n=t!==void 0,i=t===null,r=t===t,s=Es(t),o=e!==void 0,a=e===null,l=e===e,u=Es(e);if(!a&&!u&&!s&&t>e||s&&o&&l&&!a&&!u||i&&o&&l||!n&&l||!r)return 1;if(!i&&!s&&!u&&t<e||u&&n&&r&&!i&&!s||a&&n&&r||!o&&r||!l)return-1}return 0}function IN(t,e,n){for(var i=-1,r=t.criteria,s=e.criteria,o=r.length,a=n.length;++i<o;){var l=PN(r[i],s[i]);if(l){if(i>=a)return l;var u=n[i];return l*(u=="desc"?-1:1)}}return t.index-e.index}function hb(t,e,n){e.length?e=Mi(e,function(s){return ze(s)?function(o){return Am(o,s.length===1?s[0]:s)}:s}):e=[ua];var i=-1;e=Mi(e,ca(Ar));var r=cb(t,function(s,o,a){var l=Mi(e,function(u){return u(s)});return{criteria:l,index:++i,value:s}});return AN(r,function(s,o){return IN(s,o,n)})}function MN(t,e,n,i){return t==null?[]:(ze(e)||(e=e==null?[]:[e]),n=i?void 0:n,ze(n)||(n=n==null?[]:[n]),hb(t,e,n))}function ON(t,e,n,i,r){return r(t,function(s,o,a){n=i?(i=!1,s):e(n,s,o,a)}),n}function RN(t,e,n){var i=ze(t)?b3:ON,r=arguments.length<3;return i(t,Ar(e),n,r,ha)}var kN=zw(function(t,e){if(t==null)return[];var n=e.length;return n>1&&G0(t,e[0],e[1])?e=[]:n>2&&G0(e[0],e[1],e[2])&&(e=[e[0]]),hb(t,Pm(e,1),[])});const Iu=kN;var DN=9007199254740991,Bh=4294967295,FN=Math.min;function da(t,e){if(t=ym(t),t<1||t>DN)return[];var n=Bh,i=FN(t,Bh);e=ub(e),t-=Bh;for(var r=Hw(i,e);++n<t;)e(n);return r}var LN=1/0,BN=us&&1/Om(new us([,-0]))[1]==LN?function(t){return new us(t)}:ED;const NN=BN;var UN=200;function $N(t,e,n){var i=-1,r=Uw,s=t.length,o=!0,a=[],l=a;if(n)o=!1,r=lb;else if(s>=UN){var u=e?null:NN(t);if(u)return Om(u);o=!1,r=Pu,l=new Ts}else l=e?[]:a;e:for(;++i<s;){var c=t[i],h=e?e(c):c;if(c=n||c!==0?c:0,o&&h===h){for(var d=l.length;d--;)if(l[d]===h)continue e;e&&l.push(h),a.push(c)}else r(l,h,n)||(l!==a&&l.push(h),a.push(c))}return a}function zN(t){return t&&t.length?$N(t):[]}const _t=(t,e)=>t.levels?e.acquired[t.id]>0:e.selected[t.id],Rl=(t,e)=>e.available[t.id],HN=(t,e,n,i)=>{let r=n;return r.available[t.id]&&(t.levels?(r.acquired[t.id]||(r.acquired[t.id]=0),i&&r.acquired[t.id]>0?r.acquired[t.id]--:r.acquired[t.id]<t.levels&&r.acquired[t.id]++):r.selected[t.id]=!r.selected[t.id]),r=jN(e,t,r),r=GN(e,n),r},jN=(t,e,n)=>{const i=r=>{const s=Un(t,{requires:r.id});s&&kt(s,o=>{e.levels?(o.levelsRequired||e.levels)>n.acquired[e.id]&&(n.selected[o.id]=!1,n.acquired[o.id]=0,i(o)):(n.selected[o.id]=!1,n.acquired[o.id]=0,i(o))})};return i(e),n},GN=(t,e)=>(kt(t,n=>{if(n.requires){const i=Fe(t,{id:n.requires});if(i.levels){const r=n.levelsRequired||i.levels,s=e.acquired[i.id];e.available[n.id]=s>=r}else e.available[n.id]=e.selected[n.requires]}}),e),Vi=(t,e,n,i)=>{var r;i.next({node:{...t,acquired:e.acquired[t.id],selected:e.selected[t.id],available:e.available[t.id],requiredName:(r=Fe(n,{id:t.requires}))==null?void 0:r.name}})},el=t=>typeof t=="string"?parseInt(t.replace("#",""),16):0,tl=(t,e,n)=>n?el(t.colors[n]):Rl(t,e)?_t(t,e)?el(t.colors.selected):el(t.colors.inactive):el(t.colors.unavailable),Nh=(t,e)=>{e.next({event:"nodesChanged",data:{nodes:et(t,n=>({colors:n.colors,id:n.id,requires:n.requires,name:n.name,description:n.description,cost:n.cost,levels:n.levels,levelCost:n.levelCost,levelsRequired:n.levelsRequired,providedStats:n.providedStats,providedAbilities:n.providedAbilities}))}})},VN=[{id:"swimming",name:"Swimming",description:"If this unit can move up to %movement% hexes in the water. If the unit's speed is less than %movement% it can move up to its speed.",type:"movement",tags:["aquatic"]},{id:"aquatic-combat",name:"Aquatic Attack",description:"Add +1 to any attack made from the water.",type:"passive",tags:["aquatic"]},{id:"ferry",name:"Ferry",description:"This unit can carry other units on water. It takes 1 action to load an ally (action used during movement). No action required to disembark.",type:"passive",tags:["aquatic","movement"]},{id:"submarine-transportation",name:"Submarine Transportation",description:"This unit can carry other units on water and underwater. It takes 1 action to load an ally (action used during movement). No action required to disembark.",type:"passive",tags:["aquatic","movement"],replaces:"ferry"},{id:"diving",name:"Diving",description:"This unit can swim under water. Gain access to a -1 vertical space in water. Gain +3 to AC from units that are ground or above. You get a -2 dice roll on all attacks on units that are at ground or above.",type:"movement",tags:["aquatic"]},{id:"attack-from-the-deep",name:"Attack from the Deeps",description:"Gain +2 damage on attacks made against other targets in the water that are at ground level.",type:"passive",tags:["aquatic"]}],WN=[{id:"guardian",name:"Guardian",type:"reaction",description:"As a reaction, can intercept %attacks% attack(s) going towards an adjacent ally. You now take that attack - also take 1 damage.",tags:["defense"]},{id:"deflect",name:"Deflect",type:"reaction",description:"Block 1 ranged attack that is made at you. Declare before the attack is rolled. For magic attacks, deflect on a roll of %lowerRange% or higher.",tags:["defense"]},{id:"reactive-armor",name:"Reactive Armor",description:"When an enemy attacks you, gain 1 AC. Lose 1 AC at the start of each turn.",type:"passive",tags:["defense"]},{id:"attentive",name:"Attentive",type:"movement",description:"This unit always musters",tags:["defense"]},{id:"alert",name:"Alert",type:"movement",description:"This unit always musters and can muster 1 adjacent unit (during movement).",replaces:"attentive",tags:["defense"]}],XN=[{id:"flying",name:"Flying",description:`This unit can fly. It now can exist on two different battlefield planes. The ground, and the air level 1. It costs 1 hex of movement to move upward but not downward.

    Additionally, you are immune to environmental effects.`,type:"passive",tags:["flying"]},{id:"advanced-flying",name:"Advanced Flying",description:`This unit can fly. It now can exist on three different battlefield planes. The ground, and the air level 1, and air level 2, and air level 3. It costs 1 hex of movement to move upward but not downward.

    Additionally, you are immune to environmental effects.`,type:"passive",tags:["flying"],replaces:"flying"},{id:"death-bomb",name:"Death Bomb",type:"action",description:"This unit can dive bomb and forcefully smash itself into enemy units. This kills this unit. It does 2 damage to a target's HP.",tags:["undead","flying"]},{id:"swarm",name:"Swarm",type:"action",tags:["flying"],description:"Swarm around an adjacent enemy unit, co-existing in their hex, and blocking ranged attacks against targets other than itself. This unit can now move 3 hexes as a reaction to stay with its swarmed unit, any more movement breaks the swarm. In addition it can choose to be hit by ranged attacks that would pass through its hex."},{id:"strafing-run",name:"Strafing Run",type:"passive",tags:["flying"],description:"As part of movement can make a breath attack against up to %targets% target(s) (adjacent to each) that you fly over in a straight line. This costs 1 breath attack use and does half breath damage (but full effect). Costs 1 movement to initiate for each targeted hex."},{id:"dive-bomb",name:"Dive Bomb",type:"passive",tags:["flying"],description:"When this unit moves from a higher elevation to a lower elevation it gains +1 damage for each air level it decends through for its next attack."},{id:"aerial-combat",name:"Aerial Combat",type:"passive",description:"Gains +1 on attacks made against flying units.",tags:["flying"]},{id:"aerial-evasion",name:"Aerial Evasion",type:"passive",description:"Gains +1 to AC while in the air.",tags:["flying","defense"]}],YN=[{id:"smite",name:"Smite",description:`When an attack hits (does damage to HP), you may spend 1 spell slot to make that attack do +%dmg%
      damage`,type:"bonus action",tags:["holy"],params:{dmg:3}},{id:"guiding-bolt",name:"Guiding Bolt",description:"You hit an enemy with a blast of light, dealing nonabsorbable damage. Next round, allies have +%roll% on all attacks/cantrip strikes against this target.",type:"action",tags:["holy","piercing"],params:{roll:1}},{id:"death-ward",name:"Death Ward",description:"Place a ward against death on a unit. If that unit is reduced to 0 HP it instead goes to 2 HP. When this happens the spell is used up and you lose concentration on it.",type:"action",tags:["concentration","holy"]},{id:"restoration",name:"Restoration",description:"Heal a unit 3 HP within spell range.",type:"action",tags:["holy"]},{id:"turn-undead",name:"Turn Undead",description:"Deal %dmg% damage to adjacent undead units and force them on their turn to move at least %range% hex away from you and get no closer for %rounds% round.",type:"action",tags:["holy"],params:{dmg:1,range:1,rounds:1}},{id:"bless",name:"Bless",description:"Buff up an ally within range, granting them +1 on their first attack/cantrip strike of their turn.",type:"action",tags:["holy"]},{id:"spirit-guardians",name:"Spirit Guardians",description:"Call upon spiritual guardians to protect you. You gain %ac% AC and adjacent enemies take %dmg% unabsorbable damage at the start of your turn.",type:"action",tags:["concentration","holy","piercing"],params:{dmg:1,ac:1}}],qN=[{id:"dash",name:"Dash",type:"action",description:"Move %movement% hexes."},{id:"dash-expert",name:"Dash Expert",type:"passive",description:"Once per turn, you can replace any one of your attacks with movement up to your speed.",tags:["movement"]},{id:"charge",name:"Charge",type:"movement",description:`If this unit moves 4 hexes in a straight line before becoming adjacent to an enemy they automatically do +%dmg% damage on first melee attack. The movement for the rest of the turn becomes 0. 
        {breakthrough}
          If after a charge, this unit still has remaining movement, it can use that movement to continue on its charge-line through enemy units.
        {/breakthrough}`,params:{dmg:1,breakthrough:0}}],KN=[{id:"knit-flesh",name:"Knit Flesh",description:"Restore %hp% HP to an adjacent undead unit",type:"action"},{id:"greater-knitting",name:"Greater Knitting",description:"Restore %hp% HP to all adjacent undead units",type:"action",replaces:"knit-flesh"},{id:"mass-knitting",name:"Mass Knitting",description:"Restore %hp% HP to all undead units within 2 hexes (100m area)",type:"action",replaces:"greater-knitting"}],Qn=[...YN,...WN,...KN,...XN,...qN,...VN,{id:"defend",name:"Defend",description:"Idk, ask Ed",type:"action"},{id:"basic-attack",name:"Basic Attack",description:"You make 1 melee attack against an adjacent enemy. Roll 1d6{dmg}+%dmg%{/dmg} and do that much damage.",type:"action",params:{dmg:0}},{id:"multi-attack",name:"Multi Attack",description:`You make 1 melee attack against an adjacent enemy.
      
      First Attack: 1d6{dmg1}+%dmg1%{/dmg1}  
      Second Attack: 1d6{dmg2}+%dmg2%{/dmg2} `,type:"action",replaces:"basic-attack",params:{dmg1:0,dmg2:0}},{id:"spellcasting",name:"Spellcasting",description:`You can now cast spells and cantrips. Casting spells and cantrips take action to cast and require 1 spell slot of the coresponding school of magic. 
    Cantrips barrage does not cost a spell slot. 
    
    Range: %range%
    Contentration Bonus: %concentration%`,type:"passive",tags:["magic"],params:{range:1,concentration:1}},{id:"cantrip-barrage",name:"Cantrip Barrage",description:"Deal 1d6 damage to an enemy.",type:"action",tags:["magic"]},{id:"versatile",name:"Versatile",description:"You can choose to take actions prior to movement.",type:"passive"},{id:"extra-versatile",name:"Extra Versatile",description:"You can choose to take actions before or after each unit of movement.",type:"passive",replaces:"versatile"}];vw.load("https://fonts.googleapis.com/css2?family=Inter:wght@100;400;500;700&display=swap");function ZN(t,e,n={},i,r,s){let o=s.subscribe({next:C=>{switch(C.event){case"forcesUpdated":y=C.data.forces,k();break;case"modeChanged":E(C.data.mode);break;case"nodeAdded":T(C.data.node);break;case"nodeDeleted":_(C.data.id);break;case"nodeEdited":b(C.data.id,C.data.node);break}}}),a,l,u={selected:{},acquired:{},available:{}},c=Mv(),h,d,f,p,g,v="build",m,y={f1:20,f2:25,f3:20,f4:20};function x(){u={selected:{},acquired:{},available:{}},kt(l,C=>{u.selected[C.id]=n[C.id]===!0,u.acquired[C.id]=CN(n[C.id])?n[C.id]:!1}),kt(l,C=>{if(C.requires){const w=Fe(l,{id:C.requires});u.available[C.id]=!C.requires||_t(w,u),d.push({source:C.id,target:w.id})}else u.available[C.id]=!0}),i.next({nodes:et(l,C=>({...C,selected:_t(C,u),acquired:u.acquired[C.id]}))})}function _(C){if(C==="basic")return;const w=Fe(l,{id:C});w==null||w.gfx.removeChildren(),w==null||w.gfx.clear(),l=et(Un(l,z=>z.id!==C),z=>{let D=z.requires;return z.requires===C&&(D=w==null?void 0:w.requires),{...z,requires:D}}),d=Un(et(l,z=>({source:z,target:Fe(l,{id:z==null?void 0:z.requires})})),"target");const R=Fe(l,{id:w==null?void 0:w.requires});m=R==null?void 0:R.id,Vi(R,u,l,r),F(),O(),Nh(l,s)}function b(C,w){let R=Fe(l,{id:C});R.name=w.name,R.id=w.id,R.description=w.description,R.levels=w.levels,R.cost=w.cost,R.levelCost=w.levelCost,R.levelsRequired=w.levelsRequired,R.providedStats=w.providedStats,R.providedAbilities=w.providedAbilities,u.acquired[C]&&u.acquired[C]>w.levels&&(u.acquired[C]=w.levels),R==null||R.gfx.removeChildren();const z=new ls(w.name,{fontFamily:"Inter",fontSize:12,fill:"#fff",align:"center"});z.anchor.set(.5,-.75),z.resolution=12,R==null||R.gfx.addChild(z),l=et(l,D=>{if(D.id===C)return R;{let M=D;return D.requires===C&&(M.requires=R.id),M}}),F(),O(),k(),Vi(R,u,l,r),i.next({nodes:et(l,D=>({...D,selected:_t(D,u),acquired:u.acquired[D.id]}))}),Nh(l,s)}function T(C){var B;let w={...C,name:"test",colors:(B=Fe(l,{id:C.requires}))==null?void 0:B.colors};const R=S.bind(w);let{name:z}=w;w.providedAbilities&&Fe(Qn,{id:w.providedAbilities[0].id});let D=!1;w.gfx=new lr,w.gfx.on("touchstart",P=>{D=!0,setTimeout(()=>{D&&S(P,w)},100)}),w.gfx.on("touchend",P=>{D=!1}),w.gfx.on("click",P=>R(P,w)),g.addChild(w.gfx),w.gfx.on("mouseover",P=>{v==="build"&&(m=w.id,Vi(w,u,l,r))});const M=new ls(z,{fontFamily:"Inter",fontSize:12,fill:"#fff",align:"center"});M.anchor.set(.5,-.75),M.resolution=12,w.gfx.addChild(M),l=[...l,w],d.push({source:w,target:Fe(l,{id:w.requires})}),F(),O(),k(),Nh(l,s)}function E(C){let w=v;v=C,w!==C&&(F(),O())}function S(C,w){if(v==="build"){const R=_t(w,u);u=HN(w,l,u,C.nativeEvent.shiftKey),i.next({nodes:et(l,D=>({...D,selected:_t(D,u),acquired:u.acquired[D.id]}))}),Vi(w,u,l,r);const z=_t(w,u)!==R;F(z?w.id:null),O()}else v==="edit"&&(m=w.id,Vi(w,u,l,r),F())}function k(){y&&(c.nodes(l).force("link",Pv(d).strength(C=>_t(C.target,u)?y.f2*.025:y.f2*.01).id(C=>C.id).distance(C=>_t(C.source,u)?y.f1+5:y.f1+10)).force("charge",Ov().strength(-(y.f3*6))).force("center",Sv(f/4,p/4)).force("collision",Cv().radius(C=>y.f3).iterations(12)).velocityDecay(y.f4*.01),c.alpha(1).restart()),O(),F()}function O(){for(let C=h.children.length-1;C>=0;C--)h.children[C].destroy();h.clear(),h.removeChildren(),h.alpha=.8,d.forEach(C=>{let{source:w,target:R}=C,z=10198691,D=1;R.id&&(z=tl(w,u,v==="edit"?"selected":null),D=_t(R,u)&&_t(w,u)?2:.5),h.lineStyle(D,z),h.moveTo(w.x,w.y),h.lineTo(R.x,R.y)}),h.endFill()}function F(C){l.forEach(w=>{const R=m===w.id,z=_t(w,u);Rl(w,u),w.gfx.clear();let D=w.cost||1;if(v==="build"?w.gfx.cursor=Rl(w,u)?"pointer":"default":w.gfx.cursor="pointer",!C||w.id!==C||w.levels)if(w.levels&&w.levels>1){const M=w.levels*14,B=u.acquired[w.id];R&&v==="edit"&&(w.gfx.beginFill(16777215),w.gfx.drawShape(new Wo(-14,-8,M+4,20,6)),w.gfx.endFill()),w.gfx.beginFill(tl(w,u,v==="edit"?"selected":null)),w.gfx.drawShape(new Wo(-12,-6,M,16,4)),w.gfx.endFill(),w.gfx.beginFill(16777215),da(B,P=>{w.gfx.drawCircle(-4+P*12,2,4)}),w.gfx.endFill(),w.gfx.hitArea=new le(-10,-6,M,16)}else{let M;v==="edit"?M=8:M=z?D*2+6:D*2+2,R&&v==="edit"&&(w.gfx.beginFill(16777215),w.gfx.drawCircle(0,0,M+2),w.gfx.endFill()),w.gfx.beginFill(tl(w,u,v==="edit"?"selected":null)),w.gfx.drawCircle(0,0,M),w.gfx.hitArea=new oc(0,0,M+10),w.gfx.endFill()}else if(w.id===C){const M=Fe(l,{id:C});let B=z?D*2+6:D*2+2,P=z?D*2+2:D*2+6,G=0;const V=setInterval(()=>{G++,z?P+=G*.4:P-=G*.4,M==null||M.gfx.clear(),M==null||M.gfx.beginFill(tl(M,u)),M==null||M.gfx.drawCircle(0,0,P),M==null||M.gfx.endFill(),z?P>=B&&clearInterval(V):P<=B&&clearInterval(V)},5)}w.gfx.interactive=!0})}function N(){l=et(e,R=>({...R})),d=[],x();const C=t.getBoundingClientRect();p=C.height,f=C.width,t.innerHTML="",a=new pm({width:f,height:p,antialias:!0,autoDensity:!0,resizeTo:window,backgroundColor:"#13131a",backgroundAlpha:1}),t.appendChild(a.view),g=new Ik({screenWidth:f,screenHeight:p,worldWidth:f*4,worldHeight:p*4,passiveWheel:!1,events:a.renderer.plugins.interaction}),a.stage.addChild(g),g.drag().pinch().wheel().decelerate().clampZoom({minWidth:f/4,minHeight:p/4}),c=Mv(l).force("link",Pv(d).strength(R=>_t(R.target,u)?.8:.7).id(R=>R.id).distance(R=>_t(R.source,u)?20:30)).force("charge",Ov().strength(-600)).force("center",Sv(f/4,p/4)).force("collision",Cv().radius(R=>R.radius).iterations(12)).velocityDecay(.6),h=new lr,g.addChild(h),l.forEach(R=>{Rl(R,u);const z=S.bind(R);let{name:D}=R;R.providedAbilities&&Fe(Qn,{id:R.providedAbilities[0].id});let M=!1;R.gfx=new lr,R.gfx.on("touchstart",P=>{M=!0,Vi(R,u,l,r),setTimeout(()=>{M&&S(P,R)},100)}),R.gfx.on("touchend",P=>{M=!1}),R.gfx.on("click",P=>z(P,R)),g.addChild(R.gfx),R.gfx.on("mouseover",P=>{v==="build"&&Vi(R,u,l,r)});const B=new ls(D,{fontFamily:"Inter",fontSize:12,fill:"#fff",align:"center"});B.anchor.set(.5,-.75),B.resolution=12,R.gfx.addChild(B)}),F();const w=()=>{l.forEach(R=>{let{x:z,y:D,gfx:M}=R;M.position=new te(z,D)}),O()};c.on("tick",w)}return N(),{destroy:()=>{c.stop(),l.forEach(C=>{C.gfx.clear()}),h.clear(),o.unsubscribe()}}}const QN="_container_1up64_1",JN="_node_1up64_15",e4="_tooltip_1up64_19",t4="_contextMenu_1up64_32",n4="_menuEntry_1up64_37",i4={container:QN,node:JN,tooltip:e4,contextMenu:t4,menuEntry:n4};var Mf=function(t,e){return Mf=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,i){n.__proto__=i}||function(n,i){for(var r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n[r]=i[r])},Mf(t,e)};function xc(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");Mf(t,e);function n(){this.constructor=t}t.prototype=e===null?Object.create(e):(n.prototype=e.prototype,new n)}function Of(t){var e=typeof Symbol=="function"&&Symbol.iterator,n=e&&t[e],i=0;if(n)return n.call(t);if(t&&typeof t.length=="number")return{next:function(){return t&&i>=t.length&&(t=void 0),{value:t&&t[i++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function Mu(t,e){var n=typeof Symbol=="function"&&t[Symbol.iterator];if(!n)return t;var i=n.call(t),r,s=[],o;try{for(;(e===void 0||e-- >0)&&!(r=i.next()).done;)s.push(r.value)}catch(a){o={error:a}}finally{try{r&&!r.done&&(n=i.return)&&n.call(i)}finally{if(o)throw o.error}}return s}function Ou(t,e,n){if(n||arguments.length===2)for(var i=0,r=e.length,s;i<r;i++)(s||!(i in e))&&(s||(s=Array.prototype.slice.call(e,0,i)),s[i]=e[i]);return t.concat(s||Array.prototype.slice.call(e))}function Jn(t){return typeof t=="function"}function db(t){var e=function(i){Error.call(i),i.stack=new Error().stack},n=t(e);return n.prototype=Object.create(Error.prototype),n.prototype.constructor=n,n}var Uh=db(function(t){return function(n){t(this),this.message=n?n.length+` errors occurred during unsubscription:
`+n.map(function(i,r){return r+1+") "+i.toString()}).join(`
  `):"",this.name="UnsubscriptionError",this.errors=n}});function Rf(t,e){if(t){var n=t.indexOf(e);0<=n&&t.splice(n,1)}}var _c=function(){function t(e){this.initialTeardown=e,this.closed=!1,this._parentage=null,this._finalizers=null}return t.prototype.unsubscribe=function(){var e,n,i,r,s;if(!this.closed){this.closed=!0;var o=this._parentage;if(o)if(this._parentage=null,Array.isArray(o))try{for(var a=Of(o),l=a.next();!l.done;l=a.next()){var u=l.value;u.remove(this)}}catch(g){e={error:g}}finally{try{l&&!l.done&&(n=a.return)&&n.call(a)}finally{if(e)throw e.error}}else o.remove(this);var c=this.initialTeardown;if(Jn(c))try{c()}catch(g){s=g instanceof Uh?g.errors:[g]}var h=this._finalizers;if(h){this._finalizers=null;try{for(var d=Of(h),f=d.next();!f.done;f=d.next()){var p=f.value;try{fy(p)}catch(g){s=s??[],g instanceof Uh?s=Ou(Ou([],Mu(s)),Mu(g.errors)):s.push(g)}}}catch(g){i={error:g}}finally{try{f&&!f.done&&(r=d.return)&&r.call(d)}finally{if(i)throw i.error}}}if(s)throw new Uh(s)}},t.prototype.add=function(e){var n;if(e&&e!==this)if(this.closed)fy(e);else{if(e instanceof t){if(e.closed||e._hasParent(this))return;e._addParent(this)}(this._finalizers=(n=this._finalizers)!==null&&n!==void 0?n:[]).push(e)}},t.prototype._hasParent=function(e){var n=this._parentage;return n===e||Array.isArray(n)&&n.includes(e)},t.prototype._addParent=function(e){var n=this._parentage;this._parentage=Array.isArray(n)?(n.push(e),n):n?[n,e]:e},t.prototype._removeParent=function(e){var n=this._parentage;n===e?this._parentage=null:Array.isArray(n)&&Rf(n,e)},t.prototype.remove=function(e){var n=this._finalizers;n&&Rf(n,e),e instanceof t&&e._removeParent(this)},t.EMPTY=function(){var e=new t;return e.closed=!0,e}(),t}(),fb=_c.EMPTY;function pb(t){return t instanceof _c||t&&"closed"in t&&Jn(t.remove)&&Jn(t.add)&&Jn(t.unsubscribe)}function fy(t){Jn(t)?t():t.unsubscribe()}var mb={onUnhandledError:null,onStoppedNotification:null,Promise:void 0,useDeprecatedSynchronousErrorHandling:!1,useDeprecatedNextContext:!1},kf={setTimeout:function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];var r=kf.delegate;return r!=null&&r.setTimeout?r.setTimeout.apply(r,Ou([t,e],Mu(n))):setTimeout.apply(void 0,Ou([t,e],Mu(n)))},clearTimeout:function(t){var e=kf.delegate;return((e==null?void 0:e.clearTimeout)||clearTimeout)(t)},delegate:void 0};function r4(t){kf.setTimeout(function(){throw t})}function py(){}function kl(t){t()}var gb=function(t){xc(e,t);function e(n){var i=t.call(this)||this;return i.isStopped=!1,n?(i.destination=n,pb(n)&&n.add(i)):i.destination=l4,i}return e.create=function(n,i,r){return new Df(n,i,r)},e.prototype.next=function(n){this.isStopped||this._next(n)},e.prototype.error=function(n){this.isStopped||(this.isStopped=!0,this._error(n))},e.prototype.complete=function(){this.isStopped||(this.isStopped=!0,this._complete())},e.prototype.unsubscribe=function(){this.closed||(this.isStopped=!0,t.prototype.unsubscribe.call(this),this.destination=null)},e.prototype._next=function(n){this.destination.next(n)},e.prototype._error=function(n){try{this.destination.error(n)}finally{this.unsubscribe()}},e.prototype._complete=function(){try{this.destination.complete()}finally{this.unsubscribe()}},e}(_c),s4=Function.prototype.bind;function $h(t,e){return s4.call(t,e)}var o4=function(){function t(e){this.partialObserver=e}return t.prototype.next=function(e){var n=this.partialObserver;if(n.next)try{n.next(e)}catch(i){nl(i)}},t.prototype.error=function(e){var n=this.partialObserver;if(n.error)try{n.error(e)}catch(i){nl(i)}else nl(e)},t.prototype.complete=function(){var e=this.partialObserver;if(e.complete)try{e.complete()}catch(n){nl(n)}},t}(),Df=function(t){xc(e,t);function e(n,i,r){var s=t.call(this)||this,o;if(Jn(n)||!n)o={next:n??void 0,error:i??void 0,complete:r??void 0};else{var a;s&&mb.useDeprecatedNextContext?(a=Object.create(n),a.unsubscribe=function(){return s.unsubscribe()},o={next:n.next&&$h(n.next,a),error:n.error&&$h(n.error,a),complete:n.complete&&$h(n.complete,a)}):o=n}return s.destination=new o4(o),s}return e}(gb);function nl(t){r4(t)}function a4(t){throw t}var l4={closed:!0,next:py,error:a4,complete:py},u4=function(){return typeof Symbol=="function"&&Symbol.observable||"@@observable"}();function c4(t){return t}function h4(t){return t.length===0?c4:t.length===1?t[0]:function(n){return t.reduce(function(i,r){return r(i)},n)}}var my=function(){function t(e){e&&(this._subscribe=e)}return t.prototype.lift=function(e){var n=new t;return n.source=this,n.operator=e,n},t.prototype.subscribe=function(e,n,i){var r=this,s=f4(e)?e:new Df(e,n,i);return kl(function(){var o=r,a=o.operator,l=o.source;s.add(a?a.call(s,l):l?r._subscribe(s):r._trySubscribe(s))}),s},t.prototype._trySubscribe=function(e){try{return this._subscribe(e)}catch(n){e.error(n)}},t.prototype.forEach=function(e,n){var i=this;return n=gy(n),new n(function(r,s){var o=new Df({next:function(a){try{e(a)}catch(l){s(l),o.unsubscribe()}},error:s,complete:r});i.subscribe(o)})},t.prototype._subscribe=function(e){var n;return(n=this.source)===null||n===void 0?void 0:n.subscribe(e)},t.prototype[u4]=function(){return this},t.prototype.pipe=function(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return h4(e)(this)},t.prototype.toPromise=function(e){var n=this;return e=gy(e),new e(function(i,r){var s;n.subscribe(function(o){return s=o},function(o){return r(o)},function(){return i(s)})})},t.create=function(e){return new t(e)},t}();function gy(t){var e;return(e=t??mb.Promise)!==null&&e!==void 0?e:Promise}function d4(t){return t&&Jn(t.next)&&Jn(t.error)&&Jn(t.complete)}function f4(t){return t&&t instanceof gb||d4(t)&&pb(t)}var p4=db(function(t){return function(){t(this),this.name="ObjectUnsubscribedError",this.message="object unsubscribed"}}),Ru=function(t){xc(e,t);function e(){var n=t.call(this)||this;return n.closed=!1,n.currentObservers=null,n.observers=[],n.isStopped=!1,n.hasError=!1,n.thrownError=null,n}return e.prototype.lift=function(n){var i=new vy(this,this);return i.operator=n,i},e.prototype._throwIfClosed=function(){if(this.closed)throw new p4},e.prototype.next=function(n){var i=this;kl(function(){var r,s;if(i._throwIfClosed(),!i.isStopped){i.currentObservers||(i.currentObservers=Array.from(i.observers));try{for(var o=Of(i.currentObservers),a=o.next();!a.done;a=o.next()){var l=a.value;l.next(n)}}catch(u){r={error:u}}finally{try{a&&!a.done&&(s=o.return)&&s.call(o)}finally{if(r)throw r.error}}}})},e.prototype.error=function(n){var i=this;kl(function(){if(i._throwIfClosed(),!i.isStopped){i.hasError=i.isStopped=!0,i.thrownError=n;for(var r=i.observers;r.length;)r.shift().error(n)}})},e.prototype.complete=function(){var n=this;kl(function(){if(n._throwIfClosed(),!n.isStopped){n.isStopped=!0;for(var i=n.observers;i.length;)i.shift().complete()}})},e.prototype.unsubscribe=function(){this.isStopped=this.closed=!0,this.observers=this.currentObservers=null},Object.defineProperty(e.prototype,"observed",{get:function(){var n;return((n=this.observers)===null||n===void 0?void 0:n.length)>0},enumerable:!1,configurable:!0}),e.prototype._trySubscribe=function(n){return this._throwIfClosed(),t.prototype._trySubscribe.call(this,n)},e.prototype._subscribe=function(n){return this._throwIfClosed(),this._checkFinalizedStatuses(n),this._innerSubscribe(n)},e.prototype._innerSubscribe=function(n){var i=this,r=this,s=r.hasError,o=r.isStopped,a=r.observers;return s||o?fb:(this.currentObservers=null,a.push(n),new _c(function(){i.currentObservers=null,Rf(a,n)}))},e.prototype._checkFinalizedStatuses=function(n){var i=this,r=i.hasError,s=i.thrownError,o=i.isStopped;r?n.error(s):o&&n.complete()},e.prototype.asObservable=function(){var n=new my;return n.source=this,n},e.create=function(n,i){return new vy(n,i)},e}(my),vy=function(t){xc(e,t);function e(n,i){var r=t.call(this)||this;return r.destination=n,r.source=i,r}return e.prototype.next=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.next)===null||r===void 0||r.call(i,n)},e.prototype.error=function(n){var i,r;(r=(i=this.destination)===null||i===void 0?void 0:i.error)===null||r===void 0||r.call(i,n)},e.prototype.complete=function(){var n,i;(i=(n=this.destination)===null||n===void 0?void 0:n.complete)===null||i===void 0||i.call(n)},e.prototype._subscribe=function(n){var i,r;return(r=(i=this.source)===null||i===void 0?void 0:i.subscribe(n))!==null&&r!==void 0?r:fb},e}(Ru);function m4({trees:t,buildData:e,nodeSelectionUpdated:n,infoUpdated:i,graphEvents:r}){const s=j.useRef(null),o=new Ru,a=new Ru;return A.useEffect(()=>{r.subscribe({next:l=>{}}),o.subscribe({next:l=>{n(l)}}),a.subscribe({next:l=>{i(l)}})},[]),j.useEffect(()=>{let l;if(s.current){const{destroy:u}=ZN(s.current,t,e,o,a,r);l=u}return l},[e]),I("div",{ref:s,className:i4.container})}const g4=t=>{const e={movement:0,hp:0,armor:0,abilities:{},pointsInvested:0,exportableBuild:{}},n=(o,a,l,u)=>{if(!Lh(u))e[a]=u;else if(o.levels){const c=o.acquired||0;l=l||0,e[a]+=l*c}else e[a]+=l},i=(o,a)=>{const l=Fe(Qn,{id:o});Lh(e.abilities[o])&&(e.abilities[o]=Wt(l),e.abilities[o].modifiers={}),e.abilities[o].learned=e.abilities[o].learned||a},r=o=>{const a=Fe(Qn,{id:o});a&&(i(a.id),e.abilities[o].replaced=!0)},s=(o,a,l={},u)=>{const c=Fe(Qn,{id:o});i(o,a),c!=null&&c.replaces&&e.abilities[o].learned&&r(c==null?void 0:c.replaces),l&&kt(l,h=>{let d=h.modifier;u.levels&&(d=u.acquired*h.modifier),Lh(e.abilities[o].modifiers[h.id])&&(e.abilities[o].modifiers[h.id]=0),e.abilities[o].modifiers[h.id]+=d})};return kt(t,o=>{if(o.levels){const a=o.acquired||0;e.exportableBuild[o.id]=o.acquired||0,o.levelCost?Array.isArray(o.levelCost)?da(a,l=>{e.pointsInvested+=o.levelCost[l]}):e.pointsInvested+=a*o.levelCost:e.pointsInvested+=o.acquired||0}else e.exportableBuild[o.id]=!0,e.pointsInvested+=o.cost||1;o.providedStats&&kt(o.providedStats,a=>{n(o,a.id,a.modifier,a.set)}),o.providedAbilities&&kt(o.providedAbilities,a=>{s(a.id,a.gain,a.modifiers,o)})}),e},v4={prefix:"Aquatic",colors:{unavailable:"#3f5576",inactive:"#235299",selected:"#1a72f5"},nodes:[{id:"swimming",cost:1,requires:"speed",levelsRequired:1,name:"Swimming",description:"Congrats! You are a unit.",providedAbilities:[{id:"swimming",gain:!0}]},{id:"advanced-swimming",cost:1,name:"Advanded Swimming",requires:"swimming",levelsRequired:1,description:"Increases potential water speed by 3.",providedAbilities:[{id:"swimming",modifiers:{movement:3}}]},{id:"ferry",cost:1,requires:"advanced-swimming",name:"Ferry",description:"Grants the Ferry ability",providedAbilities:[{id:"ferry",gain:!0}]},{id:"diving",cost:2,requires:"advanced-swimming",name:"Diving",description:"Grants the Diving ability",providedAbilities:[{id:"diving",gain:!0}]},{id:"submarine-transportation",cost:1,requires:"diving",name:"Submarine Transportation",description:"Grants the Submarine Transportation ability",providedAbilities:[{id:"submarine-transportation",gain:!0}]},{id:"attack-from-the-deep",cost:2,requires:"diving",name:"Attack From The Deep",description:"Grants the Attack From The Deep ability",providedAbilities:[{id:"attack-from-the-deep",gain:!0}]}]},y4={prefix:"Armor",colors:{unavailable:"#403c3a",inactive:"#5e3c2b",selected:"#cd8150"},nodes:[{id:"armor",requires:"basic",levels:7,levelCost:[1,1,2,2,3,4,4],name:"Armor",description:"Adds 1 Armor",providedStats:[{id:"armor",modifier:1}]},{id:"attentive",requires:"armor",levelsRequired:2,name:"Attentive",description:"Grants the Attentive ability",providedAbilities:[{id:"attentive",gain:!0}]},{id:"alert",requires:"attentive",name:"Alert",description:"Grants the Alert ability",providedAbilities:[{id:"alert",gain:!0}]},{id:"reactive-armor",requires:"armor",levelsRequired:5,cost:1,name:"Reactive Armor",description:"Sets your AC to 1 and grants Reactive Armor.",providedAbilities:[{id:"reactive-armor",gain:!0}],providedStats:[{id:"armor",set:1}]},{id:"reactive-armor-2",requires:"reactive-armor",cost:1,name:"Reactive Armor 2",description:"Increases your base AC to 2",providedStats:[{id:"armor",set:2}]},{id:"defend-1",requires:"armor",levelsRequired:1,cost:1,name:"Defend 1",description:"Grants the ability to defend and adds 1 HP.",providedStats:[{id:"hp",modifier:1}],providedAbilities:[{id:"defend",gain:!0}]},{id:"defend-2",requires:"defend-1",cost:1,name:"Defend 2",description:"Grant 1 HP.",providedStats:[{id:"hp",modifier:1}]},{id:"deflect-1",requires:"defend-2",cost:1,name:"Deflection",description:"Grants the Deflect ability.",providedAbilities:[{id:"deflect",gain:!0}]},{id:"deflect-2",requires:"deflect-1",cost:1,name:"Deflection+",description:"Makes it easier to deflect magic attacks.",providedAbilities:[{id:"deflect",modifiers:{lowerRange:-1}}]},{id:"guardian-1",requires:"defend-1",cost:1,name:"Guardian",description:"Grants the Guardian ability",providedAbilities:[{id:"guardian",gain:!0}]},{id:"guardian-2",requires:"guardian-1",cost:1,name:"Guardian+",description:"Allows you guard an additional attack",providedAbilities:[{id:"guardian",modifiers:{attacks:1}}]}]},x4={prefix:"Flying",colors:{unavailable:"#87645c",inactive:"#875246",selected:"#d44b2c"},nodes:[{id:"attack-1",requires:"basic",cost:1,name:"Attack",description:"Grants your unit the ability to attack",providedAbilities:[{id:"basic-attack",gain:!0}]},{id:"attack-1-dmg",requires:"attack-1",cost:1,name:"Attack+",description:"Increases the damage of your first attack by 1",providedAbilities:[{id:"basic-attack",modifiers:[{id:"dmg",modifier:1}]},{id:"multi-attack",modifiers:[{id:"dmg1",modifier:1}]}]},{id:"attack-2",requires:"attack-1-dmg",cost:1,name:"MultiAttack",description:"Grants your unit the ability to attack twice",providedAbilities:[{id:"multi-attack",gain:!0}]},{id:"attack-2-dmg",requires:"attack-2",cost:1,name:"MultiAttack+",description:"Increases the damage of your second attack by 1",providedAbilities:[{id:"multi-attack",modifiers:[{id:"dmg2",modifier:1}]}]}]},_4={prefix:"Attack",colors:{unavailable:"#121212",inactive:"#232323",selected:"#d2d2d2"},nodes:[{id:"basic",cost:1,name:"Basic",description:"Congrats! You are a unit.",providedStats:[{id:"hp",modifier:5},{id:"armor",modifier:2}]},{id:"basic-magic",requires:"basic",cost:1,name:"Spellcasting",description:"Grants your unit the ability to cast spells",providedAbilities:[{id:"cantrip-barrage",gain:!0},{id:"spellcasting",gain:!0}]}]},w4={prefix:"Flying",colors:{unavailable:"#506b73",inactive:"#6894a1",selected:"#4dd2f7"},nodes:[{id:"flying",requires:"speed",levelsRequired:4,cost:1,name:"Flying",description:"Grants you the ability to fly",providedAbilities:[{id:"flying",gain:!0}]},{id:"death-bomb",requires:"flying",cost:1,name:"Death Bomb",description:"Grants you the Death Bomb ability. Must be undead to use.",providedAbilities:[{id:"death-bomb",gain:!0}]},{id:"swarm",requires:"flying",cost:1,name:"Swarm",description:"Grants you the Swarm ability.",providedAbilities:[{id:"swarm",gain:!0}]},{id:"strafing-run",requires:"flying",cost:1,name:"Strafing Run",description:"Grants you the Strafing Run ability.",providedAbilities:[{id:"strafing-run",gain:!0}]},{id:"advanced-strafing-run",requires:"strafing-run",levels:2,name:"Strafing Run+",description:"Increases the number of targets by 3.",providedAbilities:[{id:"strafing-run",modifiers:{targets:3}}]},{id:"advanced-flying",requires:"flying",cost:1,name:"Advanced Flying",description:"Increases the number of targets by 3.",providedAbilities:[{id:"advanced-flying",gain:!0}]},{id:"dive-bomb",requires:"advanced-flying",cost:1,name:"Dive Bomb",description:"Grants you the Dive Bomb ability.",providedAbilities:[{id:"dive-bomb",gain:!0}]},{id:"aerial-combat",requires:"advanced-flying",cost:1,name:"Aerial Combat",description:"Grants you the Aerial Combat ability.",providedAbilities:[{id:"aerial-combat",gain:!0}]},{id:"aerial-evasion",requires:"aerial-combat",cost:1,name:"Aerial Evasion",description:"Grants you the Aerial Evasion ability.",providedAbilities:[{id:"aerial-evasion",gain:!0}]}]},b4={prefix:"Magic",colors:{unavailable:"#65748f",inactive:"#495d82",selected:"#7391c9"},nodes:[{id:"magic-range-1",requires:"basic-magic",levels:3,name:"Spell Range",description:"Increases the range of your magic.",providedAbilities:[{id:"spellcasting",modifiers:[{id:"range",modifier:1}]}]},{id:"concentration-1",requires:"basic-magic",levels:2,name:"Concentration+",description:"Add +1 to concentration checks.",providedAbilities:[{id:"spellcasting",modifiers:[{id:"concentration",modifier:1}]}]}]},E4={prefix:"Magic",colors:{unavailable:"#7a7354",inactive:"#4a4118",selected:"#c7ab2e"},nodes:[{id:"holy-casting",requires:"basic-magic",cost:1,name:"Holy-Divine Casting",description:"Grants you the ability to cast Holy/Divine Spells.",providedAbilities:[{id:"smite",gain:!0},{id:"guiding-bolt",gain:!0},{id:"death-ward",gain:!0},{id:"restoration",gain:!0},{id:"turn-undead",gain:!0},{id:"bless",gain:!0},{id:"spirit-guardians",gain:!0}]},{id:"holy-power",requires:"holy-casting",cost:1,name:"Holy Power",description:"Increases the damage of Smite and Guiding Bolt by 1",providedAbilities:[{id:"smite",modifiers:[{id:"dmg",modifier:1}]},{id:"guiding-bolt",modifiers:[{id:"dmg",modifier:1}]}]},{id:"advanced-guiding-bolt",requires:"holy-power",cost:1,name:"Advanced Guiding Bolt",description:"Guiding bolt now gives allies +2 to hit the target next round.",providedAbilities:[{id:"guiding-bolt",modifiers:{hit:1}}]}]},S4={prefix:"Movement",colors:{unavailable:"#648264",inactive:"#3a913b",selected:"#51db53"},nodes:[{id:"speed",requires:"basic",levels:8,cost:1,name:"Speed",description:"Allows you to move one additional hex per turn",providedStats:[{id:"movement",modifier:1}]},{id:"versatile",requires:"speed",levelsRequired:4,cost:1,name:"Versatile",description:"Grants the Versatile ability",providedAbilities:[{id:"versatile",gain:!0}]},{id:"extra-versatile",requires:"versatile",cost:1,name:"Extra Versatile",description:"Grants the Extra Versatile ability",providedAbilities:[{id:"extra-versatile",gain:!0}]},{id:"dash",requires:"speed",levelsRequired:2,cost:1,name:"Dash",description:"Grants the Dash ability",providedAbilities:[{id:"dash",gain:!0}]},{id:"advanced-dash",requires:"charge",cost:1,levels:2,name:"Dash+",description:"Increases the movement of Dash by 2",providedAbilities:[{id:"dash",modifiers:[{id:"movement",modifier:2}]}]},{id:"dash-expert",requires:"advanced-dash",levelsRequired:2,cost:1,name:"Dash Expert",description:"Grants the Dash Expert ability",providedAbilities:[{id:"dash-expert",gain:!0}]},{id:"charge",requires:"dash",cost:1,name:"Charge",description:"Grants the Charge ability",providedAbilities:[{id:"charge",gain:!0}]},{id:"breakthrough",requires:"charge",cost:1,name:"Breakthrough",description:"Grants you the ability to continue moving through units after a charge.",providedAbilities:[{id:"charge",modifiers:[{id:"breakthrough",modifer:1}]}]},{id:"advanced-charge",requires:"charge",cost:1,name:"Charge+",description:"Increases the movement of Charge by 2",providedAbilities:[{id:"charge",modifiers:[{id:"dmg",modifer:1}]}]}]},T4=RN([_4,S4,w4,x4,y4,b4,E4,v4],(t,e)=>aB(t,et(e.nodes,n=>({...n,colors:e.colors}))),[]);function C4({pointsSpent:t}){return q("div",{className:"point-counter",children:["Spent: ",t]})}var $={},A4={get exports(){return $},set exports(t){$=t}},P4="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",I4=P4,M4=I4;function vb(){}function yb(){}yb.resetWarningCache=vb;var O4=function(){function t(i,r,s,o,a,l){if(l!==M4){var u=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw u.name="Invariant Violation",u}}t.isRequired=t;function e(){return t}var n={array:t,bigint:t,bool:t,func:t,number:t,object:t,string:t,symbol:t,any:t,arrayOf:e,element:t,elementType:t,instanceOf:e,node:t,objectOf:e,oneOf:e,oneOfType:e,shape:e,exact:e,checkPropTypes:yb,resetWarningCache:vb};return n.PropTypes=n,n};A4.exports=O4();function Ff(){return Ff=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Ff.apply(this,arguments)}function R4(t,e){if(t==null)return{};var n=k4(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function k4(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Dm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=R4(t,["color","size"]);return j.createElement("svg",Ff({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("path",{d:"M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"}),j.createElement("path",{d:"M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"}))});Dm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Dm.displayName="BookOpen";const D4=Dm;function Lf(){return Lf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Lf.apply(this,arguments)}function F4(t,e){if(t==null)return{};var n=L4(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function L4(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Fm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=F4(t,["color","size"]);return j.createElement("svg",Lf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("polyline",{points:"20 6 9 17 4 12"}))});Fm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Fm.displayName="Check";const B4=Fm;function Bf(){return Bf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Bf.apply(this,arguments)}function N4(t,e){if(t==null)return{};var n=U4(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function U4(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Lm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=N4(t,["color","size"]);return j.createElement("svg",Bf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("polyline",{points:"6 9 12 15 18 9"}))});Lm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Lm.displayName="ChevronDown";const xb=Lm;function Nf(){return Nf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Nf.apply(this,arguments)}function $4(t,e){if(t==null)return{};var n=z4(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function z4(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Bm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=$4(t,["color","size"]);return j.createElement("svg",Nf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("polyline",{points:"18 15 12 9 6 15"}))});Bm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Bm.displayName="ChevronUp";const _b=Bm;function Uf(){return Uf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Uf.apply(this,arguments)}function H4(t,e){if(t==null)return{};var n=j4(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function j4(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Nm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=H4(t,["color","size"]);return j.createElement("svg",Uf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("polyline",{points:"11 17 6 12 11 7"}),j.createElement("polyline",{points:"18 17 13 12 18 7"}))});Nm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Nm.displayName="ChevronsLeft";const G4=Nm;function $f(){return $f=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},$f.apply(this,arguments)}function V4(t,e){if(t==null)return{};var n=W4(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function W4(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Um=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=V4(t,["color","size"]);return j.createElement("svg",$f({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("polyline",{points:"13 17 18 12 13 7"}),j.createElement("polyline",{points:"6 17 11 12 6 7"}))});Um.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Um.displayName="ChevronsRight";const X4=Um;function zf(){return zf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},zf.apply(this,arguments)}function Y4(t,e){if(t==null)return{};var n=q4(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function q4(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var $m=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=Y4(t,["color","size"]);return j.createElement("svg",zf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("polyline",{points:"16 18 22 12 16 6"}),j.createElement("polyline",{points:"8 6 2 12 8 18"}))});$m.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};$m.displayName="Code";const K4=$m;function Hf(){return Hf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Hf.apply(this,arguments)}function Z4(t,e){if(t==null)return{};var n=Q4(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function Q4(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var zm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=Z4(t,["color","size"]);return j.createElement("svg",Hf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("rect",{x:"9",y:"9",width:"13",height:"13",rx:"2",ry:"2"}),j.createElement("path",{d:"M5 15H4a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2h9a2 2 0 0 1 2 2v1"}))});zm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};zm.displayName="Copy";const J4=zm;function jf(){return jf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},jf.apply(this,arguments)}function e5(t,e){if(t==null)return{};var n=t5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function t5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Hm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=e5(t,["color","size"]);return j.createElement("svg",jf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"}),j.createElement("polyline",{points:"7 10 12 15 17 10"}),j.createElement("line",{x1:"12",y1:"15",x2:"12",y2:"3"}))});Hm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Hm.displayName="Download";const n5=Hm;function Gf(){return Gf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Gf.apply(this,arguments)}function i5(t,e){if(t==null)return{};var n=r5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function r5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var jm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=i5(t,["color","size"]);return j.createElement("svg",Gf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7"}),j.createElement("path",{d:"M18.5 2.5a2.121 2.121 0 0 1 3 3L12 15l-4 1 1-4 9.5-9.5z"}))});jm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};jm.displayName="Edit";const wb=jm;function Vf(){return Vf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Vf.apply(this,arguments)}function s5(t,e){if(t==null)return{};var n=o5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function o5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Gm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=s5(t,["color","size"]);return j.createElement("svg",Vf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("circle",{cx:"12",cy:"12",r:"10"}),j.createElement("path",{d:"M9.09 9a3 3 0 0 1 5.83 1c0 2-3 3-3 3"}),j.createElement("line",{x1:"12",y1:"17",x2:"12.01",y2:"17"}))});Gm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Gm.displayName="HelpCircle";const a5=Gm;function Wf(){return Wf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Wf.apply(this,arguments)}function l5(t,e){if(t==null)return{};var n=u5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function u5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Vm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=l5(t,["color","size"]);return j.createElement("svg",Wf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("circle",{cx:"12",cy:"12",r:"10"}),j.createElement("line",{x1:"12",y1:"16",x2:"12",y2:"12"}),j.createElement("line",{x1:"12",y1:"8",x2:"12.01",y2:"8"}))});Vm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Vm.displayName="Info";const c5=Vm;function Xf(){return Xf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Xf.apply(this,arguments)}function h5(t,e){if(t==null)return{};var n=d5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function d5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Wm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=h5(t,["color","size"]);return j.createElement("svg",Xf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("line",{x1:"8",y1:"6",x2:"21",y2:"6"}),j.createElement("line",{x1:"8",y1:"12",x2:"21",y2:"12"}),j.createElement("line",{x1:"8",y1:"18",x2:"21",y2:"18"}),j.createElement("line",{x1:"3",y1:"6",x2:"3.01",y2:"6"}),j.createElement("line",{x1:"3",y1:"12",x2:"3.01",y2:"12"}),j.createElement("line",{x1:"3",y1:"18",x2:"3.01",y2:"18"}))});Wm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Wm.displayName="List";const f5=Wm;function Yf(){return Yf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Yf.apply(this,arguments)}function p5(t,e){if(t==null)return{};var n=m5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function m5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Xm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=p5(t,["color","size"]);return j.createElement("svg",Yf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),j.createElement("line",{x1:"8",y1:"12",x2:"16",y2:"12"}))});Xm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Xm.displayName="MinusSquare";const g5=Xm;function qf(){return qf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},qf.apply(this,arguments)}function v5(t,e){if(t==null)return{};var n=y5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function y5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Ym=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=v5(t,["color","size"]);return j.createElement("svg",qf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("rect",{x:"3",y:"3",width:"18",height:"18",rx:"2",ry:"2"}),j.createElement("line",{x1:"12",y1:"8",x2:"12",y2:"16"}),j.createElement("line",{x1:"8",y1:"12",x2:"16",y2:"12"}))});Ym.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Ym.displayName="PlusSquare";const fa=Ym;function Kf(){return Kf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Kf.apply(this,arguments)}function x5(t,e){if(t==null)return{};var n=_5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function _5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var qm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=x5(t,["color","size"]);return j.createElement("svg",Kf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("line",{x1:"12",y1:"5",x2:"12",y2:"19"}),j.createElement("line",{x1:"5",y1:"12",x2:"19",y2:"12"}))});qm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};qm.displayName="Plus";const w5=qm;function Zf(){return Zf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Zf.apply(this,arguments)}function b5(t,e){if(t==null)return{};var n=E5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function E5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Km=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=b5(t,["color","size"]);return j.createElement("svg",Zf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("path",{d:"M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z"}),j.createElement("polyline",{points:"17 21 17 13 7 13 7 21"}),j.createElement("polyline",{points:"7 3 7 8 15 8"}))});Km.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Km.displayName="Save";const bb=Km;function Qf(){return Qf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Qf.apply(this,arguments)}function S5(t,e){if(t==null)return{};var n=T5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function T5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Zm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=S5(t,["color","size"]);return j.createElement("svg",Qf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("circle",{cx:"12",cy:"12",r:"3"}),j.createElement("path",{d:"M19.4 15a1.65 1.65 0 0 0 .33 1.82l.06.06a2 2 0 0 1 0 2.83 2 2 0 0 1-2.83 0l-.06-.06a1.65 1.65 0 0 0-1.82-.33 1.65 1.65 0 0 0-1 1.51V21a2 2 0 0 1-2 2 2 2 0 0 1-2-2v-.09A1.65 1.65 0 0 0 9 19.4a1.65 1.65 0 0 0-1.82.33l-.06.06a2 2 0 0 1-2.83 0 2 2 0 0 1 0-2.83l.06-.06a1.65 1.65 0 0 0 .33-1.82 1.65 1.65 0 0 0-1.51-1H3a2 2 0 0 1-2-2 2 2 0 0 1 2-2h.09A1.65 1.65 0 0 0 4.6 9a1.65 1.65 0 0 0-.33-1.82l-.06-.06a2 2 0 0 1 0-2.83 2 2 0 0 1 2.83 0l.06.06a1.65 1.65 0 0 0 1.82.33H9a1.65 1.65 0 0 0 1-1.51V3a2 2 0 0 1 2-2 2 2 0 0 1 2 2v.09a1.65 1.65 0 0 0 1 1.51 1.65 1.65 0 0 0 1.82-.33l.06-.06a2 2 0 0 1 2.83 0 2 2 0 0 1 0 2.83l-.06.06a1.65 1.65 0 0 0-.33 1.82V9a1.65 1.65 0 0 0 1.51 1H21a2 2 0 0 1 2 2 2 2 0 0 1-2 2h-.09a1.65 1.65 0 0 0-1.51 1z"}))});Zm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Zm.displayName="Settings";const C5=Zm;function Jf(){return Jf=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},Jf.apply(this,arguments)}function A5(t,e){if(t==null)return{};var n=P5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function P5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Qm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=A5(t,["color","size"]);return j.createElement("svg",Jf({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("polyline",{points:"3 6 5 6 21 6"}),j.createElement("path",{d:"M19 6v14a2 2 0 0 1-2 2H7a2 2 0 0 1-2-2V6m3 0V4a2 2 0 0 1 2-2h4a2 2 0 0 1 2 2v2"}),j.createElement("line",{x1:"10",y1:"11",x2:"10",y2:"17"}),j.createElement("line",{x1:"14",y1:"11",x2:"14",y2:"17"}))});Qm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Qm.displayName="Trash2";const I5=Qm;function ep(){return ep=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ep.apply(this,arguments)}function M5(t,e){if(t==null)return{};var n=O5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function O5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var Jm=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=M5(t,["color","size"]);return j.createElement("svg",ep({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("circle",{cx:"12",cy:"12",r:"10"}),j.createElement("line",{x1:"15",y1:"9",x2:"9",y2:"15"}),j.createElement("line",{x1:"9",y1:"9",x2:"15",y2:"15"}))});Jm.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};Jm.displayName="XCircle";const Eb=Jm;function tp(){return tp=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},tp.apply(this,arguments)}function R5(t,e){if(t==null)return{};var n=k5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}function k5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}var eg=A.forwardRef(function(t,e){var n=t.color,i=n===void 0?"currentColor":n,r=t.size,s=r===void 0?24:r,o=R5(t,["color","size"]);return j.createElement("svg",tp({ref:e,xmlns:"http://www.w3.org/2000/svg",width:s,height:s,viewBox:"0 0 24 24",fill:"none",stroke:i,strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},o),j.createElement("line",{x1:"18",y1:"6",x2:"6",y2:"18"}),j.createElement("line",{x1:"6",y1:"6",x2:"18",y2:"18"}))});eg.propTypes={color:$.string,size:$.oneOfType([$.string,$.number])};eg.displayName="X";const D5=eg,Sb={action:{emphasis:1,color:"#acb5f9",textColor:"#222"},holy:{color:"#c7ab2e"},undead:{color:"#73b14c"},"bonus action":{emphasis:1,color:"#e1b1da",textColor:"#222"},passive:{emphasis:1,color:"#f3ba82",textColor:"#222"},concentration:{emphasis:2,color:"#6d89ab"},defense:{color:"#cd8150"},reaction:{emphasis:1,color:"#add",textColor:"#222"},movement:{emphasis:1,color:"rgb(249, 244, 172)",textColor:"#222"},aquatic:{color:"#1a72f5"},magic:{color:"#7391c9"}};function F5(t,e,n){let i={};const r=Sb[t]||{color:"#fff"};return i={borderColor:r.color||"#fff"},n?(i.borderWidth="2px",i.color="#1a1a1c",i.backgroundColor=r.color,i.fontWeight=500):i.color="#fff",(r==null?void 0:r.emphasis)===1&&(i.borderColor="transparent",i.backgroundColor=r.color,i.color=r.textColor,i.fontWeight=600,i.borderRadius=12),Bi(e)&&(i.cursor="pointer"),i}function np({label:t,clicked:e,selected:n,children:i}){let r=F5(t,e,n);const s=o=>{Bi(e)&&e(t)};return A.useEffect(()=>{},[t]),q("span",{onClick:s,className:"stat-tag",style:r,children:[t," ",n?I(B4,{size:14}):"",i&&i]})}function _r(t){return _r=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_r(t)}function L5(t,e){if(_r(t)!=="object"||t===null)return t;var n=t[Symbol.toPrimitive];if(n!==void 0){var i=n.call(t,e||"default");if(_r(i)!=="object")return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}function Tb(t){var e=L5(t,"string");return _r(e)==="symbol"?e:String(e)}function co(t,e,n){return e=Tb(e),e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function yy(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter(function(r){return Object.getOwnPropertyDescriptor(t,r).enumerable})),n.push.apply(n,i)}return n}function se(t){for(var e=1;e<arguments.length;e++){var n=arguments[e]!=null?arguments[e]:{};e%2?yy(Object(n),!0).forEach(function(i){co(t,i,n[i])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):yy(Object(n)).forEach(function(i){Object.defineProperty(t,i,Object.getOwnPropertyDescriptor(n,i))})}return t}function B5(t){if(Array.isArray(t))return t}function N5(t,e){var n=t==null?null:typeof Symbol<"u"&&t[Symbol.iterator]||t["@@iterator"];if(n!=null){var i,r,s,o,a=[],l=!0,u=!1;try{if(s=(n=n.call(t)).next,e===0){if(Object(n)!==n)return;l=!1}else for(;!(l=(i=s.call(n)).done)&&(a.push(i.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function ip(t,e){(e==null||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function Cb(t,e){if(t){if(typeof t=="string")return ip(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if(n==="Object"&&t.constructor&&(n=t.constructor.name),n==="Map"||n==="Set")return Array.from(t);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ip(t,e)}}function U5(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ei(t,e){return B5(t)||N5(t,e)||Cb(t,e)||U5()}function $5(t,e){if(t==null)return{};var n={},i=Object.keys(t),r,s;for(s=0;s<i.length;s++)r=i[s],!(e.indexOf(r)>=0)&&(n[r]=t[r]);return n}function Os(t,e){if(t==null)return{};var n=$5(t,e),i,r;if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);for(r=0;r<s.length;r++)i=s[r],!(e.indexOf(i)>=0)&&Object.prototype.propertyIsEnumerable.call(t,i)&&(n[i]=t[i])}return n}var z5=["defaultInputValue","defaultMenuIsOpen","defaultValue","inputValue","menuIsOpen","onChange","onInputChange","onMenuClose","onMenuOpen","value"];function H5(t){var e=t.defaultInputValue,n=e===void 0?"":e,i=t.defaultMenuIsOpen,r=i===void 0?!1:i,s=t.defaultValue,o=s===void 0?null:s,a=t.inputValue,l=t.menuIsOpen,u=t.onChange,c=t.onInputChange,h=t.onMenuClose,d=t.onMenuOpen,f=t.value,p=Os(t,z5),g=A.useState(a!==void 0?a:n),v=ei(g,2),m=v[0],y=v[1],x=A.useState(l!==void 0?l:r),_=ei(x,2),b=_[0],T=_[1],E=A.useState(f!==void 0?f:o),S=ei(E,2),k=S[0],O=S[1],F=A.useCallback(function(M,B){typeof u=="function"&&u(M,B),O(M)},[u]),N=A.useCallback(function(M,B){var P;typeof c=="function"&&(P=c(M,B)),y(P!==void 0?P:M)},[c]),C=A.useCallback(function(){typeof d=="function"&&d(),T(!0)},[d]),w=A.useCallback(function(){typeof h=="function"&&h(),T(!1)},[h]),R=a!==void 0?a:m,z=l!==void 0?l:b,D=f!==void 0?f:k;return se(se({},p),{},{inputValue:R,menuIsOpen:z,onChange:F,onInputChange:N,onMenuClose:w,onMenuOpen:C,value:D})}function ie(){return ie=Object.assign?Object.assign.bind():function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(t[i]=n[i])}return t},ie.apply(this,arguments)}function j5(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function xy(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,Tb(i.key),i)}}function G5(t,e,n){return e&&xy(t.prototype,e),n&&xy(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function ku(t,e){return ku=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(i,r){return i.__proto__=r,i},ku(t,e)}function V5(t,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&ku(t,e)}function Du(t){return Du=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Du(t)}function W5(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function X5(t){if(t===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Y5(t,e){if(e&&(_r(e)==="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return X5(t)}function q5(t){var e=W5();return function(){var i=Du(t),r;if(e){var s=Du(this).constructor;r=Reflect.construct(i,arguments,s)}else r=i.apply(this,arguments);return Y5(this,r)}}function K5(t){if(Array.isArray(t))return ip(t)}function Z5(t){if(typeof Symbol<"u"&&t[Symbol.iterator]!=null||t["@@iterator"]!=null)return Array.from(t)}function Q5(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ab(t){return K5(t)||Z5(t)||Cb(t)||Q5()}function J5(t){if(t.sheet)return t.sheet;for(var e=0;e<document.styleSheets.length;e++)if(document.styleSheets[e].ownerNode===t)return document.styleSheets[e]}function eU(t){var e=document.createElement("style");return e.setAttribute("data-emotion",t.key),t.nonce!==void 0&&e.setAttribute("nonce",t.nonce),e.appendChild(document.createTextNode("")),e.setAttribute("data-s",""),e}var tU=function(){function t(n){var i=this;this._insertTag=function(r){var s;i.tags.length===0?i.insertionPoint?s=i.insertionPoint.nextSibling:i.prepend?s=i.container.firstChild:s=i.before:s=i.tags[i.tags.length-1].nextSibling,i.container.insertBefore(r,s),i.tags.push(r)},this.isSpeedy=n.speedy===void 0?!0:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var e=t.prototype;return e.hydrate=function(i){i.forEach(this._insertTag)},e.insert=function(i){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(eU(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=J5(r);try{s.insertRule(i,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(i));this.ctr++},e.flush=function(){this.tags.forEach(function(i){return i.parentNode&&i.parentNode.removeChild(i)}),this.tags=[],this.ctr=0},t}(),ct="-ms-",Fu="-moz-",me="-webkit-",Pb="comm",tg="rule",ng="decl",nU="@import",Ib="@keyframes",iU=Math.abs,wc=String.fromCharCode,rU=Object.assign;function sU(t,e){return tt(t,0)^45?(((e<<2^tt(t,0))<<2^tt(t,1))<<2^tt(t,2))<<2^tt(t,3):0}function Mb(t){return t.trim()}function oU(t,e){return(t=e.exec(t))?t[0]:t}function ge(t,e,n){return t.replace(e,n)}function rp(t,e){return t.indexOf(e)}function tt(t,e){return t.charCodeAt(e)|0}function Qo(t,e,n){return t.slice(e,n)}function An(t){return t.length}function ig(t){return t.length}function il(t,e){return e.push(t),t}function aU(t,e){return t.map(e).join("")}var bc=1,Cs=1,Ob=0,At=0,He=0,Rs="";function Ec(t,e,n,i,r,s,o){return{value:t,root:e,parent:n,type:i,props:r,children:s,line:bc,column:Cs,length:o,return:""}}function Zs(t,e){return rU(Ec("",null,null,"",null,null,0),t,{length:-t.length},e)}function lU(){return He}function uU(){return He=At>0?tt(Rs,--At):0,Cs--,He===10&&(Cs=1,bc--),He}function Bt(){return He=At<Ob?tt(Rs,At++):0,Cs++,He===10&&(Cs=1,bc++),He}function Bn(){return tt(Rs,At)}function Dl(){return At}function pa(t,e){return Qo(Rs,t,e)}function Jo(t){switch(t){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Rb(t){return bc=Cs=1,Ob=An(Rs=t),At=0,[]}function kb(t){return Rs="",t}function Fl(t){return Mb(pa(At-1,sp(t===91?t+2:t===40?t+1:t)))}function cU(t){for(;(He=Bn())&&He<33;)Bt();return Jo(t)>2||Jo(He)>3?"":" "}function hU(t,e){for(;--e&&Bt()&&!(He<48||He>102||He>57&&He<65||He>70&&He<97););return pa(t,Dl()+(e<6&&Bn()==32&&Bt()==32))}function sp(t){for(;Bt();)switch(He){case t:return At;case 34:case 39:t!==34&&t!==39&&sp(He);break;case 40:t===41&&sp(t);break;case 92:Bt();break}return At}function dU(t,e){for(;Bt()&&t+He!==47+10;)if(t+He===42+42&&Bn()===47)break;return"/*"+pa(e,At-1)+"*"+wc(t===47?t:Bt())}function fU(t){for(;!Jo(Bn());)Bt();return pa(t,At)}function pU(t){return kb(Ll("",null,null,null,[""],t=Rb(t),0,[0],t))}function Ll(t,e,n,i,r,s,o,a,l){for(var u=0,c=0,h=o,d=0,f=0,p=0,g=1,v=1,m=1,y=0,x="",_=r,b=s,T=i,E=x;v;)switch(p=y,y=Bt()){case 40:if(p!=108&&tt(E,h-1)==58){rp(E+=ge(Fl(y),"&","&\f"),"&\f")!=-1&&(m=-1);break}case 34:case 39:case 91:E+=Fl(y);break;case 9:case 10:case 13:case 32:E+=cU(p);break;case 92:E+=hU(Dl()-1,7);continue;case 47:switch(Bn()){case 42:case 47:il(mU(dU(Bt(),Dl()),e,n),l);break;default:E+="/"}break;case 123*g:a[u++]=An(E)*m;case 125*g:case 59:case 0:switch(y){case 0:case 125:v=0;case 59+c:f>0&&An(E)-h&&il(f>32?wy(E+";",i,n,h-1):wy(ge(E," ","")+";",i,n,h-2),l);break;case 59:E+=";";default:if(il(T=_y(E,e,n,u,c,r,a,x,_=[],b=[],h),s),y===123)if(c===0)Ll(E,e,T,T,_,s,h,a,b);else switch(d===99&&tt(E,3)===110?100:d){case 100:case 109:case 115:Ll(t,T,T,i&&il(_y(t,T,T,0,0,r,a,x,r,_=[],h),b),r,b,h,a,i?_:b);break;default:Ll(E,T,T,T,[""],b,0,a,b)}}u=c=f=0,g=m=1,x=E="",h=o;break;case 58:h=1+An(E),f=p;default:if(g<1){if(y==123)--g;else if(y==125&&g++==0&&uU()==125)continue}switch(E+=wc(y),y*g){case 38:m=c>0?1:(E+="\f",-1);break;case 44:a[u++]=(An(E)-1)*m,m=1;break;case 64:Bn()===45&&(E+=Fl(Bt())),d=Bn(),c=h=An(x=E+=fU(Dl())),y++;break;case 45:p===45&&An(E)==2&&(g=0)}}return s}function _y(t,e,n,i,r,s,o,a,l,u,c){for(var h=r-1,d=r===0?s:[""],f=ig(d),p=0,g=0,v=0;p<i;++p)for(var m=0,y=Qo(t,h+1,h=iU(g=o[p])),x=t;m<f;++m)(x=Mb(g>0?d[m]+" "+y:ge(y,/&\f/g,d[m])))&&(l[v++]=x);return Ec(t,e,n,r===0?tg:a,l,u,c)}function mU(t,e,n){return Ec(t,e,n,Pb,wc(lU()),Qo(t,2,-2),0)}function wy(t,e,n,i){return Ec(t,e,n,ng,Qo(t,0,i),Qo(t,i+1,-1),i)}function cs(t,e){for(var n="",i=ig(t),r=0;r<i;r++)n+=e(t[r],r,t,e)||"";return n}function gU(t,e,n,i){switch(t.type){case nU:case ng:return t.return=t.return||t.value;case Pb:return"";case Ib:return t.return=t.value+"{"+cs(t.children,i)+"}";case tg:t.value=t.props.join(",")}return An(n=cs(t.children,i))?t.return=t.value+"{"+n+"}":""}function vU(t){var e=ig(t);return function(n,i,r,s){for(var o="",a=0;a<e;a++)o+=t[a](n,i,r,s)||"";return o}}function yU(t){return function(e){e.root||(e=e.return)&&t(e)}}function xU(t){var e=Object.create(null);return function(n){return e[n]===void 0&&(e[n]=t(n)),e[n]}}var _U=function(e,n,i){for(var r=0,s=0;r=s,s=Bn(),r===38&&s===12&&(n[i]=1),!Jo(s);)Bt();return pa(e,At)},wU=function(e,n){var i=-1,r=44;do switch(Jo(r)){case 0:r===38&&Bn()===12&&(n[i]=1),e[i]+=_U(At-1,n,i);break;case 2:e[i]+=Fl(r);break;case 4:if(r===44){e[++i]=Bn()===58?"&\f":"",n[i]=e[i].length;break}default:e[i]+=wc(r)}while(r=Bt());return e},bU=function(e,n){return kb(wU(Rb(e),n))},by=new WeakMap,EU=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var n=e.value,i=e.parent,r=e.column===i.column&&e.line===i.line;i.type!=="rule";)if(i=i.parent,!i)return;if(!(e.props.length===1&&n.charCodeAt(0)!==58&&!by.get(i))&&!r){by.set(e,!0);for(var s=[],o=bU(n,s),a=i.props,l=0,u=0;l<o.length;l++)for(var c=0;c<a.length;c++,u++)e.props[u]=s[l]?o[l].replace(/&\f/g,a[c]):a[c]+" "+o[l]}}},SU=function(e){if(e.type==="decl"){var n=e.value;n.charCodeAt(0)===108&&n.charCodeAt(2)===98&&(e.return="",e.value="")}};function Db(t,e){switch(sU(t,e)){case 5103:return me+"print-"+t+t;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return me+t+t;case 5349:case 4246:case 4810:case 6968:case 2756:return me+t+Fu+t+ct+t+t;case 6828:case 4268:return me+t+ct+t+t;case 6165:return me+t+ct+"flex-"+t+t;case 5187:return me+t+ge(t,/(\w+).+(:[^]+)/,me+"box-$1$2"+ct+"flex-$1$2")+t;case 5443:return me+t+ct+"flex-item-"+ge(t,/flex-|-self/,"")+t;case 4675:return me+t+ct+"flex-line-pack"+ge(t,/align-content|flex-|-self/,"")+t;case 5548:return me+t+ct+ge(t,"shrink","negative")+t;case 5292:return me+t+ct+ge(t,"basis","preferred-size")+t;case 6060:return me+"box-"+ge(t,"-grow","")+me+t+ct+ge(t,"grow","positive")+t;case 4554:return me+ge(t,/([^-])(transform)/g,"$1"+me+"$2")+t;case 6187:return ge(ge(ge(t,/(zoom-|grab)/,me+"$1"),/(image-set)/,me+"$1"),t,"")+t;case 5495:case 3959:return ge(t,/(image-set\([^]*)/,me+"$1$`$1");case 4968:return ge(ge(t,/(.+:)(flex-)?(.*)/,me+"box-pack:$3"+ct+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+me+t+t;case 4095:case 3583:case 4068:case 2532:return ge(t,/(.+)-inline(.+)/,me+"$1$2")+t;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(An(t)-1-e>6)switch(tt(t,e+1)){case 109:if(tt(t,e+4)!==45)break;case 102:return ge(t,/(.+:)(.+)-([^]+)/,"$1"+me+"$2-$3$1"+Fu+(tt(t,e+3)==108?"$3":"$2-$3"))+t;case 115:return~rp(t,"stretch")?Db(ge(t,"stretch","fill-available"),e)+t:t}break;case 4949:if(tt(t,e+1)!==115)break;case 6444:switch(tt(t,An(t)-3-(~rp(t,"!important")&&10))){case 107:return ge(t,":",":"+me)+t;case 101:return ge(t,/(.+:)([^;!]+)(;|!.+)?/,"$1"+me+(tt(t,14)===45?"inline-":"")+"box$3$1"+me+"$2$3$1"+ct+"$2box$3")+t}break;case 5936:switch(tt(t,e+11)){case 114:return me+t+ct+ge(t,/[svh]\w+-[tblr]{2}/,"tb")+t;case 108:return me+t+ct+ge(t,/[svh]\w+-[tblr]{2}/,"tb-rl")+t;case 45:return me+t+ct+ge(t,/[svh]\w+-[tblr]{2}/,"lr")+t}return me+t+ct+t+t}return t}var TU=function(e,n,i,r){if(e.length>-1&&!e.return)switch(e.type){case ng:e.return=Db(e.value,e.length);break;case Ib:return cs([Zs(e,{value:ge(e.value,"@","@"+me)})],r);case tg:if(e.length)return aU(e.props,function(s){switch(oU(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return cs([Zs(e,{props:[ge(s,/:(read-\w+)/,":"+Fu+"$1")]})],r);case"::placeholder":return cs([Zs(e,{props:[ge(s,/:(plac\w+)/,":"+me+"input-$1")]}),Zs(e,{props:[ge(s,/:(plac\w+)/,":"+Fu+"$1")]}),Zs(e,{props:[ge(s,/:(plac\w+)/,ct+"input-$1")]})],r)}return""})}},CU=[TU],AU=function(e){var n=e.key;if(n==="css"){var i=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(i,function(g){var v=g.getAttribute("data-emotion");v.indexOf(" ")!==-1&&(document.head.appendChild(g),g.setAttribute("data-s",""))})}var r=e.stylisPlugins||CU,s={},o,a=[];o=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+n+' "]'),function(g){for(var v=g.getAttribute("data-emotion").split(" "),m=1;m<v.length;m++)s[v[m]]=!0;a.push(g)});var l,u=[EU,SU];{var c,h=[gU,yU(function(g){c.insert(g)})],d=vU(u.concat(r,h)),f=function(v){return cs(pU(v),d)};l=function(v,m,y,x){c=y,f(v?v+"{"+m.styles+"}":m.styles),x&&(p.inserted[m.name]=!0)}}var p={key:n,sheet:new tU({key:n,container:o,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:l};return p.sheet.hydrate(a),p},op={},PU={get exports(){return op},set exports(t){op=t}},ye={};/** @license React v16.13.1
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Qe=typeof Symbol=="function"&&Symbol.for,rg=Qe?Symbol.for("react.element"):60103,sg=Qe?Symbol.for("react.portal"):60106,Sc=Qe?Symbol.for("react.fragment"):60107,Tc=Qe?Symbol.for("react.strict_mode"):60108,Cc=Qe?Symbol.for("react.profiler"):60114,Ac=Qe?Symbol.for("react.provider"):60109,Pc=Qe?Symbol.for("react.context"):60110,og=Qe?Symbol.for("react.async_mode"):60111,Ic=Qe?Symbol.for("react.concurrent_mode"):60111,Mc=Qe?Symbol.for("react.forward_ref"):60112,Oc=Qe?Symbol.for("react.suspense"):60113,IU=Qe?Symbol.for("react.suspense_list"):60120,Rc=Qe?Symbol.for("react.memo"):60115,kc=Qe?Symbol.for("react.lazy"):60116,MU=Qe?Symbol.for("react.block"):60121,OU=Qe?Symbol.for("react.fundamental"):60117,RU=Qe?Symbol.for("react.responder"):60118,kU=Qe?Symbol.for("react.scope"):60119;function Ht(t){if(typeof t=="object"&&t!==null){var e=t.$$typeof;switch(e){case rg:switch(t=t.type,t){case og:case Ic:case Sc:case Cc:case Tc:case Oc:return t;default:switch(t=t&&t.$$typeof,t){case Pc:case Mc:case kc:case Rc:case Ac:return t;default:return e}}case sg:return e}}}function Fb(t){return Ht(t)===Ic}ye.AsyncMode=og;ye.ConcurrentMode=Ic;ye.ContextConsumer=Pc;ye.ContextProvider=Ac;ye.Element=rg;ye.ForwardRef=Mc;ye.Fragment=Sc;ye.Lazy=kc;ye.Memo=Rc;ye.Portal=sg;ye.Profiler=Cc;ye.StrictMode=Tc;ye.Suspense=Oc;ye.isAsyncMode=function(t){return Fb(t)||Ht(t)===og};ye.isConcurrentMode=Fb;ye.isContextConsumer=function(t){return Ht(t)===Pc};ye.isContextProvider=function(t){return Ht(t)===Ac};ye.isElement=function(t){return typeof t=="object"&&t!==null&&t.$$typeof===rg};ye.isForwardRef=function(t){return Ht(t)===Mc};ye.isFragment=function(t){return Ht(t)===Sc};ye.isLazy=function(t){return Ht(t)===kc};ye.isMemo=function(t){return Ht(t)===Rc};ye.isPortal=function(t){return Ht(t)===sg};ye.isProfiler=function(t){return Ht(t)===Cc};ye.isStrictMode=function(t){return Ht(t)===Tc};ye.isSuspense=function(t){return Ht(t)===Oc};ye.isValidElementType=function(t){return typeof t=="string"||typeof t=="function"||t===Sc||t===Ic||t===Cc||t===Tc||t===Oc||t===IU||typeof t=="object"&&t!==null&&(t.$$typeof===kc||t.$$typeof===Rc||t.$$typeof===Ac||t.$$typeof===Pc||t.$$typeof===Mc||t.$$typeof===OU||t.$$typeof===RU||t.$$typeof===kU||t.$$typeof===MU)};ye.typeOf=Ht;(function(t){t.exports=ye})(PU);var Lb=op,DU={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},FU={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},Bb={};Bb[Lb.ForwardRef]=DU;Bb[Lb.Memo]=FU;var LU=!0;function BU(t,e,n){var i="";return n.split(" ").forEach(function(r){t[r]!==void 0?e.push(t[r]+";"):i+=r+" "}),i}var Nb=function(e,n,i){var r=e.key+"-"+n.name;(i===!1||LU===!1)&&e.registered[r]===void 0&&(e.registered[r]=n.styles)},NU=function(e,n,i){Nb(e,n,i);var r=e.key+"-"+n.name;if(e.inserted[n.name]===void 0){var s=n;do e.insert(n===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function UU(t){for(var e=0,n,i=0,r=t.length;r>=4;++i,r-=4)n=t.charCodeAt(i)&255|(t.charCodeAt(++i)&255)<<8|(t.charCodeAt(++i)&255)<<16|(t.charCodeAt(++i)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,e=(n&65535)*1540483477+((n>>>16)*59797<<16)^(e&65535)*1540483477+((e>>>16)*59797<<16);switch(r){case 3:e^=(t.charCodeAt(i+2)&255)<<16;case 2:e^=(t.charCodeAt(i+1)&255)<<8;case 1:e^=t.charCodeAt(i)&255,e=(e&65535)*1540483477+((e>>>16)*59797<<16)}return e^=e>>>13,e=(e&65535)*1540483477+((e>>>16)*59797<<16),((e^e>>>15)>>>0).toString(36)}var $U={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},zU=/[A-Z]|^ms/g,HU=/_EMO_([^_]+?)_([^]*?)_EMO_/g,Ub=function(e){return e.charCodeAt(1)===45},Ey=function(e){return e!=null&&typeof e!="boolean"},zh=xU(function(t){return Ub(t)?t:t.replace(zU,"-$&").toLowerCase()}),Sy=function(e,n){switch(e){case"animation":case"animationName":if(typeof n=="string")return n.replace(HU,function(i,r,s){return Pn={name:r,styles:s,next:Pn},r})}return $U[e]!==1&&!Ub(e)&&typeof n=="number"&&n!==0?n+"px":n};function ea(t,e,n){if(n==null)return"";if(n.__emotion_styles!==void 0)return n;switch(typeof n){case"boolean":return"";case"object":{if(n.anim===1)return Pn={name:n.name,styles:n.styles,next:Pn},n.name;if(n.styles!==void 0){var i=n.next;if(i!==void 0)for(;i!==void 0;)Pn={name:i.name,styles:i.styles,next:Pn},i=i.next;var r=n.styles+";";return r}return jU(t,e,n)}case"function":{if(t!==void 0){var s=Pn,o=n(t);return Pn=s,ea(t,e,o)}break}}if(e==null)return n;var a=e[n];return a!==void 0?a:n}function jU(t,e,n){var i="";if(Array.isArray(n))for(var r=0;r<n.length;r++)i+=ea(t,e,n[r])+";";else for(var s in n){var o=n[s];if(typeof o!="object")e!=null&&e[o]!==void 0?i+=s+"{"+e[o]+"}":Ey(o)&&(i+=zh(s)+":"+Sy(s,o)+";");else if(Array.isArray(o)&&typeof o[0]=="string"&&(e==null||e[o[0]]===void 0))for(var a=0;a<o.length;a++)Ey(o[a])&&(i+=zh(s)+":"+Sy(s,o[a])+";");else{var l=ea(t,e,o);switch(s){case"animation":case"animationName":{i+=zh(s)+":"+l+";";break}default:i+=s+"{"+l+"}"}}}return i}var Ty=/label:\s*([^\s;\n{]+)\s*(;|$)/g,Pn,$b=function(e,n,i){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,s="";Pn=void 0;var o=e[0];o==null||o.raw===void 0?(r=!1,s+=ea(i,n,o)):s+=o[0];for(var a=1;a<e.length;a++)s+=ea(i,n,e[a]),r&&(s+=o[a]);Ty.lastIndex=0;for(var l="",u;(u=Ty.exec(s))!==null;)l+="-"+u[1];var c=UU(s)+l;return{name:c,styles:s,next:Pn}},GU=function(e){return e()},VU=mg["useInsertionEffect"]?mg["useInsertionEffect"]:!1,WU=VU||GU,ag={}.hasOwnProperty,zb=A.createContext(typeof HTMLElement<"u"?AU({key:"css"}):null);zb.Provider;var XU=function(e){return A.forwardRef(function(n,i){var r=A.useContext(zb);return e(n,r,i)})},YU=A.createContext({}),ap="__EMOTION_TYPE_PLEASE_DO_NOT_USE__",qU=function(e,n){var i={};for(var r in n)ag.call(n,r)&&(i[r]=n[r]);return i[ap]=e,i},KU=function(e){var n=e.cache,i=e.serialized,r=e.isStringTag;return Nb(n,i,r),WU(function(){return NU(n,i,r)}),null},ZU=XU(function(t,e,n){var i=t.css;typeof i=="string"&&e.registered[i]!==void 0&&(i=e.registered[i]);var r=t[ap],s=[i],o="";typeof t.className=="string"?o=BU(e.registered,s,t.className):t.className!=null&&(o=t.className+" ");var a=$b(s,void 0,A.useContext(YU));o+=e.key+"-"+a.name;var l={};for(var u in t)ag.call(t,u)&&u!=="css"&&u!==ap&&(l[u]=t[u]);return l.ref=n,l.className=o,A.createElement(A.Fragment,null,A.createElement(KU,{cache:e,serialized:a,isStringTag:typeof r=="string"}),A.createElement(r,l))}),ee=function(e,n){var i=arguments;if(n==null||!ag.call(n,"css"))return A.createElement.apply(void 0,i);var r=i.length,s=new Array(r);s[0]=ZU,s[1]=qU(e,n);for(var o=2;o<r;o++)s[o]=i[o];return A.createElement.apply(null,s)};function lg(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];return $b(e)}var QU=function(){var e=lg.apply(void 0,arguments),n="animation-"+e.name;return{name:n,styles:"@keyframes "+n+"{"+e.styles+"}",anim:1,toString:function(){return"_EMO_"+this.name+"_"+this.styles+"_EMO_"}}};function JU(t,e){return e||(e=t.slice(0)),Object.freeze(Object.defineProperties(t,{raw:{value:Object.freeze(e)}}))}function e6(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}const t6=["top","right","bottom","left"];t6.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]);function On(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function Hb(t){return On(t).getComputedStyle(t)}function jb(t){return t instanceof On(t).Node}function Gb(t){return jb(t)?(t.nodeName||"").toLowerCase():""}let rl;function n6(){if(rl)return rl;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(rl=t.brands.map(e=>e.brand+"/"+e.version).join(" "),rl):navigator.userAgent}function ug(t){return t instanceof On(t).HTMLElement}function hs(t){return t instanceof On(t).Element}function Cy(t){return typeof ShadowRoot>"u"?!1:t instanceof On(t).ShadowRoot||t instanceof ShadowRoot}function Vb(t){const{overflow:e,overflowX:n,overflowY:i,display:r}=Hb(t);return/auto|scroll|overlay|hidden|clip/.test(e+i+n)&&!["inline","contents"].includes(r)}function i6(){return/^((?!chrome|android).)*safari/i.test(n6())}function r6(t){return["html","body","#document"].includes(Gb(t))}const Lu=Math.round;function s6(t){const e=Hb(t);let n=parseFloat(e.width),i=parseFloat(e.height);const r=ug(t),s=r?t.offsetWidth:n,o=r?t.offsetHeight:i,a=Lu(n)!==s||Lu(i)!==o;return a&&(n=s,i=o),{width:n,height:i,fallback:a}}function Wb(t){return hs(t)?t:t.contextElement}const Xb={x:1,y:1};function Hh(t){const e=Wb(t);if(!ug(e))return Xb;const n=e.getBoundingClientRect(),{width:i,height:r,fallback:s}=s6(e);let o=(s?Lu(n.width):n.width)/i,a=(s?Lu(n.height):n.height)/r;return o&&Number.isFinite(o)||(o=1),a&&Number.isFinite(a)||(a=1),{x:o,y:a}}function Ay(t,e,n,i){var r,s;e===void 0&&(e=!1),n===void 0&&(n=!1);const o=t.getBoundingClientRect(),a=Wb(t);let l=Xb;e&&(i?hs(i)&&(l=Hh(i)):l=Hh(t));const u=a?On(a):window,c=i6()&&n;let h=(o.left+(c&&((r=u.visualViewport)==null?void 0:r.offsetLeft)||0))/l.x,d=(o.top+(c&&((s=u.visualViewport)==null?void 0:s.offsetTop)||0))/l.y,f=o.width/l.x,p=o.height/l.y;if(a){const g=On(a),v=i&&hs(i)?On(i):i;let m=g.frameElement;for(;m&&i&&v!==g;){const y=Hh(m),x=m.getBoundingClientRect(),_=getComputedStyle(m);x.x+=(m.clientLeft+parseFloat(_.paddingLeft))*y.x,x.y+=(m.clientTop+parseFloat(_.paddingTop))*y.y,h*=y.x,d*=y.y,f*=y.x,p*=y.y,h+=x.x,d+=x.y,m=On(m).frameElement}}return e6({width:f,height:p,x:h,y:d})}function o6(t){return((jb(t)?t.ownerDocument:t.document)||window.document).documentElement}function a6(t){if(Gb(t)==="html")return t;const e=t.assignedSlot||t.parentNode||Cy(t)&&t.host||o6(t);return Cy(e)?e.host:e}function Yb(t){const e=a6(t);return r6(e)?e.ownerDocument.body:ug(e)&&Vb(e)?e:Yb(e)}function Bl(t,e){var n;e===void 0&&(e=[]);const i=Yb(t),r=i===((n=t.ownerDocument)==null?void 0:n.body),s=On(i);return r?e.concat(s,s.visualViewport||[],Vb(i)?i:[]):e.concat(i,Bl(i))}function l6(t,e,n,i){i===void 0&&(i={});const{ancestorScroll:r=!0,ancestorResize:s=!0,elementResize:o=!0,animationFrame:a=!1}=i,l=r&&!a,u=l||s?[...hs(t)?Bl(t):t.contextElement?Bl(t.contextElement):[],...Bl(e)]:[];u.forEach(f=>{l&&f.addEventListener("scroll",n,{passive:!0}),s&&f.addEventListener("resize",n)});let c,h=null;if(o){let f=!0;h=new ResizeObserver(()=>{f||n(),f=!1}),hs(t)&&!a&&h.observe(t),hs(t)||!t.contextElement||a||h.observe(t.contextElement),h.observe(e)}let d=a?Ay(t):null;return a&&function f(){const p=Ay(t);!d||p.x===d.x&&p.y===d.y&&p.width===d.width&&p.height===d.height||n(),d=p,c=requestAnimationFrame(f)}(),n(),()=>{var f;u.forEach(p=>{l&&p.removeEventListener("scroll",n),s&&p.removeEventListener("resize",n)}),(f=h)==null||f.disconnect(),h=null,a&&cancelAnimationFrame(c)}}var lp=A.useLayoutEffect,u6=["className","clearValue","cx","getStyles","getClassNames","getValue","hasValue","isMulti","isRtl","options","selectOption","selectProps","setValue","theme"],Bu=function(){};function c6(t,e){return e?e[0]==="-"?t+e:t+"__"+e:t}function h6(t,e){for(var n=arguments.length,i=new Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var s=[].concat(i);if(e&&t)for(var o in e)e.hasOwnProperty(o)&&e[o]&&s.push("".concat(c6(t,o)));return s.filter(function(a){return a}).map(function(a){return String(a).trim()}).join(" ")}var Py=function(e){return _6(e)?e.filter(Boolean):_r(e)==="object"&&e!==null?[e]:[]},qb=function(e){e.className,e.clearValue,e.cx,e.getStyles,e.getClassNames,e.getValue,e.hasValue,e.isMulti,e.isRtl,e.options,e.selectOption,e.selectProps,e.setValue,e.theme;var n=Os(e,u6);return se({},n)},Ne=function(e,n,i){var r=e.cx,s=e.getStyles,o=e.getClassNames,a=e.className;return{css:s(n,e),className:r(i??{},o(n,e),a)}};function Dc(t){return[document.documentElement,document.body,window].indexOf(t)>-1}function d6(t){return Dc(t)?window.innerHeight:t.clientHeight}function Kb(t){return Dc(t)?window.pageYOffset:t.scrollTop}function Nu(t,e){if(Dc(t)){window.scrollTo(0,e);return}t.scrollTop=e}function f6(t){var e=getComputedStyle(t),n=e.position==="absolute",i=/(auto|scroll)/;if(e.position==="fixed")return document.documentElement;for(var r=t;r=r.parentElement;)if(e=getComputedStyle(r),!(n&&e.position==="static")&&i.test(e.overflow+e.overflowY+e.overflowX))return r;return document.documentElement}function p6(t,e,n,i){return n*((t=t/i-1)*t*t+1)+e}function sl(t,e){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:200,i=arguments.length>3&&arguments[3]!==void 0?arguments[3]:Bu,r=Kb(t),s=e-r,o=10,a=0;function l(){a+=o;var u=p6(a,r,s,n);Nu(t,u),a<n?window.requestAnimationFrame(l):i(t)}l()}function Iy(t,e){var n=t.getBoundingClientRect(),i=e.getBoundingClientRect(),r=e.offsetHeight/3;i.bottom+r>n.bottom?Nu(t,Math.min(e.offsetTop+e.clientHeight-t.offsetHeight+r,t.scrollHeight)):i.top-r<n.top&&Nu(t,Math.max(e.offsetTop-r,0))}function m6(t){var e=t.getBoundingClientRect();return{bottom:e.bottom,height:e.height,left:e.left,right:e.right,top:e.top,width:e.width}}function My(){try{return document.createEvent("TouchEvent"),!0}catch{return!1}}function g6(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch{return!1}}var Zb=!1,v6={get passive(){return Zb=!0}},ol=typeof window<"u"?window:{};ol.addEventListener&&ol.removeEventListener&&(ol.addEventListener("p",Bu,v6),ol.removeEventListener("p",Bu,!1));var y6=Zb;function x6(t){return t!=null}function _6(t){return Array.isArray(t)}function al(t,e,n){return t?e:n}var w6=function(e){for(var n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var s=Object.entries(e).filter(function(o){var a=ei(o,1),l=a[0];return!i.includes(l)});return s.reduce(function(o,a){var l=ei(a,2),u=l[0],c=l[1];return o[u]=c,o},{})};function b6(t){var e=t.maxHeight,n=t.menuEl,i=t.minHeight,r=t.placement,s=t.shouldScroll,o=t.isFixedPosition,a=t.controlHeight,l=f6(n),u={placement:"bottom",maxHeight:e};if(!n||!n.offsetParent)return u;var c=l.getBoundingClientRect(),h=c.height,d=n.getBoundingClientRect(),f=d.bottom,p=d.height,g=d.top,v=n.offsetParent.getBoundingClientRect(),m=v.top,y=o?window.innerHeight:d6(l),x=Kb(l),_=parseInt(getComputedStyle(n).marginBottom,10),b=parseInt(getComputedStyle(n).marginTop,10),T=m-b,E=y-g,S=T+x,k=h-x-g,O=f-y+x+_,F=x+g-b,N=160;switch(r){case"auto":case"bottom":if(E>=p)return{placement:"bottom",maxHeight:e};if(k>=p&&!o)return s&&sl(l,O,N),{placement:"bottom",maxHeight:e};if(!o&&k>=i||o&&E>=i){s&&sl(l,O,N);var C=o?E-_:k-_;return{placement:"bottom",maxHeight:C}}if(r==="auto"||o){var w=e,R=o?T:S;return R>=i&&(w=Math.min(R-_-a,e)),{placement:"top",maxHeight:w}}if(r==="bottom")return s&&Nu(l,O),{placement:"bottom",maxHeight:e};break;case"top":if(T>=p)return{placement:"top",maxHeight:e};if(S>=p&&!o)return s&&sl(l,F,N),{placement:"top",maxHeight:e};if(!o&&S>=i||o&&T>=i){var z=e;return(!o&&S>=i||o&&T>=i)&&(z=o?T-b:S-b),s&&sl(l,F,N),{placement:"top",maxHeight:z}}return{placement:"bottom",maxHeight:e};default:throw new Error('Invalid placement provided "'.concat(r,'".'))}return u}function E6(t){var e={bottom:"top",top:"bottom"};return t?e[t]:"bottom"}var Qb=function(e){return e==="auto"?"bottom":e},S6=function(e,n){var i,r=e.placement,s=e.theme,o=s.borderRadius,a=s.spacing,l=s.colors;return se((i={label:"menu"},co(i,E6(r),"100%"),co(i,"position","absolute"),co(i,"width","100%"),co(i,"zIndex",1),i),n?{}:{backgroundColor:l.neutral0,borderRadius:o,boxShadow:"0 0 0 1px hsla(0, 0%, 0%, 0.1), 0 4px 11px hsla(0, 0%, 0%, 0.1)",marginBottom:a.menuGutter,marginTop:a.menuGutter})},Jb=A.createContext(null),T6=function(e){var n=e.children,i=e.minMenuHeight,r=e.maxMenuHeight,s=e.menuPlacement,o=e.menuPosition,a=e.menuShouldScrollIntoView,l=e.theme,u=A.useContext(Jb)||{},c=u.setPortalPlacement,h=A.useRef(null),d=A.useState(r),f=ei(d,2),p=f[0],g=f[1],v=A.useState(null),m=ei(v,2),y=m[0],x=m[1],_=l.spacing.controlHeight;return lp(function(){var b=h.current;if(b){var T=o==="fixed",E=a&&!T,S=b6({maxHeight:r,menuEl:b,minHeight:i,placement:s,shouldScroll:E,isFixedPosition:T,controlHeight:_});g(S.maxHeight),x(S.placement),c==null||c(S.placement)}},[r,s,o,a,i,c,_]),n({ref:h,placerProps:se(se({},e),{},{placement:y||Qb(s),maxHeight:p})})},C6=function(e){var n=e.children,i=e.innerRef,r=e.innerProps;return ee("div",ie({},Ne(e,"menu",{menu:!0}),{ref:i},r),n)},A6=function(e,n){var i=e.maxHeight,r=e.theme.spacing.baseUnit;return se({maxHeight:i,overflowY:"auto",position:"relative",WebkitOverflowScrolling:"touch"},n?{}:{paddingBottom:r,paddingTop:r})},P6=function(e){var n=e.children,i=e.innerProps,r=e.innerRef,s=e.isMulti;return ee("div",ie({},Ne(e,"menuList",{"menu-list":!0,"menu-list--is-multi":s}),{ref:r},i),n)},eE=function(e,n){var i=e.theme,r=i.spacing.baseUnit,s=i.colors;return se({textAlign:"center"},n?{}:{color:s.neutral40,padding:"".concat(r*2,"px ").concat(r*3,"px")})},I6=eE,M6=eE,tE=function(e){var n=e.children,i=e.innerProps;return ee("div",ie({},Ne(e,"noOptionsMessage",{"menu-notice":!0,"menu-notice--no-options":!0}),i),n)};tE.defaultProps={children:"No options"};var nE=function(e){var n=e.children,i=e.innerProps;return ee("div",ie({},Ne(e,"loadingMessage",{"menu-notice":!0,"menu-notice--loading":!0}),i),n)};nE.defaultProps={children:"Loading..."};var O6=function(e){var n=e.rect,i=e.offset,r=e.position;return{left:n.left,position:r,top:i,width:n.width,zIndex:1}},R6=function(e){var n=e.appendTo,i=e.children,r=e.controlElement,s=e.innerProps,o=e.menuPlacement,a=e.menuPosition,l=A.useRef(null),u=A.useRef(null),c=A.useState(Qb(o)),h=ei(c,2),d=h[0],f=h[1],p=A.useMemo(function(){return{setPortalPlacement:f}},[]),g=A.useState(null),v=ei(g,2),m=v[0],y=v[1],x=A.useCallback(function(){if(r){var E=m6(r),S=a==="fixed"?0:window.pageYOffset,k=E[d]+S;(k!==(m==null?void 0:m.offset)||E.left!==(m==null?void 0:m.rect.left)||E.width!==(m==null?void 0:m.rect.width))&&y({offset:k,rect:E})}},[r,a,d,m==null?void 0:m.offset,m==null?void 0:m.rect.left,m==null?void 0:m.rect.width]);lp(function(){x()},[x]);var _=A.useCallback(function(){typeof u.current=="function"&&(u.current(),u.current=null),r&&l.current&&(u.current=l6(r,l.current,x,{elementResize:"ResizeObserver"in window}))},[r,x]);lp(function(){_()},[_]);var b=A.useCallback(function(E){l.current=E,_()},[_]);if(!n&&a!=="fixed"||!m)return null;var T=ee("div",ie({ref:b},Ne(se(se({},e),{},{offset:m.offset,position:a,rect:m.rect}),"menuPortal",{"menu-portal":!0}),s),i);return ee(Jb.Provider,{value:p},n?Ul.createPortal(T,n):T)},k6=function(e){var n=e.isDisabled,i=e.isRtl;return{label:"container",direction:i?"rtl":void 0,pointerEvents:n?"none":void 0,position:"relative"}},D6=function(e){var n=e.children,i=e.innerProps,r=e.isDisabled,s=e.isRtl;return ee("div",ie({},Ne(e,"container",{"--is-disabled":r,"--is-rtl":s}),i),n)},F6=function(e,n){var i=e.theme.spacing,r=e.isMulti,s=e.hasValue,o=e.selectProps.controlShouldRenderValue;return se({alignItems:"center",display:r&&s&&o?"flex":"grid",flex:1,flexWrap:"wrap",WebkitOverflowScrolling:"touch",position:"relative",overflow:"hidden"},n?{}:{padding:"".concat(i.baseUnit/2,"px ").concat(i.baseUnit*2,"px")})},L6=function(e){var n=e.children,i=e.innerProps,r=e.isMulti,s=e.hasValue;return ee("div",ie({},Ne(e,"valueContainer",{"value-container":!0,"value-container--is-multi":r,"value-container--has-value":s}),i),n)},B6=function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},N6=function(e){var n=e.children,i=e.innerProps;return ee("div",ie({},Ne(e,"indicatorsContainer",{indicators:!0}),i),n)},Oy,U6=["size"],$6={name:"8mmkcg",styles:"display:inline-block;fill:currentColor;line-height:1;stroke:currentColor;stroke-width:0"},iE=function(e){var n=e.size,i=Os(e,U6);return ee("svg",ie({height:n,width:n,viewBox:"0 0 20 20","aria-hidden":"true",focusable:"false",css:$6},i))},cg=function(e){return ee(iE,ie({size:20},e),ee("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},rE=function(e){return ee(iE,ie({size:20},e),ee("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},sE=function(e,n){var i=e.isFocused,r=e.theme,s=r.spacing.baseUnit,o=r.colors;return se({label:"indicatorContainer",display:"flex",transition:"color 150ms"},n?{}:{color:i?o.neutral60:o.neutral20,padding:s*2,":hover":{color:i?o.neutral80:o.neutral40}})},z6=sE,H6=function(e){var n=e.children,i=e.innerProps;return ee("div",ie({},Ne(e,"dropdownIndicator",{indicator:!0,"dropdown-indicator":!0}),i),n||ee(rE,null))},j6=sE,G6=function(e){var n=e.children,i=e.innerProps;return ee("div",ie({},Ne(e,"clearIndicator",{indicator:!0,"clear-indicator":!0}),i),n||ee(cg,null))},V6=function(e,n){var i=e.isDisabled,r=e.theme,s=r.spacing.baseUnit,o=r.colors;return se({label:"indicatorSeparator",alignSelf:"stretch",width:1},n?{}:{backgroundColor:i?o.neutral10:o.neutral20,marginBottom:s*2,marginTop:s*2})},W6=function(e){var n=e.innerProps;return ee("span",ie({},n,Ne(e,"indicatorSeparator",{"indicator-separator":!0})))},X6=QU(Oy||(Oy=JU([`
  0%, 80%, 100% { opacity: 0; }
  40% { opacity: 1; }
`]))),Y6=function(e,n){var i=e.isFocused,r=e.size,s=e.theme,o=s.colors,a=s.spacing.baseUnit;return se({label:"loadingIndicator",display:"flex",transition:"color 150ms",alignSelf:"center",fontSize:r,lineHeight:1,marginRight:r,textAlign:"center",verticalAlign:"middle"},n?{}:{color:i?o.neutral60:o.neutral20,padding:a*2})},jh=function(e){var n=e.delay,i=e.offset;return ee("span",{css:lg({animation:"".concat(X6," 1s ease-in-out ").concat(n,"ms infinite;"),backgroundColor:"currentColor",borderRadius:"1em",display:"inline-block",marginLeft:i?"1em":void 0,height:"1em",verticalAlign:"top",width:"1em"},"","")})},oE=function(e){var n=e.innerProps,i=e.isRtl;return ee("div",ie({},Ne(e,"loadingIndicator",{indicator:!0,"loading-indicator":!0}),n),ee(jh,{delay:0,offset:i}),ee(jh,{delay:160,offset:!0}),ee(jh,{delay:320,offset:!i}))};oE.defaultProps={size:4};var q6=function(e,n){var i=e.isDisabled,r=e.isFocused,s=e.theme,o=s.colors,a=s.borderRadius,l=s.spacing;return se({label:"control",alignItems:"center",cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:l.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms"},n?{}:{backgroundColor:i?o.neutral5:o.neutral0,borderColor:i?o.neutral10:r?o.primary:o.neutral20,borderRadius:a,borderStyle:"solid",borderWidth:1,boxShadow:r?"0 0 0 1px ".concat(o.primary):void 0,"&:hover":{borderColor:r?o.primary:o.neutral30}})},K6=function(e){var n=e.children,i=e.isDisabled,r=e.isFocused,s=e.innerRef,o=e.innerProps,a=e.menuIsOpen;return ee("div",ie({ref:s},Ne(e,"control",{control:!0,"control--is-disabled":i,"control--is-focused":r,"control--menu-is-open":a}),o),n)},Z6=["data"],Q6=function(e,n){var i=e.theme.spacing;return n?{}:{paddingBottom:i.baseUnit*2,paddingTop:i.baseUnit*2}},J6=function(e){var n=e.children,i=e.cx,r=e.getStyles,s=e.getClassNames,o=e.Heading,a=e.headingProps,l=e.innerProps,u=e.label,c=e.theme,h=e.selectProps;return ee("div",ie({},Ne(e,"group",{group:!0}),l),ee(o,ie({},a,{selectProps:h,theme:c,getStyles:r,getClassNames:s,cx:i}),u),ee("div",null,n))},e$=function(e,n){var i=e.theme,r=i.colors,s=i.spacing;return se({label:"group",cursor:"default",display:"block"},n?{}:{color:r.neutral40,fontSize:"75%",fontWeight:500,marginBottom:"0.25em",paddingLeft:s.baseUnit*3,paddingRight:s.baseUnit*3,textTransform:"uppercase"})},t$=function(e){var n=qb(e);n.data;var i=Os(n,Z6);return ee("div",ie({},Ne(e,"groupHeading",{"group-heading":!0}),i))},n$=["innerRef","isDisabled","isHidden","inputClassName"],i$=function(e,n){var i=e.isDisabled,r=e.value,s=e.theme,o=s.spacing,a=s.colors;return se(se({visibility:i?"hidden":"visible",transform:r?"translateZ(0)":""},r$),n?{}:{margin:o.baseUnit/2,paddingBottom:o.baseUnit/2,paddingTop:o.baseUnit/2,color:a.neutral80})},aE={gridArea:"1 / 2",font:"inherit",minWidth:"2px",border:0,margin:0,outline:0,padding:0},r$={flex:"1 1 auto",display:"inline-grid",gridArea:"1 / 1 / 2 / 3",gridTemplateColumns:"0 min-content","&:after":se({content:'attr(data-value) " "',visibility:"hidden",whiteSpace:"pre"},aE)},s$=function(e){return se({label:"input",color:"inherit",background:0,opacity:e?0:1,width:"100%"},aE)},o$=function(e){var n=e.cx,i=e.value,r=qb(e),s=r.innerRef,o=r.isDisabled,a=r.isHidden,l=r.inputClassName,u=Os(r,n$);return ee("div",ie({},Ne(e,"input",{"input-container":!0}),{"data-value":i||""}),ee("input",ie({className:n({input:!0},l),ref:s,style:s$(a),disabled:o},u)))},a$=function(e,n){var i=e.theme,r=i.spacing,s=i.borderRadius,o=i.colors;return se({label:"multiValue",display:"flex",minWidth:0},n?{}:{backgroundColor:o.neutral10,borderRadius:s/2,margin:r.baseUnit/2})},l$=function(e,n){var i=e.theme,r=i.borderRadius,s=i.colors,o=e.cropWithEllipsis;return se({overflow:"hidden",textOverflow:o||o===void 0?"ellipsis":void 0,whiteSpace:"nowrap"},n?{}:{borderRadius:r/2,color:s.neutral80,fontSize:"85%",padding:3,paddingLeft:6})},u$=function(e,n){var i=e.theme,r=i.spacing,s=i.borderRadius,o=i.colors,a=e.isFocused;return se({alignItems:"center",display:"flex"},n?{}:{borderRadius:s/2,backgroundColor:a?o.dangerLight:void 0,paddingLeft:r.baseUnit,paddingRight:r.baseUnit,":hover":{backgroundColor:o.dangerLight,color:o.danger}})},lE=function(e){var n=e.children,i=e.innerProps;return ee("div",i,n)},c$=lE,h$=lE;function d$(t){var e=t.children,n=t.innerProps;return ee("div",ie({role:"button"},n),e||ee(cg,{size:14}))}var f$=function(e){var n=e.children,i=e.components,r=e.data,s=e.innerProps,o=e.isDisabled,a=e.removeProps,l=e.selectProps,u=i.Container,c=i.Label,h=i.Remove;return ee(u,{data:r,innerProps:se(se({},Ne(e,"multiValue",{"multi-value":!0,"multi-value--is-disabled":o})),s),selectProps:l},ee(c,{data:r,innerProps:se({},Ne(e,"multiValueLabel",{"multi-value__label":!0})),selectProps:l},n),ee(h,{data:r,innerProps:se(se({},Ne(e,"multiValueRemove",{"multi-value__remove":!0})),{},{"aria-label":"Remove ".concat(n||"option")},a),selectProps:l}))},p$=function(e,n){var i=e.isDisabled,r=e.isFocused,s=e.isSelected,o=e.theme,a=o.spacing,l=o.colors;return se({label:"option",cursor:"default",display:"block",fontSize:"inherit",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)"},n?{}:{backgroundColor:s?l.primary:r?l.primary25:"transparent",color:i?l.neutral20:s?l.neutral0:"inherit",padding:"".concat(a.baseUnit*2,"px ").concat(a.baseUnit*3,"px"),":active":{backgroundColor:i?void 0:s?l.primary:l.primary50}})},m$=function(e){var n=e.children,i=e.isDisabled,r=e.isFocused,s=e.isSelected,o=e.innerRef,a=e.innerProps;return ee("div",ie({},Ne(e,"option",{option:!0,"option--is-disabled":i,"option--is-focused":r,"option--is-selected":s}),{ref:o,"aria-disabled":i},a),n)},g$=function(e,n){var i=e.theme,r=i.spacing,s=i.colors;return se({label:"placeholder",gridArea:"1 / 1 / 2 / 3"},n?{}:{color:s.neutral50,marginLeft:r.baseUnit/2,marginRight:r.baseUnit/2})},v$=function(e){var n=e.children,i=e.innerProps;return ee("div",ie({},Ne(e,"placeholder",{placeholder:!0}),i),n)},y$=function(e,n){var i=e.isDisabled,r=e.theme,s=r.spacing,o=r.colors;return se({label:"singleValue",gridArea:"1 / 1 / 2 / 3",maxWidth:"100%",overflow:"hidden",textOverflow:"ellipsis",whiteSpace:"nowrap"},n?{}:{color:i?o.neutral40:o.neutral80,marginLeft:s.baseUnit/2,marginRight:s.baseUnit/2})},x$=function(e){var n=e.children,i=e.isDisabled,r=e.innerProps;return ee("div",ie({},Ne(e,"singleValue",{"single-value":!0,"single-value--is-disabled":i}),r),n)},_$={ClearIndicator:G6,Control:K6,DropdownIndicator:H6,DownChevron:rE,CrossIcon:cg,Group:J6,GroupHeading:t$,IndicatorsContainer:N6,IndicatorSeparator:W6,Input:o$,LoadingIndicator:oE,Menu:C6,MenuList:P6,MenuPortal:R6,LoadingMessage:nE,NoOptionsMessage:tE,MultiValue:f$,MultiValueContainer:c$,MultiValueLabel:h$,MultiValueRemove:d$,Option:m$,Placeholder:v$,SelectContainer:D6,SingleValue:x$,ValueContainer:L6},w$=function(e){return se(se({},_$),e.components)},Ry=Number.isNaN||function(e){return typeof e=="number"&&e!==e};function b$(t,e){return!!(t===e||Ry(t)&&Ry(e))}function E$(t,e){if(t.length!==e.length)return!1;for(var n=0;n<t.length;n++)if(!b$(t[n],e[n]))return!1;return!0}function S$(t,e){e===void 0&&(e=E$);var n=null;function i(){for(var r=[],s=0;s<arguments.length;s++)r[s]=arguments[s];if(n&&n.lastThis===this&&e(r,n.lastArgs))return n.lastResult;var o=t.apply(this,r);return n={lastResult:o,lastArgs:r,lastThis:this},o}return i.clear=function(){n=null},i}var T$={name:"7pg0cj-a11yText",styles:"label:a11yText;z-index:9999;border:0;clip:rect(1px, 1px, 1px, 1px);height:1px;width:1px;position:absolute;overflow:hidden;padding:0;white-space:nowrap"},ky=function(e){return ee("span",ie({css:T$},e))},C$={guidance:function(e){var n=e.isSearchable,i=e.isMulti,r=e.isDisabled,s=e.tabSelectsValue,o=e.context;switch(o){case"menu":return"Use Up and Down to choose options".concat(r?"":", press Enter to select the currently focused option",", press Escape to exit the menu").concat(s?", press Tab to select the option and exit the menu":"",".");case"input":return"".concat(e["aria-label"]||"Select"," is focused ").concat(n?",type to refine list":"",", press Down to open the menu, ").concat(i?" press left to focus selected values":"");case"value":return"Use left and right to toggle between focused values, press Backspace to remove the currently focused value";default:return""}},onChange:function(e){var n=e.action,i=e.label,r=i===void 0?"":i,s=e.labels,o=e.isDisabled;switch(n){case"deselect-option":case"pop-value":case"remove-value":return"option ".concat(r,", deselected.");case"clear":return"All selected options have been cleared.";case"initial-input-focus":return"option".concat(s.length>1?"s":""," ").concat(s.join(","),", selected.");case"select-option":return o?"option ".concat(r," is disabled. Select another option."):"option ".concat(r,", selected.");default:return""}},onFocus:function(e){var n=e.context,i=e.focused,r=e.options,s=e.label,o=s===void 0?"":s,a=e.selectValue,l=e.isDisabled,u=e.isSelected,c=function(p,g){return p&&p.length?"".concat(p.indexOf(g)+1," of ").concat(p.length):""};if(n==="value"&&a)return"value ".concat(o," focused, ").concat(c(a,i),".");if(n==="menu"){var h=l?" disabled":"",d="".concat(u?"selected":"focused").concat(h);return"option ".concat(o," ").concat(d,", ").concat(c(r,i),".")}return""},onFilter:function(e){var n=e.inputValue,i=e.resultsMessage;return"".concat(i).concat(n?" for search term "+n:"",".")}},A$=function(e){var n=e.ariaSelection,i=e.focusedOption,r=e.focusedValue,s=e.focusableOptions,o=e.isFocused,a=e.selectValue,l=e.selectProps,u=e.id,c=l.ariaLiveMessages,h=l.getOptionLabel,d=l.inputValue,f=l.isMulti,p=l.isOptionDisabled,g=l.isSearchable,v=l.menuIsOpen,m=l.options,y=l.screenReaderStatus,x=l.tabSelectsValue,_=l["aria-label"],b=l["aria-live"],T=A.useMemo(function(){return se(se({},C$),c||{})},[c]),E=A.useMemo(function(){var w="";if(n&&T.onChange){var R=n.option,z=n.options,D=n.removedValue,M=n.removedValues,B=n.value,P=function(he){return Array.isArray(he)?null:he},G=D||R||P(B),V=G?h(G):"",re=z||M||void 0,oe=re?re.map(h):[],pe=se({isDisabled:G&&p(G,a),label:V,labels:oe},n);w=T.onChange(pe)}return w},[n,T,p,a,h]),S=A.useMemo(function(){var w="",R=i||r,z=!!(i&&a&&a.includes(i));if(R&&T.onFocus){var D={focused:R,label:h(R),isDisabled:p(R,a),isSelected:z,options:s,context:R===i?"menu":"value",selectValue:a};w=T.onFocus(D)}return w},[i,r,h,p,T,s,a]),k=A.useMemo(function(){var w="";if(v&&m.length&&T.onFilter){var R=y({count:s.length});w=T.onFilter({inputValue:d,resultsMessage:R})}return w},[s,d,v,T,m,y]),O=A.useMemo(function(){var w="";if(T.guidance){var R=r?"value":v?"menu":"input";w=T.guidance({"aria-label":_,context:R,isDisabled:i&&p(i,a),isMulti:f,isSearchable:g,tabSelectsValue:x})}return w},[_,i,r,f,p,g,v,T,a,x]),F="".concat(S," ").concat(k," ").concat(O),N=ee(A.Fragment,null,ee("span",{id:"aria-selection"},E),ee("span",{id:"aria-context"},F)),C=(n==null?void 0:n.action)==="initial-input-focus";return ee(A.Fragment,null,ee(ky,{id:u},C&&N),ee(ky,{"aria-live":b,"aria-atomic":"false","aria-relevant":"additions text"},o&&!C&&N))},up=[{base:"A",letters:"AⒶＡÀÁÂẦẤẪẨÃĀĂẰẮẴẲȦǠÄǞẢÅǺǍȀȂẠẬẶḀĄȺⱯ"},{base:"AA",letters:"Ꜳ"},{base:"AE",letters:"ÆǼǢ"},{base:"AO",letters:"Ꜵ"},{base:"AU",letters:"Ꜷ"},{base:"AV",letters:"ꜸꜺ"},{base:"AY",letters:"Ꜽ"},{base:"B",letters:"BⒷＢḂḄḆɃƂƁ"},{base:"C",letters:"CⒸＣĆĈĊČÇḈƇȻꜾ"},{base:"D",letters:"DⒹＤḊĎḌḐḒḎĐƋƊƉꝹ"},{base:"DZ",letters:"ǱǄ"},{base:"Dz",letters:"ǲǅ"},{base:"E",letters:"EⒺＥÈÉÊỀẾỄỂẼĒḔḖĔĖËẺĚȄȆẸỆȨḜĘḘḚƐƎ"},{base:"F",letters:"FⒻＦḞƑꝻ"},{base:"G",letters:"GⒼＧǴĜḠĞĠǦĢǤƓꞠꝽꝾ"},{base:"H",letters:"HⒽＨĤḢḦȞḤḨḪĦⱧⱵꞍ"},{base:"I",letters:"IⒾＩÌÍÎĨĪĬİÏḮỈǏȈȊỊĮḬƗ"},{base:"J",letters:"JⒿＪĴɈ"},{base:"K",letters:"KⓀＫḰǨḲĶḴƘⱩꝀꝂꝄꞢ"},{base:"L",letters:"LⓁＬĿĹĽḶḸĻḼḺŁȽⱢⱠꝈꝆꞀ"},{base:"LJ",letters:"Ǉ"},{base:"Lj",letters:"ǈ"},{base:"M",letters:"MⓂＭḾṀṂⱮƜ"},{base:"N",letters:"NⓃＮǸŃÑṄŇṆŅṊṈȠƝꞐꞤ"},{base:"NJ",letters:"Ǌ"},{base:"Nj",letters:"ǋ"},{base:"O",letters:"OⓄＯÒÓÔỒỐỖỔÕṌȬṎŌṐṒŎȮȰÖȪỎŐǑȌȎƠỜỚỠỞỢỌỘǪǬØǾƆƟꝊꝌ"},{base:"OI",letters:"Ƣ"},{base:"OO",letters:"Ꝏ"},{base:"OU",letters:"Ȣ"},{base:"P",letters:"PⓅＰṔṖƤⱣꝐꝒꝔ"},{base:"Q",letters:"QⓆＱꝖꝘɊ"},{base:"R",letters:"RⓇＲŔṘŘȐȒṚṜŖṞɌⱤꝚꞦꞂ"},{base:"S",letters:"SⓈＳẞŚṤŜṠŠṦṢṨȘŞⱾꞨꞄ"},{base:"T",letters:"TⓉＴṪŤṬȚŢṰṮŦƬƮȾꞆ"},{base:"TZ",letters:"Ꜩ"},{base:"U",letters:"UⓊＵÙÚÛŨṸŪṺŬÜǛǗǕǙỦŮŰǓȔȖƯỪỨỮỬỰỤṲŲṶṴɄ"},{base:"V",letters:"VⓋＶṼṾƲꝞɅ"},{base:"VY",letters:"Ꝡ"},{base:"W",letters:"WⓌＷẀẂŴẆẄẈⱲ"},{base:"X",letters:"XⓍＸẊẌ"},{base:"Y",letters:"YⓎＹỲÝŶỸȲẎŸỶỴƳɎỾ"},{base:"Z",letters:"ZⓏＺŹẐŻŽẒẔƵȤⱿⱫꝢ"},{base:"a",letters:"aⓐａẚàáâầấẫẩãāăằắẵẳȧǡäǟảåǻǎȁȃạậặḁąⱥɐ"},{base:"aa",letters:"ꜳ"},{base:"ae",letters:"æǽǣ"},{base:"ao",letters:"ꜵ"},{base:"au",letters:"ꜷ"},{base:"av",letters:"ꜹꜻ"},{base:"ay",letters:"ꜽ"},{base:"b",letters:"bⓑｂḃḅḇƀƃɓ"},{base:"c",letters:"cⓒｃćĉċčçḉƈȼꜿↄ"},{base:"d",letters:"dⓓｄḋďḍḑḓḏđƌɖɗꝺ"},{base:"dz",letters:"ǳǆ"},{base:"e",letters:"eⓔｅèéêềếễểẽēḕḗĕėëẻěȅȇẹệȩḝęḙḛɇɛǝ"},{base:"f",letters:"fⓕｆḟƒꝼ"},{base:"g",letters:"gⓖｇǵĝḡğġǧģǥɠꞡᵹꝿ"},{base:"h",letters:"hⓗｈĥḣḧȟḥḩḫẖħⱨⱶɥ"},{base:"hv",letters:"ƕ"},{base:"i",letters:"iⓘｉìíîĩīĭïḯỉǐȉȋịįḭɨı"},{base:"j",letters:"jⓙｊĵǰɉ"},{base:"k",letters:"kⓚｋḱǩḳķḵƙⱪꝁꝃꝅꞣ"},{base:"l",letters:"lⓛｌŀĺľḷḹļḽḻſłƚɫⱡꝉꞁꝇ"},{base:"lj",letters:"ǉ"},{base:"m",letters:"mⓜｍḿṁṃɱɯ"},{base:"n",letters:"nⓝｎǹńñṅňṇņṋṉƞɲŉꞑꞥ"},{base:"nj",letters:"ǌ"},{base:"o",letters:"oⓞｏòóôồốỗổõṍȭṏōṑṓŏȯȱöȫỏőǒȍȏơờớỡởợọộǫǭøǿɔꝋꝍɵ"},{base:"oi",letters:"ƣ"},{base:"ou",letters:"ȣ"},{base:"oo",letters:"ꝏ"},{base:"p",letters:"pⓟｐṕṗƥᵽꝑꝓꝕ"},{base:"q",letters:"qⓠｑɋꝗꝙ"},{base:"r",letters:"rⓡｒŕṙřȑȓṛṝŗṟɍɽꝛꞧꞃ"},{base:"s",letters:"sⓢｓßśṥŝṡšṧṣṩșşȿꞩꞅẛ"},{base:"t",letters:"tⓣｔṫẗťṭțţṱṯŧƭʈⱦꞇ"},{base:"tz",letters:"ꜩ"},{base:"u",letters:"uⓤｕùúûũṹūṻŭüǜǘǖǚủůűǔȕȗưừứữửựụṳųṷṵʉ"},{base:"v",letters:"vⓥｖṽṿʋꝟʌ"},{base:"vy",letters:"ꝡ"},{base:"w",letters:"wⓦｗẁẃŵẇẅẘẉⱳ"},{base:"x",letters:"xⓧｘẋẍ"},{base:"y",letters:"yⓨｙỳýŷỹȳẏÿỷẙỵƴɏỿ"},{base:"z",letters:"zⓩｚźẑżžẓẕƶȥɀⱬꝣ"}],P$=new RegExp("["+up.map(function(t){return t.letters}).join("")+"]","g"),uE={};for(var Gh=0;Gh<up.length;Gh++)for(var Vh=up[Gh],Wh=0;Wh<Vh.letters.length;Wh++)uE[Vh.letters[Wh]]=Vh.base;var cE=function(e){return e.replace(P$,function(n){return uE[n]})},I$=S$(cE),Dy=function(e){return e.replace(/^\s+|\s+$/g,"")},M$=function(e){return"".concat(e.label," ").concat(e.value)},O$=function(e){return function(n,i){if(n.data.__isNew__)return!0;var r=se({ignoreCase:!0,ignoreAccents:!0,stringify:M$,trim:!0,matchFrom:"any"},e),s=r.ignoreCase,o=r.ignoreAccents,a=r.stringify,l=r.trim,u=r.matchFrom,c=l?Dy(i):i,h=l?Dy(a(n)):a(n);return s&&(c=c.toLowerCase(),h=h.toLowerCase()),o&&(c=I$(c),h=cE(h)),u==="start"?h.substr(0,c.length)===c:h.indexOf(c)>-1}},R$=["innerRef"];function k$(t){var e=t.innerRef,n=Os(t,R$),i=w6(n,"onExited","in","enter","exit","appear");return ee("input",ie({ref:e},i,{css:lg({label:"dummyInput",background:0,border:0,caretColor:"transparent",fontSize:"inherit",gridArea:"1 / 1 / 2 / 3",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(.01)"},"","")}))}var D$=function(e){e.preventDefault(),e.stopPropagation()};function F$(t){var e=t.isEnabled,n=t.onBottomArrive,i=t.onBottomLeave,r=t.onTopArrive,s=t.onTopLeave,o=A.useRef(!1),a=A.useRef(!1),l=A.useRef(0),u=A.useRef(null),c=A.useCallback(function(v,m){if(u.current!==null){var y=u.current,x=y.scrollTop,_=y.scrollHeight,b=y.clientHeight,T=u.current,E=m>0,S=_-b-x,k=!1;S>m&&o.current&&(i&&i(v),o.current=!1),E&&a.current&&(s&&s(v),a.current=!1),E&&m>S?(n&&!o.current&&n(v),T.scrollTop=_,k=!0,o.current=!0):!E&&-m>x&&(r&&!a.current&&r(v),T.scrollTop=0,k=!0,a.current=!0),k&&D$(v)}},[n,i,r,s]),h=A.useCallback(function(v){c(v,v.deltaY)},[c]),d=A.useCallback(function(v){l.current=v.changedTouches[0].clientY},[]),f=A.useCallback(function(v){var m=l.current-v.changedTouches[0].clientY;c(v,m)},[c]),p=A.useCallback(function(v){if(v){var m=y6?{passive:!1}:!1;v.addEventListener("wheel",h,m),v.addEventListener("touchstart",d,m),v.addEventListener("touchmove",f,m)}},[f,d,h]),g=A.useCallback(function(v){v&&(v.removeEventListener("wheel",h,!1),v.removeEventListener("touchstart",d,!1),v.removeEventListener("touchmove",f,!1))},[f,d,h]);return A.useEffect(function(){if(e){var v=u.current;return p(v),function(){g(v)}}},[e,p,g]),function(v){u.current=v}}var Fy=["boxSizing","height","overflow","paddingRight","position"],Ly={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function By(t){t.preventDefault()}function Ny(t){t.stopPropagation()}function Uy(){var t=this.scrollTop,e=this.scrollHeight,n=t+this.offsetHeight;t===0?this.scrollTop=1:n===e&&(this.scrollTop=t-1)}function $y(){return"ontouchstart"in window||navigator.maxTouchPoints}var zy=!!(typeof window<"u"&&window.document&&window.document.createElement),Qs=0,Rr={capture:!1,passive:!1};function L$(t){var e=t.isEnabled,n=t.accountForScrollbars,i=n===void 0?!0:n,r=A.useRef({}),s=A.useRef(null),o=A.useCallback(function(l){if(zy){var u=document.body,c=u&&u.style;if(i&&Fy.forEach(function(p){var g=c&&c[p];r.current[p]=g}),i&&Qs<1){var h=parseInt(r.current.paddingRight,10)||0,d=document.body?document.body.clientWidth:0,f=window.innerWidth-d+h||0;Object.keys(Ly).forEach(function(p){var g=Ly[p];c&&(c[p]=g)}),c&&(c.paddingRight="".concat(f,"px"))}u&&$y()&&(u.addEventListener("touchmove",By,Rr),l&&(l.addEventListener("touchstart",Uy,Rr),l.addEventListener("touchmove",Ny,Rr))),Qs+=1}},[i]),a=A.useCallback(function(l){if(zy){var u=document.body,c=u&&u.style;Qs=Math.max(Qs-1,0),i&&Qs<1&&Fy.forEach(function(h){var d=r.current[h];c&&(c[h]=d)}),u&&$y()&&(u.removeEventListener("touchmove",By,Rr),l&&(l.removeEventListener("touchstart",Uy,Rr),l.removeEventListener("touchmove",Ny,Rr)))}},[i]);return A.useEffect(function(){if(e){var l=s.current;return o(l),function(){a(l)}}},[e,o,a]),function(l){s.current=l}}var B$=function(){return document.activeElement&&document.activeElement.blur()},N$={name:"1kfdb0e",styles:"position:fixed;left:0;bottom:0;right:0;top:0"};function U$(t){var e=t.children,n=t.lockEnabled,i=t.captureEnabled,r=i===void 0?!0:i,s=t.onBottomArrive,o=t.onBottomLeave,a=t.onTopArrive,l=t.onTopLeave,u=F$({isEnabled:r,onBottomArrive:s,onBottomLeave:o,onTopArrive:a,onTopLeave:l}),c=L$({isEnabled:n}),h=function(f){u(f),c(f)};return ee(A.Fragment,null,n&&ee("div",{onClick:B$,css:N$}),e(h))}var $$={name:"1a0ro4n-requiredInput",styles:"label:requiredInput;opacity:0;pointer-events:none;position:absolute;bottom:0;left:0;right:0;width:100%"},z$=function(e){var n=e.name,i=e.onFocus;return ee("input",{required:!0,name:n,tabIndex:-1,onFocus:i,css:$$,value:"",onChange:function(){}})},H$=function(e){return e.label},j$=function(e){return e.label},G$=function(e){return e.value},V$=function(e){return!!e.isDisabled},W$={clearIndicator:j6,container:k6,control:q6,dropdownIndicator:z6,group:Q6,groupHeading:e$,indicatorsContainer:B6,indicatorSeparator:V6,input:i$,loadingIndicator:Y6,loadingMessage:M6,menu:S6,menuList:A6,menuPortal:O6,multiValue:a$,multiValueLabel:l$,multiValueRemove:u$,noOptionsMessage:I6,option:p$,placeholder:g$,singleValue:y$,valueContainer:F6},X$={primary:"#2684FF",primary75:"#4C9AFF",primary50:"#B2D4FF",primary25:"#DEEBFF",danger:"#DE350B",dangerLight:"#FFBDAD",neutral0:"hsl(0, 0%, 100%)",neutral5:"hsl(0, 0%, 95%)",neutral10:"hsl(0, 0%, 90%)",neutral20:"hsl(0, 0%, 80%)",neutral30:"hsl(0, 0%, 70%)",neutral40:"hsl(0, 0%, 60%)",neutral50:"hsl(0, 0%, 50%)",neutral60:"hsl(0, 0%, 40%)",neutral70:"hsl(0, 0%, 30%)",neutral80:"hsl(0, 0%, 20%)",neutral90:"hsl(0, 0%, 10%)"},Y$=4,hE=4,q$=38,K$=hE*2,Z$={baseUnit:hE,controlHeight:q$,menuGutter:K$},Xh={borderRadius:Y$,colors:X$,spacing:Z$},Q$={"aria-live":"polite",backspaceRemovesValue:!0,blurInputOnSelect:My(),captureMenuScroll:!My(),classNames:{},closeMenuOnSelect:!0,closeMenuOnScroll:!1,components:{},controlShouldRenderValue:!0,escapeClearsValue:!1,filterOption:O$(),formatGroupLabel:H$,getOptionLabel:j$,getOptionValue:G$,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:V$,loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!g6(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var n=e.count;return"".concat(n," result").concat(n!==1?"s":""," available")},styles:{},tabIndex:0,tabSelectsValue:!0,unstyled:!1};function Hy(t,e,n,i){var r=mE(t,e,n),s=gE(t,e,n),o=pE(t,e),a=Uu(t,e);return{type:"option",data:e,isDisabled:r,isSelected:s,label:o,value:a,index:i}}function dE(t,e){return t.options.map(function(n,i){if("options"in n){var r=n.options.map(function(o,a){return Hy(t,o,e,a)}).filter(function(o){return jy(t,o)});return r.length>0?{type:"group",data:n,options:r,index:i}:void 0}var s=Hy(t,n,e,i);return jy(t,s)?s:void 0}).filter(x6)}function fE(t){return t.reduce(function(e,n){return n.type==="group"?e.push.apply(e,Ab(n.options.map(function(i){return i.data}))):e.push(n.data),e},[])}function J$(t,e){return fE(dE(t,e))}function jy(t,e){var n=t.inputValue,i=n===void 0?"":n,r=e.data,s=e.isSelected,o=e.label,a=e.value;return(!yE(t)||!s)&&vE(t,{label:o,value:a,data:r},i)}function e8(t,e){var n=t.focusedValue,i=t.selectValue,r=i.indexOf(n);if(r>-1){var s=e.indexOf(n);if(s>-1)return n;if(r<e.length)return e[r]}return null}function t8(t,e){var n=t.focusedOption;return n&&e.indexOf(n)>-1?n:e[0]}var pE=function(e,n){return e.getOptionLabel(n)},Uu=function(e,n){return e.getOptionValue(n)};function mE(t,e,n){return typeof t.isOptionDisabled=="function"?t.isOptionDisabled(e,n):!1}function gE(t,e,n){if(n.indexOf(e)>-1)return!0;if(typeof t.isOptionSelected=="function")return t.isOptionSelected(e,n);var i=Uu(t,e);return n.some(function(r){return Uu(t,r)===i})}function vE(t,e,n){return t.filterOption?t.filterOption(e,n):!0}var yE=function(e){var n=e.hideSelectedOptions,i=e.isMulti;return n===void 0?i:n},n8=1,xE=function(t){V5(n,t);var e=q5(n);function n(i){var r;if(j5(this,n),r=e.call(this,i),r.state={ariaSelection:null,focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,selectValue:[],clearFocusValueOnUpdate:!1,prevWasFocused:!1,inputIsHiddenAfterUpdate:void 0,prevProps:void 0},r.blockOptionHover=!1,r.isComposing=!1,r.commonProps=void 0,r.initialTouchX=0,r.initialTouchY=0,r.instancePrefix="",r.openAfterFocus=!1,r.scrollToFocusedOptionOnUpdate=!1,r.userIsDragging=void 0,r.controlRef=null,r.getControlRef=function(a){r.controlRef=a},r.focusedOptionRef=null,r.getFocusedOptionRef=function(a){r.focusedOptionRef=a},r.menuListRef=null,r.getMenuListRef=function(a){r.menuListRef=a},r.inputRef=null,r.getInputRef=function(a){r.inputRef=a},r.focus=r.focusInput,r.blur=r.blurInput,r.onChange=function(a,l){var u=r.props,c=u.onChange,h=u.name;l.name=h,r.ariaOnChange(a,l),c(a,l)},r.setValue=function(a,l,u){var c=r.props,h=c.closeMenuOnSelect,d=c.isMulti,f=c.inputValue;r.onInputChange("",{action:"set-value",prevInputValue:f}),h&&(r.setState({inputIsHiddenAfterUpdate:!d}),r.onMenuClose()),r.setState({clearFocusValueOnUpdate:!0}),r.onChange(a,{action:l,option:u})},r.selectOption=function(a){var l=r.props,u=l.blurInputOnSelect,c=l.isMulti,h=l.name,d=r.state.selectValue,f=c&&r.isOptionSelected(a,d),p=r.isOptionDisabled(a,d);if(f){var g=r.getOptionValue(a);r.setValue(d.filter(function(v){return r.getOptionValue(v)!==g}),"deselect-option",a)}else if(!p)c?r.setValue([].concat(Ab(d),[a]),"select-option",a):r.setValue(a,"select-option");else{r.ariaOnChange(a,{action:"select-option",option:a,name:h});return}u&&r.blurInput()},r.removeValue=function(a){var l=r.props.isMulti,u=r.state.selectValue,c=r.getOptionValue(a),h=u.filter(function(f){return r.getOptionValue(f)!==c}),d=al(l,h,h[0]||null);r.onChange(d,{action:"remove-value",removedValue:a}),r.focusInput()},r.clearValue=function(){var a=r.state.selectValue;r.onChange(al(r.props.isMulti,[],null),{action:"clear",removedValues:a})},r.popValue=function(){var a=r.props.isMulti,l=r.state.selectValue,u=l[l.length-1],c=l.slice(0,l.length-1),h=al(a,c,c[0]||null);r.onChange(h,{action:"pop-value",removedValue:u})},r.getValue=function(){return r.state.selectValue},r.cx=function(){for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return h6.apply(void 0,[r.props.classNamePrefix].concat(l))},r.getOptionLabel=function(a){return pE(r.props,a)},r.getOptionValue=function(a){return Uu(r.props,a)},r.getStyles=function(a,l){var u=r.props.unstyled,c=W$[a](l,u);c.boxSizing="border-box";var h=r.props.styles[a];return h?h(c,l):c},r.getClassNames=function(a,l){var u,c;return(u=(c=r.props.classNames)[a])===null||u===void 0?void 0:u.call(c,l)},r.getElementId=function(a){return"".concat(r.instancePrefix,"-").concat(a)},r.getComponents=function(){return w$(r.props)},r.buildCategorizedOptions=function(){return dE(r.props,r.state.selectValue)},r.getCategorizedOptions=function(){return r.props.menuIsOpen?r.buildCategorizedOptions():[]},r.buildFocusableOptions=function(){return fE(r.buildCategorizedOptions())},r.getFocusableOptions=function(){return r.props.menuIsOpen?r.buildFocusableOptions():[]},r.ariaOnChange=function(a,l){r.setState({ariaSelection:se({value:a},l)})},r.onMenuMouseDown=function(a){a.button===0&&(a.stopPropagation(),a.preventDefault(),r.focusInput())},r.onMenuMouseMove=function(a){r.blockOptionHover=!1},r.onControlMouseDown=function(a){if(!a.defaultPrevented){var l=r.props.openMenuOnClick;r.state.isFocused?r.props.menuIsOpen?a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&r.onMenuClose():l&&r.openMenu("first"):(l&&(r.openAfterFocus=!0),r.focusInput()),a.target.tagName!=="INPUT"&&a.target.tagName!=="TEXTAREA"&&a.preventDefault()}},r.onDropdownIndicatorMouseDown=function(a){if(!(a&&a.type==="mousedown"&&a.button!==0)&&!r.props.isDisabled){var l=r.props,u=l.isMulti,c=l.menuIsOpen;r.focusInput(),c?(r.setState({inputIsHiddenAfterUpdate:!u}),r.onMenuClose()):r.openMenu("first"),a.preventDefault()}},r.onClearIndicatorMouseDown=function(a){a&&a.type==="mousedown"&&a.button!==0||(r.clearValue(),a.preventDefault(),r.openAfterFocus=!1,a.type==="touchend"?r.focusInput():setTimeout(function(){return r.focusInput()}))},r.onScroll=function(a){typeof r.props.closeMenuOnScroll=="boolean"?a.target instanceof HTMLElement&&Dc(a.target)&&r.props.onMenuClose():typeof r.props.closeMenuOnScroll=="function"&&r.props.closeMenuOnScroll(a)&&r.props.onMenuClose()},r.onCompositionStart=function(){r.isComposing=!0},r.onCompositionEnd=function(){r.isComposing=!1},r.onTouchStart=function(a){var l=a.touches,u=l&&l.item(0);u&&(r.initialTouchX=u.clientX,r.initialTouchY=u.clientY,r.userIsDragging=!1)},r.onTouchMove=function(a){var l=a.touches,u=l&&l.item(0);if(u){var c=Math.abs(u.clientX-r.initialTouchX),h=Math.abs(u.clientY-r.initialTouchY),d=5;r.userIsDragging=c>d||h>d}},r.onTouchEnd=function(a){r.userIsDragging||(r.controlRef&&!r.controlRef.contains(a.target)&&r.menuListRef&&!r.menuListRef.contains(a.target)&&r.blurInput(),r.initialTouchX=0,r.initialTouchY=0)},r.onControlTouchEnd=function(a){r.userIsDragging||r.onControlMouseDown(a)},r.onClearIndicatorTouchEnd=function(a){r.userIsDragging||r.onClearIndicatorMouseDown(a)},r.onDropdownIndicatorTouchEnd=function(a){r.userIsDragging||r.onDropdownIndicatorMouseDown(a)},r.handleInputChange=function(a){var l=r.props.inputValue,u=a.currentTarget.value;r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange(u,{action:"input-change",prevInputValue:l}),r.props.menuIsOpen||r.onMenuOpen()},r.onInputFocus=function(a){r.props.onFocus&&r.props.onFocus(a),r.setState({inputIsHiddenAfterUpdate:!1,isFocused:!0}),(r.openAfterFocus||r.props.openMenuOnFocus)&&r.openMenu("first"),r.openAfterFocus=!1},r.onInputBlur=function(a){var l=r.props.inputValue;if(r.menuListRef&&r.menuListRef.contains(document.activeElement)){r.inputRef.focus();return}r.props.onBlur&&r.props.onBlur(a),r.onInputChange("",{action:"input-blur",prevInputValue:l}),r.onMenuClose(),r.setState({focusedValue:null,isFocused:!1})},r.onOptionHover=function(a){r.blockOptionHover||r.state.focusedOption===a||r.setState({focusedOption:a})},r.shouldHideSelectedOptions=function(){return yE(r.props)},r.onValueInputFocus=function(a){a.preventDefault(),a.stopPropagation(),r.focus()},r.onKeyDown=function(a){var l=r.props,u=l.isMulti,c=l.backspaceRemovesValue,h=l.escapeClearsValue,d=l.inputValue,f=l.isClearable,p=l.isDisabled,g=l.menuIsOpen,v=l.onKeyDown,m=l.tabSelectsValue,y=l.openMenuOnFocus,x=r.state,_=x.focusedOption,b=x.focusedValue,T=x.selectValue;if(!p&&!(typeof v=="function"&&(v(a),a.defaultPrevented))){switch(r.blockOptionHover=!0,a.key){case"ArrowLeft":if(!u||d)return;r.focusValue("previous");break;case"ArrowRight":if(!u||d)return;r.focusValue("next");break;case"Delete":case"Backspace":if(d)return;if(b)r.removeValue(b);else{if(!c)return;u?r.popValue():f&&r.clearValue()}break;case"Tab":if(r.isComposing||a.shiftKey||!g||!m||!_||y&&r.isOptionSelected(_,T))return;r.selectOption(_);break;case"Enter":if(a.keyCode===229)break;if(g){if(!_||r.isComposing)return;r.selectOption(_);break}return;case"Escape":g?(r.setState({inputIsHiddenAfterUpdate:!1}),r.onInputChange("",{action:"menu-close",prevInputValue:d}),r.onMenuClose()):f&&h&&r.clearValue();break;case" ":if(d)return;if(!g){r.openMenu("first");break}if(!_)return;r.selectOption(_);break;case"ArrowUp":g?r.focusOption("up"):r.openMenu("last");break;case"ArrowDown":g?r.focusOption("down"):r.openMenu("first");break;case"PageUp":if(!g)return;r.focusOption("pageup");break;case"PageDown":if(!g)return;r.focusOption("pagedown");break;case"Home":if(!g)return;r.focusOption("first");break;case"End":if(!g)return;r.focusOption("last");break;default:return}a.preventDefault()}},r.instancePrefix="react-select-"+(r.props.instanceId||++n8),r.state.selectValue=Py(i.value),i.menuIsOpen&&r.state.selectValue.length){var s=r.buildFocusableOptions(),o=s.indexOf(r.state.selectValue[0]);r.state.focusedOption=s[o]}return r}return G5(n,[{key:"componentDidMount",value:function(){this.startListeningComposition(),this.startListeningToTouch(),this.props.closeMenuOnScroll&&document&&document.addEventListener&&document.addEventListener("scroll",this.onScroll,!0),this.props.autoFocus&&this.focusInput(),this.props.menuIsOpen&&this.state.focusedOption&&this.menuListRef&&this.focusedOptionRef&&Iy(this.menuListRef,this.focusedOptionRef)}},{key:"componentDidUpdate",value:function(r){var s=this.props,o=s.isDisabled,a=s.menuIsOpen,l=this.state.isFocused;(l&&!o&&r.isDisabled||l&&a&&!r.menuIsOpen)&&this.focusInput(),l&&o&&!r.isDisabled?this.setState({isFocused:!1},this.onMenuClose):!l&&!o&&r.isDisabled&&this.inputRef===document.activeElement&&this.setState({isFocused:!0}),this.menuListRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&(Iy(this.menuListRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1)}},{key:"componentWillUnmount",value:function(){this.stopListeningComposition(),this.stopListeningToTouch(),document.removeEventListener("scroll",this.onScroll,!0)}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close",prevInputValue:this.props.inputValue}),this.props.onMenuClose()}},{key:"onInputChange",value:function(r,s){this.props.onInputChange(r,s)}},{key:"focusInput",value:function(){this.inputRef&&this.inputRef.focus()}},{key:"blurInput",value:function(){this.inputRef&&this.inputRef.blur()}},{key:"openMenu",value:function(r){var s=this,o=this.state,a=o.selectValue,l=o.isFocused,u=this.buildFocusableOptions(),c=r==="first"?0:u.length-1;if(!this.props.isMulti){var h=u.indexOf(a[0]);h>-1&&(c=h)}this.scrollToFocusedOptionOnUpdate=!(l&&this.menuListRef),this.setState({inputIsHiddenAfterUpdate:!1,focusedValue:null,focusedOption:u[c]},function(){return s.onMenuOpen()})}},{key:"focusValue",value:function(r){var s=this.state,o=s.selectValue,a=s.focusedValue;if(this.props.isMulti){this.setState({focusedOption:null});var l=o.indexOf(a);a||(l=-1);var u=o.length-1,c=-1;if(o.length){switch(r){case"previous":l===0?c=0:l===-1?c=u:c=l-1;break;case"next":l>-1&&l<u&&(c=l+1);break}this.setState({inputIsHidden:c!==-1,focusedValue:o[c]})}}}},{key:"focusOption",value:function(){var r=arguments.length>0&&arguments[0]!==void 0?arguments[0]:"first",s=this.props.pageSize,o=this.state.focusedOption,a=this.getFocusableOptions();if(a.length){var l=0,u=a.indexOf(o);o||(u=-1),r==="up"?l=u>0?u-1:a.length-1:r==="down"?l=(u+1)%a.length:r==="pageup"?(l=u-s,l<0&&(l=0)):r==="pagedown"?(l=u+s,l>a.length-1&&(l=a.length-1)):r==="last"&&(l=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[l],focusedValue:null})}}},{key:"getTheme",value:function(){return this.props.theme?typeof this.props.theme=="function"?this.props.theme(Xh):se(se({},Xh),this.props.theme):Xh}},{key:"getCommonProps",value:function(){var r=this.clearValue,s=this.cx,o=this.getStyles,a=this.getClassNames,l=this.getValue,u=this.selectOption,c=this.setValue,h=this.props,d=h.isMulti,f=h.isRtl,p=h.options,g=this.hasValue();return{clearValue:r,cx:s,getStyles:o,getClassNames:a,getValue:l,hasValue:g,isMulti:d,isRtl:f,options:p,selectOption:u,selectProps:h,setValue:c,theme:this.getTheme()}}},{key:"hasValue",value:function(){var r=this.state.selectValue;return r.length>0}},{key:"hasOptions",value:function(){return!!this.getFocusableOptions().length}},{key:"isClearable",value:function(){var r=this.props,s=r.isClearable,o=r.isMulti;return s===void 0?o:s}},{key:"isOptionDisabled",value:function(r,s){return mE(this.props,r,s)}},{key:"isOptionSelected",value:function(r,s){return gE(this.props,r,s)}},{key:"filterOption",value:function(r,s){return vE(this.props,r,s)}},{key:"formatOptionLabel",value:function(r,s){if(typeof this.props.formatOptionLabel=="function"){var o=this.props.inputValue,a=this.state.selectValue;return this.props.formatOptionLabel(r,{context:s,inputValue:o,selectValue:a})}else return this.getOptionLabel(r)}},{key:"formatGroupLabel",value:function(r){return this.props.formatGroupLabel(r)}},{key:"startListeningComposition",value:function(){document&&document.addEventListener&&(document.addEventListener("compositionstart",this.onCompositionStart,!1),document.addEventListener("compositionend",this.onCompositionEnd,!1))}},{key:"stopListeningComposition",value:function(){document&&document.removeEventListener&&(document.removeEventListener("compositionstart",this.onCompositionStart),document.removeEventListener("compositionend",this.onCompositionEnd))}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"renderInput",value:function(){var r=this.props,s=r.isDisabled,o=r.isSearchable,a=r.inputId,l=r.inputValue,u=r.tabIndex,c=r.form,h=r.menuIsOpen,d=r.required,f=this.getComponents(),p=f.Input,g=this.state,v=g.inputIsHidden,m=g.ariaSelection,y=this.commonProps,x=a||this.getElementId("input"),_=se(se(se({"aria-autocomplete":"list","aria-expanded":h,"aria-haspopup":!0,"aria-errormessage":this.props["aria-errormessage"],"aria-invalid":this.props["aria-invalid"],"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-required":d,role:"combobox"},h&&{"aria-controls":this.getElementId("listbox"),"aria-owns":this.getElementId("listbox")}),!o&&{"aria-readonly":!0}),this.hasValue()?(m==null?void 0:m.action)==="initial-input-focus"&&{"aria-describedby":this.getElementId("live-region")}:{"aria-describedby":this.getElementId("placeholder")});return o?A.createElement(p,ie({},y,{autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",id:x,innerRef:this.getInputRef,isDisabled:s,isHidden:v,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:u,form:c,type:"text",value:l},_)):A.createElement(k$,ie({id:x,innerRef:this.getInputRef,onBlur:this.onInputBlur,onChange:Bu,onFocus:this.onInputFocus,disabled:s,tabIndex:u,inputMode:"none",form:c,value:""},_))}},{key:"renderPlaceholderOrValue",value:function(){var r=this,s=this.getComponents(),o=s.MultiValue,a=s.MultiValueContainer,l=s.MultiValueLabel,u=s.MultiValueRemove,c=s.SingleValue,h=s.Placeholder,d=this.commonProps,f=this.props,p=f.controlShouldRenderValue,g=f.isDisabled,v=f.isMulti,m=f.inputValue,y=f.placeholder,x=this.state,_=x.selectValue,b=x.focusedValue,T=x.isFocused;if(!this.hasValue()||!p)return m?null:A.createElement(h,ie({},d,{key:"placeholder",isDisabled:g,isFocused:T,innerProps:{id:this.getElementId("placeholder")}}),y);if(v)return _.map(function(S,k){var O=S===b,F="".concat(r.getOptionLabel(S),"-").concat(r.getOptionValue(S));return A.createElement(o,ie({},d,{components:{Container:a,Label:l,Remove:u},isFocused:O,isDisabled:g,key:F,index:k,removeProps:{onClick:function(){return r.removeValue(S)},onTouchEnd:function(){return r.removeValue(S)},onMouseDown:function(C){C.preventDefault()}},data:S}),r.formatOptionLabel(S,"value"))});if(m)return null;var E=_[0];return A.createElement(c,ie({},d,{data:E,isDisabled:g}),this.formatOptionLabel(E,"value"))}},{key:"renderClearIndicator",value:function(){var r=this.getComponents(),s=r.ClearIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,u=a.isLoading,c=this.state.isFocused;if(!this.isClearable()||!s||l||!this.hasValue()||u)return null;var h={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,"aria-hidden":"true"};return A.createElement(s,ie({},o,{innerProps:h,isFocused:c}))}},{key:"renderLoadingIndicator",value:function(){var r=this.getComponents(),s=r.LoadingIndicator,o=this.commonProps,a=this.props,l=a.isDisabled,u=a.isLoading,c=this.state.isFocused;if(!s||!u)return null;var h={"aria-hidden":"true"};return A.createElement(s,ie({},o,{innerProps:h,isDisabled:l,isFocused:c}))}},{key:"renderIndicatorSeparator",value:function(){var r=this.getComponents(),s=r.DropdownIndicator,o=r.IndicatorSeparator;if(!s||!o)return null;var a=this.commonProps,l=this.props.isDisabled,u=this.state.isFocused;return A.createElement(o,ie({},a,{isDisabled:l,isFocused:u}))}},{key:"renderDropdownIndicator",value:function(){var r=this.getComponents(),s=r.DropdownIndicator;if(!s)return null;var o=this.commonProps,a=this.props.isDisabled,l=this.state.isFocused,u={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,"aria-hidden":"true"};return A.createElement(s,ie({},o,{innerProps:u,isDisabled:a,isFocused:l}))}},{key:"renderMenu",value:function(){var r=this,s=this.getComponents(),o=s.Group,a=s.GroupHeading,l=s.Menu,u=s.MenuList,c=s.MenuPortal,h=s.LoadingMessage,d=s.NoOptionsMessage,f=s.Option,p=this.commonProps,g=this.state.focusedOption,v=this.props,m=v.captureMenuScroll,y=v.inputValue,x=v.isLoading,_=v.loadingMessage,b=v.minMenuHeight,T=v.maxMenuHeight,E=v.menuIsOpen,S=v.menuPlacement,k=v.menuPosition,O=v.menuPortalTarget,F=v.menuShouldBlockScroll,N=v.menuShouldScrollIntoView,C=v.noOptionsMessage,w=v.onMenuScrollToTop,R=v.onMenuScrollToBottom;if(!E)return null;var z=function(re,oe){var pe=re.type,ue=re.data,he=re.isDisabled,De=re.isSelected,qe=re.label,Ge=re.value,xe=g===ue,Ae=he?void 0:function(){return r.onOptionHover(ue)},Ue=he?void 0:function(){return r.selectOption(ue)},Pt="".concat(r.getElementId("option"),"-").concat(oe),jt={id:Pt,onClick:Ue,onMouseMove:Ae,onMouseOver:Ae,tabIndex:-1};return A.createElement(f,ie({},p,{innerProps:jt,data:ue,isDisabled:he,isSelected:De,key:Pt,label:qe,type:pe,value:Ge,isFocused:xe,innerRef:xe?r.getFocusedOptionRef:void 0}),r.formatOptionLabel(re.data,"menu"))},D;if(this.hasOptions())D=this.getCategorizedOptions().map(function(V){if(V.type==="group"){var re=V.data,oe=V.options,pe=V.index,ue="".concat(r.getElementId("group"),"-").concat(pe),he="".concat(ue,"-heading");return A.createElement(o,ie({},p,{key:ue,data:re,options:oe,Heading:a,headingProps:{id:he,data:V.data},label:r.formatGroupLabel(V.data)}),V.options.map(function(De){return z(De,"".concat(pe,"-").concat(De.index))}))}else if(V.type==="option")return z(V,"".concat(V.index))});else if(x){var M=_({inputValue:y});if(M===null)return null;D=A.createElement(h,p,M)}else{var B=C({inputValue:y});if(B===null)return null;D=A.createElement(d,p,B)}var P={minMenuHeight:b,maxMenuHeight:T,menuPlacement:S,menuPosition:k,menuShouldScrollIntoView:N},G=A.createElement(T6,ie({},p,P),function(V){var re=V.ref,oe=V.placerProps,pe=oe.placement,ue=oe.maxHeight;return A.createElement(l,ie({},p,P,{innerRef:re,innerProps:{onMouseDown:r.onMenuMouseDown,onMouseMove:r.onMenuMouseMove,id:r.getElementId("listbox")},isLoading:x,placement:pe}),A.createElement(U$,{captureEnabled:m,onTopArrive:w,onBottomArrive:R,lockEnabled:F},function(he){return A.createElement(u,ie({},p,{innerRef:function(qe){r.getMenuListRef(qe),he(qe)},isLoading:x,maxHeight:ue,focusedOption:g}),D)}))});return O||k==="fixed"?A.createElement(c,ie({},p,{appendTo:O,controlElement:this.controlRef,menuPlacement:S,menuPosition:k}),G):G}},{key:"renderFormField",value:function(){var r=this,s=this.props,o=s.delimiter,a=s.isDisabled,l=s.isMulti,u=s.name,c=s.required,h=this.state.selectValue;if(!(!u||a)){if(c&&!this.hasValue())return A.createElement(z$,{name:u,onFocus:this.onValueInputFocus});if(l)if(o){var d=h.map(function(g){return r.getOptionValue(g)}).join(o);return A.createElement("input",{name:u,type:"hidden",value:d})}else{var f=h.length>0?h.map(function(g,v){return A.createElement("input",{key:"i-".concat(v),name:u,type:"hidden",value:r.getOptionValue(g)})}):A.createElement("input",{name:u,type:"hidden",value:""});return A.createElement("div",null,f)}else{var p=h[0]?this.getOptionValue(h[0]):"";return A.createElement("input",{name:u,type:"hidden",value:p})}}}},{key:"renderLiveRegion",value:function(){var r=this.commonProps,s=this.state,o=s.ariaSelection,a=s.focusedOption,l=s.focusedValue,u=s.isFocused,c=s.selectValue,h=this.getFocusableOptions();return A.createElement(A$,ie({},r,{id:this.getElementId("live-region"),ariaSelection:o,focusedOption:a,focusedValue:l,isFocused:u,selectValue:c,focusableOptions:h}))}},{key:"render",value:function(){var r=this.getComponents(),s=r.Control,o=r.IndicatorsContainer,a=r.SelectContainer,l=r.ValueContainer,u=this.props,c=u.className,h=u.id,d=u.isDisabled,f=u.menuIsOpen,p=this.state.isFocused,g=this.commonProps=this.getCommonProps();return A.createElement(a,ie({},g,{className:c,innerProps:{id:h,onKeyDown:this.onKeyDown},isDisabled:d,isFocused:p}),this.renderLiveRegion(),A.createElement(s,ie({},g,{innerRef:this.getControlRef,innerProps:{onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:d,isFocused:p,menuIsOpen:f}),A.createElement(l,ie({},g,{isDisabled:d}),this.renderPlaceholderOrValue(),this.renderInput()),A.createElement(o,ie({},g,{isDisabled:d}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}],[{key:"getDerivedStateFromProps",value:function(r,s){var o=s.prevProps,a=s.clearFocusValueOnUpdate,l=s.inputIsHiddenAfterUpdate,u=s.ariaSelection,c=s.isFocused,h=s.prevWasFocused,d=r.options,f=r.value,p=r.menuIsOpen,g=r.inputValue,v=r.isMulti,m=Py(f),y={};if(o&&(f!==o.value||d!==o.options||p!==o.menuIsOpen||g!==o.inputValue)){var x=p?J$(r,m):[],_=a?e8(s,m):null,b=t8(s,x);y={selectValue:m,focusedOption:b,focusedValue:_,clearFocusValueOnUpdate:!1}}var T=l!=null&&r!==o?{inputIsHidden:l,inputIsHiddenAfterUpdate:void 0}:{},E=u,S=c&&h;return c&&!S&&(E={value:al(v,m,m[0]||null),options:m,action:"initial-input-focus"},S=!h),(u==null?void 0:u.action)==="initial-input-focus"&&(E=null),se(se(se({},y),T),{},{prevProps:r,ariaSelection:E,prevWasFocused:S})}}]),n}(A.Component);xE.defaultProps=Q$;var i8=A.forwardRef(function(t,e){var n=H5(t);return A.createElement(xE,ie({ref:e},n))});const hg=i8,Gy=[{label:"passive",value:"passive"},{label:"action",value:"action"},{label:"reaction",value:"reaction"},{label:"movement",value:"movement"}];function r8(t){let e={};const n=Sb[t]||{color:"#fff"};return e={borderColor:n.color||"#fff"},e.color="#fff",(n==null?void 0:n.emphasis)===1&&(e.borderColor="transparent",e.backgroundColor=n.color,e.color=n.textColor,e.fontWeight=600,e.borderRadius=12),e}function s8({tags:t,type:e,tagsChanged:n,typeChanged:i}){const[r,s]=A.useState(t),[o,a]=A.useState(e),l=(d,f)=>{let p=[...r];p[f]=d.target.value,s(p),n(p)},u=()=>{s([...r,"tag"]),n([...r,"tag"])},c=d=>{let f=[...r];f.splice(d,1),s(f),n(f)},h=d=>{a(d.value),i(d.value)};return q("div",{className:"tag-select",children:[I(hg,{classNames:{control:()=>"select",singleValue:()=>"single-value",menu:()=>"select-menu"},options:Gy,onChange:d=>h(d),value:Fe(Gy,{value:o})}),r==null?void 0:r.map((d,f)=>q("span",{className:"stat-tag form-control",style:r8(d),children:[I("input",{type:"text",value:d,onChange:p=>l(p,f)}),I("button",{onClick:()=>c(f),children:"x"})]})),I("button",{className:"add-tag",onClick:u,children:I(w5,{size:16})})]})}function o8({ability:t,isPlayerAbility:e,modifiers:n,abilityChanged:i,editingCanceled:r}){const[s,o]=A.useState(t),a=(h,d)=>{o({...s,[h]:d.target.value})},l=h=>{o({...s,tags:h})},u=h=>{o({...s,type:h})},c=()=>{Bi(i)&&i({ability:s,id:t.id})};return q("div",{className:"ability-card",children:[q("div",{className:"name",children:[I("button",{className:"edit",onClick:()=>{Bi(r)&&r()},children:I(D5,{})}),I("div",{className:"form-control",children:I("input",{type:"text",value:s.name,onChange:h=>a("name",h)})})]}),I("div",{className:"form-control id",children:I("input",{type:"text",value:s.id,onChange:h=>a("id",h)})}),q("div",{className:"collapsible-content",children:[I("div",{className:"top",children:q("p",{className:"description form-control",children:[" ",I("textarea",{rows:10,value:s.description||"",onChange:h=>a("description",h)})]})}),I("div",{className:"bottom",children:I("div",{className:"tags",children:I(s8,{tags:s.tags,type:s.type,tagsChanged:l,typeChanged:u})})})]}),q("button",{onClick:c,children:["Save ",I(bb,{})]})]})}function a8(t,e){let n=t;return kt(Object.keys(e),i=>{let r=e[i];e[i]?n=n.replace(new RegExp(`{\\b${i}\\b}([^*]+)\\{/\\b${i}\\b}`),"$1"):n=n.replace(new RegExp(`{\\b${i}\\b}([^*]+)\\{/\\b${i}\\b}`),""),n=n.replace(new RegExp("%"+i+"%","g"),r)}),n}function Vy(t,e,n){let i,r=Wt(t.params);return r&&n&&kt(Object.keys(r),s=>{n[s]&&(r[s]=r[s]+n[s])}),t.params?i=a8(t.description,r):Bi(t.description)?i=t.description({}):i=t.description,i}function Fc({ability:t,isPlayerAbility:e,modifiers:n,startOpen:i=!0,editable:r=!1,abilityEdited:s}){var f;const[o,a]=A.useState(Vy(t,e,n)),[l,u]=A.useState(i),[c,h]=A.useState(!1),d=p=>{Bi(s)&&s({ability:p.ability,id:p.id}),h(!1)};return A.useEffect(()=>{a(Vy(t,e,n))},[t,n]),c?I(o8,{ability:t,abilityChanged:d,editingCanceled:()=>h(!1)}):q("div",{className:"ability-card",children:[q("div",{className:"name",children:[r&&I("button",{className:"edit",onClick:()=>h(!c),children:I(wb,{})}),q("button",{className:"card-title",onClick:()=>u(!l),children:[I("div",{children:t.name}),I("div",{children:l?I(_b,{}):I(xb,{})})]})]}),l?q("div",{className:"collapsible-content",children:[I("div",{className:"top",children:I("p",{className:"description",children:o})}),I("div",{className:"bottom",children:q("div",{className:"tags",children:[I(np,{label:t.type}),(f=t.tags)==null?void 0:f.map(p=>I(np,{label:p}))]})})]}):""]})}function l8({node:t,build:e}){var s;const n=et(t==null?void 0:t.providedAbilities,o=>({...Fe(Qn,{id:o.id}),modifiers:{}}));let i=(s=t==null?void 0:t.colors)==null?void 0:s.selected;j.useEffect(()=>{var o;i=(o=t==null?void 0:t.colors)==null?void 0:o.selected},[t]);const r=t!=null&&t.levels?I("span",{className:"cost",children:da(t==null?void 0:t.levels,o=>{var a;return I("span",{className:"level-points",style:{background:t.acquired>o?i:"#666"},children:(a=t==null?void 0:t.levelCost)!=null&&a.length?t.levelCost[o]:t.levelCost})})}):I("span",{className:"cost",children:I("span",{className:"level-points",style:{background:t!=null&&t.selected?i:"#666"},children:(t==null?void 0:t.cost)>1?t==null?void 0:t.cost:""})});return t?q("div",{className:"info-panel",children:[r,I("div",{className:"title",children:t==null?void 0:t.name}),I("div",{className:"divider",style:{backgroundColor:i}}),t.available?null:q("div",{className:"requires",children:["Requires"," ",q("span",{className:"skill",children:[t.requiredName," ",t.levelsRequired?q("span",{children:["(",t.levelsRequired,")"]}):null]})]}),I("div",{className:"info-description",children:t==null?void 0:t.description}),n.length>0&&q("div",{className:"abilities",children:[I("div",{className:"title",children:"Related Abilities:"}),Object.keys(n).map(o=>{var a,l;return I(Fc,{ability:n[o],modifiers:(l=e==null?void 0:e.abilities[(a=n[o])==null?void 0:a.id])==null?void 0:l.modifiers})})]})]}):I("div",{className:"info-panel",children:"Select a Node"})}function Wy({itemSelected:t}){return q("div",{className:"left-menu",children:[I("button",{type:"button",onClick:r=>t(r,"info"),children:I(c5,{})}),I("button",{type:"button",onClick:r=>t(r,"settings"),children:I(C5,{})}),I("button",{type:"button",onClick:r=>t(r,"edit"),children:I(wb,{})})]})}function u8({children:t,itemSelected:e,expanded:n}){const[i,r]=A.useState(!0),[s,o]=A.useState(null),a=(l,u)=>{(u===s||!i)&&r(!i),o(u),e(u)};return i?q("div",{className:"sidebar-left",children:[I(Wy,{itemSelected:a}),I("div",{className:"sidebar-left-panel",children:t})]}):I("div",{className:"sidebar-left",children:I(Wy,{itemSelected:a})})}function c8(t,e){t.prototype=Object.create(e.prototype),t.prototype.constructor=t,ku(t,e)}function Yh(t){return t&&t.stopPropagation&&t.stopPropagation(),t&&t.preventDefault&&t.preventDefault(),!1}function qh(t){return t==null?[]:Array.isArray(t)?t.slice():[t]}function ll(t){return t!==null&&t.length===1?t[0]:t.slice()}function ul(t){Object.keys(t).forEach(e=>{typeof document<"u"&&document.addEventListener(e,t[e],!1)})}function Wi(t,e){return cp(function(n,i){let r=n;return r<=i.min&&(r=i.min),r>=i.max&&(r=i.max),r}(t,e),e)}function cp(t,e){const n=(t-e.min)%e.step;let i=t-n;return 2*Math.abs(n)>=e.step&&(i+=n>0?e.step:-e.step),parseFloat(i.toFixed(5))}let hp=function(t){function e(i){var r;(r=t.call(this,i)||this).onKeyUp=()=>{r.onEnd()},r.onMouseUp=()=>{r.onEnd(r.getMouseEventMap())},r.onTouchEnd=()=>{r.onEnd(r.getTouchEventMap())},r.onBlur=()=>{r.setState({index:-1},r.onEnd(r.getKeyDownEventMap()))},r.onMouseMove=a=>{r.setState({pending:!0});const l=r.getMousePosition(a),u=r.getDiffPosition(l[0]),c=r.getValueFromPosition(u);r.move(c)},r.onTouchMove=a=>{if(a.touches.length>1)return;r.setState({pending:!0});const l=r.getTouchPosition(a);if(r.isScrolling===void 0){const h=l[0]-r.startPosition[0],d=l[1]-r.startPosition[1];r.isScrolling=Math.abs(d)>Math.abs(h)}if(r.isScrolling)return void r.setState({index:-1});const u=r.getDiffPosition(l[0]),c=r.getValueFromPosition(u);r.move(c)},r.onKeyDown=a=>{if(!(a.ctrlKey||a.shiftKey||a.altKey||a.metaKey))switch(r.setState({pending:!0}),a.key){case"ArrowLeft":case"ArrowDown":case"Left":case"Down":a.preventDefault(),r.moveDownByStep();break;case"ArrowRight":case"ArrowUp":case"Right":case"Up":a.preventDefault(),r.moveUpByStep();break;case"Home":a.preventDefault(),r.move(r.props.min);break;case"End":a.preventDefault(),r.move(r.props.max);break;case"PageDown":a.preventDefault(),r.moveDownByStep(r.props.pageFn(r.props.step));break;case"PageUp":a.preventDefault(),r.moveUpByStep(r.props.pageFn(r.props.step))}},r.onSliderMouseDown=a=>{if(!r.props.disabled&&a.button!==2){if(r.setState({pending:!0}),!r.props.snapDragDisabled){const l=r.getMousePosition(a);r.forceValueFromPosition(l[0],u=>{r.start(u,l[0]),ul(r.getMouseEventMap())})}Yh(a)}},r.onSliderClick=a=>{if(!r.props.disabled&&r.props.onSliderClick&&!r.hasMoved){const l=r.getMousePosition(a),u=Wi(r.calcValue(r.calcOffsetFromPosition(l[0])),r.props);r.props.onSliderClick(u)}},r.createOnKeyDown=a=>l=>{r.props.disabled||(r.start(a),ul(r.getKeyDownEventMap()),Yh(l))},r.createOnMouseDown=a=>l=>{if(r.props.disabled||l.button===2)return;r.setState({pending:!0});const u=r.getMousePosition(l);r.start(a,u[0]),ul(r.getMouseEventMap()),Yh(l)},r.createOnTouchStart=a=>l=>{if(r.props.disabled||l.touches.length>1)return;r.setState({pending:!0});const u=r.getTouchPosition(l);r.startPosition=u,r.isScrolling=void 0,r.start(a,u[0]),ul(r.getTouchEventMap()),function(c){c.stopPropagation&&c.stopPropagation()}(l)},r.handleResize=()=>{const a=window.setTimeout(()=>{r.pendingResizeTimeouts.shift(),r.resize()},0);r.pendingResizeTimeouts.push(a)},r.renderThumb=(a,l)=>{const u=r.props.thumbClassName+" "+r.props.thumbClassName+"-"+l+" "+(r.state.index===l?r.props.thumbActiveClassName:""),c={ref:d=>{r["thumb"+l]=d},key:r.props.thumbClassName+"-"+l,className:u,style:a,onMouseDown:r.createOnMouseDown(l),onTouchStart:r.createOnTouchStart(l),onFocus:r.createOnKeyDown(l),tabIndex:0,role:"slider","aria-orientation":r.props.orientation,"aria-valuenow":r.state.value[l],"aria-valuemin":r.props.min,"aria-valuemax":r.props.max,"aria-label":Array.isArray(r.props.ariaLabel)?r.props.ariaLabel[l]:r.props.ariaLabel,"aria-labelledby":Array.isArray(r.props.ariaLabelledby)?r.props.ariaLabelledby[l]:r.props.ariaLabelledby},h={index:l,value:ll(r.state.value),valueNow:r.state.value[l]};return r.props.ariaValuetext&&(c["aria-valuetext"]=typeof r.props.ariaValuetext=="string"?r.props.ariaValuetext:r.props.ariaValuetext(h)),r.props.renderThumb(c,h)},r.renderTrack=(a,l,u)=>{const c={key:r.props.trackClassName+"-"+a,className:r.props.trackClassName+" "+r.props.trackClassName+"-"+a,style:r.buildTrackStyle(l,r.state.upperBound-u)},h={index:a,value:ll(r.state.value)};return r.props.renderTrack(c,h)};let s=qh(i.value);s.length||(s=qh(i.defaultValue)),r.pendingResizeTimeouts=[];const o=[];for(let a=0;a<s.length;a+=1)s[a]=Wi(s[a],i),o.push(a);return r.resizeObserver=null,r.resizeElementRef=j.createRef(),r.state={index:-1,upperBound:0,sliderLength:0,value:s,zIndices:o},r}c8(e,t);var n=e.prototype;return n.componentDidMount=function(){typeof window<"u"&&(this.resizeObserver=new ResizeObserver(this.handleResize),this.resizeObserver.observe(this.resizeElementRef.current),this.resize())},e.getDerivedStateFromProps=function(i,r){const s=qh(i.value);return s.length?r.pending?null:{value:s.map(o=>Wi(o,i))}:null},n.componentDidUpdate=function(){this.state.upperBound===0&&this.resize()},n.componentWillUnmount=function(){this.clearPendingResizeTimeouts(),this.resizeObserver&&this.resizeObserver.disconnect()},n.onEnd=function(i){i&&function(r){Object.keys(r).forEach(s=>{typeof document<"u"&&document.removeEventListener(s,r[s],!1)})}(i),this.hasMoved&&this.fireChangeEvent("onAfterChange"),this.setState({pending:!1}),this.hasMoved=!1},n.getValue=function(){return ll(this.state.value)},n.getClosestIndex=function(i){let r=Number.MAX_VALUE,s=-1;const{value:o}=this.state,a=o.length;for(let l=0;l<a;l+=1){const u=this.calcOffset(o[l]),c=Math.abs(i-u);c<r&&(r=c,s=l)}return s},n.getMousePosition=function(i){return[i["page"+this.axisKey()],i["page"+this.orthogonalAxisKey()]]},n.getTouchPosition=function(i){const r=i.touches[0];return[r["page"+this.axisKey()],r["page"+this.orthogonalAxisKey()]]},n.getKeyDownEventMap=function(){return{keydown:this.onKeyDown,keyup:this.onKeyUp,focusout:this.onBlur}},n.getMouseEventMap=function(){return{mousemove:this.onMouseMove,mouseup:this.onMouseUp}},n.getTouchEventMap=function(){return{touchmove:this.onTouchMove,touchend:this.onTouchEnd}},n.getValueFromPosition=function(i){const r=i/(this.state.sliderLength-this.state.thumbSize)*(this.props.max-this.props.min);return Wi(this.state.startValue+r,this.props)},n.getDiffPosition=function(i){let r=i-this.state.startPosition;return this.props.invert&&(r*=-1),r},n.resize=function(){const{slider:i,thumb0:r}=this;if(!i||!r)return;const s=this.sizeKey(),o=i.getBoundingClientRect(),a=i[s],l=o[this.posMaxKey()],u=o[this.posMinKey()],c=r.getBoundingClientRect()[s.replace("client","").toLowerCase()],h=a-c,d=Math.abs(l-u);this.state.upperBound===h&&this.state.sliderLength===d&&this.state.thumbSize===c||this.setState({upperBound:h,sliderLength:d,thumbSize:c})},n.calcOffset=function(i){const r=this.props.max-this.props.min;return r===0?0:(i-this.props.min)/r*this.state.upperBound},n.calcValue=function(i){return i/this.state.upperBound*(this.props.max-this.props.min)+this.props.min},n.calcOffsetFromPosition=function(i){const{slider:r}=this,s=r.getBoundingClientRect(),o=s[this.posMaxKey()],a=s[this.posMinKey()];let l=i-(window["page"+this.axisKey()+"Offset"]+(this.props.invert?o:a));return this.props.invert&&(l=this.state.sliderLength-l),l-=this.state.thumbSize/2,l},n.forceValueFromPosition=function(i,r){const s=this.calcOffsetFromPosition(i),o=this.getClosestIndex(s),a=Wi(this.calcValue(s),this.props),l=this.state.value.slice();l[o]=a;for(let u=0;u<l.length-1;u+=1)if(l[u+1]-l[u]<this.props.minDistance)return;this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0,this.setState({value:l},()=>{r(o),this.fireChangeEvent("onChange")})},n.clearPendingResizeTimeouts=function(){do{const i=this.pendingResizeTimeouts.shift();clearTimeout(i)}while(this.pendingResizeTimeouts.length)},n.start=function(i,r){const s=this["thumb"+i];s&&s.focus();const{zIndices:o}=this.state;o.splice(o.indexOf(i),1),o.push(i),this.setState(a=>({startValue:a.value[i],startPosition:r!==void 0?r:a.startPosition,index:i,zIndices:o}))},n.moveUpByStep=function(i){i===void 0&&(i=this.props.step);const r=Wi(this.state.value[this.state.index]+i,this.props);this.move(Math.min(r,this.props.max))},n.moveDownByStep=function(i){i===void 0&&(i=this.props.step);const r=Wi(this.state.value[this.state.index]-i,this.props);this.move(Math.max(r,this.props.min))},n.move=function(i){const{index:r,value:s}=this.state,{length:o}=s,a=s[r];if(i===a)return;this.hasMoved||this.fireChangeEvent("onBeforeChange"),this.hasMoved=!0;const{pearling:l,max:u,min:c,minDistance:h}=this.props;if(!l){if(r>0){const d=s[r-1];i<d+h&&(i=d+h)}if(r<o-1){const d=s[r+1];i>d-h&&(i=d-h)}}s[r]=i,l&&o>1&&(i>a?(this.pushSucceeding(s,h,r),function(d,f,p,g){for(let v=0;v<d;v+=1){const m=g-v*p;f[d-1-v]>m&&(f[d-1-v]=m)}}(o,s,h,u)):i<a&&(this.pushPreceding(s,h,r),function(d,f,p,g){for(let v=0;v<d;v+=1){const m=g+v*p;f[v]<m&&(f[v]=m)}}(o,s,h,c))),this.setState({value:s},this.fireChangeEvent.bind(this,"onChange"))},n.pushSucceeding=function(i,r,s){let o,a;for(o=s,a=i[o]+r;i[o+1]!==null&&a>i[o+1];o+=1,a=i[o]+r)i[o+1]=cp(a,this.props)},n.pushPreceding=function(i,r,s){for(let o=s,a=i[o]-r;i[o-1]!==null&&a<i[o-1];o-=1,a=i[o]-r)i[o-1]=cp(a,this.props)},n.axisKey=function(){return this.props.orientation==="vertical"?"Y":"X"},n.orthogonalAxisKey=function(){return this.props.orientation==="vertical"?"X":"Y"},n.posMinKey=function(){return this.props.orientation==="vertical"?this.props.invert?"bottom":"top":this.props.invert?"right":"left"},n.posMaxKey=function(){return this.props.orientation==="vertical"?this.props.invert?"top":"bottom":this.props.invert?"left":"right"},n.sizeKey=function(){return this.props.orientation==="vertical"?"clientHeight":"clientWidth"},n.fireChangeEvent=function(i){this.props[i]&&this.props[i](ll(this.state.value),this.state.index)},n.buildThumbStyle=function(i,r){const s={position:"absolute",touchAction:"none",willChange:this.state.index>=0?this.posMinKey():void 0,zIndex:this.state.zIndices.indexOf(r)+1};return s[this.posMinKey()]=i+"px",s},n.buildTrackStyle=function(i,r){const s={position:"absolute",willChange:this.state.index>=0?this.posMinKey()+","+this.posMaxKey():void 0};return s[this.posMinKey()]=i,s[this.posMaxKey()]=r,s},n.buildMarkStyle=function(i){var r;return(r={position:"absolute"})[this.posMinKey()]=i,r},n.renderThumbs=function(i){const{length:r}=i,s=[];for(let a=0;a<r;a+=1)s[a]=this.buildThumbStyle(i[a],a);const o=[];for(let a=0;a<r;a+=1)o[a]=this.renderThumb(s[a],a);return o},n.renderTracks=function(i){const r=[],s=i.length-1;r.push(this.renderTrack(0,0,i[0]));for(let o=0;o<s;o+=1)r.push(this.renderTrack(o+1,i[o],i[o+1]));return r.push(this.renderTrack(s+1,i[s],this.state.upperBound)),r},n.renderMarks=function(){let{marks:i}=this.props;const r=this.props.max-this.props.min+1;return typeof i=="boolean"?i=Array.from({length:r}).map((s,o)=>o):typeof i=="number"&&(i=Array.from({length:r}).map((s,o)=>o).filter(s=>s%i==0)),i.map(parseFloat).sort((s,o)=>s-o).map(s=>{const o=this.calcOffset(s),a={key:s,className:this.props.markClassName,style:this.buildMarkStyle(o)};return this.props.renderMark(a)})},n.render=function(){const i=[],{value:r}=this.state,s=r.length;for(let u=0;u<s;u+=1)i[u]=this.calcOffset(r[u],u);const o=this.props.withTracks?this.renderTracks(i):null,a=this.renderThumbs(i),l=this.props.marks?this.renderMarks():null;return j.createElement("div",{ref:u=>{this.slider=u,this.resizeElementRef.current=u},style:{position:"relative"},className:this.props.className+(this.props.disabled?" disabled":""),onMouseDown:this.onSliderMouseDown,onClick:this.onSliderClick},o,a,l)},e}(j.Component);hp.displayName="ReactSlider",hp.defaultProps={min:0,max:100,step:1,pageFn:t=>10*t,minDistance:0,defaultValue:0,orientation:"horizontal",className:"slider",thumbClassName:"thumb",thumbActiveClassName:"active",trackClassName:"track",markClassName:"mark",withTracks:!0,pearling:!1,disabled:!1,snapDragDisabled:!1,invert:!1,marks:[],renderThumb:t=>j.createElement("div",t),renderTrack:t=>j.createElement("div",t),renderMark:t=>j.createElement("span",t)};var cl=hp;function h8({graphEvents$:t}){const[e,n]=A.useState(50),[i,r]=A.useState(50),[s,o]=A.useState(50),[a,l]=A.useState(50),[u,c]=A.useState({});A.useEffect(()=>{},[u]);const h=v=>{n(v),g()},d=v=>{r(v),g()},f=v=>{o(v),g()},p=v=>{l(v),g()},g=()=>{t.next({event:"forcesUpdated",data:{forces:{f1:e,f2:i,f3:s,f4:a}}})};return q("div",{children:[I("div",{className:"slider",children:I(cl,{min:0,max:100,className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",onChange:h,renderThumb:(v,m)=>I("div",{...v,children:m.valueNow})})}),I("div",{className:"slider",children:I(cl,{min:0,max:50,defaultValue:[25],className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",onChange:d,renderThumb:(v,m)=>I("div",{...v,children:m.valueNow})})}),I("div",{className:"slider",children:I(cl,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",onChange:f,renderThumb:(v,m)=>I("div",{...v,children:m.valueNow})})}),I("div",{className:"slider",children:I(cl,{className:"horizontal-slider",thumbClassName:"thumb",trackClassName:"track",onChange:p,renderThumb:(v,m)=>I("div",{...v,children:m.valueNow})})})]})}function _E({children:t,name:e,startOpen:n}){const[i,r]=A.useState(n),s=o=>{r(!i)};return i?q("div",{className:"accordion open",children:[q("button",{className:"accordion-button",onClick:s,children:[e,I(_b,{})]}),I("div",{className:"container",children:t})]}):I("div",{className:"accordion closed",children:q("button",{className:"accordion-button",onClick:s,children:[e,I(xb,{})]})})}function d8(t,e){const n=et(t,i=>i.id);return Un(e,i=>!km(n,i.value))}function wE({providedStats:t,providedStatsChanged:e,options:n,name:i}){const r=(l,u)=>{const c=Wt(t);c[u].id=l.value,e(c)},s=(l,u)=>{const c=Wt(t);c[u].modifier=parseInt(l.target.value,10),e(c)},o=(l,u)=>{let c=Wt(t);c=Un(c,(h,d)=>u!==d),e(c)},a=()=>{let l=Wt(t);l.push({id:"",modifier:1}),e(l)};return q("div",{className:"stats",children:[q("div",{className:"stats-title",children:[i,"s:"]}),t!=null&&t.length?et(t,(l,u)=>q("div",{className:"stat-edit-line",children:[I("button",{onClick:c=>o(c,u),children:I(Eb,{})}),I(hg,{classNames:{control:()=>"select",singleValue:()=>"single-value",menu:()=>"select-menu"},options:d8(t,n),onChange:c=>r(c,u),value:Fe(n,{value:l.id})}),I("input",{type:"number",value:l==null?void 0:l.modifier,onChange:c=>s(c,u)})]})):"",I("div",{className:"add-button",children:q("button",{onClick:a,children:["Add ",i,I(fa,{})]})})]})}const bE=t=>et(t,e=>({value:e.id,label:e.name}));function f8(t,e){const n=Fe(e,{id:t});return n!=null&&n.params?et(Object.keys(n.params),i=>({label:i,value:i})):[]}function Xy(t,e){return Fe(bE(e),{value:t})}function p8(t,e){const n=et(t,i=>i.id);return Iu(Un(bE(e),i=>!km(n,i.value)),"label")}function m8(t){let e={};return kt(t,n=>{e[n.id]=n.modifier}),e}function g8({allAbilities:t,providedAbilities:e,providedAbilitiesChanged:n}){const[i,r]=A.useState(e),[s,o]=A.useState(t);A.useEffect(()=>{o(t)},[t]);const a=(d,f)=>{const p=Wt(i);p[f].id=d.value,p[f].modifiers=[],n(p)},l=(d,f)=>{let p=Wt(i);p=Un(p,(g,v)=>f!==v),n(p)},u=()=>{let d=Wt(i);d.push({id:"",modifier:1}),n(d)},c=(d,f)=>{const p=Wt(i);p[f].modifiers=d,n(p)},h=(d,f)=>{const p=Wt(i);p[f].gain=!p[f].gain,n(p)};return A.useEffect(()=>{r(()=>e)},[e]),q("div",{className:"abilities-panel",children:[I("div",{className:"abilities-title",children:"Abilities:"}),i.length?et(i,(d,f)=>{var p;return q("div",{className:"stat-edit-line",children:[q("div",{className:"ability-select",children:[I("button",{onClick:g=>l(g,f),children:I(Eb,{})}),I(hg,{classNames:{control:()=>"select",singleValue:()=>"single-value",menu:()=>"select-menu"},options:p8(i,s),onChange:g=>a(g,f),defaultValue:Xy(d.id,s),value:Xy(d.id,s)})]}),d.id?q("div",{className:"ability-options",children:[I(_E,{name:"...",startOpen:!1,children:I(Fc,{ability:Fe(t,{id:d==null?void 0:d.id}),modifiers:m8(d.modifiers),isPlayerAbility:!1})}),I("div",{className:"grant",children:q("label",{children:["Grant",I("input",{type:"checkbox",checked:d.gain,onChange:g=>h(g,f)})]})}),(p=Fe(Qn,{id:d==null?void 0:d.id}))!=null&&p.params?I(wE,{providedStats:d.modifiers,providedStatsChanged:g=>c(g,f),options:f8(d.id,t),name:"Modifier"}):""]}):""]})}):"",I("div",{className:"add-button",children:q("button",{onClick:u,children:["Add Ability",I(fa,{})]})})]})}function Yy(t,e,n){if(e){if(t!=null&&t.length)return t;{const i=[];return da(e,()=>i.push(t||n||1)),i}}else return[n||1]}function Kh(t,e,n){n({levels:t,levelCost:e})}function v8({levels:t,levelCost:e,cost:n,color:i,levelsChanged:r}){const[s,o]=A.useState(t||1),[a,l]=A.useState(Yy(e,t||1,n||1));A.useEffect(()=>{o(t||1),l(Yy(e,t,n))},[t,e,n]);const u=d=>{let f=s+1,p=a;p.length&&(p=[...p,1]),Kh(f,p,r)},c=d=>{let f=t,p=e;t>1&&(f=t-1,p.length&&(p=p.slice(0,p.length-1))),Kh(f,p,r)},h=(d,f)=>{let p=Wt(a);d.deltaY<0?p[f]+=1:a[f]>1&&(p[f]-=1),Kh(s,p,r)};return q("div",{className:"cost-panel",children:[I("button",{onClick:c,children:I(g5,{})}),da(s,d=>I("span",{onWheel:f=>h(f,d),className:"level-points",style:{background:i},children:a.length?a[d]:a})),I("button",{onClick:u,children:I(fa,{})})]})}const y8=[{value:"hp",label:"HP"},{value:"armor",label:"Armor"},{value:"movement",label:"Movement"}];function x8({node:t,graphEvents:e,abilities:n}){var M;const[i,r]=A.useState(t.id),[s,o]=A.useState(t.name),[a,l]=A.useState(t.description),[u,c]=A.useState(t.levels),[h,d]=A.useState(t.levelCost),[f,p]=A.useState(t.cost),[g,v]=A.useState(t.levelsRequired||0),[m,y]=A.useState(t.providedStats||[]),[x,_]=A.useState(t.providedAbilities||[]),[b,T]=A.useState(n);A.useEffect(()=>{T(n)},[n]);let E=(M=t==null?void 0:t.colors)==null?void 0:M.selected;const S=B=>{r(B.target.value)},k=B=>{o(B.target.value)},O=B=>{l(B.target.value)},F=B=>{v(B.target.value)},N=B=>{e.next({event:"nodeAdded",data:{node:{requires:t.id,id:Math.floor(Math.random()*200).toString()}}})},C=B=>{e.next({event:"nodeDeleted",data:{id:i}})},w=B=>{const P={id:i,name:s,description:a};u===1?h!=null&&h.length?P.cost=h[0]:P.cost=1:(P.levels=u,P.levelCost=h),g>1&&(P.levelsRequired=g),m.length&&(P.providedStats=m),x.length&&(P.providedAbilities=x),e.next({event:"nodeEdited",data:{id:t.id,node:P}})},R=B=>{y(B)},z=B=>{_(B)},D=B=>{d(B.levelCost),c(B.levels)};return j.useEffect(()=>{var B;E=(B=t==null?void 0:t.colors)==null?void 0:B.selected,r(t.id),o(t.name),l(t.description),c(t.levels||1),d(t.levelCost),p(t.cost),v(t.levelsRequired||1),y(t.providedStats||[]),_(t.providedAbilities||[])},[t]),t?q("div",{className:"edit-panel",children:[I(v8,{levels:u,levelCost:h,cost:f,color:E,levelsChanged:D}),I("div",{className:"form-control name",children:I("input",{type:"text",onChange:k,value:s||""})}),I("div",{className:"form-control id",children:I("input",{type:"text",onChange:S,value:i||""})}),I("div",{className:"divider",style:{backgroundColor:E}}),q("div",{className:"requires",children:["Requires"," ",q("span",{className:"skill",children:[t.requiredName," ",I("input",{min:1,type:"number",value:g,onChange:F})]})]}),I("div",{className:"form-control description",children:I("textarea",{rows:4,onChange:O,value:a||""})}),I(wE,{providedStats:m,providedStatsChanged:R,options:y8,name:"Stat"}),I(g8,{allAbilities:b,providedAbilities:x,providedAbilitiesChanged:z}),q("div",{className:"buttons",children:[q("button",{className:"green",onClick:w,children:[I(bb,{}),"Save Node"]}),q("button",{onClick:C,className:"red",children:[I(I5,{}),"Delete Node"]}),q("button",{onClick:N,children:[I(fa,{}),"Add Child Node"]})]})]}):I("div",{className:"edit-panel",children:"Select a Node"})}function _8({build:t,selectedNode:e,graphEvents$:n,abilities:i}){const[r,s]=A.useState(i),[o,a]=A.useState("info"),l=c=>{switch(a(c),c){case"info":n.next({event:"modeChanged",data:{mode:"build"}});break;case"settings":n.next({event:"modeChanged",data:{mode:"build"}});break;case"edit":n.next({event:"modeChanged",data:{mode:"edit"}});break}};return A.useEffect(()=>{s(i)},[i]),q(u8,{itemSelected:l,expanded:c=>{},children:[o==="info"?I(l8,{node:e,build:t}):"",o==="settings"?I(h8,{graphEvents$:n}):"",o==="edit"?I(x8,{node:e,graphEvents:n,abilities:r}):""]})}function hl({label:t,value:e}){return q("div",{className:"stat-line",children:[q("span",{className:"label",children:[t,": "]}),I("span",{className:"value",children:e})]})}function w8({tags:t,selectedTagsChanged:e}){const[n,i]=A.useState([]),r=s=>{n.includes(s)?i(n.filter(o=>o!==s)):i([...n,s])};return A.useEffect(()=>{e(n)},[n]),t?I("div",{className:"tag-filters",children:t.map(s=>I(np,{label:s,clicked:r,selected:km(n,s)},s))}):I("div",{})}function qy(t){return pN(Un(t.abilities,e=>!e.replaced&&e.learned),"type")}function b8({dragon:t}){const[e,n]=A.useState({}),[i,r]=A.useState({});A.useEffect(()=>{const o=qy(t);let a={};kt(Object.keys(o),l=>{let u=[];kt(o[l],c=>{c.tags&&(u=zN([...u,...c.tags]))}),a[l]=Iu(u)}),n(o),r(a)},[t]);const s=(o,a)=>{let l=qy(t);o.length&&(l[a]=Un(l[a],u=>u.tags&&SN(u.tags,o).length)),n(l)};return q("div",{className:"character-sheet",children:[q("div",{className:"stats",children:[I("div",{className:"title",children:"Stats"}),I(hl,{label:" Skill Points Spent",value:t.pointsInvested}),I(hl,{label:"Armor",value:t.armor}),I(hl,{label:"HP",value:t.hp}),I(hl,{label:"Movement",value:t.movement})]}),q("div",{className:"abilities",children:[I("div",{className:"title",children:"Abilities"}),e&&Iu(Object.keys(e)).map(o=>q(_E,{startOpen:!1,name:o,children:[i[o].length?I("div",{className:"filter-panel",children:I(w8,{tags:i[o],selectedTagsChanged:a=>s(a,o)})}):"",I("div",{className:"ability-cards",children:e[o].map(a=>I(Fc,{ability:a,isPlayerAbility:!0,modifiers:a.modifiers}))})]}))]})]})}function E8({dragon:t,importAttempted:e}){const[n,i]=A.useState(""),[r,s]=A.useState({opacity:0});return q("div",{className:"code-panel",children:[q("div",{className:"import",children:[I("textarea",{spellCheck:!1,rows:8,onChange:u=>{i(u.target.value)},placeholder:"Paste exported build here"}),q("button",{className:"attached",onClick:u=>{e(n)},children:["Import Build ",I(n5,{})]})]}),q("div",{className:"export",children:[q("button",{onClick:u=>{navigator.clipboard.writeText(JSON.stringify(t.exportableBuild)),s({opacity:1}),setTimeout(()=>{s({opacity:0})},2e3)},children:["Copy Current Build ",I(J4,{})]}),I("div",{style:r,children:"Text Copied to Clipboard"})]})]})}function Ky({itemSelected:t}){return q("div",{className:"right-menu",children:[I("button",{type:"button",onClick:s=>t(s,"sheet"),children:I(D4,{})}),I("button",{type:"button",onClick:s=>t(s,"code"),children:I(K4,{})}),I("button",{type:"button",onClick:s=>t(s,"list"),children:I(f5,{})}),I("button",{type:"button",onClick:s=>t(s,"help"),children:I(a5,{})})]})}function S8({children:t,itemSelected:e,title:n}){const[i,r]=A.useState(!1),[s,o]=A.useState(!1),[a,l]=A.useState(null);let u;const c=(d,f)=>{(f===a||!i)&&r(!i),l(f),e(f)},h=d=>{o(!s)};return u=s?I(X4,{}):I(G4,{}),i?q("div",{className:"sidebar-right expanded",children:[q("div",{className:s?"sidebar-right-panel full":"sidebar-right-panel partial",children:[q("div",{onClick:h,className:"sidebar-right-panel-heading",children:[I("button",{className:"expander",children:u}),n]}),I("div",{className:"sidebar-right-panel-content",children:t})]}),I(Ky,{itemSelected:c})]}):I("div",{className:"sidebar-right",children:I(Ky,{itemSelected:c})})}function T8({abilities:t,abilitiesChanged:e}){const[n,i]=A.useState(Iu(t,"name)")),r=o=>{let a=et(n,l=>l.id===o.id?o.ability:l);i(a),e(a)},s=()=>{i([...n,{name:"Name",id:"id",description:"...",tags:[],type:"action"}])};return A.useEffect(()=>{i(MN(t,"name"))},[t]),I("div",{className:"ability-editor",children:q("div",{className:"ability-cards",children:[n.map(o=>I("div",{className:"card-wrapper",children:I(Fc,{ability:o,isPlayerAbility:!0,modifiers:o.modifiers,startOpen:!1,editable:!0,abilityEdited:r})})),I("div",{className:"card-wrapper new-button",children:q("button",{onClick:s,children:[I(fa,{})," New Ability"]})})]})})}function C8({build:t,importAttempted:e,abilities:n,abilitiesChanged:i}){const[r,s]=A.useState("info"),[o,a]=A.useState("info");return q(S8,{itemSelected:h=>{switch(s(h),h){case"sheet":a("Character Sheet");break;case"code":a("Import/Export");break;case"help":a("Help");break;case"list":a("Edit Abilities");break}},title:o,children:[r==="sheet"?I(b8,{dragon:t}):"",r==="code"?I(E8,{dragon:t,importAttempted:h=>{}}):"",r==="list"?I(T8,{abilities:n,abilitiesChanged:h=>{i(h)}}):"",r==="help"?I("div",{}):""]})}function A8(){const t=localStorage.getItem("dragon-build");let e;if(t)try{e=JSON.parse(t)}catch(n){console.log(n)}return e||{}}function P8(){const t=localStorage.getItem("dragon-nodes");let e;if(t)try{e=JSON.parse(t)}catch(n){console.log(n)}return e||{}}const Zh=new Ru;function I8(t){localStorage.setItem("dragon-build",JSON.stringify(t))}function M8(t){localStorage.setItem("dragon-nodes",JSON.stringify(t))}function O8(){const[t,e]=A.useState({armor:0,hp:0}),[n,i]=A.useState({}),[r,s]=A.useState(()=>P8()),[o,a]=A.useState(Qn),[l,u]=A.useState(()=>A8());A.useEffect(()=>{I8(t.exportableBuild)},[t]),A.useEffect(()=>{M8(r)},[r]),A.useEffect(()=>{Zh.subscribe({next:f=>{f.event==="nodesChanged"&&s(f.data.nodes)}})},[]);const c=f=>{const p=Un(f.nodes,g=>g.selected||g.acquired);e(g=>g4(p))},h=f=>{u(JSON.parse(f))},d=f=>{i(f.node)};return q("div",{className:"App",children:[q("div",{className:"appLeft",children:[I(_8,{abilities:o,build:t,selectedNode:n,graphEvents$:Zh}),I(C4,{pointsSpent:t.pointsInvested})]}),I("div",{className:"appRight",children:I(C8,{abilities:Qn,build:t,importAttempted:h,abilitiesChanged:f=>a(f)})}),I("div",{className:"skill-panel",children:I(m4,{trees:T4,buildData:l,nodeSelectionUpdated:c,infoUpdated:d,graphEvents:Zh})})]})}Qh.createRoot(document.getElementById("root")).render(I(O8,{}))});export default R8();
